import{S as c}from"./Skeleton-BEzu_4lT.js";import{c as r,b as t,a as d,n as h,k as u,g,T as m,t as i,r as _,o,d as p}from"./app-BqBcK2Me.js";import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShineEffect-DJP6tw7V.js";const y={inject:["authState"],components:{Skeleton:c},data(){return{countdown:5,errorMessage:null,isLoadingLogo:!0,countdownInterval:null,error:this.$route.query.error,token:this.$route.query.token,logoUrl:this.$route.query.logo_url,storeId:this.$route.query.store_id,provider:this.$route.query.provider,errorDescription:this.$route.query.error_description}},computed:{borderColor(){return this.errorMessage?"#e02523":"#00a63d"}},methods:{onLogoLoaded(){this.isLoadingLogo=!1},startRedirectCountdown(){this.countdownInterval=setInterval(()=>{this.countdown>0?this.countdown-=1:(clearInterval(this.countdownInterval),this.$router.replace({name:"login"}))},1e3)},async completeSocialLogin(){this.authState.setTokenOnRequest(this.token),this.authState.setTokenOnLocalStorage(this.token),await this.authState.fetchUser(),this.storeId?this.$router.push({name:"show-store-home",params:{store_id:this.storeId}}):this.$router.push({name:"show-stores"})}},created(){this.errorDescription||this.error?(this.errorMessage=this.errorDescription||this.error,this.startRedirectCountdown()):this.completeSocialLogin()}},w={class:"flex flex-col justify-center items-center w-full bg-gradient-to-b from-blue-100 to-white-100 min-h-screen overflow-x-hidden"},L={class:"flex flex-col justify-center items-center"},k={class:"relative inline-flex items-center justify-center w-28 h-28"},x=["src"],v=["src"],S={key:0,class:"mt-8"},b={class:"font-medium text-red-500 text-sm mb-4"},I={class:"text-gray-400 text-sm text-center"},q={key:1,class:"text-gray-400 text-center mt-8"};function C(M,n,R,j,e,s){const a=_("Skeleton");return o(),r("div",w,[t("div",L,[t("div",k,[t("div",{class:u(["absolute inset-0 animate-spin rounded-full border-4 border-gray-300"]),style:h("border-top-color:"+s.borderColor+";")},null,4),d(m,{name:"fade-1",mode:"out-in"},{default:g(()=>[e.isLoadingLogo?(o(),p(a,{key:0,width:"w-20",height:"h-20",color:"bg-gray-200",class:"border border-gray-300"})):(o(),r("img",{key:1,src:e.logoUrl,alt:"Social Logo",class:"w-20 h-20 relative"},null,8,x))]),_:1})]),t("img",{src:e.logoUrl,onLoad:n[0]||(n[0]=(...l)=>s.onLogoLoaded&&s.onLogoLoaded(...l)),class:"hidden"},null,40,v),e.errorMessage?(o(),r("div",S,[t("p",b,i(e.errorMessage),1),t("p",I,i(e.countdown==0?"Redirecting...":`${"Redirecting in "+e.countdown}`),1)])):(o(),r("p",q,"Logging In"))])])}const $=f(y,[["render",C]]);export{$ as default};
