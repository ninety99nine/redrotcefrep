import{i as W}from"./index-ZeDnS8SV.js";import{P as Z}from"./Pill-CuSw6nga.js";import{A as de}from"./Alert-BUNzszoC.js";import{I as J,E as K}from"./Input-DBnU4wzW.js";import{M as $}from"./Modal-OgCr3eB2.js";import{H as B,s as ue,c as g,b as l,a as n,e as i,w as q,g as F,k as D,d,u as ee,r as f,o as s,F as L,f as z,t as x,i as U,I as ce}from"./app-CGNgl8eN.js";import{B as te}from"./Button-B134edVj.js";import{L as me}from"./Loader-DZWJgCmt.js";import{S as pe}from"./Switch-Ce3EJdoe.js";import{S as re}from"./Select-BriLwhlS.js";import{P as ge}from"./Popover-BZ2E_DR-.js";import{i as he}from"./stringUtils-Bvzw0-oW.js";import{D as fe}from"./Dropdown-C_bLQQlo.js";import{S as ye}from"./Skeleton-Dmr_VmHU.js";import{S as ve}from"./SelectTags-BpCz9LPe.js";import{V as oe}from"./vue-draggable-next.esm-bundler-BhuNrD5X.js";import{B as be}from"./BackdropLoader-CEmmGK2o.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as _e,H as Se,T as Fe,a as we,L as ke}from"./tally-2-D-NiptkV.js";import{C as Ve}from"./cloud-upload-CLet0zlb.js";import{C as xe}from"./calendar-NpN6Drv3.js";import{M as Te}from"./map-pin-C0sGBiuG.js";import{C as Ce}from"./clock-Dhh7_EQj.js";import{M as se}from"./move-DR2tcvbS.js";import{P as le}from"./plus-B1hMjDDg.js";import{c as ie}from"./createLucideIcon-BakIve7O.js";import{I as De}from"./image-D1UoBb86.js";import{L as Ue}from"./link-BtaUNhpq.js";import{C as G}from"./Copy-Bp4ENaQe.js";import{T as Y}from"./trash-2-Bff_GbSw.js";import{C as Le}from"./chevron-down-wPajd1_B.js";import{C as Pe}from"./chevron-up-DDBk_8YV.js";import{M as Ee}from"./move-left-CQva05e2.js";import{S as Ie}from"./share-2-D6S6pZXi.js";import{X as Me}from"./x-DHw5U7EU.js";import"./Tooltip-BCHxPPLL.js";import"./circle-check-Bkm_qb2i.js";import"./info-hHKMi5RL.js";import"./capitalize-ChUSrr1V.js";import"./refresh-ccw-DblrTBks.js";import"./circle-alert-uARVagVJ.js";import"./parsePhoneNumber-xMTQFMCS.js";import"./ShineEffect-D1V-RWKB.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=ie("arrow-down-up",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=ie("split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]),Oe={inject:["formState","storeState","productState"],components:{Move:se,List:ke,Clock:Ce,Tally1:we,Tally2:Fe,MapPin:Te,Hash:Se,Calendar:xe,CloudUpload:Ve,SquareCheck:_e,Pill:Z,Input:J,Modal:$,Button:te,Select:re,draggable:oe},data(){return{Plus:le,originalFields:[],deletableDataCollectionField:null,typeOptions:[{label:"Short answer",value:"short answer"},{label:"Long answer",value:"long answer"},{label:"Number",value:"number"},{label:"Date",value:"date"},{label:"Time",value:"time"},{label:"Checkbox",value:"checkbox"},{label:"Selection",value:"selection"},{label:"Location",value:"location"},{label:"Media",value:"media"}],validationOptions:[{label:"Not applicable",value:"not applicable"},{label:"Select at least",value:"select at least"},{label:"Select at most",value:"select at most"},{label:"Select between",value:"select between"}]}},computed:{store(){return this.storeState.store},productForm(){return this.productState.productForm},hasFields(){return this.productForm.data_collection_fields.length>0},hasOriginalFields(){return this.originalFields.length>0},hasCollapsedAll(){return this.productForm.data_collection_fields.every(a=>a.is_editable===!1)},hasExpandedAll(){return this.productForm.data_collection_fields.every(a=>a.is_editable===!0)},fieldsHaveChanged(){var a=B(this.productForm.data_collection_fields),t=B(this.originalFields);return a.forEach(u=>delete u.is_editable),t.forEach(u=>delete u.is_editable),!W(a,t)}},methods:{onAddField(){this.productForm.data_collection_fields.push({validation:"not applicable",temporary_id:ue(),type:"short answer",is_editable:!0,required:!1,description:"",options:[],title:"",min:"1",max:"2"}),this.productState.saveStateDebounced("Option added")},onRemoveField(a){const t=this.productForm.data_collection_fields.findIndex(u=>u.temporary_id==this.deletableDataCollectionField.temporary_id);this.productForm.data_collection_fields.splice(t,1),a(),this.productState.saveStateDebounced("Option removed")},onResetFields(){this.productForm.data_collection_fields=B(this.originalFields),this.productState.saveStateDebounced("Options restored")},onAddOption(a){this.productForm.data_collection_fields[a].options.push({title:`Option ${this.productForm.data_collection_fields[a].options.length+1}`,fee:"0.00"}),this.productState.saveStateDebounced("Sub option added")},onRemoveOption(a,t){this.productForm.data_collection_fields[a].options.splice(t,1),this.productState.saveStateDebounced("Sub option removed")},collapseAll(){this.productForm.data_collection_fields.forEach(a=>{a.is_editable=!1})},expandAll(){this.productForm.data_collection_fields.forEach(a=>{a.is_editable=!0})},showDeleteConfirmationModal(a){this.deletableDataCollectionField=a,this.$refs.confirmDeleteModal.showModal()},supportsOptions(a){return a.type=="checkbox"||a.type=="selection"},hasOptions(a){return this.productForm.data_collection_fields[a].options.length>0}}},ze={key:0,class:"flex justify-end items-center space-x-2 px-2"},Be=["onClick"],He={class:"absolute top-2 right-2 flex items-center space-x-2 opacity-20 group-hover:opacity-100"},je=["onClick"],Ne=["onClick"],Re={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},We={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},Qe=["onClick"],Xe={key:0,class:"space-y-4"},Ke={class:"flex items-center space-x-2"},Ge={class:"flex items-start justify-between space-x-8"},Ye={class:"w-full space-y-4"},Ze={class:"w-full flex items-center space-x-4"},Je={class:"flex items-center space-x-4"},$e=["onClick"],et={key:0,class:"flex items-end space-x-2"},tt={class:"relative"},rt={class:"absolute -bottom-12 left-1/2 transform -translate-x-1/2"},ot={key:0,class:"animate-bounce text-4xl"},at=["onClick"],st={class:"flex items-center space-x-2 text-sm text-gray-500"},lt={key:9},it={key:10,class:"font-medium text-red-500 text-xs ml-1"},nt={key:0,class:"text-sm text-gray-700"},dt={class:"flex justify-end space-x-2"},ut={key:0,class:"flex items-start space-x-2 border border-gray-300 rounded-lg p-2 mb-4"},ct={class:"text-sm"},mt={class:"mb-8"};function pt(a,t,u,m,o,e){const b=f("Move"),w=f("Clock"),_=f("List"),V=f("Hash"),T=f("Calendar"),k=f("MapPin"),y=f("CloudUpload"),P=f("SquareCheck"),E=f("Tally2"),H=f("Tally1"),A=f("Select"),I=f("Input"),N=f("draggable"),j=f("Button"),R=f("Pill"),Q=f("Modal");return s(),g("div",null,[l("div",{class:D(["space-y-4",{"mt-4":e.productForm.data_collection_fields.length<2}])},[e.productForm.data_collection_fields.length>=2?(s(),g("div",ze,[e.hasCollapsedAll?i("",!0):(s(),g("span",{key:0,class:"text-sm text-gray-500 underline hover:text-black cursor-pointer",onClick:t[0]||(t[0]=(...h)=>e.collapseAll&&e.collapseAll(...h))}," collapse all ")),e.hasExpandedAll?i("",!0):(s(),g("span",{key:1,class:"text-sm text-gray-500 underline hover:text-black cursor-pointer",onClick:t[1]||(t[1]=q((...h)=>e.expandAll&&e.expandAll(...h),["stop"]))}," expand all "))])):i("",!0),n(N,{class:"space-y-2",handle:".draggable-handle","ghost-class":"bg-yellow-50",modelValue:e.productForm.data_collection_fields,"onUpdate:modelValue":t[13]||(t[13]=h=>e.productForm.data_collection_fields=h)},{default:F(()=>[(s(!0),g(L,null,z(e.productForm.data_collection_fields,(h,p)=>(s(),g("div",{key:h.temporary_id,onClick:v=>e.productForm.data_collection_fields[p].is_editable?null:e.productForm.data_collection_fields[p].is_editable=!0,class:D(["w-full relative bg-gray-50 p-4 border border-gray-300 rounded-lg hover:bg-gray-100 group",{"cursor-pointer":!e.productForm.data_collection_fields[p].is_editable}])},[l("div",He,[e.productForm.data_collection_fields[p].is_editable?(s(),g("span",{key:0,class:"text-sm text-gray-500 underline hover:text-black cursor-pointer",onClick:q(v=>e.productForm.data_collection_fields[p].is_editable=!1,["stop"])}," collapse ",8,je)):(s(),g("svg",{key:1,class:"w-4 h-4 cursor-pointer hover:opacity-50",onClick:q(v=>e.productForm.data_collection_fields[p].is_editable=!0,["stop"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e.productForm.data_collection_fields[p].is_editable?(s(),g("path",Re)):(s(),g("path",We))],8,Ne)),(s(),g("svg",{onClick:q(v=>e.showDeleteConfirmationModal(h),["stop"]),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...t[14]||(t[14]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1)])],8,Qe)),n(b,{onClick:t[2]||(t[2]=q(()=>{},["stop"])),size:"16",class:"draggable-handle cursor-grab active:cursor-grabbing text-gray-500 hover:text-yellow-500"})]),e.productForm.data_collection_fields[p].is_editable?(s(),g("div",Xe,[l("div",Ke,[h.type=="time"?(s(),d(w,{key:0,size:"20"})):i("",!0),h.type=="selection"?(s(),d(_,{key:1,size:"20"})):i("",!0),h.type=="number"?(s(),d(V,{key:2,size:"20"})):i("",!0),h.type=="date"?(s(),d(T,{key:3,size:"20"})):i("",!0),h.type=="location"?(s(),d(k,{key:4,size:"20"})):i("",!0),h.type=="media"?(s(),d(y,{key:5,size:"20"})):i("",!0),h.type=="checkbox"?(s(),d(P,{key:6,size:"20"})):i("",!0),h.type=="long answer"?(s(),d(E,{key:7,size:"20",class:"rotate-90"})):i("",!0),h.type=="short answer"?(s(),d(H,{key:8,size:"20",class:"rotate-90"})):i("",!0),n(A,{class:"w-60",search:!1,options:o.typeOptions,modelValue:e.productForm.data_collection_fields[p].type,"onUpdate:modelValue":v=>e.productForm.data_collection_fields[p].type=v,onChange:t[3]||(t[3]=v=>e.productState.saveStateDebounced("Option type changed")),errorText:e.formState.getFormError("data_collection_fields"+p+"type")},null,8,["options","modelValue","onUpdate:modelValue","errorText"])]),l("div",Ge,[l("div",Ye,[n(I,{class:"w-full",placeholder:"Title",modelValue:e.productForm.data_collection_fields[p].title,"onUpdate:modelValue":v=>e.productForm.data_collection_fields[p].title=v,onInput:t[4]||(t[4]=v=>e.productState.saveStateDebounced("Option title changed")),errorText:e.formState.getFormError("data_collection_fields"+p+"title")},null,8,["modelValue","onUpdate:modelValue","errorText"]),n(I,{rows:"2",class:"w-full",type:"textarea",placeholder:"Short description (optional)",modelValue:e.productForm.data_collection_fields[p].description,"onUpdate:modelValue":v=>e.productForm.data_collection_fields[p].description=v,onInput:t[5]||(t[5]=v=>e.productState.saveStateDebounced("Option description changed")),errorText:e.formState.getFormError("data_collection_fields"+p+"description")},null,8,["modelValue","onUpdate:modelValue","errorText"])]),n(I,{type:"checkbox",inputLabel:"Required",modelValue:e.productForm.data_collection_fields[p].required,"onUpdate:modelValue":v=>e.productForm.data_collection_fields[p].required=v,onChange:t[6]||(t[6]=v=>e.productState.saveStateDebounced("Required status changed")),errorText:e.formState.getFormError("data_collection_fields"+p+"required")},null,8,["modelValue","onUpdate:modelValue","errorText"])]),e.supportsOptions(h)?(s(),d(N,{key:0,class:"space-y-0",handle:".draggable-handle-2","ghost-class":"bg-yellow-50",modelValue:e.productForm.data_collection_fields[p].options,"onUpdate:modelValue":v=>e.productForm.data_collection_fields[p].options=v},{default:F(()=>[(s(!0),g(L,null,z(e.productForm.data_collection_fields[p].options,(v,C)=>(s(),g("div",{key:C,class:"flex items-center justify-between space-x-4 rounded-lg py-2 px-2 hover:border-blue-200 hover:bg-gray-50 group"},[l("div",Ze,[n(I,{class:"w-full",placeholder:`Option ${C+1}`,onInput:t[7]||(t[7]=M=>e.productState.saveStateDebounced("Sub option name changed")),modelValue:e.productForm.data_collection_fields[p].options[C].name,"onUpdate:modelValue":M=>e.productForm.data_collection_fields[p].options[C].name=M,errorText:e.formState.getFormError("data_collection_fields"+p+"options"+C+"name")},null,8,["placeholder","modelValue","onUpdate:modelValue","errorText"]),n(I,{type:"money",currency:e.store.currency,modelValue:e.productForm.data_collection_fields[p].options[C].fee,"onUpdate:modelValue":M=>e.productForm.data_collection_fields[p].options[C].fee=M,onInput:t[8]||(t[8]=M=>e.productState.saveStateDebounced("Sub option amount changed")),errorText:e.formState.getFormError("data_collection_fields"+p+"options"+C+"fee")},null,8,["currency","modelValue","onUpdate:modelValue","errorText"])]),l("div",Je,[(s(),g("svg",{onClick:M=>e.onRemoveOption(p,C),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...t[15]||(t[15]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1)])],8,$e)),n(b,{onClick:t[9]||(t[9]=q(()=>{},["stop"])),size:"16",class:"draggable-handle-2 cursor-grab active:cursor-grabbing text-gray-500 hover:text-yellow-500"})])]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):i("",!0),e.supportsOptions(h)?(s(),g("div",{key:1,class:D(["flex",h.type=="checkbox"?"justify-between items-start":"justify-end"])},[h.type=="checkbox"?(s(),g("div",et,[n(A,{class:"w-60",search:!1,label:"Validation",options:o.validationOptions,modelValue:e.productForm.data_collection_fields[p].validation,"onUpdate:modelValue":v=>e.productForm.data_collection_fields[p].validation=v,onChange:t[10]||(t[10]=v=>e.productState.saveStateDebounced("Validation changed")),errorText:e.formState.getFormError("data_collection_fields"+p+"validation")},null,8,["options","modelValue","onUpdate:modelValue","errorText"]),e.productForm.data_collection_fields[p].validation=="select at least"||e.productForm.data_collection_fields[p].validation=="select between"?(s(),d(I,{key:0,min:"0",class:"w-24",type:"number",modelValue:e.productForm.data_collection_fields[p].min,"onUpdate:modelValue":v=>e.productForm.data_collection_fields[p].min=v,onChange:t[11]||(t[11]=v=>e.productState.saveStateDebounced("Validation changed")),errorText:e.formState.getFormError("data_collection_fields"+p+"min"),label:e.productForm.data_collection_fields[p].validation=="select at least"?null:"Min"},null,8,["modelValue","onUpdate:modelValue","errorText","label"])):i("",!0),e.productForm.data_collection_fields[p].validation=="select at most"||e.productForm.data_collection_fields[p].validation=="select between"?(s(),d(I,{key:1,min:"0",class:"w-24",type:"number",modelValue:e.productForm.data_collection_fields[p].max,"onUpdate:modelValue":v=>e.productForm.data_collection_fields[p].max=v,onChange:t[12]||(t[12]=v=>e.productState.saveStateDebounced("Validation changed")),errorText:e.formState.getFormError("data_collection_fields"+p+"max"),label:e.productForm.data_collection_fields[p].validation=="select at most"?null:"Max"},null,8,["modelValue","onUpdate:modelValue","errorText","label"])):i("",!0)])):i("",!0),l("div",tt,[l("div",rt,[e.hasOptions(p)?i("",!0):(s(),g("div",ot,"üëÜ"))]),n(j,{size:"xs",type:"primary",leftIcon:o.Plus,action:()=>e.onAddOption(p)},{default:F(()=>[...t[16]||(t[16]=[l("span",null,"Add Choice",-1)])]),_:1},8,["leftIcon","action"])])],2)):i("",!0)])):(s(),g("div",{key:1,class:"space-y-2",onClick:v=>e.productForm.data_collection_fields[p].is_editable=!0},[l("div",st,[h.type=="time"?(s(),d(w,{key:0,size:"20"})):i("",!0),h.type=="selection"?(s(),d(_,{key:1,size:"20"})):i("",!0),h.type=="number"?(s(),d(V,{key:2,size:"20"})):i("",!0),h.type=="date"?(s(),d(T,{key:3,size:"20"})):i("",!0),h.type=="location"?(s(),d(k,{key:4,size:"20"})):i("",!0),h.type=="media"?(s(),d(y,{key:5,size:"20"})):i("",!0),h.type=="checkbox"?(s(),d(P,{key:6,size:"20"})):i("",!0),h.type=="long answer"?(s(),d(E,{key:7,size:"20",class:"rotate-90"})):i("",!0),h.type=="short answer"?(s(),d(H,{key:8,size:"20",class:"rotate-90"})):i("",!0),h.title?(s(),g("span",lt,x(h.title),1)):(s(),g("span",it," No title ")),h.required?(s(),d(R,{key:11,type:"primary",size:"xs",showDot:!1},{default:F(()=>[...t[17]||(t[17]=[U("required",-1)])]),_:1})):i("",!0)])],8,at))],10,Be))),128))]),_:1},8,["modelValue"]),l("div",{class:D([{"flex space-x-2 justify-between":!e.hasFields}])},[e.hasFields?i("",!0):(s(),g("p",nt,"Add questions if your product must capture additional information from the customer")),l("div",dt,[e.fieldsHaveChanged&&e.hasOriginalFields?(s(),d(j,{key:0,size:"xs",type:"primary",action:e.onResetFields},{default:F(()=>[...t[18]||(t[18]=[l("span",null,"Undo",-1)])]),_:1},8,["action"])):i("",!0),n(j,{size:"xs",type:"light",leftIcon:o.Plus,action:e.onAddField},{default:F(()=>[...t[19]||(t[19]=[l("span",null,"Add Question",-1)])]),_:1},8,["leftIcon","action"])])],2)],2),n(Q,{approveType:"danger",approveText:"Delete",ref:"confirmDeleteModal",approveAction:h=>e.onRemoveField(h)},ee({_:2},[o.deletableDataCollectionField?{name:"content",fn:F(()=>[t[22]||(t[22]=l("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Confirm Delete",-1)),o.deletableDataCollectionField.title?(s(),g("div",ut,[o.deletableDataCollectionField.type=="time"?(s(),d(w,{key:0,size:"20"})):i("",!0),o.deletableDataCollectionField.type=="selection"?(s(),d(_,{key:1,size:"20"})):i("",!0),o.deletableDataCollectionField.type=="number"?(s(),d(V,{key:2,size:"20"})):i("",!0),o.deletableDataCollectionField.type=="date"?(s(),d(T,{key:3,size:"20"})):i("",!0),o.deletableDataCollectionField.type=="location"?(s(),d(k,{key:4,size:"20"})):i("",!0),o.deletableDataCollectionField.type=="media"?(s(),d(y,{key:5,size:"20"})):i("",!0),o.deletableDataCollectionField.type=="checkbox"?(s(),d(P,{key:6,size:"20"})):i("",!0),o.deletableDataCollectionField.type=="long answer"?(s(),d(E,{key:7,size:"20",class:"rotate-90"})):i("",!0),o.deletableDataCollectionField.type=="short answer"?(s(),d(H,{key:8,size:"20",class:"rotate-90"})):i("",!0),l("span",ct,x(o.deletableDataCollectionField.title),1)])):i("",!0),l("p",mt,[t[20]||(t[20]=U("Are you sure you want to delete this ",-1)),n(R,{type:"primary",size:"xs",showDot:!1},{default:F(()=>[U(x(o.deletableDataCollectionField.type),1)]),_:1}),t[21]||(t[21]=U(" field?",-1))])]),key:"0"}:void 0]),1032,["approveAction"])])}const gt=ae(Oe,[["render",pt]]),ht={inject:["formState","storeState","productState","changeHistoryState","notificationState"],components:{Link:Ue,Move:se,Image:De,Split:qe,Pill:Z,Alert:de,Input:J,Modal:$,Button:te,Loader:me,Switch:pe,Select:re,Popover:ge,Dropdown:fe,Skeleton:ye,SelectTags:ve,draggable:oe,BackdropLoader:be,DataCollectionFields:gt},data(){return{X:Me,Eye:K,Copy:G,Plus:le,Share2:Ie,Trash2:Y,MoveLeft:Ee,tags:[],ChevronUp:Pe,ArrowDownUp:Ae,ChevronDown:Le,categories:[],deliveryMethods:[],selectedVariants:[],deletableVariant:null,isDeletingVariantIds:[],variantsForArrangement:[],isLoadingDeliveryMethods:!1,hasLoadedInitialDeliveryMethods:!1,pricePerUnitTypes:[{label:"G",value:"g"},{label:"KG",value:"kg"},{label:"L",value:"l"},{label:"ML",value:"ml"},{label:"PSC",value:"psc"},{label:"PAX",value:"pax"},{label:"PERSON",value:"person"},{label:"ROOM",value:"room"},{label:"PACK",value:"pack"},{label:"QTY",value:"qty"},{label:"LBS",value:"lbs"},{label:"HOUR",value:"hour"},{label:"BOX",value:"box"}],productTypes:[{label:"Physical",value:"physical"},{label:"Digital",value:"digital"},{label:"Booking",value:"booking"},{label:"Subscription",value:"subscription"},{label:"Other",value:"other"}],visibilityTypes:[{label:"Visible",value:!0},{label:"Hidden",value:!1}],stockQuantityTypes:[{label:"Unlimited",value:"unlimited"},{label:"Limited",value:"limited"},{label:"Sold Out",value:"sold out"}],allowedQuantityPerOrder:[{label:"Unlimited",value:"unlimited"},{label:"Limited",value:"limited"}],actionOptions:[{label:"View",icon:K,action:this.navigateToShopProduct},{label:"Duplicate",icon:G,action:this.duplicateOrder},{label:"Delete",icon:Y,action:this.showConfirmDeleteProductModal}],shareOptions:[{label:"Whatsapp",icon:"whatsapp",action:this.shareViaWhatsapp},{label:"Facebook",icon:"facebook",action:this.shareViaFacebook},{label:"LinkedIn",icon:"linkedin",action:this.shareViaLinkedIn},{label:"X",icon:"x",action:this.shareViaX},{label:"Copy Link",action:this.copyLink}]}},watch:{store(a,t){!t&&a&&this.setup()},productId(a){a&&(this.setup(),this.setActionButtons())}},computed:{store(){return this.storeState.store},product(){return this.productState.product},hasProduct(){return this.productState.hasProduct},productId(){return this.$route.params.product_id},isLoadingStore(){return this.storeState.isLoadingStore},isLoadingProduct(){return this.productState.isLoadingProduct},isEditing(){return this.$route.name==="edit-product"},isCreating(){return this.$route.name==="create-product"},productForm(){return this.productState.productForm},isSubmitting(){return this.changeHistoryState.actionButtons.length==0?!1:this.changeHistoryState.actionButtons[1].loading},hasVariants(){return this.productState.hasVariants},isDeletingProduct(){return this.productState.isDeletingProduct},isCreatingVariants(){return this.productState.isCreatingVariants},isChangingVariantArrangement(){return this.productState.isChangingVariantArrangement},variantOptions(){return this.productForm.variants.filter(a=>a.name).map(a=>({label:a.name,value:a.temporary_id}))},deliveryMethodOptions(){return this.deliveryMethods.map(a=>({label:a.name,value:a.id}))},productLink(){if(!this.store||!this.product)return null;const a=this.$router.resolve({name:"show-shop-product",params:{alias:this.store.alias,product_id:this.product.id}});return`${window.location.origin}${a.href}`}},methods:{isEmpty:he,goBack(){window.history.length>1?this.$router.back():this.navigateToProducts()},async setup(){this.productForm==null&&this.productState.setProductForm(null,this.isCreating),this.isEditing&&this.store&&await this.showProduct(),this.store&&(this.tags=this.store.product_tags.map(a=>({label:a.name,value:a.id})),this.categories=this.store.categories.map(a=>({label:a.name,value:a.id})),!this.hasLoadedInitialDeliveryMethods&&!this.isLoadingDeliveryMethods&&this.showDeliveryMethods())},async navigateToShopProduct(){const a=this.$router.resolve({name:"show-shop-product",params:{alias:this.store.alias,product_id:this.product.id}});window.open(a.href,"_blank")},async navigateToProducts(){await this.$router.replace({name:"show-products",query:{store_id:this.store.id,searchTerm:this.$route.query.searchTerm,filterExpressions:this.$route.query.filterExpressions,sortingExpressions:this.$route.query.sortingExpressions}})},async onView(a){await this.$router.push({name:"edit-product",params:{product_id:a.id},query:{store_id:this.store.id,searchTerm:this.$route.query.searchTerm,filterExpressions:this.$route.query.filterExpressions,sortingExpressions:this.$route.query.sortingExpressions}})},shareViaWhatsapp(){if(!this.productLink)return;const t=`https://wa.me/?text=${encodeURIComponent(`Check out ${this.product.name} at ${this.store.name}:

${this.productLink}`)}`;window.open(t,"_blank")},shareViaFacebook(){if(!this.productLink)return;const a=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(this.productLink)}`;window.open(a,"_blank")},shareViaLinkedIn(){if(!this.productLink)return;const a=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(this.productLink)}`;window.open(a,"_blank")},shareViaX(){if(!this.productLink)return;const t=`https://x.com/intent/post?text=${encodeURIComponent(`Check out ${this.product.name} at ${this.store.name}: ${this.productLink}`)}`;window.open(t,"_blank")},async copyLink(){try{this.productLink?(await navigator.clipboard.writeText(this.productLink),this.notificationState.showSuccessNotification("Link copied")):this.notificationState.showWarningNotification("Link not ready")}catch(a){console.error("Failed to copy:",a)}},addVariant(){this.selectedVariants=[],this.productState.addVariant()},showConfirmDeleteProductModal(){this.$refs.confirmDeleteProductModal.showModal()},async removeVariant(a){this.selectedVariants=[];const t=this.productForm.variants[a];t.id?(this.deletableVariant=t,this.$refs.confirmDeleteVariantModal.showModal()):this.productState.removeVariant(a)},clearSelectedVariants(){this.selectedVariants=[]},isFilteredVariants(a){return this.selectedVariants.length==0||this.selectedVariants.includes(a.temporary_id)},toggleAdditionalVariantOptions(a){this.productForm.variants[a].show_more=!this.productForm.variants[a].show_more},showChangeArrangementModal(){this.setVariantsForArrangement(),this.$refs.changeArrangementModal.showModal()},setVariantsForArrangement(){this.variantsForArrangement=B(this.productForm.variants.map(a=>({name:a.name,temporary_id:a.temporary_id,photo:a.photos.length?a.photos[0]:null}))),this.$refs.changeArrangementModal.showModal()},async changeVariantArrangement(){var a,t;try{if(this.productState.isChangingVariantArrangement)return;const u=new Map(this.productForm.variants.map(e=>[e.temporary_id,e]));this.productForm.variants=this.variantsForArrangement.map(e=>u.get(e.temporary_id)).filter(e=>e!==void 0);const m=this.productForm.variants.filter(e=>e.id).map(e=>e.id);if(m.length==0)return;this.productState.isChangingVariantArrangement=!0;const o={store_id:this.store.id,product_ids:m,parent_product_id:this.product.id};await axios.post("/api/products/arrangement",o),this.notificationState.showSuccessNotification("Variant arrangement updated")}catch(u){const m=((t=(a=u==null?void 0:u.response)==null?void 0:a.data)==null?void 0:t.message)||(u==null?void 0:u.message)||"Something went wrong while updating variant arrangement";this.notificationState.showWarningNotification(m),this.formState.setServerFormErrors(u),console.error("Failed to update variant arrangement:",u)}finally{this.productState.isChangingVariantArrangement=!1,this.$refs.changeArrangementModal.hideModal()}},async showProduct(){var a,t,u;try{this.productState.isLoadingProduct=!0;let m={params:{store_id:this.store.id,_relationships:["photos","tags","categories","variants.photos","deliveryMethods"].join(",")}};const e=(await axios.get(`/api/products/${this.productId}`,m)).data;this.productState.setProduct(e),this.productState.setProductForm(e)}catch(m){const o=((t=(a=m==null?void 0:m.response)==null?void 0:a.data)==null?void 0:t.message)||(m==null?void 0:m.message)||"Something went wrong while fetching product";this.notificationState.showWarningNotification(o),this.formState.setServerFormErrors(m),console.error("Failed to fetch product:",m),((u=m.response)==null?void 0:u.status)===404&&await this.$router.replace({name:"show-products",query:{store_id:this.store.id,searchTerm:this.$route.query.searchTerm,filterExpressions:this.$route.query.filterExpressions,sortingExpressions:this.$route.query.sortingExpressions}})}finally{this.productState.isLoadingProduct=!1}},async createProduct(a=null,t=null){var u,m;try{if(a==null){if(this.productState.isCreatingProduct||this.productState.isUploading)return;this.formState.hideFormErrors(),this.isEmpty(this.productForm.name)&&this.formState.setFormError("name","The name is required"),this.isEmpty(this.productForm.categories)&&this.formState.setFormError("categories","Must be in at least one category");for(let w=0;w<this.productForm.variants.length;w++){const _=this.productForm.variants[w];this.isEmpty(_.name)&&this.formState.setFormError(`variants.${w}.name`,"The name is required")}if(this.formState.hasErrors)return;this.productState.isCreatingProduct=!0,this.changeHistoryState.actionButtons[1].loading=!0}let o;a?o={store_id:this.store.id,parent_product_id:a.id,...this.productForm.variants[t]}:o={...this.productForm,store_id:this.store.id};const b=(await axios.post("/api/products",o)).data.product;if(a)this.productForm.variants[t].id=b.id,this.productForm.variants[t].photos.length&&await this.uploadImages(this.productForm.variants[t].id,null,t);else{this.productForm.id=b.id,this.productForm.photos.length&&await this.uploadImages(this.productForm.id);for(let w=0;w<this.productForm.variants.length;w++)await this.createProduct(b,w);(this.productForm.tags.length||this.productForm.categories.length)&&this.storeState.silentUpdate(),this.notificationState.showSuccessNotification("Product created"),this.productState.saveOriginalState("Original product"),await this.onView(b)}}catch(o){const e=((m=(u=o==null?void 0:o.response)==null?void 0:u.data)==null?void 0:m.message)||(o==null?void 0:o.message)||"Something went wrong while creating product";this.notificationState.showWarningNotification(e),this.formState.setServerFormErrors(o),console.error("Failed to create product:",o)}finally{a==null&&(this.productState.isUploading=!1,this.productState.isCreatingProduct=!1,this.changeHistoryState.actionButtons[1].loading=!1)}},async updateProduct(a=null,t=null){var u,m;try{if(a==null){if(this.productState.isUpdatingProduct||this.productState.isUploading)return;this.formState.hideFormErrors(),this.isEmpty(this.productForm.name)&&this.formState.setFormError("name","The name is required"),this.isEmpty(this.productForm.categories)&&this.formState.setFormError("categories","Must be in at least one category");for(let _=0;_<this.productForm.variants.length;_++){const V=this.productForm.variants[_];this.isEmpty(V.name)&&this.formState.setFormError(`variants.${_}.name`,"The name is required")}if(this.formState.hasErrors)return;this.productState.isUpdatingProduct=!0,this.changeHistoryState.actionButtons[1].loading=!0}let o,e;a?(o=this.productForm.variants[t].id,e={store_id:this.store.id,...this.productForm.variants[t]}):(o=this.productForm.id,e={...this.productForm,store_id:this.store.id});const w=(await axios.put(`/api/products/${o}`,e)).data.product;if(a)this.productForm.variants[t].photos.length&&await this.uploadImages(this.productForm.variants[t].id,null,t);else{this.productForm.photos.length&&await this.uploadImages(this.productForm.id);const _=this.changeHistoryState.getOriginalState();if(this.productForm.variants.length)for(let V=0;V<this.productForm.variants.length;V++){const T=B(this.productForm.variants[V]),k=B(_.variants.find(y=>y.temporary_id==T.temporary_id));k?(delete T.show_more,delete k.show_more,W(T,k)||await this.updateProduct(w,V)):await this.createProduct(w,V)}(!W(this.productForm.tags,_.tags)||!W(this.productForm.categories,_.categories))&&this.storeState.silentUpdate(),this.notificationState.showSuccessNotification("Product updated"),this.productState.saveOriginalState("Original product")}}catch(o){const e=((m=(u=o==null?void 0:o.response)==null?void 0:u.data)==null?void 0:m.message)||(o==null?void 0:o.message)||"Something went wrong while updating product";this.notificationState.showWarningNotification(e),this.formState.setServerFormErrors(o),console.error("Failed to update product:",o)}finally{this.productState.isUploading=!1,this.productState.isUpdatingProduct=!1,this.changeHistoryState.actionButtons[1].loading=!1}},async deleteProduct(a){var t,u;try{if(this.productState.isDeletingProduct)return;this.productState.isDeletingProduct=!0;const m={data:{store_id:this.store.id}};await axios.delete(`/api/products/${this.product.id}`,m),a(),await new Promise(o=>setTimeout(o,500)),this.notificationState.showSuccessNotification("Product deleted"),await this.navigateToProducts()}catch(m){const o=((u=(t=m==null?void 0:m.response)==null?void 0:t.data)==null?void 0:u.message)||(m==null?void 0:m.message)||"Something went wrong while deleting product";this.notificationState.showWarningNotification(o),this.formState.setServerFormErrors(m),console.error("Failed to delete product:",m),a()}finally{this.productState.isDeletingProduct=!1}},async deleteVariant(a){var u,m;const t=this.deletableVariant;try{if(this.isDeletingVariantIds.includes(t.id))return;this.isDeletingVariantIds.push(t.id);const o={data:{store_id:this.store.id}};await axios.delete(`/api/products/${t.id}`,o),this.notificationState.showSuccessNotification("Variant deleted");const e=this.productForm.variants.findIndex(b=>b.id==t.id);this.productState.removeVariant(e)}catch(o){const e=((m=(u=o==null?void 0:o.response)==null?void 0:u.data)==null?void 0:m.message)||(o==null?void 0:o.message)||"Something went wrong while deleting variant";this.notificationState.showWarningNotification(e),this.formState.setServerFormErrors(o),console.error("Failed to delete variant:",o)}finally{a(),this.isDeletingVariantIds=this.isDeletingVariantIds.filter(o=>o!=t.id)}},async uploadImages(a,t=null,u=null){let m=u!==null?this.productForm.variants[u].photos:this.productForm.photos,o=[];for(let e=0;e<m.length;e++){let b=m[e];b.id==null&&b.uploading==!1&&(b.uploaded===null||b.uploaded===!1)&&(t==null||t==e)&&o.push(this.uploadSingleImage(a,m[e],e))}if(o.length===0){this.productState.isUploading=!1;return}return this.productState.isUploading=!0,Promise.allSettled(o).then(e=>{let b=e.filter(w=>w.status==="rejected").length;b>0&&this.notificationState.showWarningNotification(`‚ö†Ô∏è ${b} image(s) failed to upload. Try again or change the image.`),this.productState.isUploading=!1})},async uploadSingleImage(a,t,u,m=0,o=null){var e,b,w;try{if(m>2)return console.log(`‚ùå Image ${u+1} permanently failed after 3 attempts.`),t.uploaded=!1,t.uploading=!1,t.error_message=((b=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:b.message)||(o==null?void 0:o.message)||"Upload failed",Promise.reject("Failed after 3 attempts");let _=new FormData;_.append("file",t.file_ref),_.append("mediable_id",a),_.append("store_id",this.store.id),_.append("mediable_type","product"),_.append("upload_folder_name","product_photo"),t.uploading=!0,t.error_message=null;const V={headers:{"Content-Type":"multipart/form-data"}},T=await axios.post("/api/media-files",_,V),k=T.data.media_file;return t.uploaded=!0,t.uploading=!1,t.id=k.id,t.path=k.path,console.log(`‚úÖ Image ${u+1} uploaded successfully.`),T}catch(_){return console.error(`‚ö†Ô∏è Image ${u+1} upload attempt ${m+1} failed.`,_),_.code==="ECONNABORTED"||((w=_.response)==null?void 0:w.status)===504?void 0:this.uploadSingleImage(a,t,u,m+1,_)}},async showDeliveryMethods(){var a,t;try{this.isLoadingDeliveryMethods=!0;let u={params:{per_page:100,store_id:this.store.id}};const m=await axios.get("/api/delivery-methods",u);this.deliveryMethods=m.data.data}catch(u){const m=((t=(a=u==null?void 0:u.response)==null?void 0:a.data)==null?void 0:t.message)||(u==null?void 0:u.message)||"Something went wrong while fetching delivery methods";this.notificationState.showWarningNotification(m),this.formState.setServerFormErrors(u),console.error("Failed to fetch delivery methods:",u)}finally{this.isLoadingDeliveryMethods=!1,this.hasLoadedInitialDeliveryMethods=!0}},setActionButtons(){(this.isCreating||this.isEditing)&&(this.changeHistoryState.removeButtons(),this.changeHistoryState.addDiscardButton(),this.changeHistoryState.addActionButton(this.isEditing?"Save Changes":"Create Product",this.isEditing?this.updateProduct:this.createProduct,"primary",null))},setProductForm(a){this.productState.productForm=a}},beforeRouteLeave(a,t,u){if(this.changeHistoryState.hasChangeHistory&&!window.confirm("You have unsaved changes. Are you sure you want to leave?"))return u(!1);u()},unmounted(){this.productState.reset()},created(){this.setup(),this.setActionButtons();const a=["undo","redo","jumpToHistory","resetHistoryToCurrent","resetHistoryToOriginal"];for(let t=0;t<a.length;t++){let u=a[t];this.changeHistoryState.listeners[u]=this.setProductForm}}},ft={class:"pt-24 px-4"},yt={class:"grid grid-cols-12 gap-4 mb-4"},vt={class:"col-span-8"},bt={class:"select-none bg-white rounded-lg p-4 mb-4"},_t={class:"w-full flex items-center space-x-4"},St={key:0,class:"flex items-center space-x-2"},Ft={key:1,class:"w-full flex items-center justify-between"},wt={class:"flex items-center space-x-1"},kt={class:"text-lg text-gray-700 font-semibold"},Vt={class:"flex space-x-2"},xt={class:"max-h-60 overflow-auto"},Tt=["onClick"],Ct={class:"flex items-center space-x-2"},Dt=["src","alt"],Ut={class:"truncate"},Lt={class:"max-h-60 overflow-auto"},Pt=["onClick"],Et={class:"truncate"},It={class:"relative mb-4"},Mt={class:"bg-white rounded-lg space-y-4 p-4"},At={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},qt={class:"text-sm text-gray-400"},Ot={key:2,class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},zt={class:"relative mb-4"},Bt={class:"bg-white rounded-lg space-y-4 p-4"},Ht={class:"relative mb-4"},jt={class:"bg-white rounded-lg space-y-4 p-4"},Nt={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Rt={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Wt={key:0,class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Qt={key:0,class:"flex items-end space-x-4 mb-2"},Xt={key:0,class:"relative mb-4"},Kt={class:"bg-white border border-gray-200 rounded-lg p-4"},Gt={class:"flex items-center space-x-4 justify-end"},Yt={class:"flex items-center space-x-1 text-gray-400"},Zt={class:"text-sm"},Jt={class:"space-y-4 mb-4"},$t={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},er={class:"flex items-center space-x-4"},tr={key:0,class:"flex items-center justify-center w-16 h-16"},rr=["src"],or={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},ar={class:"col-span-2"},sr={class:"text-sm text-gray-400"},lr={class:"flex justify-center"},ir={key:0,class:"text-sm text-gray-700"},nr={class:"flex justify-end space-x-2"},dr={class:"relative mb-4"},ur={class:"bg-white rounded-lg p-4"},cr={class:"col-span-4"},mr={class:"relative mb-4"},pr={class:"bg-white rounded-lg space-y-4 p-4"},gr={class:"relative mb-4"},hr={class:"bg-white rounded-lg space-y-4 p-4"},fr={class:"relative mb-4"},yr={class:"bg-white rounded-lg space-y-4 p-4"},vr={class:"relative mb-4"},br={class:"bg-white rounded-lg space-y-4 p-4"},_r={class:"relative mb-4"},Sr={class:"bg-white rounded-lg space-y-4 p-4"},Fr={class:"overflow-y-auto rounded-lg h-60"},wr=["src"],kr={class:"w-full flex items-center justify-between"},Vr={class:"text-sm"},xr={class:"mb-4"},Tr={class:"font-bold text-black"},Cr={key:0,class:"flex justify-center space-x-2 mb-8"},Dr=["src"],Ur={class:"font-bold text-black"},Lr={class:"flex justify-end"},Pr={class:"mb-8"},Er={class:"font-bold text-black"};function Ir(a,t,u,m,o,e){var p,v,C,M;const b=f("Button"),w=f("Skeleton"),_=f("Popover"),V=f("Link"),T=f("Dropdown"),k=f("BackdropLoader"),y=f("Input"),P=f("Select"),E=f("Switch"),H=f("Alert"),A=f("SelectTags"),I=f("Split"),N=f("DataCollectionFields"),j=f("Image"),R=f("Move"),Q=f("draggable"),h=f("Modal");return s(),g("div",ft,[l("div",yt,[l("div",vt,[l("div",bt,[l("div",_t,[n(b,{size:"xs",type:"light",action:e.goBack,leftIcon:o.MoveLeft},{default:F(()=>[...t[75]||(t[75]=[l("span",null,"Back",-1)])]),_:1},8,["action","leftIcon"]),e.isLoadingStore||e.isLoadingProduct||e.isEditing&&!e.hasProduct?(s(),g("div",St,[n(w,{width:"w-40"}),n(w,{width:"w-4"})])):(s(),g("div",Ft,[l("div",wt,[l("h1",kt,x(e.isCreating?"Add Product":e.productForm.name||"..."),1),n(_,{content:"Products are physical or non physical items that customers can place orders and pay for using your preferred payment methods",placement:"top"})]),l("div",Vt,[e.product?(s(),d(T,{key:0,position:"left",options:o.shareOptions,dropdownClasses:"w-40"},{trigger:F(r=>[n(b,{size:"xs",type:"light",leftIconSize:"16",leftIcon:o.Share2,action:r.toggleDropdown},{default:F(()=>[...t[76]||(t[76]=[l("span",{class:"ml-1"},"Share",-1)])]),_:1},8,["leftIcon","action"])]),content:F(r=>[l("ul",xt,[(s(!0),g(L,null,z(r.options,(c,O)=>(s(),g("li",{key:O,onClick:()=>r.handleItemClick(c),class:D(["flex items-center space-x-2 px-4 py-1.5 text-sm cursor-pointer",c.label=="Copy Link"?"hover:bg-blue-100 bg-blue-50":"hover:bg-gray-100 text-gray-700"])},[l("div",Ct,[c.label=="Copy Link"?(s(),d(V,{key:0,size:"14"})):c.icon?(s(),g("img",{key:1,src:`/images/social-media-icons/${c.icon}.png`,alt:`${c.icon} Logo`,class:"w-4 h-4"},null,8,Dt)):i("",!0),l("span",Ut,x(c.label),1)])],10,Tt))),128))])]),_:1},8,["options"])):i("",!0),e.product?(s(),d(T,{key:1,position:"left",triggerSize:"xs",dropdownClasses:"w-40",options:o.actionOptions,triggerLeftIcon:o.ChevronDown},{content:F(r=>[l("ul",Lt,[(s(!0),g(L,null,z(r.options,(c,O)=>(s(),g("li",{key:O,onClick:()=>r.handleItemClick(c),class:D(["flex items-center space-x-2 px-4 py-2 text-xs cursor-pointer",c.label=="Delete"?"hover:bg-red-100 text-red-700":"hover:bg-gray-100 text-gray-700"])},[(s(),d(ce(c.icon),{size:"16"})),l("span",Et,x(c.label),1)],10,Pt))),128))])]),_:1},8,["options","triggerLeftIcon"])):i("",!0)])]))])]),l("div",It,[e.isLoadingProduct||e.isSubmitting?(s(),d(k,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):i("",!0),l("div",Mt,[n(y,{type:"text",label:"Name",modelValue:e.productForm.name,"onUpdate:modelValue":t[0]||(t[0]=r=>e.productForm.name=r),placeholder:"Standard Ticket",errorText:e.formState.getFormError("name"),onInput:t[1]||(t[1]=r=>e.productState.saveStateDebounced("Name changed")),tooltipContent:"The name of your product e.g Standard Ticket"},null,8,["modelValue","errorText"]),l("div",At,[n(P,{class:"w-full",search:!1,label:"Visibility",options:o.visibilityTypes,modelValue:e.productForm.visible,"onUpdate:modelValue":t[2]||(t[2]=r=>e.productForm.visible=r),errorText:e.formState.getFormError("visible"),onChange:t[3]||(t[3]=r=>e.productState.saveStateDebounced("Visibility status changed")),tooltipContent:"Turn on if you want your product to be visible (Made available to customers)"},null,8,["options","modelValue","errorText"]),n(P,{label:"Type",class:"w-full",search:!1,options:o.productTypes,modelValue:e.productForm.type,"onUpdate:modelValue":t[4]||(t[4]=r=>e.productForm.type=r),errorText:e.formState.getFormError("type"),onChange:t[5]||(t[5]=r=>e.productState.saveStateDebounced("Type changed"))},null,8,["options","modelValue","errorText"])]),e.productForm.type=="digital"?(s(),d(y,{key:0,type:"text",label:"Download Link",externalLinkName:"Learn more",modelValue:e.productForm.download_link,"onUpdate:modelValue":t[6]||(t[6]=r=>e.productForm.download_link=r),placeholder:"https://example.com/download",externalLinkUrl:"https://example.com/download",errorText:e.formState.getFormError("download_link"),tooltipContent:"This is the link to download this resource",onInput:t[7]||(t[7]=r=>e.productState.saveStateDebounced("Download link changed")),description:"Confirm your order to show download link on invoice"},null,8,["modelValue","errorText"])):i("",!0),e.hasVariants?i("",!0):(s(),d(y,{key:1,type:"text",label:"Weight",modelValue:e.productForm.unit_weight,"onUpdate:modelValue":t[8]||(t[8]=r=>e.productForm.unit_weight=r),errorText:e.formState.getFormError("unit_weight"),onInput:t[9]||(t[9]=r=>e.productState.saveStateDebounced("Weight changed")),tooltipContent:"The weight of the product. Useful for delivery calculations"},{suffix:F(()=>{var r;return[l("span",qt,x((r=e.store)==null?void 0:r.weight_unit),1)]}),_:1},8,["modelValue","errorText"])),e.hasVariants?i("",!0):(s(),g("div",Ot,[n(y,{type:"text",label:"SKU",placeholder:"std-ticket",modelValue:e.productForm.sku,"onUpdate:modelValue":t[10]||(t[10]=r=>e.productForm.sku=r),errorText:e.formState.getFormError("sku"),onInput:t[11]||(t[11]=r=>e.productState.saveStateDebounced("SKU changed")),tooltipContent:"The stock keeping unit for this product. Useful for stock management"},null,8,["modelValue","errorText"]),n(y,{type:"text",label:"Barcode",placeholder:"123456789",modelValue:e.productForm.barcode,"onUpdate:modelValue":t[12]||(t[12]=r=>e.productForm.barcode=r),errorText:e.formState.getFormError("barcode"),onInput:t[13]||(t[13]=r=>e.productState.saveStateDebounced("Barcode changed")),tooltipContent:"The barcode for this product. Useful for stock management"},null,8,["modelValue","errorText"])]))])]),l("div",zt,[e.isLoadingProduct||e.isSubmitting?(s(),d(k,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):i("",!0),l("div",Bt,[n(y,{type:"checkbox",inputLabel:"Show Description",modelValue:e.productForm.show_description,"onUpdate:modelValue":t[14]||(t[14]=r=>e.productForm.show_description=r),onChange:t[15]||(t[15]=r=>e.productState.saveStateDebounced("Show description status changed"))},null,8,["modelValue"]),n(y,{rows:"2",type:"textarea",label:"Description",modelValue:e.productForm.description,"onUpdate:modelValue":t[16]||(t[16]=r=>e.productForm.description=r),disabled:!e.productForm.show_description,placeholder:"1 day show with popular artists",errorText:e.formState.getFormError("description"),onInput:t[17]||(t[17]=r=>e.productState.saveStateDebounced("Description changed")),tooltipContent:"Sweet and short description of your product e.g 1 day show with popular artists"},null,8,["modelValue","disabled","errorText"])])]),l("div",Ht,[e.isLoadingProduct||e.isSubmitting?(s(),d(k,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):i("",!0),l("div",jt,[t[78]||(t[78]=l("p",{class:"text-lg text-gray-700 font-semibold"},"Pricing",-1)),l("div",Nt,[n(E,{size:"xs",suffixText:"Is Free",modelValue:e.productForm.is_free,"onUpdate:modelValue":t[18]||(t[18]=r=>e.productForm.is_free=r),errorText:e.formState.getFormError("is_free"),onChange:t[19]||(t[19]=r=>e.productState.saveStateDebounced("Free status changed")),tooltipContent:"Turn on if you want your product to be made Free for customers"},null,8,["modelValue","errorText"]),e.productForm.is_free?i("",!0):(s(),d(E,{key:0,size:"xs",suffixText:"Display as estimated price",modelValue:e.productForm.is_estimated_price,"onUpdate:modelValue":t[20]||(t[20]=r=>e.productForm.is_estimated_price=r),errorText:e.formState.getFormError("is_estimated_price"),onChange:t[21]||(t[21]=r=>e.productState.saveStateDebounced("Estimated price status changed")),tooltipContent:"The checkout page will display the price as an estimated price. Customers will confirm with you before payment"},null,8,["modelValue","errorText"]))]),e.productForm.is_free?(s(),d(H,{key:0,type:"success"},{description:F(()=>[...t[77]||(t[77]=[U(" This product is ",-1),l("span",{class:"font-bold"},"Free",-1)])]),_:1})):(s(),g(L,{key:1},[l("div",Rt,[n(y,{type:"money",label:"Regular Price",currency:(p=e.store)==null?void 0:p.currency,modelValue:e.productForm.unit_regular_price,"onUpdate:modelValue":t[22]||(t[22]=r=>e.productForm.unit_regular_price=r),errorText:e.formState.getFormError("unit_regular_price"),onInput:t[23]||(t[23]=r=>e.productState.saveStateDebounced("Regular price changed")),tooltipContent:"Set the regular price for this product (How much the product is sold when its not on sale)"},null,8,["currency","modelValue","errorText"]),n(y,{type:"money",label:"Sale Price",currency:(v=e.store)==null?void 0:v.currency,modelValue:e.productForm.unit_sale_price,"onUpdate:modelValue":t[24]||(t[24]=r=>e.productForm.unit_sale_price=r),errorText:e.formState.getFormError("unit_sale_price"),onInput:t[25]||(t[25]=r=>e.productState.saveStateDebounced("Sale price changed")),tooltipContent:"Set the sale price for this product (if the product is on sale)"},null,8,["currency","modelValue","errorText"])]),n(y,{type:"money",label:"Cost Price",currency:(C=e.store)==null?void 0:C.currency,description:"Invisible to customers",modelValue:e.productForm.unit_cost_price,"onUpdate:modelValue":t[26]||(t[26]=r=>e.productForm.unit_cost_price=r),errorText:e.formState.getFormError("unit_cost_price"),onInput:t[27]||(t[27]=r=>e.productState.saveStateDebounced("Cost price changed")),tooltipContent:"Set the cost price for this product (if the product is on sale)"},null,8,["currency","modelValue","errorText"]),n(y,{type:"checkbox",inputLabel:"Price per unit",modelValue:e.productForm.show_price_per_unit,"onUpdate:modelValue":t[28]||(t[28]=r=>e.productForm.show_price_per_unit=r),onChange:t[29]||(t[29]=r=>e.productState.saveStateDebounced("Price per unit status changed"))},null,8,["modelValue"]),e.productForm.show_price_per_unit?(s(),g("div",Wt,[n(y,{type:"number",label:"Unit Value",modelValue:e.productForm.unit_value,"onUpdate:modelValue":t[30]||(t[30]=r=>e.productForm.unit_value=r),errorText:e.formState.getFormError("unit_value"),onInput:t[31]||(t[31]=r=>e.productState.saveStateDebounced("Unit value changed"))},null,8,["modelValue","errorText"]),n(P,{class:"w-full",search:!1,label:"Unit Type",options:o.pricePerUnitTypes,modelValue:e.productForm.unit_type,"onUpdate:modelValue":t[32]||(t[32]=r=>e.productForm.unit_type=r),errorText:e.formState.getFormError("unit_type"),onChange:t[33]||(t[33]=r=>e.productState.saveStateDebounced("Unit type changed"))},null,8,["options","modelValue","errorText"])])):i("",!0),n(y,{type:"checkbox",inputLabel:"Tax Overide",modelValue:e.productForm.tax_overide,"onUpdate:modelValue":t[34]||(t[34]=r=>e.productForm.tax_overide=r),onChange:t[35]||(t[35]=r=>e.productState.saveStateDebounced("Tax overide status changed"))},null,8,["modelValue"]),e.productForm.tax_overide?(s(),d(y,{key:1,type:"money",currency:(M=e.store)==null?void 0:M.currency,modelValue:e.productForm.tax_overide_amount,"onUpdate:modelValue":t[36]||(t[36]=r=>e.productForm.tax_overide_amount=r),errorText:e.formState.getFormError("tax_overide_amount"),onInput:t[37]||(t[37]=r=>e.productState.saveStateDebounced("Tax overide amount changed"))},null,8,["currency","modelValue","errorText"])):i("",!0)],64))])]),l("div",{class:D([{"bg-white rounded-lg p-4 space-y-4":!e.hasVariants},"mb-4"])},[l("p",{class:D(["text-lg text-gray-700 font-semibold",e.productForm.variants.length>=2?"mb-0":"mb-4",{"pl-4":e.hasVariants}])},"Variants",2),e.productForm.variants.length>=2&&e.variantOptions.length?(s(),g("div",Qt,[n(A,{class:"w-full",allowCustom:!1,options:e.variantOptions,modelValue:o.selectedVariants,"onUpdate:modelValue":t[38]||(t[38]=r=>o.selectedVariants=r),placeholder:"Add variant filter"},null,8,["options","modelValue"]),n(b,{size:"xs",type:"light",leftIcon:o.X,action:e.clearSelectedVariants},{default:F(()=>[...t[79]||(t[79]=[l("span",null,"Clear Filter",-1)])]),_:1},8,["leftIcon","action"])])):i("",!0),(s(!0),g(L,null,z(e.productForm.variants,(r,c)=>{var O,X;return s(),g(L,{key:r.temporary_id},[e.isFilteredVariants(r)?(s(),g("div",Xt,[e.isLoadingProduct||e.isSubmitting?(s(),d(k,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):i("",!0),l("div",Kt,[l("div",Gt,[l("div",Yt,[n(I,{size:"16"}),l("span",Zt,"variant "+x(`${c+1}`),1)]),n(b,{size:"xs",type:"bareDanger",leftIcon:o.Trash2,action:()=>e.removeVariant(c)},null,8,["leftIcon","action"])]),l("div",Jt,[l("div",$t,[l("div",er,[e.productForm.variants[c].photos.length?(s(),g("div",tr,[l("img",{class:"w-full max-h-full object-contain rounded-lg shrink-0",src:e.productForm.variants[c].photos[0].path},null,8,rr)])):i("",!0),n(y,{type:"text",label:"Name",class:"w-full",placeholder:"Standard Ticket",modelValue:e.productForm.variants[c].name,"onUpdate:modelValue":S=>e.productForm.variants[c].name=S,onInput:t[39]||(t[39]=S=>e.productState.saveStateDebounced("Name changed")),tooltipContent:"The name of your product e.g Standard Ticket",errorText:e.formState.getFormError(`variants.${c}.name`)},null,8,["modelValue","onUpdate:modelValue","errorText"])]),n(P,{class:"w-full",search:!1,label:"Visibility",options:o.visibilityTypes,modelValue:e.productForm.variants[c].visible,"onUpdate:modelValue":S=>e.productForm.variants[c].visible=S,errorText:e.formState.getFormError(`variants.${c}.visible`),onChange:t[40]||(t[40]=S=>e.productState.saveStateDebounced("Visibility status changed")),tooltipContent:"Turn on if you want your product to be visible (Made available to customers)"},null,8,["options","modelValue","onUpdate:modelValue","errorText"])]),l("div",or,[n(y,{type:"money",label:"Regular Price",currency:(O=e.store)==null?void 0:O.currency,modelValue:e.productForm.variants[c].unit_regular_price,"onUpdate:modelValue":S=>e.productForm.variants[c].unit_regular_price=S,onInput:t[41]||(t[41]=S=>e.productState.saveStateDebounced("Regular price changed")),errorText:e.formState.getFormError(`variants.${c}.unit_regular_price`),tooltipContent:"Set the regular price for this product (How much the product is sold when its not on sale)"},null,8,["currency","modelValue","onUpdate:modelValue","errorText"]),n(y,{type:"money",label:"Sale Price",currency:(X=e.store)==null?void 0:X.currency,modelValue:e.productForm.variants[c].unit_sale_price,"onUpdate:modelValue":S=>e.productForm.variants[c].unit_sale_price=S,onInput:t[42]||(t[42]=S=>e.productState.saveStateDebounced("Sale price changed")),errorText:e.formState.getFormError(`variants.${c}.unit_sale_price`),tooltipContent:"Set the sale price for this product (if the product is on sale)"},null,8,["currency","modelValue","onUpdate:modelValue","errorText"]),e.productForm.variants[c].show_more?(s(),g(L,{key:0},[l("div",ar,[n(y,{type:"text",label:"Weight",class:"w-full",modelValue:e.productForm.variants[c].unit_weight,"onUpdate:modelValue":S=>e.productForm.variants[c].unit_weight=S,onInput:t[43]||(t[43]=S=>e.productState.saveStateDebounced("Weight changed")),errorText:e.formState.getFormError(`variants.${c}.unit_weight`),tooltipContent:"The weight of the product. Useful for delivery calculations"},{suffix:F(()=>{var S;return[l("span",sr,x((S=e.store)==null?void 0:S.weight_unit),1)]}),_:1},8,["modelValue","onUpdate:modelValue","errorText"])]),n(y,{type:"text",label:"SKU",placeholder:"std-ticket",modelValue:e.productForm.variants[c].sku,"onUpdate:modelValue":S=>e.productForm.variants[c].sku=S,onInput:t[44]||(t[44]=S=>e.productState.saveStateDebounced("SKU changed")),errorText:e.formState.getFormError(`variants.${c}.sku`),tooltipContent:"The stock keeping unit for this product. Useful for stock management"},null,8,["modelValue","onUpdate:modelValue","errorText"]),n(y,{type:"text",label:"Barcode",placeholder:"123456789",modelValue:e.productForm.variants[c].barcode,"onUpdate:modelValue":S=>e.productForm.variants[c].barcode=S,onInput:t[45]||(t[45]=S=>e.productState.saveStateDebounced("Barcode changed")),errorText:e.formState.getFormError(`variants.${c}.barcode`),tooltipContent:"The barcode for this product. Useful for stock management"},null,8,["modelValue","onUpdate:modelValue","errorText"])],64)):i("",!0)]),e.productForm.variants[c].show_more?(s(),d(y,{key:0,type:"file",maxFiles:1,imagePreviewGridCols:1,singleFileUploadMessage:"Photo attached",modelValue:e.productForm.variants[c].photos,"onUpdate:modelValue":S=>e.productForm.variants[c].photos=S,onChange:t[46]||(t[46]=S=>e.productState.saveStateDebounced("Photos changed")),onRetryUploads:S=>e.uploadImages(e.productForm.variants[c].id,null,c),onRetryUpload:(S,ne)=>e.uploadImages(e.productForm.variants[c].id,ne,c)},null,8,["modelValue","onUpdate:modelValue","onRetryUploads","onRetryUpload"])):i("",!0)]),l("div",lr,[n(b,{size:"sm",type:"bare",action:()=>e.toggleAdditionalVariantOptions(c),rightIcon:e.productForm.variants[c].show_more?o.ChevronUp:o.ChevronDown},{default:F(()=>[l("span",null,x(e.productForm.variants[c].show_more?"show less":"show more"),1)]),_:2},1032,["action","rightIcon"])])])])):i("",!0)],64)}),128)),l("div",{class:D([{"flex space-x-2 justify-between":!e.hasVariants}])},[e.hasVariants?i("",!0):(s(),g("p",ir,"Add variants if your product supports different versions of itself e.g different sizes, materials, colors, etc")),l("div",nr,[e.productForm.variants.length>=2?(s(),d(b,{key:0,size:"xs",type:"light",leftIcon:o.ArrowDownUp,action:e.showChangeArrangementModal},{default:F(()=>[...t[80]||(t[80]=[l("span",null,"Change Arrangement",-1)])]),_:1},8,["leftIcon","action"])):i("",!0),n(b,{size:"xs",type:"light",leftIcon:o.Plus,action:e.addVariant},{default:F(()=>[...t[81]||(t[81]=[l("span",null,"Add Variants",-1)])]),_:1},8,["leftIcon","action"])])],2)],2),l("div",dr,[e.isLoadingProduct||e.isSubmitting?(s(),d(k,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):i("",!0),l("div",ur,[t[82]||(t[82]=l("p",{class:"text-lg text-gray-700 font-semibold"},"Options",-1)),n(N)])])]),l("div",cr,[l("div",mr,[e.isLoadingProduct||e.isSubmitting?(s(),d(k,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):i("",!0),l("div",pr,[t[83]||(t[83]=l("p",{class:"text-lg text-gray-700 font-semibold"},"Images",-1)),n(y,{type:"file",maxFiles:5,modelValue:e.productForm.photos,"onUpdate:modelValue":t[47]||(t[47]=r=>e.productForm.photos=r),onRetryUploads:t[48]||(t[48]=r=>e.uploadImages(e.productForm.id)),onChange:t[49]||(t[49]=r=>e.productState.saveStateDebounced("Photos changed")),onRetryUpload:t[50]||(t[50]=(r,c)=>e.uploadImages(e.productForm.id,c))},null,8,["modelValue"])])]),l("div",gr,[e.isLoadingProduct||e.isSubmitting?(s(),d(k,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):i("",!0),l("div",hr,[t[84]||(t[84]=l("p",{class:"text-lg text-gray-700 font-semibold"},"Inventory",-1)),n(P,{label:"Stock",class:"w-full",search:!1,options:o.stockQuantityTypes,modelValue:e.productForm.stock_quantity_type,"onUpdate:modelValue":t[51]||(t[51]=r=>e.productForm.stock_quantity_type=r),errorText:e.formState.getFormError("stock_quantity_type"),onChange:t[52]||(t[52]=r=>e.productState.saveStateDebounced("Stock quantity type changed")),tooltipContent:"Select the available stock e.g Unlimited means that stock is always available while limited means that stock is limited to the quatities specified"},null,8,["options","modelValue","errorText"]),e.productForm.stock_quantity_type!="sold out"?(s(),g(L,{key:0},[e.productForm.stock_quantity_type=="limited"?(s(),d(y,{key:0,min:"0",type:"number",placeholder:"100",label:"Stock Quantity",modelValue:e.productForm.stock_quantity,"onUpdate:modelValue":t[53]||(t[53]=r=>e.productForm.stock_quantity=r),errorText:e.formState.getFormError("stock_quantity"),onInput:t[54]||(t[54]=r=>e.productState.saveStateDebounced("Stock quantity changed")),tooltipContent:"Set the stock quantity e.g 100 means that you only have 100 items for this product"},null,8,["modelValue","errorText"])):i("",!0),n(E,{size:"xs",suffixText:"Daily Capacity",modelValue:e.productForm.set_daily_capacity,"onUpdate:modelValue":t[55]||(t[55]=r=>e.productForm.set_daily_capacity=r),errorText:e.formState.getFormError("set_daily_capacity"),tooltipContent:"The maximum number number of items you can sell per day",onChange:t[56]||(t[56]=r=>e.productState.saveStateDebounced("Daily capacity status changed"))},null,8,["modelValue","errorText"]),e.productForm.set_daily_capacity?(s(),d(y,{key:1,min:"1",type:"number",placeholder:"10",modelValue:e.productForm.daily_capacity,"onUpdate:modelValue":t[57]||(t[57]=r=>e.productForm.daily_capacity=r),errorText:e.formState.getFormError("daily_capacity"),onInput:t[58]||(t[58]=r=>e.productState.saveStateDebounced("Daily capacity changed"))},null,8,["modelValue","errorText"])):i("",!0),n(E,{size:"xs",suffixText:"Minimum Order Quantity",modelValue:e.productForm.set_min_order_quantity,"onUpdate:modelValue":t[59]||(t[59]=r=>e.productForm.set_min_order_quantity=r),errorText:e.formState.getFormError("set_min_order_quantity"),onChange:t[60]||(t[60]=r=>e.productState.saveStateDebounced("Minimum order quantity status changed")),tooltipContent:"Set the minimum order quantity for this product (Used to manage supply and demand)"},null,8,["modelValue","errorText"]),e.productForm.set_min_order_quantity?(s(),d(y,{key:2,min:"1",type:"number",placeholder:"10",modelValue:e.productForm.min_order_quantity,"onUpdate:modelValue":t[61]||(t[61]=r=>e.productForm.min_order_quantity=r),errorText:e.formState.getFormError("min_order_quantity"),onInput:t[62]||(t[62]=r=>e.productState.saveStateDebounced("Minimum order quantity changed"))},null,8,["modelValue","errorText"])):i("",!0),n(E,{size:"xs",suffixText:"Maximum Order Quantity",modelValue:e.productForm.set_max_order_quantity,"onUpdate:modelValue":t[63]||(t[63]=r=>e.productForm.set_max_order_quantity=r),errorText:e.formState.getFormError("set_max_order_quantity"),onChange:t[64]||(t[64]=r=>e.productState.saveStateDebounced("Maximum order quantity status changed")),tooltipContent:"Set the maximum order quantity for this product (Used to manage supply and demand)"},null,8,["modelValue","errorText"]),e.productForm.set_max_order_quantity?(s(),d(y,{key:3,min:"1",type:"number",placeholder:"10",modelValue:e.productForm.max_order_quantity,"onUpdate:modelValue":t[65]||(t[65]=r=>e.productForm.max_order_quantity=r),errorText:e.formState.getFormError("max_order_quantity"),onInput:t[66]||(t[66]=r=>e.productState.saveStateDebounced("Maximum order quantity changed"))},null,8,["modelValue","errorText"])):i("",!0)],64)):i("",!0)])]),l("div",fr,[e.isLoadingProduct||e.isSubmitting?(s(),d(k,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):i("",!0),l("div",yr,[t[85]||(t[85]=l("p",{class:"text-lg text-gray-700 font-semibold"},"Categories",-1)),n(A,{options:o.categories,placeholder:"Add category",modelValue:e.productForm.categories,"onUpdate:modelValue":t[67]||(t[67]=r=>e.productForm.categories=r),errorText:e.formState.getFormError("categories"),onChange:t[68]||(t[68]=r=>e.productState.saveStateDebounced("Categories changed"))},null,8,["options","modelValue","errorText"])])]),l("div",vr,[e.isLoadingProduct||e.isSubmitting?(s(),d(k,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):i("",!0),l("div",br,[t[86]||(t[86]=l("p",{class:"text-lg text-gray-700 font-semibold"},"Tags",-1)),n(A,{options:o.tags,placeholder:"Add Tag",modelValue:e.productForm.tags,"onUpdate:modelValue":t[69]||(t[69]=r=>e.productForm.tags=r),errorText:e.formState.getFormError("tags"),onChange:t[70]||(t[70]=r=>e.productState.saveStateDebounced("Tags changed"))},null,8,["options","modelValue","errorText"])])]),l("div",_r,[e.isLoadingProduct||e.isSubmitting?(s(),d(k,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):i("",!0),l("div",Sr,[t[87]||(t[87]=l("p",{class:"text-lg text-gray-700 font-semibold"},"Delivery Methods",-1)),n(A,{options:e.deliveryMethodOptions,placeholder:"Add delivery method",modelValue:e.productForm.delivery_method_ids,"onUpdate:modelValue":t[71]||(t[71]=r=>e.productForm.delivery_method_ids=r),errorText:e.formState.getFormError("delivery_method_ids"),onChange:t[72]||(t[72]=r=>e.productState.saveStateDebounced("Delivery methods changed"))},null,8,["options","modelValue","errorText"])])])])]),n(h,{scrollOnContent:!1,ref:"changeArrangementModal",approveText:"Change Arrangement",approveAction:e.changeVariantArrangement,approveLoading:e.isChangingVariantArrangement},{content:F(()=>[t[88]||(t[88]=l("p",{class:"text-lg font-bold border-b border-gray-200 pb-4 mb-4"},"Change Arrangement",-1)),l("div",Fr,[n(Q,{class:"space-y-2",handle:".draggable-handle","ghost-class":"bg-yellow-50",modelValue:o.variantsForArrangement,"onUpdate:modelValue":t[74]||(t[74]=r=>o.variantsForArrangement=r)},{default:F(()=>[(s(!0),g(L,null,z(o.variantsForArrangement,(r,c)=>(s(),g("div",{key:c,class:"flex justify-between items-center p-2 space-x-4 rounded-lg bg-gray-50"},[l("div",{class:D(["flex items-center justify-center w-10 h-10 rounded-lg",{"border border-dashed border-gray-200":!r.photo}])},[r.photo?(s(),g("img",{key:0,class:"w-full max-h-full object-contain rounded-lg shrink-0",src:r.photo.path},null,8,wr)):(s(),d(j,{key:1,size:"20",class:"text-gray-400 shrink-0"}))],2),l("div",kr,[l("span",Vr,x(r.name??"no name"),1),n(R,{onClick:t[73]||(t[73]=q(()=>{},["stop"])),size:"16",class:"draggable-handle cursor-grab active:cursor-grabbing text-gray-500 hover:text-yellow-500"})])]))),128))]),_:1},8,["modelValue"])])]),_:1},8,["approveAction","approveLoading"]),n(h,{approveType:"danger",approveText:"Delete Variant",approveAction:e.deleteVariant,ref:"confirmDeleteVariantModal",approveLoading:o.isDeletingVariantIds.some(r=>r==o.deletableVariant.id)},ee({_:2},[o.deletableVariant?{name:"content",fn:F(()=>[t[91]||(t[91]=l("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Confirm Delete",-1)),l("p",xr,[t[89]||(t[89]=U("Are you sure you want to permanently delete ",-1)),l("span",Tr,x(o.deletableVariant.name),1),t[90]||(t[90]=U("?",-1))]),o.deletableVariant.photos.length?(s(),g("div",Cr,[l("img",{class:"w-20 max-h-20 object-contain rounded-lg shrink-0",src:o.deletableVariant.photos[0].path},null,8,Dr)])):i("",!0)]),key:"0"}:void 0]),1032,["approveAction","approveLoading"]),e.product?(s(),g("div",{key:0,class:D(["overflow-hidden rounded-lg space-y-4 p-4 border",e.isLoadingProduct?"border-gray-300 bg-gray-50":"border-red-300 bg-red-50"])},[l("p",null,[t[92]||(t[92]=U("Do you want to permanently delete ",-1)),l("span",Ur,x(e.productForm.name),1),t[93]||(t[93]=U("? Once this product is deleted you will not be able to recover it.",-1))]),l("div",Lr,[n(h,{triggerType:"danger",approveType:"danger",approveLeftIcon:o.Trash2,triggerText:"Delete Product",approveText:"Delete Product",approveAction:e.deleteProduct,ref:"confirmDeleteProductModal",triggerLoading:e.isDeletingProduct,approveLoading:e.isDeletingProduct},{content:F(()=>[t[96]||(t[96]=l("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Confirm Delete",-1)),l("p",Pr,[t[94]||(t[94]=U("Are you sure you want to permanently delete ",-1)),l("span",Er,x(e.productForm.name),1),t[95]||(t[95]=U("?",-1))])]),_:1},8,["approveLeftIcon","approveAction","triggerLoading","approveLoading"])])],2)):i("",!0)])}const Vo=ae(ht,[["render",Ir]]);export{Vo as default};
