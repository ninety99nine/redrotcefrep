import{P as k}from"./Pill-aGbs_XL2.js";import{M as A}from"./Modal-X3iEO6Sa.js";import{B as T}from"./Button-0Fhg4Aii.js";import{S as L}from"./Skeleton-DGkj9lRL.js";import{V as C}from"./vue-draggable-next.esm-bundler-mFF4mOoU.js";import{c as h,e as N,d as V,a as d,g as c,F as f,f as M,b as o,w as y,u as B,r as m,o as l,t as v,i as p}from"./app-811fDb4C.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as I}from"./move-CEzCignB.js";import{T as P}from"./truck-Df5qogyD.js";import{T as z}from"./trash-2-COAOku7K.js";import{P as E}from"./plus-BU4OPlaU.js";import"./Popover-DfwFh9bM.js";import"./Tooltip-5EEAR2_1.js";import"./x-WVuudoOP.js";import"./createLucideIcon-JVTSwxMK.js";import"./Loader-DjUD9LDC.js";import"./ShineEffect-BW3gyXUb.js";const j={inject:["formState","storeState","notificationState"],components:{Truck:P,Pill:k,Modal:A,Button:T,Skeleton:L,Move:I,draggable:C},data(){return{Plus:E,Trash2:z,pagination:null,deliveryMethods:[],deletableDeliveryMethod:null,isDeletingDeliveryMethod:!1,isLoadingDeliveryMethods:!1,isChangingDeliveryMethodArrangement:!1}},watch:{store(i,t){!t&&i&&this.setup()}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},hasDeliveryMethods(){return this.deliveryMethods.length>0}},methods:{setup(){this.store&&this.showDeliveryMethods()},showDeleteDeliveryMethodModal(i){this.deletableDeliveryMethod=i,this.$refs.deleteDeliveryMethodModal.showModal()},async navigateToAddDeliveryMethod(){await this.$router.push({name:"add-delivery-method",query:{store_id:this.store.id}})},async navigateToEditDeliveryMethod(i){await this.$router.push({name:"edit-delivery-method",query:{store_id:this.store.id},params:{delivery_method_id:i.id}})},async showDeliveryMethods(){var i,t;try{this.isLoadingDeliveryMethods=!0;let e={params:{per_page:100,store_id:this.store.id,association:"team member"}};const n=await axios.get("/api/delivery-methods",e);this.pagination=n.data,this.deliveryMethods=this.pagination.data}catch(e){const n=((t=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching delivery methods";this.notificationState.showWarningNotification(n),this.formState.setServerFormErrors(e),console.error("Failed to fetch delivery methods:",e)}finally{this.isLoadingDeliveryMethods=!1}},async changeDeliveryMethodArrangement(){var i,t;try{if(this.isChangingDeliveryMethodArrangement)return;const e=this.deliveryMethods.map(s=>s.id);if(e.length==0)return;this.isChangingDeliveryMethodArrangement=!0;const n={store_id:this.store.id,delivery_method_ids:e};await axios.post("/api/delivery-methods/arrangement",n),this.notificationState.showSuccessNotification("Arrangement changed")}catch(e){const n=((t=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while updating delivery method arrangement";this.notificationState.showWarningNotification(n),this.formState.setServerFormErrors(e),console.error("Failed to update delivery method arrangement:",e)}finally{this.isChangingDeliveryMethodArrangement=!1}},async deleteDeliveryMethod(){var i,t;try{if(this.isDeletingDeliveryMethod)return;this.isDeletingDeliveryMethod=!0;const e={data:{store_id:this.store.id}};await axios.delete(`/api/delivery-methods/${this.deletableDeliveryMethod.id}`,e),this.showDeliveryMethods(),this.$refs.deleteDeliveryMethodModal.hideModal(),this.notificationState.showSuccessNotification("Delivery method deleted")}catch(e){const n=((t=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while deleting delivery method";this.notificationState.showWarningNotification(n),this.formState.setServerFormErrors(e),console.error("Failed to delete delivery method:",e),hideModal()}finally{this.isDeletingDeliveryMethod=!1}}},created(){this.setup()}},W={class:"max-w-2xl mx-auto pt-32 pb-40"},q={key:0,class:"flex justify-end"},U={key:1,class:"space-y-3 mt-4"},Y={class:"flex justify-between items-center"},G={class:"flex items-center space-x-4"},H=["onClick"],J={class:"flex justify-between items-center"},K={class:"text-sm"},O={class:"flex items-center space-x-4"},Q={key:3,class:"flex flex-col items-center justify-center bg-linear-to-br from-indigo-50 to-purple-50 border border-gray-300 shadow-lg rounded-2xl py-16 px-8 space-y-6"},R={class:"relative"},X={class:"bg-linear-to-br from-white-50 to-indigo-50 text-indigo-500 rounded-full p-2"},Z={class:"mb-8"},$={class:"font-bold text-black"};function ee(i,t,e,n,s,r){const u=m("Button"),g=m("Skeleton"),D=m("Pill"),w=m("Move"),b=m("draggable"),_=m("Truck"),x=m("Modal");return l(),h("div",W,[!r.isLoadingStore&&!s.isLoadingDeliveryMethods&&r.hasDeliveryMethods?(l(),h("div",q,[d(u,{size:"md",class:"mb-4",type:"primary",leftIcon:s.Plus,action:r.navigateToAddDeliveryMethod},{default:c(()=>[...t[3]||(t[3]=[o("span",null,"Add Delivery Method",-1)])]),_:1},8,["leftIcon","action"])])):N("",!0),r.isLoadingStore||s.isLoadingDeliveryMethods?(l(),h("div",U,[(l(),h(f,null,M([1,2,3],(a,S)=>o("div",{key:S,class:"bg-white p-4 shadow-sm rounded-xl transition-all duration-300"},[o("div",Y,[d(g,{width:"w-40",shine:!0}),o("div",G,[d(g,{width:"w-16",shine:!0}),d(g,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0}),d(g,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0})])])])),64))])):r.hasDeliveryMethods?(l(),V(b,{key:2,class:"space-y-3 mt-4",handle:".draggable-handle","ghost-class":"bg-yellow-50",modelValue:s.deliveryMethods,"onUpdate:modelValue":t[1]||(t[1]=a=>s.deliveryMethods=a),onChange:r.changeDeliveryMethodArrangement},{default:c(()=>[(l(!0),h(f,null,M(s.deliveryMethods,a=>(l(),h("div",{key:a.id,onClick:y(()=>r.navigateToEditDeliveryMethod(a),["stop"]),class:"bg-white p-4 shadow-sm rounded-xl transition-all duration-300 border border-transparent hover:border-gray-300 hover:shadow-lg cursor-pointer"},[o("div",J,[o("span",K,v(a.name),1),o("div",O,[d(D,{type:a.active?"success":"warning",size:"xs"},{default:c(()=>[p(v(a.active?"active":"inactive"),1)]),_:2},1032,["type"]),d(u,{size:"xs",type:"bareDanger",leftIcon:s.Trash2,action:()=>r.showDeleteDeliveryMethodModal(a)},null,8,["leftIcon","action"]),d(w,{onClick:t[0]||(t[0]=y(()=>{},["stop"])),size:"16",class:"draggable-handle cursor-grab active:cursor-grabbing text-gray-500 hover:text-yellow-500"})])])],8,H))),128))]),_:1},8,["modelValue","onChange"])):(l(),h("div",Q,[o("div",R,[o("div",X,[d(_,{size:"60"})]),t[4]||(t[4]=o("div",{class:"absolute inset-0 bg-indigo-300 opacity-20 rounded-full animate-ping"},null,-1))]),t[6]||(t[6]=o("div",{class:"text-center"},[o("h3",{class:"text-xl font-semibold text-gray-800"},"Set Up Your Delivery Methods!"),o("span",{class:"text-sm text-gray-600 mt-2 block max-w-sm"}," Add a delivery method to ensure fast and reliable delivery for your customers. ")],-1)),o("button",{size:"lg",type:"bare",onClick:t[2]||(t[2]=y((...a)=>r.navigateToAddDeliveryMethod&&r.navigateToAddDeliveryMethod(...a),["stop"])),class:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-medium py-3 px-6 rounded-lg hover:from-indigo-600 hover:to-purple-700 transition-all duration-300 hover:scale-105 cursor-pointer"},[...t[5]||(t[5]=[o("span",null,"Add Delivery Method Now",-1)])])])),d(x,{approveType:"danger",approveLeftIcon:s.Trash2,ref:"deleteDeliveryMethodModal",approveText:"Delete Delivery Method",approveAction:r.deleteDeliveryMethod,triggerLoading:s.isDeletingDeliveryMethod,approveLoading:s.isDeletingDeliveryMethod},B({_:2},[s.deletableDeliveryMethod?{name:"content",fn:c(()=>[t[9]||(t[9]=o("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Confirm Delete",-1)),o("p",Z,[t[7]||(t[7]=p("Are you sure you want to delete ",-1)),o("span",$,v(s.deletableDeliveryMethod.name),1),t[8]||(t[8]=p("?",-1))])]),key:"0"}:void 0]),1032,["approveLeftIcon","approveAction","triggerLoading","approveLoading"])])}const fe=F(j,[["render",ee]]);export{fe as default};
