var Ar=Object.defineProperty;var Dr=(r,t,e)=>t in r?Ar(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var I=(r,t,e)=>Dr(r,typeof t!="symbol"?t+"":t,e);import{B as xe}from"./Button-B96ByjTu.js";import{c as o,a as L,b as g,r as y,o as i,k as B,d as x,e as h,t as f,F as v,g as z,w as q,m as mt,z as Ka,i as ae,f as O,n as S,A as Pr,B as Mr,C as Aa,D as je,v as Ir,E as Or,h as Ja,G as Fr}from"./app-Ckd9AbVO.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as Nr}from"./store-5aqVcqAZ.js";import{D as Br}from"./Drawer-B4Kac2B6.js";import{S as de}from"./Skeleton-C7IaP8B7.js";import{P as Ie}from"./Pill-CDvn4AWu.js";import{I as ge,c as zr}from"./Input-DTpSf4CK.js";import{I as Yt}from"./image-DYIofzhQ.js";import{X as $a}from"./x-C10GWcGQ.js";import{S as er,V as jr,D as Ur}from"./video-CQc0ctDy.js";import{i as qr,a as Qe}from"./stringUtils-Bvzw0-oW.js";import{A as Xt}from"./AddressInput-uF_hjQ8t.js";import{S as Vr}from"./StoreLogo-CuSFLrj1.js";import{L as Hr}from"./link-DcNWMDnl.js";import{c as Wr}from"./createLucideIcon-DrbACf-e.js";import{A as Gr}from"./at-sign-Bucs_NiY.js";import{L as pt}from"./Loader-BbLMPbbw.js";import{P as Zr}from"./Popover-DNosUJul.js";import{C as Yr,a as Xr}from"./chevron-up-DYkriEqF.js";import{D as Qr}from"./Datepicker-Boya23zi.js";import{A as tr}from"./Alert-BMOwR5tH.js";import{A as Kr}from"./arrow-right-DtQcap7T.js";import{P as ar}from"./plus-B2WqJXut.js";import{M as Jr}from"./Modal-CT3wZrtx.js";import{A as $r}from"./arrow-left-Dg8w-6d_.js";import{S as en}from"./Switch-DHLVMN-S.js";import{D as tn,a as an}from"./DeliveryTimePicker-DSke9cgm.js";import{C as rn}from"./circle-alert-gjxEm3KP.js";import{I as nn}from"./info-aeyZRSQR.js";import{C as sn}from"./circle-check-big-DVffYcmO.js";import{M as dn}from"./move-left-DBuR_6aP.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=Wr("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),ln={inject:["designState"],components:{Store:Nr}},cn={class:"flex flex-col items-center justify-center p-8 bg-gray-50 rounded-lg space-y-4 my-4"};function gn(r,t,e,s,n,a){const d=y("Store");return i(),o("div",cn,[L(d,{size:"32",class:"text-gray-500"}),t[0]||(t[0]=g("p",{class:"text-sm text-gray-500"},"Nothing to show",-1))])}const un=E(ln,[["render",gn]]),mn={inject:["storeState","orderState"],components:{X:$a,Image:Yt,Pill:Ie,Input:ge,Button:xe,Skeleton:de},props:{index:{type:Number},cartProduct:{type:Object}},data(){return{}},computed:{store(){return this.storeState.store},hasPhotoPath(){return this.photoPath!=null},photoPath(){return this.cartProduct.photo_path},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart},orderProduct(){return this.orderState.shoppingCart?this.orderState.shoppingCart.order_products.find(r=>r.product_id===this.cartProduct.id):null}}},hn={class:"w-full flex items-center space-x-4"},_n=["src"],fn={class:"w-full flex items-start"},pn={class:"w-full"},yn={class:"text-sm"},bn={key:1,class:"text-xs space-x-2"},xn={key:0},Cn={class:"flex justify-end"},kn={class:"w-fit text-sm flex items-center border border-gray-300 rounded-full overflow-hidden"};function wn(r,t,e,s,n,a){const d=y("Image"),l=y("Skeleton"),m=y("Pill"),c=y("X");return i(),o("div",{class:B({"border-t border-gray-100 pt-4 mt-4":e.index>0})},[g("div",hn,[g("div",{class:B(["flex items-center justify-center w-10 h-10 rounded-lg",{"border border-dashed border-gray-200":!a.hasPhotoPath}])},[a.hasPhotoPath?(i(),o("img",{key:0,class:"w-10 object-contain rounded-lg flex-shrink-0",src:a.photoPath},null,8,_n)):(i(),x(d,{key:1,size:"16",class:"text-gray-300"}))],2),g("div",fn,[g("div",pn,[g("p",yn,f(e.cartProduct.name),1),a.isInspectingShoppingCart?(i(),x(l,{key:0,width:"w-24",height:"h-4",shine:!0,class:"mt-2"})):a.orderProduct?(i(),o(v,{key:1},[a.orderProduct.is_free?(i(),x(m,{key:0,type:"success",size:"xs",showDot:!1},{default:z(()=>[...t[4]||(t[4]=[ae("free",-1)])]),_:1})):(i(),o("p",bn,[g("span",{class:B({"line-through text-gray-500":a.orderProduct.on_sale})},f(a.orderProduct.subtotal.amount_with_currency),3),a.orderProduct.on_sale?(i(),o("span",xn,f(a.orderProduct.grand_total.amount_with_currency),1)):h("",!0)]))],64)):h("",!0)]),L(c,{onClick:t[0]||(t[0]=q(()=>a.orderState.removeCartProduct(e.index,!1),["stop"])),class:"w-4 h-4 flex-shrink-0 text-gray-400 cursor-pointer hover:opacity-90 active:opacity-80 active:scale-90 transition-all"})])]),g("div",Cn,[g("div",kn,[g("button",{onClick:t[1]||(t[1]=q(()=>a.orderState.decreaseCartProductQuantity(e.index,!1),["stop"])),class:"px-3 py-1 bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer"}," - "),mt(g("input",{min:"0",value:"2","onUpdate:modelValue":t[2]||(t[2]=_=>e.cartProduct.quantity=_),class:"w-12 text-center border-0 focus:outline-none"},null,512),[[Ka,e.cartProduct.quantity]]),g("button",{onClick:t[3]||(t[3]=q(()=>a.orderState.increaseCartProductQuantity(e.index,!1),["stop"])),class:"px-3 py-1 bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer"}," + ")])])],2)}const Sn=E(mn,[["render",wn]]),vn={inject:["storeState","orderState"],components:{Skeleton:de,CartProduct:Sn},computed:{isLoadingStore(){return this.storeState.isLoadingStore},cartProducts(){return this.orderState.orderForm.cart_products},hasCartProducts(){return this.cartProducts.length>0}}},Tn={key:0,class:"space-y-2"},Rn={class:"w-full space-y-4"},Ln={key:1,class:"space-y-4"},En={key:0};function An(r,t,e,s,n,a){const d=y("Skeleton"),l=y("CartProduct");return a.isLoadingStore?(i(),o("div",Tn,[(i(),o(v,null,O([1,2,3],(m,c)=>g("div",{key:c,class:"flex items-center space-x-4 border-b border-gray-300 shadow-sm rounded-lg py-6 px-4 bg-gray-50"},[t[0]||(t[0]=g("div",{class:"flex items-center justify-center w-16 h-16 border border-dashed border-gray-200 rounded-lg flex-shrink-0"},[g("svg",{class:"w-6 h-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])],-1)),g("div",Rn,[L(d,{width:"w-full",shine:!0}),L(d,{width:"w-1/3",shine:!0})])])),64))])):(i(),o("div",Ln,[a.hasCartProducts?(i(),o("div",En,[(i(!0),o(v,null,O(a.cartProducts,(m,c)=>(i(),x(l,{key:c,index:c,cartProduct:m},null,8,["index","cartProduct"]))),128))])):h("",!0),g("div",{class:B(["relative",{"flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg space-y-4 my-4":!a.hasCartProducts}])},[a.hasCartProducts?h("",!0):(i(),o(v,{key:0},[t[1]||(t[1]=g("svg",{class:"w-10 h-10 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})],-1)),t[2]||(t[2]=g("span",{class:"text-sm text-gray-500"},"No products added",-1))],64))],2)]))}const Dn=E(vn,[["render",An]]),Pn={inject:["orderState","storeState"],components:{ShoppingCart:er,Button:xe,Drawer:Br,CartProducts:Dn},computed:{store(){return this.storeState.store},orderForm(){return this.orderState.orderForm},shoppingCart(){return this.orderState.shoppingCart},grandTotal(){return this.shoppingCart?this.shoppingCart.totals.grand_total.amount_with_currency:null},totalUncancelledProductQuantities(){return this.shoppingCart?this.shoppingCart.totals_summary.order_products.total_uncancelled_product_quantities:null}},methods:{async checkout(r){r(),await new Promise(t=>setTimeout(t,500)),await this.$router.push({name:"show-checkout",params:{alias:this.store.alias}})},async emptyCart(r){r(),await new Promise(t=>setTimeout(t,500)),this.orderState.resetOrderForm()}}},Mn={class:"z-20 fixed left-0 right-0 bottom-0 p-4"},In={class:"relative"},On={class:"flex items-center space-x-4"},Fn={class:"text-lg"},Nn={class:"absolute top-1/2 -translate-y-1/2 right-2 flex items-center justify-center rounded-full min-w-6 h-6 bg-red-500 text-white text-xs font-bold"},Bn={class:"p-2"},zn={class:"p-4"},jn={class:"border-t border-gray-100 pt-4 mt-4 space-y-8"},Un={class:"flex items-center space-x-4"},qn={class:"text-lg"};function Vn(r,t,e,s,n,a){const d=y("ShoppingCart"),l=y("Button"),m=y("CartProducts"),c=y("Drawer");return i(),x(c,{position:"right",ref:"myCartDrawer",maxWidth:"max-w-lg",showFooter:!1,scrollOnContent:!1},{trigger:z(_=>[g("div",Mn,[g("div",In,[L(l,{size:"lg",type:"primary",buttonClass:"w-full",class:"max-w-96 mx-auto",action:_.showDrawer},{default:z(()=>[g("div",On,[t[0]||(t[0]=g("span",{class:"text-lg"},"My Cart",-1)),L(d,{size:"24"}),g("span",Fn,f(a.grandTotal),1)])]),_:1},8,["action"]),g("div",Nn,[g("span",Bn,f(a.totalUncancelledProductQuantities)+" "+f(a.totalUncancelledProductQuantities==1?"item":"items"),1)])])])]),content:z(_=>[g("div",zn,[t[3]||(t[3]=g("h3",{class:"font-semibold text-gray-900 border-b border-gray-200 pb-2 mb-4"},"My Cart",-1)),L(m),g("div",jn,[a.orderForm.cart_products.length?(i(),x(l,{key:0,size:"xs",type:"light",buttonClass:"w-full",class:"max-w-96 mx-auto",action:()=>a.emptyCart(_.hideDrawer)},{default:z(()=>[...t[1]||(t[1]=[g("span",null,"Empty cart",-1)])]),_:1},8,["action"])):h("",!0),L(l,{size:"lg",type:"primary",rightIconSize:"20",action:()=>a.checkout(_.hideDrawer),buttonClass:"w-full",class:"max-w-96 mx-auto"},{default:z(()=>[g("div",Un,[t[2]||(t[2]=g("span",{class:"text-lg"},"Checkout",-1)),L(d,{size:"24"}),g("span",qn,f(a.grandTotal),1)])]),_:1},8,["action"])])])]),_:1},512)}const Hn=E(Pn,[["render",Vn]]),Wn={inject:["formState","designState","orderState","storeState","notificationState"],components:{Button:xe},props:{placement:{type:String},designCards:{type:Array}},data(){return{creatingOrder:!1}},computed:{store(){return this.storeState.store},orderForm(){return this.orderState.orderForm},shoppingCart(){return this.orderState.shoppingCart},designForm(){return this.designState.designForm},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)},deliveryMethods(){return this.orderState.deliveryMethods},hasDeliveryMethods(){return this.orderState.hasDeliveryMethods},selectedDeliveryMethod(){return this.orderState.selectedDeliveryMethod},customerDesignCard(){return this.designCards.find(r=>r.type=="customer")}},methods:{isEmpty:qr,async createOrder(){var r,t;try{this.formState.hideFormErrors();const e=this.customerDesignCard.metadata;e.show_first_name&&e.first_name_required&&this.isEmpty(this.orderForm.customer_first_name)&&this.formState.setFormError("customer_first_name","Enter your first name"),e.show_last_name&&e.last_name_required&&this.isEmpty(this.orderForm.customer_last_name)&&this.formState.setFormError("customer_last_name","Enter your last name"),e.show_mobile_number&&e.mobile_number_required&&this.isEmpty(this.orderForm.customer_mobile_number)&&this.formState.setFormError("customer_mobile_number","Enter your mobile number"),e.show_email&&e.email_required&&this.isEmpty(this.orderForm.customer_email)&&this.formState.setFormError("customer_email","Enter your email");for(let d=0;d<this.orderForm.cart_products.length;d++){const l=this.orderForm.cart_products[d];(typeof l.quantity>"u"||l.quantity===null||isNaN(parseInt(l.quantity))||parseInt(l.quantity)<1)&&this.formState.setFormError(`cart_products.${d}`,"The quantity must be a number greater than or equal to 1")}if(this.hasDeliveryMethods&&!this.selectedDeliveryMethod)this.formState.setFormError("delivery_methods","Select a delivery method");else if(this.selectedDeliveryMethod){const d=this.shoppingCart.delivery_method_options.find(m=>m.is_selected),l=this.deliveryMethods.findIndex(m=>m.id==d.id);d.is_available?d.delivery_address_is_required&&!this.orderForm.delivery_address?this.formState.setFormError(`delivery_methods.${l}.address`,"Add your address"):d.pin_location_on_map&&(!this.orderForm.delivery_address.latitude||!this.orderForm.delivery_address.longitude)?this.formState.setFormError(`delivery_methods.${l}.address`,"Edit your address to pin your location on the map"):d.schedule_is_required&&!d.schedule_date_complete?this.formState.setFormError(`delivery_methods.${l}.schedule`,`${d.name} date is required`):d.schedule_is_required&&!d.schedule_time_complete&&this.formState.setFormError(`delivery_methods.${l}.schedule`,`${d.name} time is required`):this.formState.setFormError(`delivery_methods.${l}`,`${d.name} is not available`)}if(this.formState.hasErrors)return;this.orderState.creatingOrder=!0;const s={...this.orderForm,association:"shopper",store_id:this.store.id},n=await axios.post("/api/orders",s);this.notificationState.showSuccessNotification("Order created");const a=n.data.order;await this.navigateToOrder(a)}catch(e){const s=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while creating order";this.notificationState.showWarningNotification(s),this.formState.setServerFormErrors(e),console.error("Failed to create order:",e)}finally{this.orderState.creatingOrder=!1}},async navigateToOrder(r){await this.$router.push({name:"show-shop-payment-methods",params:{order_id:r.id,alias:this.store.alias}})}}};function Gn(r,t,e,s,n,a){const d=y("Button");return i(),x(d,{size:"lg",class:"mb-20",type:"primary",buttonClass:"w-full",action:a.createOrder},{default:z(()=>[...t[0]||(t[0]=[g("span",null,"Place order",-1)])]),_:1},8,["action"])}const Zn=E(Wn,[["render",Gn]]);function Qt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Se=Qt();function rr(r){Se=r}var Xe={exec:()=>null};function P(r,t=""){let e=typeof r=="string"?r:r.source,s={replace:(n,a)=>{let d=typeof a=="string"?a:a.source;return d=d.replace(J.caret,"$1"),e=e.replace(n,d),s},getRegex:()=>new RegExp(e,t)};return s}var J={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},Yn=/^(?:[ \t]*(?:\n|$))+/,Xn=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Qn=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ke=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Kn=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Kt=/(?:[*+-]|\d{1,9}[.)])/,nr=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ir=P(nr).replace(/bull/g,Kt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Jn=P(nr).replace(/bull/g,Kt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Jt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,$n=/^[^\n]+/,$t=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,ei=P(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",$t).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ti=P(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Kt).getRegex(),yt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ea=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ai=P("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ea).replace("tag",yt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),sr=P(Jt).replace("hr",Ke).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yt).getRegex(),ri=P(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",sr).getRegex(),ta={blockquote:ri,code:Xn,def:ei,fences:Qn,heading:Kn,hr:Ke,html:ai,lheading:ir,list:ti,newline:Yn,paragraph:sr,table:Xe,text:$n},Da=P("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ke).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yt).getRegex(),ni={...ta,lheading:Jn,table:Da,paragraph:P(Jt).replace("hr",Ke).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Da).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yt).getRegex()},ii={...ta,html:P(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ea).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Xe,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:P(Jt).replace("hr",Ke).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ir).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},si=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,di=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,dr=/^( {2,}|\\)\n(?!\s*$)/,oi=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,bt=/[\p{P}\p{S}]/u,aa=/[\s\p{P}\p{S}]/u,or=/[^\s\p{P}\p{S}]/u,li=P(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,aa).getRegex(),lr=/(?!~)[\p{P}\p{S}]/u,ci=/(?!~)[\s\p{P}\p{S}]/u,gi=/(?:[^\s\p{P}\p{S}]|~)/u,ui=P(/link|code|html/,"g").replace("link",new RegExp("\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)")).replace("code",new RegExp("(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)")).replace("html",/<(?! )[^<>]*?>/).getRegex(),cr=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,mi=P(cr,"u").replace(/punct/g,bt).getRegex(),hi=P(cr,"u").replace(/punct/g,lr).getRegex(),gr="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",_i=P(gr,"gu").replace(/notPunctSpace/g,or).replace(/punctSpace/g,aa).replace(/punct/g,bt).getRegex(),fi=P(gr,"gu").replace(/notPunctSpace/g,gi).replace(/punctSpace/g,ci).replace(/punct/g,lr).getRegex(),pi=P("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,or).replace(/punctSpace/g,aa).replace(/punct/g,bt).getRegex(),yi=P(/\\(punct)/,"gu").replace(/punct/g,bt).getRegex(),bi=P(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),xi=P(ea).replace("(?:-->|$)","-->").getRegex(),Ci=P("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",xi).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ht=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,ki=P(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ht).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ur=P(/^!?\[(label)\]\[(ref)\]/).replace("label",ht).replace("ref",$t).getRegex(),mr=P(/^!?\[(ref)\](?:\[\])?/).replace("ref",$t).getRegex(),wi=P("reflink|nolink(?!\\()","g").replace("reflink",ur).replace("nolink",mr).getRegex(),Pa=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,ra={_backpedal:Xe,anyPunctuation:yi,autolink:bi,blockSkip:ui,br:dr,code:di,del:Xe,emStrongLDelim:mi,emStrongRDelimAst:_i,emStrongRDelimUnd:pi,escape:si,link:ki,nolink:mr,punctuation:li,reflink:ur,reflinkSearch:wi,tag:Ci,text:oi,url:Xe},Si={...ra,link:P(/^!?\[(label)\]\((.*?)\)/).replace("label",ht).getRegex(),reflink:P(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ht).getRegex()},qt={...ra,emStrongRDelimAst:fi,emStrongLDelim:hi,url:P(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Pa).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:P(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Pa).getRegex()},vi={...qt,br:P(dr).replace("{2,}","*").getRegex(),text:P(qt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},it={normal:ta,gfm:ni,pedantic:ii},Ue={normal:ra,gfm:qt,breaks:vi,pedantic:Si},Ti={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ma=r=>Ti[r];function ce(r,t){if(t){if(J.escapeTest.test(r))return r.replace(J.escapeReplace,Ma)}else if(J.escapeTestNoEncode.test(r))return r.replace(J.escapeReplaceNoEncode,Ma);return r}function Ia(r){try{r=encodeURI(r).replace(J.percentDecode,"%")}catch{return null}return r}function Oa(r,t){var a;let e=r.replace(J.findPipe,(d,l,m)=>{let c=!1,_=l;for(;--_>=0&&m[_]==="\\";)c=!c;return c?"|":" |"}),s=e.split(J.splitPipe),n=0;if(s[0].trim()||s.shift(),s.length>0&&!((a=s.at(-1))!=null&&a.trim())&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;n<s.length;n++)s[n]=s[n].trim().replace(J.slashPipe,"|");return s}function qe(r,t,e){let s=r.length;if(s===0)return"";let n=0;for(;n<s&&r.charAt(s-n-1)===t;)n++;return r.slice(0,s-n)}function Ri(r,t){if(r.indexOf(t[1])===-1)return-1;let e=0;for(let s=0;s<r.length;s++)if(r[s]==="\\")s++;else if(r[s]===t[0])e++;else if(r[s]===t[1]&&(e--,e<0))return s;return e>0?-2:-1}function Fa(r,t,e,s,n){let a=t.href,d=t.title||null,l=r[1].replace(n.other.outputLinkReplace,"$1");s.state.inLink=!0;let m={type:r[0].charAt(0)==="!"?"image":"link",raw:e,href:a,title:d,text:l,tokens:s.inlineTokens(l)};return s.state.inLink=!1,m}function Li(r,t,e){let s=r.match(e.other.indentCodeCompensation);if(s===null)return t;let n=s[1];return t.split(`
`).map(a=>{let d=a.match(e.other.beginningSpace);if(d===null)return a;let[l]=d;return l.length>=n.length?a.slice(n.length):a}).join(`
`)}var _t=class{constructor(r){I(this,"options");I(this,"rules");I(this,"lexer");this.options=r||Se}space(r){let t=this.rules.block.newline.exec(r);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(r){let t=this.rules.block.code.exec(r);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:qe(e,`
`)}}}fences(r){let t=this.rules.block.fences.exec(r);if(t){let e=t[0],s=Li(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(r){let t=this.rules.block.heading.exec(r);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let s=qe(e,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(e=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(r){let t=this.rules.block.hr.exec(r);if(t)return{type:"hr",raw:qe(t[0],`
`)}}blockquote(r){let t=this.rules.block.blockquote.exec(r);if(t){let e=qe(t[0],`
`).split(`
`),s="",n="",a=[];for(;e.length>0;){let d=!1,l=[],m;for(m=0;m<e.length;m++)if(this.rules.other.blockquoteStart.test(e[m]))l.push(e[m]),d=!0;else if(!d)l.push(e[m]);else break;e=e.slice(m);let c=l.join(`
`),_=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${c}`:c,n=n?`${n}
${_}`:_;let b=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(_,a,!0),this.lexer.state.top=b,e.length===0)break;let p=a.at(-1);if((p==null?void 0:p.type)==="code")break;if((p==null?void 0:p.type)==="blockquote"){let A=p,k=A.raw+`
`+e.join(`
`),F=this.blockquote(k);a[a.length-1]=F,s=s.substring(0,s.length-A.raw.length)+F.raw,n=n.substring(0,n.length-A.text.length)+F.text;break}else if((p==null?void 0:p.type)==="list"){let A=p,k=A.raw+`
`+e.join(`
`),F=this.list(k);a[a.length-1]=F,s=s.substring(0,s.length-p.raw.length)+F.raw,n=n.substring(0,n.length-A.raw.length)+F.raw,e=k.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:a,text:n}}}list(r){let t=this.rules.block.list.exec(r);if(t){let e=t[1].trim(),s=e.length>1,n={type:"list",raw:"",ordered:s,start:s?+e.slice(0,-1):"",loose:!1,items:[]};e=s?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=s?e:"[*+-]");let a=this.rules.other.listItemRegex(e),d=!1;for(;r;){let m=!1,c="",_="";if(!(t=a.exec(r))||this.rules.block.hr.test(r))break;c=t[0],r=r.substring(c.length);let b=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,oe=>" ".repeat(3*oe.length)),p=r.split(`
`,1)[0],A=!b.trim(),k=0;if(this.options.pedantic?(k=2,_=b.trimStart()):A?k=t[1].length+1:(k=t[2].search(this.rules.other.nonSpaceChar),k=k>4?1:k,_=b.slice(k),k+=t[1].length),A&&this.rules.other.blankLine.test(p)&&(c+=p+`
`,r=r.substring(p.length+1),m=!0),!m){let oe=this.rules.other.nextBulletRegex(k),ve=this.rules.other.hrRegex(k),ue=this.rules.other.fencesBeginRegex(k),V=this.rules.other.headingBeginRegex(k),me=this.rules.other.htmlBeginRegex(k);for(;r;){let he=r.split(`
`,1)[0],_e;if(p=he,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),_e=p):_e=p.replace(this.rules.other.tabCharGlobal,"    "),ue.test(p)||V.test(p)||me.test(p)||oe.test(p)||ve.test(p))break;if(_e.search(this.rules.other.nonSpaceChar)>=k||!p.trim())_+=`
`+_e.slice(k);else{if(A||b.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||ue.test(b)||V.test(b)||ve.test(b))break;_+=`
`+p}!A&&!p.trim()&&(A=!0),c+=he+`
`,r=r.substring(he.length+1),b=_e.slice(k)}}n.loose||(d?n.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(d=!0));let F=null,j;this.options.gfm&&(F=this.rules.other.listIsTask.exec(_),F&&(j=F[0]!=="[ ] ",_=_.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:c,task:!!F,checked:j,loose:!1,text:_,tokens:[]}),n.raw+=c}let l=n.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let m=0;m<n.items.length;m++)if(this.lexer.state.top=!1,n.items[m].tokens=this.lexer.blockTokens(n.items[m].text,[]),!n.loose){let c=n.items[m].tokens.filter(b=>b.type==="space"),_=c.length>0&&c.some(b=>this.rules.other.anyLine.test(b.raw));n.loose=_}if(n.loose)for(let m=0;m<n.items.length;m++)n.items[m].loose=!0;return n}}html(r){let t=this.rules.block.html.exec(r);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(r){let t=this.rules.block.def.exec(r);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:s,title:n}}}table(r){var d;let t=this.rules.block.table.exec(r);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=Oa(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=(d=t[3])!=null&&d.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===s.length){for(let l of s)this.rules.other.tableAlignRight.test(l)?a.align.push("right"):this.rules.other.tableAlignCenter.test(l)?a.align.push("center"):this.rules.other.tableAlignLeft.test(l)?a.align.push("left"):a.align.push(null);for(let l=0;l<e.length;l++)a.header.push({text:e[l],tokens:this.lexer.inline(e[l]),header:!0,align:a.align[l]});for(let l of n)a.rows.push(Oa(l,a.header.length).map((m,c)=>({text:m,tokens:this.lexer.inline(m),header:!1,align:a.align[c]})));return a}}lheading(r){let t=this.rules.block.lheading.exec(r);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(r){let t=this.rules.block.paragraph.exec(r);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(r){let t=this.rules.block.text.exec(r);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(r){let t=this.rules.inline.escape.exec(r);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(r){let t=this.rules.inline.tag.exec(r);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(r){let t=this.rules.inline.link.exec(r);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let a=qe(e.slice(0,-1),"\\");if((e.length-a.length)%2===0)return}else{let a=Ri(t[2],"()");if(a===-2)return;if(a>-1){let d=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,d).trim(),t[3]=""}}let s=t[2],n="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(s);a&&(s=a[1],n=a[3])}else n=t[3]?t[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?s=s.slice(1):s=s.slice(1,-1)),Fa(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(r,t){let e;if((e=this.rules.inline.reflink.exec(r))||(e=this.rules.inline.nolink.exec(r))){let s=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=t[s.toLowerCase()];if(!n){let a=e[0].charAt(0);return{type:"text",raw:a,text:a}}return Fa(e,n,e[0],this.lexer,this.rules)}}emStrong(r,t,e=""){let s=this.rules.inline.emStrongLDelim.exec(r);if(!(!s||s[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!e||this.rules.inline.punctuation.exec(e))){let n=[...s[0]].length-1,a,d,l=n,m=0,c=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*r.length+n);(s=c.exec(t))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(d=[...a].length,s[3]||s[4]){l+=d;continue}else if((s[5]||s[6])&&n%3&&!((n+d)%3)){m+=d;continue}if(l-=d,l>0)continue;d=Math.min(d,d+l+m);let _=[...s[0]][0].length,b=r.slice(0,n+s.index+_+d);if(Math.min(n,d)%2){let A=b.slice(1,-1);return{type:"em",raw:b,text:A,tokens:this.lexer.inlineTokens(A)}}let p=b.slice(2,-2);return{type:"strong",raw:b,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(r){let t=this.rules.inline.code.exec(r);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(e),n=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return s&&n&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(r){let t=this.rules.inline.br.exec(r);if(t)return{type:"br",raw:t[0]}}del(r){let t=this.rules.inline.del.exec(r);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(r){let t=this.rules.inline.autolink.exec(r);if(t){let e,s;return t[2]==="@"?(e=t[1],s="mailto:"+e):(e=t[1],s=e),{type:"link",raw:t[0],text:e,href:s,tokens:[{type:"text",raw:e,text:e}]}}}url(r){var e;let t;if(t=this.rules.inline.url.exec(r)){let s,n;if(t[2]==="@")s=t[0],n="mailto:"+s;else{let a;do a=t[0],t[0]=((e=this.rules.inline._backpedal.exec(t[0]))==null?void 0:e[0])??"";while(a!==t[0]);s=t[0],t[1]==="www."?n="http://"+t[0]:n=t[0]}return{type:"link",raw:t[0],text:s,href:n,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(r){let t=this.rules.inline.text.exec(r);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},ie=class Vt{constructor(t){I(this,"tokens");I(this,"options");I(this,"state");I(this,"tokenizer");I(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Se,this.options.tokenizer=this.options.tokenizer||new _t,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:J,block:it.normal,inline:Ue.normal};this.options.pedantic?(e.block=it.pedantic,e.inline=Ue.pedantic):this.options.gfm&&(e.block=it.gfm,this.options.breaks?e.inline=Ue.breaks:e.inline=Ue.gfm),this.tokenizer.rules=e}static get rules(){return{block:it,inline:Ue}}static lex(t,e){return new Vt(e).lex(t)}static lexInline(t,e){return new Vt(e).inlineTokens(t)}lex(t){t=t.replace(J.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let s=this.inlineQueue[e];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],s=!1){var n,a,d;for(this.options.pedantic&&(t=t.replace(J.tabCharGlobal,"    ").replace(J.spaceLine,""));t;){let l;if((a=(n=this.options.extensions)==null?void 0:n.block)!=null&&a.some(c=>(l=c.call({lexer:this},t,e))?(t=t.substring(l.raw.length),e.push(l),!0):!1))continue;if(l=this.tokenizer.space(t)){t=t.substring(l.raw.length);let c=e.at(-1);l.raw.length===1&&c!==void 0?c.raw+=`
`:e.push(l);continue}if(l=this.tokenizer.code(t)){t=t.substring(l.raw.length);let c=e.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+l.raw,c.text+=`
`+l.text,this.inlineQueue.at(-1).src=c.text):e.push(l);continue}if(l=this.tokenizer.fences(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.heading(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.hr(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.blockquote(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.list(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.html(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.def(t)){t=t.substring(l.raw.length);let c=e.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+l.raw,c.text+=`
`+l.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title},e.push(l));continue}if(l=this.tokenizer.table(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.lheading(t)){t=t.substring(l.raw.length),e.push(l);continue}let m=t;if((d=this.options.extensions)!=null&&d.startBlock){let c=1/0,_=t.slice(1),b;this.options.extensions.startBlock.forEach(p=>{b=p.call({lexer:this},_),typeof b=="number"&&b>=0&&(c=Math.min(c,b))}),c<1/0&&c>=0&&(m=t.substring(0,c+1))}if(this.state.top&&(l=this.tokenizer.paragraph(m))){let c=e.at(-1);s&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+l.raw,c.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):e.push(l),s=m.length!==t.length,t=t.substring(l.raw.length);continue}if(l=this.tokenizer.text(t)){t=t.substring(l.raw.length);let c=e.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+l.raw,c.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):e.push(l);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){var l,m,c,_,b;let s=t,n=null;if(this.tokens.links){let p=Object.keys(this.tokens.links);if(p.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)p.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,n.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=((m=(l=this.options.hooks)==null?void 0:l.emStrongMask)==null?void 0:m.call({lexer:this},s))??s;let a=!1,d="";for(;t;){a||(d=""),a=!1;let p;if((_=(c=this.options.extensions)==null?void 0:c.inline)!=null&&_.some(k=>(p=k.call({lexer:this},t,e))?(t=t.substring(p.raw.length),e.push(p),!0):!1))continue;if(p=this.tokenizer.escape(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.tag(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.link(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(p.raw.length);let k=e.at(-1);p.type==="text"&&(k==null?void 0:k.type)==="text"?(k.raw+=p.raw,k.text+=p.text):e.push(p);continue}if(p=this.tokenizer.emStrong(t,s,d)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.codespan(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.br(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.del(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.autolink(t)){t=t.substring(p.raw.length),e.push(p);continue}if(!this.state.inLink&&(p=this.tokenizer.url(t))){t=t.substring(p.raw.length),e.push(p);continue}let A=t;if((b=this.options.extensions)!=null&&b.startInline){let k=1/0,F=t.slice(1),j;this.options.extensions.startInline.forEach(oe=>{j=oe.call({lexer:this},F),typeof j=="number"&&j>=0&&(k=Math.min(k,j))}),k<1/0&&k>=0&&(A=t.substring(0,k+1))}if(p=this.tokenizer.inlineText(A)){t=t.substring(p.raw.length),p.raw.slice(-1)!=="_"&&(d=p.raw.slice(-1)),a=!0;let k=e.at(-1);(k==null?void 0:k.type)==="text"?(k.raw+=p.raw,k.text+=p.text):e.push(p);continue}if(t){let k="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(k);break}else throw new Error(k)}}return e}},ft=class{constructor(r){I(this,"options");I(this,"parser");this.options=r||Se}space(r){return""}code({text:r,lang:t,escaped:e}){var a;let s=(a=(t||"").match(J.notSpaceStart))==null?void 0:a[0],n=r.replace(J.endingNewline,"")+`
`;return s?'<pre><code class="language-'+ce(s)+'">'+(e?n:ce(n,!0))+`</code></pre>
`:"<pre><code>"+(e?n:ce(n,!0))+`</code></pre>
`}blockquote({tokens:r}){return`<blockquote>
${this.parser.parse(r)}</blockquote>
`}html({text:r}){return r}def(r){return""}heading({tokens:r,depth:t}){return`<h${t}>${this.parser.parseInline(r)}</h${t}>
`}hr(r){return`<hr>
`}list(r){let t=r.ordered,e=r.start,s="";for(let d=0;d<r.items.length;d++){let l=r.items[d];s+=this.listitem(l)}let n=t?"ol":"ul",a=t&&e!==1?' start="'+e+'"':"";return"<"+n+a+`>
`+s+"</"+n+`>
`}listitem(r){var e;let t="";if(r.task){let s=this.checkbox({checked:!!r.checked});r.loose?((e=r.tokens[0])==null?void 0:e.type)==="paragraph"?(r.tokens[0].text=s+" "+r.tokens[0].text,r.tokens[0].tokens&&r.tokens[0].tokens.length>0&&r.tokens[0].tokens[0].type==="text"&&(r.tokens[0].tokens[0].text=s+" "+ce(r.tokens[0].tokens[0].text),r.tokens[0].tokens[0].escaped=!0)):r.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):t+=s+" "}return t+=this.parser.parse(r.tokens,!!r.loose),`<li>${t}</li>
`}checkbox({checked:r}){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>
`}table(r){let t="",e="";for(let n=0;n<r.header.length;n++)e+=this.tablecell(r.header[n]);t+=this.tablerow({text:e});let s="";for(let n=0;n<r.rows.length;n++){let a=r.rows[n];e="";for(let d=0;d<a.length;d++)e+=this.tablecell(a[d]);s+=this.tablerow({text:e})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:r}){return`<tr>
${r}</tr>
`}tablecell(r){let t=this.parser.parseInline(r.tokens),e=r.header?"th":"td";return(r.align?`<${e} align="${r.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:r}){return`<strong>${this.parser.parseInline(r)}</strong>`}em({tokens:r}){return`<em>${this.parser.parseInline(r)}</em>`}codespan({text:r}){return`<code>${ce(r,!0)}</code>`}br(r){return"<br>"}del({tokens:r}){return`<del>${this.parser.parseInline(r)}</del>`}link({href:r,title:t,tokens:e}){let s=this.parser.parseInline(e),n=Ia(r);if(n===null)return s;r=n;let a='<a href="'+r+'"';return t&&(a+=' title="'+ce(t)+'"'),a+=">"+s+"</a>",a}image({href:r,title:t,text:e,tokens:s}){s&&(e=this.parser.parseInline(s,this.parser.textRenderer));let n=Ia(r);if(n===null)return ce(e);r=n;let a=`<img src="${r}" alt="${e}"`;return t&&(a+=` title="${ce(t)}"`),a+=">",a}text(r){return"tokens"in r&&r.tokens?this.parser.parseInline(r.tokens):"escaped"in r&&r.escaped?r.text:ce(r.text)}},na=class{strong({text:r}){return r}em({text:r}){return r}codespan({text:r}){return r}del({text:r}){return r}html({text:r}){return r}text({text:r}){return r}link({text:r}){return""+r}image({text:r}){return""+r}br(){return""}},se=class Ht{constructor(t){I(this,"options");I(this,"renderer");I(this,"textRenderer");this.options=t||Se,this.options.renderer=this.options.renderer||new ft,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new na}static parse(t,e){return new Ht(e).parse(t)}static parseInline(t,e){return new Ht(e).parseInline(t)}parse(t,e=!0){var n,a;let s="";for(let d=0;d<t.length;d++){let l=t[d];if((a=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&a[l.type]){let c=l,_=this.options.extensions.renderers[c.type].call({parser:this},c);if(_!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){s+=_||"";continue}}let m=l;switch(m.type){case"space":{s+=this.renderer.space(m);continue}case"hr":{s+=this.renderer.hr(m);continue}case"heading":{s+=this.renderer.heading(m);continue}case"code":{s+=this.renderer.code(m);continue}case"table":{s+=this.renderer.table(m);continue}case"blockquote":{s+=this.renderer.blockquote(m);continue}case"list":{s+=this.renderer.list(m);continue}case"html":{s+=this.renderer.html(m);continue}case"def":{s+=this.renderer.def(m);continue}case"paragraph":{s+=this.renderer.paragraph(m);continue}case"text":{let c=m,_=this.renderer.text(c);for(;d+1<t.length&&t[d+1].type==="text";)c=t[++d],_+=`
`+this.renderer.text(c);e?s+=this.renderer.paragraph({type:"paragraph",raw:_,text:_,tokens:[{type:"text",raw:_,text:_,escaped:!0}]}):s+=_;continue}default:{let c='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return s}parseInline(t,e=this.renderer){var n,a;let s="";for(let d=0;d<t.length;d++){let l=t[d];if((a=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&a[l.type]){let c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){s+=c||"";continue}}let m=l;switch(m.type){case"escape":{s+=e.text(m);break}case"html":{s+=e.html(m);break}case"link":{s+=e.link(m);break}case"image":{s+=e.image(m);break}case"strong":{s+=e.strong(m);break}case"em":{s+=e.em(m);break}case"codespan":{s+=e.codespan(m);break}case"br":{s+=e.br(m);break}case"del":{s+=e.del(m);break}case"text":{s+=e.text(m);break}default:{let c='Token with "'+m.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return s}},ot,Ye=(ot=class{constructor(r){I(this,"options");I(this,"block");this.options=r||Se}preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}emStrongMask(r){return r}provideLexer(){return this.block?ie.lex:ie.lexInline}provideParser(){return this.block?se.parse:se.parseInline}},I(ot,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),I(ot,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),ot),Ei=class{constructor(...r){I(this,"defaults",Qt());I(this,"options",this.setOptions);I(this,"parse",this.parseMarkdown(!0));I(this,"parseInline",this.parseMarkdown(!1));I(this,"Parser",se);I(this,"Renderer",ft);I(this,"TextRenderer",na);I(this,"Lexer",ie);I(this,"Tokenizer",_t);I(this,"Hooks",Ye);this.use(...r)}walkTokens(r,t){var s,n;let e=[];for(let a of r)switch(e=e.concat(t.call(this,a)),a.type){case"table":{let d=a;for(let l of d.header)e=e.concat(this.walkTokens(l.tokens,t));for(let l of d.rows)for(let m of l)e=e.concat(this.walkTokens(m.tokens,t));break}case"list":{let d=a;e=e.concat(this.walkTokens(d.items,t));break}default:{let d=a;(n=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&n[d.type]?this.defaults.extensions.childTokens[d.type].forEach(l=>{let m=d[l].flat(1/0);e=e.concat(this.walkTokens(m,t))}):d.tokens&&(e=e.concat(this.walkTokens(d.tokens,t)))}}return e}use(...r){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(e=>{let s={...e};if(s.async=this.defaults.async||s.async||!1,e.extensions&&(e.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let a=t.renderers[n.name];a?t.renderers[n.name]=function(...d){let l=n.renderer.apply(this,d);return l===!1&&(l=a.apply(this,d)),l}:t.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=t[n.level];a?a.unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),s.extensions=t),e.renderer){let n=this.defaults.renderer||new ft(this.defaults);for(let a in e.renderer){if(!(a in n))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let d=a,l=e.renderer[d],m=n[d];n[d]=(...c)=>{let _=l.apply(n,c);return _===!1&&(_=m.apply(n,c)),_||""}}s.renderer=n}if(e.tokenizer){let n=this.defaults.tokenizer||new _t(this.defaults);for(let a in e.tokenizer){if(!(a in n))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let d=a,l=e.tokenizer[d],m=n[d];n[d]=(...c)=>{let _=l.apply(n,c);return _===!1&&(_=m.apply(n,c)),_}}s.tokenizer=n}if(e.hooks){let n=this.defaults.hooks||new Ye;for(let a in e.hooks){if(!(a in n))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let d=a,l=e.hooks[d],m=n[d];Ye.passThroughHooks.has(a)?n[d]=c=>{if(this.defaults.async&&Ye.passThroughHooksRespectAsync.has(a))return(async()=>{let b=await l.call(n,c);return m.call(n,b)})();let _=l.call(n,c);return m.call(n,_)}:n[d]=(...c)=>{if(this.defaults.async)return(async()=>{let b=await l.apply(n,c);return b===!1&&(b=await m.apply(n,c)),b})();let _=l.apply(n,c);return _===!1&&(_=m.apply(n,c)),_}}s.hooks=n}if(e.walkTokens){let n=this.defaults.walkTokens,a=e.walkTokens;s.walkTokens=function(d){let l=[];return l.push(a.call(this,d)),n&&(l=l.concat(n.call(this,d))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(r){return this.defaults={...this.defaults,...r},this}lexer(r,t){return ie.lex(r,t??this.defaults)}parser(r,t){return se.parse(r,t??this.defaults)}parseMarkdown(r){return(t,e)=>{let s={...e},n={...this.defaults,...s},a=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&s.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(n.hooks&&(n.hooks.options=n,n.hooks.block=r),n.async)return(async()=>{let d=n.hooks?await n.hooks.preprocess(t):t,l=await(n.hooks?await n.hooks.provideLexer():r?ie.lex:ie.lexInline)(d,n),m=n.hooks?await n.hooks.processAllTokens(l):l;n.walkTokens&&await Promise.all(this.walkTokens(m,n.walkTokens));let c=await(n.hooks?await n.hooks.provideParser():r?se.parse:se.parseInline)(m,n);return n.hooks?await n.hooks.postprocess(c):c})().catch(a);try{n.hooks&&(t=n.hooks.preprocess(t));let d=(n.hooks?n.hooks.provideLexer():r?ie.lex:ie.lexInline)(t,n);n.hooks&&(d=n.hooks.processAllTokens(d)),n.walkTokens&&this.walkTokens(d,n.walkTokens);let l=(n.hooks?n.hooks.provideParser():r?se.parse:se.parseInline)(d,n);return n.hooks&&(l=n.hooks.postprocess(l)),l}catch(d){return a(d)}}}onError(r,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,r){let s="<p>An error occurred:</p><pre>"+ce(e.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(e);throw e}}},we=new Ei;function M(r,t){return we.parse(r,t)}M.options=M.setOptions=function(r){return we.setOptions(r),M.defaults=we.defaults,rr(M.defaults),M};M.getDefaults=Qt;M.defaults=Se;M.use=function(...r){return we.use(...r),M.defaults=we.defaults,rr(M.defaults),M};M.walkTokens=function(r,t){return we.walkTokens(r,t)};M.parseInline=we.parseInline;M.Parser=se;M.parser=se.parse;M.Renderer=ft;M.TextRenderer=na;M.Lexer=ie;M.lexer=ie.lex;M.Tokenizer=_t;M.Hooks=Ye;M.parse=M;M.options;M.setOptions;M.use;M.walkTokens;M.parseInline;se.parse;ie.lex;/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:hr,setPrototypeOf:Na,isFrozen:Ai,getPrototypeOf:Di,getOwnPropertyDescriptor:Pi}=Object;let{freeze:$,seal:re,create:Wt}=Object,{apply:Gt,construct:Zt}=typeof Reflect<"u"&&Reflect;$||($=function(t){return t});re||(re=function(t){return t});Gt||(Gt=function(t,e){for(var s=arguments.length,n=new Array(s>2?s-2:0),a=2;a<s;a++)n[a-2]=arguments[a];return t.apply(e,n)});Zt||(Zt=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return new t(...s)});const st=ee(Array.prototype.forEach),Mi=ee(Array.prototype.lastIndexOf),Ba=ee(Array.prototype.pop),Ve=ee(Array.prototype.push),Ii=ee(Array.prototype.splice),lt=ee(String.prototype.toLowerCase),Ft=ee(String.prototype.toString),Nt=ee(String.prototype.match),He=ee(String.prototype.replace),Oi=ee(String.prototype.indexOf),Fi=ee(String.prototype.trim),ne=ee(Object.prototype.hasOwnProperty),K=ee(RegExp.prototype.test),We=Ni(TypeError);function ee(r){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return Gt(r,t,s)}}function Ni(r){return function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return Zt(r,e)}}function D(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lt;Na&&Na(r,null);let s=t.length;for(;s--;){let n=t[s];if(typeof n=="string"){const a=e(n);a!==n&&(Ai(t)||(t[s]=a),n=a)}r[n]=!0}return r}function Bi(r){for(let t=0;t<r.length;t++)ne(r,t)||(r[t]=null);return r}function be(r){const t=Wt(null);for(const[e,s]of hr(r))ne(r,e)&&(Array.isArray(s)?t[e]=Bi(s):s&&typeof s=="object"&&s.constructor===Object?t[e]=be(s):t[e]=s);return t}function Ge(r,t){for(;r!==null;){const s=Pi(r,t);if(s){if(s.get)return ee(s.get);if(typeof s.value=="function")return ee(s.value)}r=Di(r)}function e(){return null}return e}const za=$(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Bt=$(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),zt=$(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),zi=$(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),jt=$(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ji=$(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ja=$(["#text"]),Ua=$(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ut=$(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qa=$(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),dt=$(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ui=re(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qi=re(/<%[\w\W]*|[\w\W]*%>/gm),Vi=re(/\$\{[\w\W]*/gm),Hi=re(/^data-[\-\w.\u00B7-\uFFFF]+$/),Wi=re(/^aria-[\-\w]+$/),_r=re(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Gi=re(/^(?:\w+script|data):/i),Zi=re(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),fr=re(/^html$/i),Yi=re(/^[a-z][.\w]*(-[.\w]+)+$/i);var Va=Object.freeze({__proto__:null,ARIA_ATTR:Wi,ATTR_WHITESPACE:Zi,CUSTOM_ELEMENT:Yi,DATA_ATTR:Hi,DOCTYPE_NAME:fr,ERB_EXPR:qi,IS_ALLOWED_URI:_r,IS_SCRIPT_OR_DATA:Gi,MUSTACHE_EXPR:Ui,TMPLIT_EXPR:Vi});const Ze={element:1,text:3,progressingInstruction:7,comment:8,document:9},Xi=function(){return typeof window>"u"?null:window},Qi=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const n="data-tt-policy-suffix";e&&e.hasAttribute(n)&&(s=e.getAttribute(n));const a="dompurify"+(s?"#"+s:"");try{return t.createPolicy(a,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Ha=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function pr(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xi();const t=T=>pr(T);if(t.version="3.3.0",t.removed=[],!r||!r.document||r.document.nodeType!==Ze.document||!r.Element)return t.isSupported=!1,t;let{document:e}=r;const s=e,n=s.currentScript,{DocumentFragment:a,HTMLTemplateElement:d,Node:l,Element:m,NodeFilter:c,NamedNodeMap:_=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:b,DOMParser:p,trustedTypes:A}=r,k=m.prototype,F=Ge(k,"cloneNode"),j=Ge(k,"remove"),oe=Ge(k,"nextSibling"),ve=Ge(k,"childNodes"),ue=Ge(k,"parentNode");if(typeof d=="function"){const T=e.createElement("template");T.content&&T.content.ownerDocument&&(e=T.content.ownerDocument)}let V,me="";const{implementation:he,createNodeIterator:_e,createDocumentFragment:Ct,getElementsByTagName:kt}=e,{importNode:wt}=s;let Z=Ha();t.isSupported=typeof hr=="function"&&typeof ue=="function"&&he&&he.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Oe,ERB_EXPR:Fe,TMPLIT_EXPR:R,DATA_ATTR:St,ARIA_ATTR:br,IS_SCRIPT_OR_DATA:xr,ATTR_WHITESPACE:ia,CUSTOM_ELEMENT:Cr}=Va;let{IS_ALLOWED_URI:sa}=Va,W=null;const da=D({},[...za,...Bt,...zt,...jt,...ja]);let Y=null;const oa=D({},[...Ua,...Ut,...qa,...dt]);let U=Object.seal(Wt(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ne=null,vt=null;const Te=Object.seal(Wt(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let la=!0,Tt=!0,ca=!1,ga=!0,Re=!1,Je=!0,Ce=!1,Rt=!1,Lt=!1,Le=!1,$e=!1,et=!1,ua=!0,ma=!1;const kr="user-content-";let Et=!0,Be=!1,Ee={},Ae=null;const ha=D({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let _a=null;const fa=D({},["audio","video","img","source","image","track"]);let At=null;const pa=D({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tt="http://www.w3.org/1998/Math/MathML",at="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml";let De=fe,Dt=!1,Pt=null;const wr=D({},[tt,at,fe],Ft);let rt=D({},["mi","mo","mn","ms","mtext"]),nt=D({},["annotation-xml"]);const Sr=D({},["title","style","font","a","script"]);let ze=null;const vr=["application/xhtml+xml","text/html"],Tr="text/html";let G=null,Pe=null;const Rr=e.createElement("form"),ya=function(u){return u instanceof RegExp||u instanceof Function},Mt=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Pe&&Pe===u)){if((!u||typeof u!="object")&&(u={}),u=be(u),ze=vr.indexOf(u.PARSER_MEDIA_TYPE)===-1?Tr:u.PARSER_MEDIA_TYPE,G=ze==="application/xhtml+xml"?Ft:lt,W=ne(u,"ALLOWED_TAGS")?D({},u.ALLOWED_TAGS,G):da,Y=ne(u,"ALLOWED_ATTR")?D({},u.ALLOWED_ATTR,G):oa,Pt=ne(u,"ALLOWED_NAMESPACES")?D({},u.ALLOWED_NAMESPACES,Ft):wr,At=ne(u,"ADD_URI_SAFE_ATTR")?D(be(pa),u.ADD_URI_SAFE_ATTR,G):pa,_a=ne(u,"ADD_DATA_URI_TAGS")?D(be(fa),u.ADD_DATA_URI_TAGS,G):fa,Ae=ne(u,"FORBID_CONTENTS")?D({},u.FORBID_CONTENTS,G):ha,Ne=ne(u,"FORBID_TAGS")?D({},u.FORBID_TAGS,G):be({}),vt=ne(u,"FORBID_ATTR")?D({},u.FORBID_ATTR,G):be({}),Ee=ne(u,"USE_PROFILES")?u.USE_PROFILES:!1,la=u.ALLOW_ARIA_ATTR!==!1,Tt=u.ALLOW_DATA_ATTR!==!1,ca=u.ALLOW_UNKNOWN_PROTOCOLS||!1,ga=u.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Re=u.SAFE_FOR_TEMPLATES||!1,Je=u.SAFE_FOR_XML!==!1,Ce=u.WHOLE_DOCUMENT||!1,Le=u.RETURN_DOM||!1,$e=u.RETURN_DOM_FRAGMENT||!1,et=u.RETURN_TRUSTED_TYPE||!1,Lt=u.FORCE_BODY||!1,ua=u.SANITIZE_DOM!==!1,ma=u.SANITIZE_NAMED_PROPS||!1,Et=u.KEEP_CONTENT!==!1,Be=u.IN_PLACE||!1,sa=u.ALLOWED_URI_REGEXP||_r,De=u.NAMESPACE||fe,rt=u.MATHML_TEXT_INTEGRATION_POINTS||rt,nt=u.HTML_INTEGRATION_POINTS||nt,U=u.CUSTOM_ELEMENT_HANDLING||{},u.CUSTOM_ELEMENT_HANDLING&&ya(u.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=u.CUSTOM_ELEMENT_HANDLING.tagNameCheck),u.CUSTOM_ELEMENT_HANDLING&&ya(u.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=u.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),u.CUSTOM_ELEMENT_HANDLING&&typeof u.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(U.allowCustomizedBuiltInElements=u.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Re&&(Tt=!1),$e&&(Le=!0),Ee&&(W=D({},ja),Y=[],Ee.html===!0&&(D(W,za),D(Y,Ua)),Ee.svg===!0&&(D(W,Bt),D(Y,Ut),D(Y,dt)),Ee.svgFilters===!0&&(D(W,zt),D(Y,Ut),D(Y,dt)),Ee.mathMl===!0&&(D(W,jt),D(Y,qa),D(Y,dt))),u.ADD_TAGS&&(typeof u.ADD_TAGS=="function"?Te.tagCheck=u.ADD_TAGS:(W===da&&(W=be(W)),D(W,u.ADD_TAGS,G))),u.ADD_ATTR&&(typeof u.ADD_ATTR=="function"?Te.attributeCheck=u.ADD_ATTR:(Y===oa&&(Y=be(Y)),D(Y,u.ADD_ATTR,G))),u.ADD_URI_SAFE_ATTR&&D(At,u.ADD_URI_SAFE_ATTR,G),u.FORBID_CONTENTS&&(Ae===ha&&(Ae=be(Ae)),D(Ae,u.FORBID_CONTENTS,G)),Et&&(W["#text"]=!0),Ce&&D(W,["html","head","body"]),W.table&&(D(W,["tbody"]),delete Ne.tbody),u.TRUSTED_TYPES_POLICY){if(typeof u.TRUSTED_TYPES_POLICY.createHTML!="function")throw We('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof u.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw We('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');V=u.TRUSTED_TYPES_POLICY,me=V.createHTML("")}else V===void 0&&(V=Qi(A,n)),V!==null&&typeof me=="string"&&(me=V.createHTML(""));$&&$(u),Pe=u}},ba=D({},[...Bt,...zt,...zi]),xa=D({},[...jt,...ji]),Lr=function(u){let C=ue(u);(!C||!C.tagName)&&(C={namespaceURI:De,tagName:"template"});const w=lt(u.tagName),N=lt(C.tagName);return Pt[u.namespaceURI]?u.namespaceURI===at?C.namespaceURI===fe?w==="svg":C.namespaceURI===tt?w==="svg"&&(N==="annotation-xml"||rt[N]):!!ba[w]:u.namespaceURI===tt?C.namespaceURI===fe?w==="math":C.namespaceURI===at?w==="math"&&nt[N]:!!xa[w]:u.namespaceURI===fe?C.namespaceURI===at&&!nt[N]||C.namespaceURI===tt&&!rt[N]?!1:!xa[w]&&(Sr[w]||!ba[w]):!!(ze==="application/xhtml+xml"&&Pt[u.namespaceURI]):!1},le=function(u){Ve(t.removed,{element:u});try{ue(u).removeChild(u)}catch{j(u)}},ke=function(u,C){try{Ve(t.removed,{attribute:C.getAttributeNode(u),from:C})}catch{Ve(t.removed,{attribute:null,from:C})}if(C.removeAttribute(u),u==="is")if(Le||$e)try{le(C)}catch{}else try{C.setAttribute(u,"")}catch{}},Ca=function(u){let C=null,w=null;if(Lt)u="<remove></remove>"+u;else{const H=Nt(u,/^[\r\n\t ]+/);w=H&&H[0]}ze==="application/xhtml+xml"&&De===fe&&(u='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+u+"</body></html>");const N=V?V.createHTML(u):u;if(De===fe)try{C=new p().parseFromString(N,ze)}catch{}if(!C||!C.documentElement){C=he.createDocument(De,"template",null);try{C.documentElement.innerHTML=Dt?me:N}catch{}}const Q=C.body||C.documentElement;return u&&w&&Q.insertBefore(e.createTextNode(w),Q.childNodes[0]||null),De===fe?kt.call(C,Ce?"html":"body")[0]:Ce?C.documentElement:Q},ka=function(u){return _e.call(u.ownerDocument||u,u,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},It=function(u){return u instanceof b&&(typeof u.nodeName!="string"||typeof u.textContent!="string"||typeof u.removeChild!="function"||!(u.attributes instanceof _)||typeof u.removeAttribute!="function"||typeof u.setAttribute!="function"||typeof u.namespaceURI!="string"||typeof u.insertBefore!="function"||typeof u.hasChildNodes!="function")},wa=function(u){return typeof l=="function"&&u instanceof l};function pe(T,u,C){st(T,w=>{w.call(t,u,C,Pe)})}const Sa=function(u){let C=null;if(pe(Z.beforeSanitizeElements,u,null),It(u))return le(u),!0;const w=G(u.nodeName);if(pe(Z.uponSanitizeElement,u,{tagName:w,allowedTags:W}),Je&&u.hasChildNodes()&&!wa(u.firstElementChild)&&K(/<[/\w!]/g,u.innerHTML)&&K(/<[/\w!]/g,u.textContent)||u.nodeType===Ze.progressingInstruction||Je&&u.nodeType===Ze.comment&&K(/<[/\w]/g,u.data))return le(u),!0;if(!(Te.tagCheck instanceof Function&&Te.tagCheck(w))&&(!W[w]||Ne[w])){if(!Ne[w]&&Ta(w)&&(U.tagNameCheck instanceof RegExp&&K(U.tagNameCheck,w)||U.tagNameCheck instanceof Function&&U.tagNameCheck(w)))return!1;if(Et&&!Ae[w]){const N=ue(u)||u.parentNode,Q=ve(u)||u.childNodes;if(Q&&N){const H=Q.length;for(let te=H-1;te>=0;--te){const ye=F(Q[te],!0);ye.__removalCount=(u.__removalCount||0)+1,N.insertBefore(ye,oe(u))}}}return le(u),!0}return u instanceof m&&!Lr(u)||(w==="noscript"||w==="noembed"||w==="noframes")&&K(/<\/no(script|embed|frames)/i,u.innerHTML)?(le(u),!0):(Re&&u.nodeType===Ze.text&&(C=u.textContent,st([Oe,Fe,R],N=>{C=He(C,N," ")}),u.textContent!==C&&(Ve(t.removed,{element:u.cloneNode()}),u.textContent=C)),pe(Z.afterSanitizeElements,u,null),!1)},va=function(u,C,w){if(ua&&(C==="id"||C==="name")&&(w in e||w in Rr))return!1;if(!(Tt&&!vt[C]&&K(St,C))){if(!(la&&K(br,C))){if(!(Te.attributeCheck instanceof Function&&Te.attributeCheck(C,u))){if(!Y[C]||vt[C]){if(!(Ta(u)&&(U.tagNameCheck instanceof RegExp&&K(U.tagNameCheck,u)||U.tagNameCheck instanceof Function&&U.tagNameCheck(u))&&(U.attributeNameCheck instanceof RegExp&&K(U.attributeNameCheck,C)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(C,u))||C==="is"&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&K(U.tagNameCheck,w)||U.tagNameCheck instanceof Function&&U.tagNameCheck(w))))return!1}else if(!At[C]){if(!K(sa,He(w,ia,""))){if(!((C==="src"||C==="xlink:href"||C==="href")&&u!=="script"&&Oi(w,"data:")===0&&_a[u])){if(!(ca&&!K(xr,He(w,ia,"")))){if(w)return!1}}}}}}}return!0},Ta=function(u){return u!=="annotation-xml"&&Nt(u,Cr)},Ra=function(u){pe(Z.beforeSanitizeAttributes,u,null);const{attributes:C}=u;if(!C||It(u))return;const w={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Y,forceKeepAttr:void 0};let N=C.length;for(;N--;){const Q=C[N],{name:H,namespaceURI:te,value:ye}=Q,Me=G(H),Ot=ye;let X=H==="value"?Ot:Fi(Ot);if(w.attrName=Me,w.attrValue=X,w.keepAttr=!0,w.forceKeepAttr=void 0,pe(Z.uponSanitizeAttribute,u,w),X=w.attrValue,ma&&(Me==="id"||Me==="name")&&(ke(H,u),X=kr+X),Je&&K(/((--!?|])>)|<\/(style|title|textarea)/i,X)){ke(H,u);continue}if(Me==="attributename"&&Nt(X,"href")){ke(H,u);continue}if(w.forceKeepAttr)continue;if(!w.keepAttr){ke(H,u);continue}if(!ga&&K(/\/>/i,X)){ke(H,u);continue}Re&&st([Oe,Fe,R],Ea=>{X=He(X,Ea," ")});const La=G(u.nodeName);if(!va(La,Me,X)){ke(H,u);continue}if(V&&typeof A=="object"&&typeof A.getAttributeType=="function"&&!te)switch(A.getAttributeType(La,Me)){case"TrustedHTML":{X=V.createHTML(X);break}case"TrustedScriptURL":{X=V.createScriptURL(X);break}}if(X!==Ot)try{te?u.setAttributeNS(te,H,X):u.setAttribute(H,X),It(u)?le(u):Ba(t.removed)}catch{ke(H,u)}}pe(Z.afterSanitizeAttributes,u,null)},Er=function T(u){let C=null;const w=ka(u);for(pe(Z.beforeSanitizeShadowDOM,u,null);C=w.nextNode();)pe(Z.uponSanitizeShadowNode,C,null),Sa(C),Ra(C),C.content instanceof a&&T(C.content);pe(Z.afterSanitizeShadowDOM,u,null)};return t.sanitize=function(T){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=null,w=null,N=null,Q=null;if(Dt=!T,Dt&&(T="<!-->"),typeof T!="string"&&!wa(T))if(typeof T.toString=="function"){if(T=T.toString(),typeof T!="string")throw We("dirty is not a string, aborting")}else throw We("toString is not a function");if(!t.isSupported)return T;if(Rt||Mt(u),t.removed=[],typeof T=="string"&&(Be=!1),Be){if(T.nodeName){const ye=G(T.nodeName);if(!W[ye]||Ne[ye])throw We("root node is forbidden and cannot be sanitized in-place")}}else if(T instanceof l)C=Ca("<!---->"),w=C.ownerDocument.importNode(T,!0),w.nodeType===Ze.element&&w.nodeName==="BODY"||w.nodeName==="HTML"?C=w:C.appendChild(w);else{if(!Le&&!Re&&!Ce&&T.indexOf("<")===-1)return V&&et?V.createHTML(T):T;if(C=Ca(T),!C)return Le?null:et?me:""}C&&Lt&&le(C.firstChild);const H=ka(Be?T:C);for(;N=H.nextNode();)Sa(N),Ra(N),N.content instanceof a&&Er(N.content);if(Be)return T;if(Le){if($e)for(Q=Ct.call(C.ownerDocument);C.firstChild;)Q.appendChild(C.firstChild);else Q=C;return(Y.shadowroot||Y.shadowrootmode)&&(Q=wt.call(s,Q,!0)),Q}let te=Ce?C.outerHTML:C.innerHTML;return Ce&&W["!doctype"]&&C.ownerDocument&&C.ownerDocument.doctype&&C.ownerDocument.doctype.name&&K(fr,C.ownerDocument.doctype.name)&&(te="<!DOCTYPE "+C.ownerDocument.doctype.name+`>
`+te),Re&&st([Oe,Fe,R],ye=>{te=He(te,ye," ")}),V&&et?V.createHTML(te):te},t.setConfig=function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mt(T),Rt=!0},t.clearConfig=function(){Pe=null,Rt=!1},t.isValidAttribute=function(T,u,C){Pe||Mt({});const w=G(T),N=G(u);return va(w,N,C)},t.addHook=function(T,u){typeof u=="function"&&Ve(Z[T],u)},t.removeHook=function(T,u){if(u!==void 0){const C=Mi(Z[T],u);return C===-1?void 0:Ii(Z[T],C,1)[0]}return Ba(Z[T])},t.removeHooks=function(T){Z[T]=[]},t.removeAllHooks=function(){Z=Ha()},t}var Ki=pr();const Ji={props:{text:{type:String,default:""}},methods:{renderMarkdown(r){const t=r.trim(),e=new M.Renderer;e.link=function(a){const d=a.title?` title="${a.title}"`:"";return`<a href="${a.href}"${d} target="_blank" rel="noopener noreferrer">${a.text}</a>`};let s=M(t,{breaks:!0,renderer:e});return s=s.replace(/<p>\s*<\/p>$/,"").replace(/<br\s*\/?>$/,"").replace(/\s+$/,""),Ki.sanitize(s,{ADD_ATTR:["title","target"]})}}},$i=["innerHTML"];function es(r,t,e,s,n,a){return i(),o("div",{class:"markdown-content whitespace-pre-line",innerHTML:a.renderMarkdown(e.text)},null,8,$i)}const xt=E(Ji,[["render",es]]),ts={components:{Markdown:xt,AddressInput:Xt},props:{designCard:{type:Object}},methods:{isNotEmpty:Qe}},as={class:"space-y-2"};function rs(r,t,e,s,n,a){var m,c,_;const d=y("Markdown"),l=y("AddressInput");return e.designCard.metadata.upper_text||e.designCard.metadata.lower_text||e.designCard.address?(i(),o("div",{key:0,style:S({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[g("div",as,[a.isNotEmpty(e.designCard.metadata.upper_text)?(i(),x(d,{key:0,text:e.designCard.metadata.upper_text},null,8,["text"])):h("",!0),(m=e.designCard.address)!=null&&m.latitude&&((c=e.designCard.address)!=null&&c.longitude)?(i(),x(l,{key:1,height:"250px",triggerClass:"",editable:!1,address:e.designCard.address},null,8,["address"])):h("",!0),e.designCard.metadata.show_address&&((_=e.designCard.address)!=null&&_.complete_address)?(i(),o("p",{key:2,style:S({color:e.designCard.metadata.design.address_color})},f(e.designCard.address.complete_address),5)):h("",!0),a.isNotEmpty(e.designCard.metadata.lower_text)?(i(),x(d,{key:3,text:e.designCard.metadata.lower_text},null,8,["text"])):h("",!0)])],4)):h("",!0)}const ns=E(ts,[["render",rs]]),is={inject:["storeState"],components:{StoreLogo:Vr},props:{designCard:{type:Object}},computed:{store(){return this.storeState.store},alignment(){return this.designCard.metadata.alignment=="left"?"justify-start":this.designCard.metadata.alignment=="right"?"justify-end":"justify-center"}}};function ss(r,t,e,s,n,a){const d=y("StoreLogo");return a.store.logo?(i(),o("div",{key:0,class:B(["flex",a.alignment]),style:S({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[L(d,{size:"w-20 h-20",editable:!1,showButton:!1})],6)):h("",!0)}const ds=E(is,[["render",ss]]),os={components:{Link:Hr},props:{designCard:{type:Object}}},ls=["href","aria-label"],cs={key:0,class:"flex items-center justify-center space-x-4"},gs={class:"text-lg font-semibold"};function us(r,t,e,s,n,a){const d=y("Link");return i(),o("a",{class:"block",target:"_blank",rel:"noopener noreferrer",href:e.designCard.metadata.link,"aria-label":e.designCard.metadata.title},[e.designCard.metadata.title&&e.designCard.metadata.link?(i(),o("div",{key:0,style:S({color:e.designCard.metadata.design.title_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`}),class:"hover:scale-105 transition-all duration-300 cursor-pointer"},[e.designCard.metadata.title?(i(),o("div",cs,[L(d,{size:"20",style:S({color:e.designCard.metadata.design.icon_color})},null,8,["style"]),g("h3",gs,f(e.designCard.metadata.title),1)])):h("",!0)],4)):h("",!0)],8,ls)}const ms=E(os,[["render",us]]),hs={components:{Markdown:xt},props:{designCard:{type:Object}}};function _s(r,t,e,s,n,a){const d=y("Markdown");return i(),o("div",{style:S({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[L(d,{text:e.designCard.metadata.body},null,8,["text"])],4)}const fs=E(hs,[["render",_s]]),ps={components:{Markdown:xt},props:{designCard:{type:Object}},computed:{hasLink(){return this.isNotEmpty(this.designCard.metadata.link)}},methods:{isNotEmpty:Qe,handleLink(r){this.hasLink||r.preventDefault()}}},ys=["href","aria-label"],bs={class:"space-y-4"},xs={key:1,class:"w-full aspect-square relative flex items-center justify-center rounded-lg overflow-hidden"},Cs=["src","alt"];function ks(r,t,e,s,n,a){var l,m,c,_;const d=y("Markdown");return i(),o("a",{class:B(["block",[a.hasLink?"cursor-pointer hover:scale-105 transition-all duration-300":"cursor-default"]]),target:"_blank",onClick:t[0]||(t[0]=q((...b)=>a.handleLink&&a.handleLink(...b),["stop"])),rel:"noopener noreferrer",href:e.designCard.metadata.link,"aria-label":e.designCard.metadata.title||"Link to content"},[(m=(l=e.designCard.photos)==null?void 0:l[0])!=null&&m.path||e.designCard.metadata.upper_text||e.designCard.metadata.lower_text?(i(),o("div",{key:0,style:S({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[g("div",bs,[a.isNotEmpty(e.designCard.metadata.upper_text)?(i(),x(d,{key:0,text:e.designCard.metadata.upper_text},null,8,["text"])):h("",!0),(_=(c=e.designCard.photos)==null?void 0:c[0])!=null&&_.path?(i(),o("div",xs,[g("img",{src:e.designCard.photos[0].path,class:"w-full h-full object-cover",alt:e.designCard.metadata.title||"Image"},null,8,Cs)])):h("",!0),a.isNotEmpty(e.designCard.metadata.lower_text)?(i(),x(d,{key:2,text:e.designCard.metadata.lower_text},null,8,["text"])):h("",!0)])],4)):h("",!0)],10,ys)}const ws=E(ps,[["render",ks]]),Ss={components:{Video:jr},props:{designCard:{type:Object}},methods:{getYouTubeEmbedUrl(r){const t=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,e=r.match(t),s=e?e[1]:"";return s?`https://www.youtube.com/embed/${s}`:""}}},vs={class:"space-y-2"},Ts={key:0,class:"flex items-center space-x-4"},Rs={class:"text-lg font-semibold"},Ls={key:1,class:"relative w-full",style:{"padding-bottom":"56.25%"}},Es=["src"];function As(r,t,e,s,n,a){const d=y("Video");return e.designCard.metadata.title||e.designCard.metadata.link?(i(),o("div",{key:0,style:S({color:e.designCard.metadata.design.title_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[g("div",vs,[e.designCard.metadata.title?(i(),o("div",Ts,[L(d,{size:"20",style:S({color:e.designCard.metadata.design.icon_color})},null,8,["style"]),g("h3",Rs,f(e.designCard.metadata.title),1)])):h("",!0),e.designCard.metadata.link?(i(),o("div",Ls,[g("iframe",{frameborder:"0",allowfullscreen:"",src:a.getYouTubeEmbedUrl(e.designCard.metadata.link),class:"absolute top-0 left-0 w-full h-full rounded-sm",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"},null,8,Es)])):h("",!0)])],4)):h("",!0)}const Ds=E(Ss,[["render",As]]),Ps={props:{designCard:{type:Object}}},Ms=["href"],Is={class:"text-center"};function Os(r,t,e,s,n,a){return i(),o("a",{class:"block",target:"_blank",href:e.designCard.metadata.link},[e.designCard.metadata.title?(i(),o("div",{key:0,style:S({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`}),class:B(["select-none flex justify-center",{"hover:py-6 hover:scale-105 transition-all duration-300 cursor-pointer":e.designCard.metadata.link}])},[g("span",Is,f(e.designCard.metadata.title),1)],6)):h("",!0)],8,Ms)}const Fs=E(Ps,[["render",Os]]),Ns={inject:["storeState"],components:{Phone:on},props:{designCard:{type:Object}},computed:{store(){return this.storeState.store}},methods:{downloadVCard(r,t){const e=["BEGIN:VCARD","VERSION:3.0",`FN;CHARSET=UTF-8:${this.store.name}`,`N;CHARSET=UTF-8:;${this.store.name};;;`,`TEL;TYPE=WORK,VOICE:${t||""}`,"ORG;CHARSET=UTF-8:Perfect Order",`REV:${new Date().toISOString()}`,"END:VCARD"].join(`
`),s=new Blob([e],{type:"text/vcard"}),n=URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download=`${r||"contact"}.vcf`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}}},Bs={class:"flex items-center justify-center space-x-4"},zs={class:"text-lg font-semibold"};function js(r,t,e,s,n,a){const d=y("Phone");return e.designCard.metadata.title||e.designCard.metadata.mobile_number?(i(),o("div",{key:0,style:S({color:e.designCard.metadata.design.title_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`}),class:"hover:scale-105 transition-all duration-300 cursor-pointer",onClick:t[0]||(t[0]=l=>a.downloadVCard(e.designCard.metadata.title,e.designCard.metadata.mobile_number))},[g("div",Bs,[L(d,{size:"20",style:S({color:e.designCard.metadata.design.icon_color})},null,8,["style"]),g("h3",zs,f(e.designCard.metadata.title),1)])],4)):h("",!0)}const Us=E(Ns,[["render",js]]),qs={props:{designCard:{type:Object}}};function Vs(r,t,e,s,n,a){return i(),o("div",{style:S({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[g("div",{style:S({border:`${e.designCard.metadata.thickness??1}px ${e.designCard.metadata.divider??"solid"} ${e.designCard.metadata.design.divider_color}`})},null,4)],4)}const Hs=E(qs,[["render",Vs]]),Ws={components:{AtSign:Gr},props:{designCard:{type:Object}}},Gs={class:"space-y-2"},Zs={key:0,class:"flex items-center space-x-4"},Ys={class:"text-lg font-semibold"},Xs={class:"flex flex-wrap justify-center gap-4"},Qs=["href","aria-label"],Ks=["alt","src"];function Js(r,t,e,s,n,a){var l;const d=y("AtSign");return(l=e.designCard.metadata.platforms)!=null&&l.some(m=>m.link)?(i(),o("div",{key:0,style:S({color:e.designCard.metadata.design.title_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[g("div",Gs,[e.designCard.metadata.title?(i(),o("div",Zs,[L(d,{size:"20",style:S({color:e.designCard.metadata.design.icon_color})},null,8,["style"]),g("h3",Ys,f(e.designCard.metadata.title),1)])):h("",!0),g("div",Xs,[(i(!0),o(v,null,O(e.designCard.metadata.platforms,(m,c)=>(i(),o(v,{key:c},[m.link?(i(),o("a",{key:0,target:"_blank",href:m.link,"aria-label":`Visit ${m.name}`,class:"w-12 h-12 flex items-center justify-center hover:scale-90 active:scale-80 transition-all duration-300 cursor-pointer"},[g("img",{alt:m.name,class:"w-8 h-8 object-contain",src:`/images/social-media-icons/${m.name.toLowerCase()}.png`},null,8,Ks)],8,Qs)):h("",!0)],64))),128))])])],4)):h("",!0)}const $s=E(Ws,[["render",Js]]),ed={inject:["formState","orderState"],components:{Input:ge},props:{designCard:{type:Object}},computed:{orderForm(){return this.orderState.orderForm}}},td={class:"space-y-2 mt-4"};function ad(r,t,e,s,n,a){const d=y("Input");return e.designCard.metadata.title||e.designCard.metadata.show_first_name||e.designCard.metadata.show_last_name||e.designCard.metadata.show_email?(i(),o("div",{key:0,style:S({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(i(),o("h1",{key:0,class:"text-base font-semibold",style:S({color:e.designCard.metadata.design.title_color})},f(e.designCard.metadata.title),5)):h("",!0),e.designCard.metadata.description?(i(),o("p",{key:1,class:"text-sm text-gray-700 mt-2",style:S({color:e.designCard.metadata.design.description_color})},f(e.designCard.metadata.description),5)):h("",!0),g("div",td,[e.designCard.metadata.show_first_name?(i(),x(d,{key:0,type:"text",class:"w-full",label:"First name",modelValue:a.orderForm.customer_first_name,"onUpdate:modelValue":t[0]||(t[0]=l=>a.orderForm.customer_first_name=l),showAsterisk:e.designCard.metadata.first_name_required,errorText:a.formState.getFormError("customer_first_name"),labelStyle:{color:e.designCard.metadata.design.title_color},secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},secondaryLabel:e.designCard.metadata.first_name_required?null:"(optional)"},null,8,["modelValue","showAsterisk","errorText","labelStyle","secondaryLabelStyle","secondaryLabel"])):h("",!0),e.designCard.metadata.show_last_name?(i(),x(d,{key:1,type:"text",class:"w-full",label:"Last name",modelValue:a.orderForm.customer_last_name,"onUpdate:modelValue":t[1]||(t[1]=l=>a.orderForm.customer_last_name=l),showAsterisk:e.designCard.metadata.last_name_required,errorText:a.formState.getFormError("customer_last_name"),labelStyle:{color:e.designCard.metadata.design.title_color},secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},secondaryLabel:e.designCard.metadata.last_name_required?null:"(optional)"},null,8,["modelValue","showAsterisk","errorText","labelStyle","secondaryLabelStyle","secondaryLabel"])):h("",!0),e.designCard.metadata.show_mobile_number?(i(),x(d,{key:2,type:"text",class:"w-full",label:"Mobile",placeholder:"+26772000001",modelValue:a.orderForm.customer_mobile_number,"onUpdate:modelValue":t[2]||(t[2]=l=>a.orderForm.customer_mobile_number=l),showAsterisk:e.designCard.metadata.mobile_number_required,errorText:a.formState.getFormError("customer_mobile_number"),labelStyle:{color:e.designCard.metadata.design.title_color},secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},secondaryLabel:e.designCard.metadata.mobile_number_required?null:"(optional)"},null,8,["modelValue","showAsterisk","errorText","labelStyle","secondaryLabelStyle","secondaryLabel"])):h("",!0),e.designCard.metadata.show_email?(i(),x(d,{key:3,type:"email",label:"Email",class:"w-full",placeholder:"johndoe@example.com",modelValue:a.orderForm.customer_email,"onUpdate:modelValue":t[3]||(t[3]=l=>a.orderForm.customer_email=l),showAsterisk:e.designCard.metadata.email_required,errorText:a.formState.getFormError("customer_email"),labelStyle:{color:e.designCard.metadata.design.title_color},secondaryLabel:e.designCard.metadata.email_required?null:"(optional)",secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color}},null,8,["modelValue","showAsterisk","errorText","labelStyle","secondaryLabel","secondaryLabelStyle"])):h("",!0)])],4)):h("",!0)}const rd=E(ed,[["render",ad]]),nd={inject:["formState","designState","orderState","storeState","notificationState"],components:{Image:Yt,Pill:Ie,Loader:pt},props:{designCard:{type:Object}},data(){return{category:null,lastCategoryId:null,isLoadingCategory:!1}},watch:{categoryId(r,t){this.showCategory()}},computed:{store(){return this.storeState.store},shoppingCart(){return this.orderState.shoppingCart},categoryId(){return this.designCard.metadata.category_id},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)}},methods:{async onView(r){if(this.isDesigning){this.notificationState.showSuccessNotification("Only opens on the actual store");return}await this.$router.push({name:"show-shop-product",params:{alias:this.store.alias,product_id:r.id}})},getSelectedQuantity(r){if(this.shoppingCart&&r){const t=this.shoppingCart.order_products.find(e=>e.product_id==r.id);if(t)return t.quantity}return null},async showCategory(){var r,t;try{if(!this.categoryId)return;this.isLoadingCategory=!0;let e={params:{store_id:this.store.id,_relationships:["photo","products.photo"].join(",")}};this.lastCategoryId=this.categoryId;const s=await axios.get(`/api/categories/${this.categoryId}`,e);this.categoryId==this.lastCategoryId&&(this.category=s.data)}catch(e){if(e.status!=404){const s=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching category";this.notificationState.showWarningNotification(s),this.formState.setServerFormErrors(e)}console.error("Failed to fetch category:",e)}finally{this.categoryId==this.lastCategoryId&&(this.isLoadingCategory=!1)}}},created(){this.showCategory()}},id={class:"space-y-4"},sd={key:0,class:"flex justify-center items-center"},dd=["onClick"],od={key:0,class:"absolute top-1 right-1 z-10 flex items-center justify-center min-w-6 w-fit h-6 p-1 bg-red-500 text-xs font-bold text-white rounded-full"},ld=["alt","src"],cd={class:"flex items-center space-x-2 flex-wrap gap-2"},gd={key:1,class:"text-gray-500 text-sm"};function ud(r,t,e,s,n,a){const d=y("Loader"),l=y("Image"),m=y("Pill");return e.designCard.metadata.category_id&&(n.category||n.isLoadingCategory)?(i(),o("div",{key:0,style:S({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[g("div",id,[n.isLoadingCategory?(i(),o("div",sd,[L(d)])):(i(),o(v,{key:1},[g("div",null,[g("h3",{class:"text-lg font-semibold mb-0",style:S({color:e.designCard.metadata.design.title_color})},f(n.category.name),5),n.category.description?(i(),o("p",{key:0,style:S({color:e.designCard.metadata.design.description_color})},f(n.category.description),5)):h("",!0)]),n.category.products.length?(i(),o("div",{key:0,class:B([{"flex flex-col space-y-4":e.designCard.metadata.layout==="list"},{"grid grid-cols-2 gap-4":e.designCard.metadata.layout==="grid"&&a.isDesigning},{"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4":e.designCard.metadata.layout==="grid"&&!a.isDesigning}])},[(i(!0),o(v,null,O(n.category.products.slice(0,parseInt(e.designCard.metadata.feature)),c=>{var _,b;return i(),o("div",{key:c.id,onClick:q(()=>a.onView(c),["stop"]),style:S({color:e.designCard.metadata.design.title_color}),class:"relative flex flex-col space-y-2 p-2 cursor-pointer rounded-lg hover:scale-105 transition-all duration-300"},[a.getSelectedQuantity(c)?(i(),o("div",od,[g("span",null,f(a.getSelectedQuantity(c)),1)])):h("",!0),g("div",{class:B(["w-full aspect-square relative flex items-center justify-center bg-gray-100 rounded-lg overflow-hidden",(e.designCard.metadata.layout==="list","max-h-60")])},[(_=(c??c.variant).photo)!=null&&_.path?(i(),o("img",{key:0,alt:(c??c.variant).name,class:"absolute w-full h-full object-cover",src:(b=(c??c.variant).photo)==null?void 0:b.path},null,8,ld)):(i(),x(l,{key:1,size:"40",class:"text-gray-300"}))],2),g("h4",{class:"text-sm font-medium truncate",style:S({color:e.designCard.metadata.design.product_name_color})},f(c.name),5),g("div",cd,[(c.variant??c).is_free?(i(),x(m,{key:0,type:"success",size:"xs"},{default:z(()=>[...t[0]||(t[0]=[ae("free",-1)])]),_:1})):(i(),o(v,{key:1},[(c.variant??c).on_sale?(i(),o("span",{key:0,class:"text-sm font-semibold",style:S({color:e.designCard.metadata.design.product_price_color})},f((c.variant??c).unit_sale_price.amount_with_currency),5)):h("",!0),g("span",{style:S({color:(c.variant??c).on_sale?e.designCard.metadata.design.product_cancelled_price_color:e.designCard.metadata.design.product_price_color}),class:B(["text-sm",{"line-through":(c.variant??c).on_sale,"font-semibold":!(c.variant??c).on_sale}])},f((c.variant??c).unit_regular_price.amount_with_currency),7)],64)),(c.variant??c).stock_quantity_type=="limited"&&((c.variant??c).has_stock&&(c.variant??c).stock_quantity<=5||!(c.variant??c).has_stock)?(i(),x(m,{key:2,type:(c.variant??c).has_stock?"success":"warning",size:"xs"},{default:z(()=>[ae(f((c.variant??c).has_stock?`${(c.variant??c).stock_quantity} left`:"no stock"),1)]),_:2},1032,["type"])):h("",!0)])],12,dd)}),128))],2)):(i(),o("p",gd,"No products available in this category."))],64))])],4)):h("",!0)}const md=E(nd,[["render",ud]]);/*! vue-countdown v2.1.3 | (c) 2018-present Chen Fengyuan | MIT */const ct=1e3,gt=60*ct,ut=60*gt,Wa=24*ut,Ga="abort",Za="end",Ya="progress",Xa="start",Qa="visibilitychange";var hd=Pr({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:r=>r>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:r=>r>=0},transform:{type:Function,default:r=>r}},emits:[Ga,Za,Ya,Xa],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0,autoPauseOnHide:!1}},computed:{days(){return Math.floor(this.totalMilliseconds/Wa)},hours(){return Math.floor(this.totalMilliseconds%Wa/ut)},minutes(){return Math.floor(this.totalMilliseconds%ut/gt)},seconds(){return Math.floor(this.totalMilliseconds%gt/ct)},milliseconds(){return Math.floor(this.totalMilliseconds%ct)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/ut)},totalMinutes(){return Math.floor(this.totalMilliseconds/gt)},totalSeconds(){return Math.floor(this.totalMilliseconds/ct)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(Qa,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(Qa,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.autoStart||(this.totalMilliseconds=this.time,this.endTime=this.now()+this.time),this.emitEvents&&this.$emit(Xa),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const r=Math.min(this.totalMilliseconds,this.interval);if(r>0){let t,e;const s=n=>{t||(t=n),e||(e=n);const a=n-t;a>=r||a+(n-e)/2>=r?this.progress():this.requestId=requestAnimationFrame(s),e=n};this.requestId=requestAnimationFrame(s)}else this.end()},pause(){cancelAnimationFrame(this.requestId),this.requestId=0},progress(){this.counting&&(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(Ya,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(Ga))},end(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(Za))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.requestId===0&&this.autoPauseOnHide&&(this.update(),this.continue()),this.autoPauseOnHide=!1;break;case"hidden":this.requestId>0&&(this.autoPauseOnHide=!0,this.pause());break}}},render(){return Mr(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const _d={components:{VueCountdown:hd,Popover:Zr},props:{time:{type:[String,null],required:!0},textClass:{type:String,default:""},type:{type:String,default:"design1",validator:r=>["design1","design2"].includes(r)},showPopover:{type:Boolean,default:!0},popoverClass:{type:String,default:""}},data(){return{timeLeftInMilliSeconds:0}},watch:{time:{immediate:!0,handler(r){this.calculateTimeLeft(r)}}},computed:{hasExpired(){return this.timeLeftInMilliSeconds==0}},methods:{calculateTimeLeft(r){if(!r){this.timeLeftInMilliSeconds=0;return}const t=Aa(r),e=Aa(),s=t.diff(e);s>0?this.timeLeftInMilliSeconds=s:this.timeLeftInMilliSeconds=0}}},fd={key:0},pd={key:0},yd={key:0},bd={key:3},xd={class:"w-full text-sm text-left rtl:text-right text-gray-500"},Cd={class:"px-2 py-1 text-center"},kd={class:"px-2 py-1 text-center"},wd={class:"px-2 py-1 text-center"},Sd={class:"px-2 py-1 text-center"},vd={key:0,class:"w-full flex space-x-1"},Td={class:"w-full flex flex-col items-center p-2 bg-gray-100 rounded-lg"},Rd={class:"font-bold"},Ld={class:"w-full flex flex-col items-center p-2 bg-gray-100 rounded-lg"},Ed={class:"font-bold"},Ad={class:"w-full flex flex-col items-center p-2 bg-gray-100 rounded-lg"},Dd={class:"font-bold"},Pd={class:"w-full flex flex-col items-center p-2 bg-gray-100 rounded-lg"},Md={class:"font-bold"};function Id(r,t,e,s,n,a){const d=y("Popover"),l=y("vue-countdown");return i(),x(l,{time:n.timeLeftInMilliSeconds,class:"flex items-center space-x-1"},{default:z(({days:m,hours:c,minutes:_,seconds:b})=>[je(r.$slots,"prefix",{hasExpired:a.hasExpired}),e.type=="design1"?(i(),o(v,{key:0},[m>0||c>0||_>0||b>0?(i(),o("span",{key:0,class:B(e.textClass)},[m>0?(i(),o(v,{key:0},[g("span",null,f(m)+" "+f(m==1?"day ":"days "),1),c>0?(i(),o("span",fd,f(c)+" "+f(c==1?"hr ":"hrs "),1)):h("",!0)],64)):c>0?(i(),o(v,{key:1},[g("span",null,f(c)+" "+f(c==1?"hr ":"hrs "),1),_>0?(i(),o("span",pd,f(_)+" "+f(_==1?"min ":"mins "),1)):h("",!0)],64)):_>0?(i(),o(v,{key:2},[g("span",null,f(_)+" "+f(_==1?"min ":"mins "),1),b>0?(i(),o("span",yd,f(b)+" "+f(b==1?"sec ":"secs "),1)):h("",!0)],64)):b>0?(i(),o("span",bd,f(b)+" "+f(b==1?"sec ":"secs "),1)):h("",!0)],2)):je(r.$slots,"default",{key:1},()=>[t[0]||(t[0]=ae("Expired",-1))]),je(r.$slots,"suffix",{hasExpired:a.hasExpired}),e.showPopover&&!a.hasExpired?(i(),x(d,{key:2,placement:"top",class:B(e.popoverClass)},{content:z(()=>[g("table",xd,[t[1]||(t[1]=g("thead",{class:"font-bold text-xs text-gray-700 uppercase bg-gray-50"},[g("tr",null,[g("td",{class:"px-2 py-1 text-center"},"Days"),g("td",{class:"px-2 py-1 text-center"},"Hrs"),g("td",{class:"px-2 py-1 text-center"},"Mins"),g("td",{class:"px-2 py-1 text-center"},"Secs")])],-1)),g("tbody",null,[g("tr",null,[g("td",Cd,f(m<10?"0"+m:m),1),g("td",kd,f(c<10?"0"+c:c),1),g("td",wd,f(_<10?"0"+_:_),1),g("td",Sd,f(b<10?"0"+b:b),1)])])])]),_:2},1032,["class"])):h("",!0)],64)):e.type=="design2"?(i(),o(v,{key:1},[m>0||c>0||_>0||b>0?(i(),o("div",vd,[g("div",Td,[g("div",Rd,f(m<10?"0"+m:m),1),t[2]||(t[2]=g("div",null,"Days",-1))]),g("div",Ld,[g("div",Ed,f(c<10?"0"+c:c),1),t[3]||(t[3]=g("div",null,"Hrs",-1))]),g("div",Ad,[g("div",Dd,f(_<10?"0"+_:_),1),t[4]||(t[4]=g("div",null,"Mins",-1))]),g("div",Pd,[g("div",Md,f(b<10?"0"+b:b),1),t[5]||(t[5]=g("div",null,"Secs",-1))])])):je(r.$slots,"default",{key:1},()=>[t[6]||(t[6]=ae("Expired",-1))]),je(r.$slots,"suffix",{hasExpired:a.hasExpired})],64)):h("",!0)]),_:3},8,["time"])}const Od=E(_d,[["render",Id]]),Fd={components:{Markdown:xt,Countdown:Od},props:{designCard:{type:Object}},methods:{isNotEmpty:Qe}},Nd={key:1,class:"w-full aspect-square relative flex items-center justify-center rounded-lg overflow-hidden"},Bd=["src"],zd={key:0,class:"text-lg font-semibold text-red-600"};function jd(r,t,e,s,n,a){var m,c,_,b;const d=y("Markdown"),l=y("Countdown");return e.designCard.metadata.body||e.designCard.metadata.date||(c=(m=e.designCard.photos)==null?void 0:m[0])!=null&&c.path?(i(),o("div",{key:0,style:S({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[a.isNotEmpty(e.designCard.metadata.upper_text)?(i(),x(d,{key:0,text:e.designCard.metadata.upper_text},null,8,["text"])):h("",!0),(b=(_=e.designCard.photos)==null?void 0:_[0])!=null&&b.path?(i(),o("div",Nd,[g("img",{alt:"Countdown Image",src:e.designCard.photos[0].path,class:"w-full h-full object-cover"},null,8,Bd)])):h("",!0),L(l,{type:"design2",class:"w-full",style:S({color:e.designCard.metadata.design.countdown_text_color}),time:e.designCard.metadata.date},{prefix:z(({hasExpired:p})=>[p?(i(),o("span",zd,"Countdown Ended")):h("",!0)]),_:1},8,["style","time"]),a.isNotEmpty(e.designCard.metadata.lower_text)?(i(),x(d,{key:2,text:e.designCard.metadata.lower_text},null,8,["text"])):h("",!0)],4)):h("",!0)}const Ud=E(Fd,[["render",jd]]),qd={inject:["formState","storeState","notificationState"],components:{ChevronUp:Xr,ChevronDown:Yr},props:{designCard:{type:Object}},data(){return{expanded:{},categories:[],isLoadingCategories:!1}},watch:{store(){this.setup()}},computed:{store(){return this.storeState.store},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)}},methods:{async setup(){this.store&&this.showCategories()},toggleExpanded(r){this.expanded={...this.expanded,[r]:!this.expanded[r]}},async navigateToShowShopCategory(r){if(this.isDesigning){this.notificationState.showSuccessNotification("Only opens on the actual store");return}await this.$router.push({name:"show-shop-category",params:{alias:this.store.alias,category_id:r.id}})},async showCategories(){var r,t;try{this.isLoadingCategories=!0;let e={params:{per_page:100,type:"parent",store_id:this.store.id,_relationships:["subCategories.subCategories.subCategories"].join(",")}};const n=(await axios.get("/api/categories",e)).data;this.categories=n.data}catch(e){const s=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching categories";this.notificationState.showWarningNotification(s),this.formState.setServerFormErrors(e),console.error("Failed to fetch categories:",e)}finally{this.isLoadingCategories=!1}}},created(){this.setup()}},Vd={key:0},Hd={class:"flex items-center text-gray-700 hover:bg-gray-100 pr-4"},Wd={class:"w-full text-lg font-semibold py-2 pl-4 ms-3 group-hover:text-gray-900"},Gd={class:"p-2"},Zd={key:0},Yd=["onClick"],Xd={class:"flex items-center text-gray-700 hover:bg-gray-100 pr-4"},Qd={class:"w-full text-lg font-semibold py-2 pl-8 ms-3 group-hover:text-gray-900"},Kd=["onClick"],Jd={key:0},$d=["onClick"],eo={class:"flex items-center text-gray-700 hover:bg-gray-100 pr-4"},to={class:"w-full text-lg font-semibold py-2 pl-12 ms-3 group-hover:text-gray-900"},ao=["onClick"],ro={key:0},no=["onClick"],io={class:"flex items-center text-gray-700"},so={class:"w-full text-lg font-semibold py-2 pl-16 ms-3 group-hover:text-gray-900"},oo={key:1},lo=["onClick"],co={class:"flex items-center text-gray-700 hover:bg-gray-100 pr-4"},go={class:"w-full text-lg font-semibold py-2 pl-4 ms-3 group-hover:text-gray-900"},uo=["onClick"],mo={key:0},ho=["onClick"],_o={class:"flex items-center text-gray-700 hover:bg-gray-100 pr-4"},fo={class:"w-full text-lg font-semibold py-2 pl-8 ms-3 group-hover:text-gray-900"},po=["onClick"],yo={key:0},bo=["onClick"],xo={class:"flex items-center text-gray-700"},Co={class:"w-full text-lg font-semibold py-2 pl-16 ms-3 group-hover:text-gray-900"};function ko(r,t,e,s,n,a){var m,c,_;const d=y("ChevronUp"),l=y("ChevronDown");return i(),o("div",{style:S({color:e.designCard.metadata.design.title_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(i(),o("div",Vd,[g("div",{onClick:t[0]||(t[0]=q(b=>a.toggleExpanded("root"),["stop"])),class:B(["cursor-pointer text-gray-900 group",{"hover:bg-gray-100":!n.expanded.root}])},[g("div",Hd,[g("span",Wd,f(e.designCard.metadata.title),1),g("div",Gd,[n.expanded.root&&((m=n.categories)!=null&&m.length)?(i(),x(d,{key:0,size:"20"})):(c=n.categories)!=null&&c.length?(i(),x(l,{key:1,size:"20"})):h("",!0)])])],2),n.expanded.root&&((_=n.categories)!=null&&_.length)?(i(),o("div",Zd,[(i(!0),o(v,null,O(n.categories,b=>{var p,A;return i(),o("div",{key:b.id,class:"cursor-pointer text-gray-900 group",onClick:q(()=>a.navigateToShowShopCategory(b),["stop"])},[g("div",Xd,[g("span",Qd,f(b.name),1),(p=b.sub_categories)!=null&&p.length?(i(),o("div",{key:0,class:"p-2",onClick:q(k=>a.toggleExpanded(b.id),["stop"])},[n.expanded[b.id]?(i(),x(d,{key:0,size:"20"})):(i(),x(l,{key:1,size:"20"}))],8,Kd)):h("",!0)]),n.expanded[b.id]&&((A=b.sub_categories)!=null&&A.length)?(i(),o("div",Jd,[(i(!0),o(v,null,O(b.sub_categories,k=>{var F;return i(),o("div",{key:k.id,onClick:q(()=>a.navigateToShowShopCategory(k),["stop"]),class:"cursor-pointer text-gray-900 group"},[g("div",eo,[g("span",to,f(k.name),1),(F=k.sub_categories)!=null&&F.length?(i(),o("div",{key:0,class:"p-2",onClick:q(j=>a.toggleExpanded(k.id),["stop"])},[n.expanded[k.id]?(i(),x(d,{key:0,size:"20"})):(i(),x(l,{key:1,size:"20"}))],8,ao)):h("",!0)]),n.expanded[k.id]?(i(),o("div",ro,[(i(!0),o(v,null,O(k.sub_categories,j=>(i(),o("div",{key:j.id,onClick:q(oe=>a.toggleExpanded(j.id),["stop"]),class:"cursor-pointer text-gray-900 group hover:bg-gray-100"},[g("div",io,[g("span",so,f(j.name),1)])],8,no))),128))])):h("",!0)],8,$d)}),128))])):h("",!0)],8,Yd)}),128))])):h("",!0)])):(i(),o("div",oo,[(i(!0),o(v,null,O(n.categories,b=>{var p,A;return i(),o("div",{key:b.id,class:"cursor-pointer text-gray-900 group",onClick:q(()=>a.navigateToShowShopCategory(b),["stop"])},[g("div",co,[g("span",go,f(b.name),1),(p=b.sub_categories)!=null&&p.length?(i(),o("div",{key:0,class:"p-2",onClick:q(k=>a.toggleExpanded(b.id),["stop"])},[n.expanded[b.id]?(i(),x(d,{key:0,size:"20"})):(i(),x(l,{key:1,size:"20"}))],8,uo)):h("",!0)]),n.expanded[b.id]&&((A=b.sub_categories)!=null&&A.length)?(i(),o("div",mo,[(i(!0),o(v,null,O(b.sub_categories,k=>{var F;return i(),o("div",{key:k.id,onClick:q(()=>a.navigateToShowShopCategory(k),["stop"]),class:"cursor-pointer text-gray-900 group"},[g("div",_o,[g("span",fo,f(k.name),1),(F=k.sub_categories)!=null&&F.length?(i(),o("div",{key:0,class:"p-2",onClick:q(j=>a.toggleExpanded(k.id),["stop"])},[n.expanded[k.id]?(i(),x(d,{key:0,size:"20"})):(i(),x(l,{key:1,size:"20"}))],8,po)):h("",!0)]),n.expanded[k.id]?(i(),o("div",yo,[(i(!0),o(v,null,O(k.sub_categories,j=>(i(),o("div",{key:j.id,onClick:q(()=>a.navigateToShowShopCategory(j),["stop"]),class:"cursor-pointer text-gray-900 group hover:bg-gray-100"},[g("div",xo,[g("span",Co,f(j.name),1)])],8,bo))),128))])):h("",!0)],8,ho)}),128))])):h("",!0)],8,lo)}),128))]))],4)}const wo=E(qd,[["render",ko]]),So={inject:["storeState","pwaStore"],components:{Download:Ur},props:{designCard:{type:Object}},data(){return{promptShown:!1}},computed:{store(){return this.storeState.store},deferredPrompt(){return this.pwaStore.deferredPrompt}},methods:{async triggerPWAInstall(){if(this.deferredPrompt){this.promptShown=!0,this.deferredPrompt.prompt();const{outcome:r}=await this.deferredPrompt.userChoice;console.log(r==="accepted"?"User accepted the PWA install prompt":"User dismissed the PWA install prompt")}else console.warn("No deferredPrompt available for PWA installation"),alert("PWA install not available. Please refresh the page and try again.")}}},vo={class:"flex items-center justify-center space-x-4"},To=["title"],Ro={class:"flex items-center justify-center space-x-2"},Lo={key:0,class:"text-sm"};function Eo(r,t,e,s,n,a){const d=y("Download");return i(),o("div",{style:S({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[g("div",vo,[g("button",{onClick:t[0]||(t[0]=(...l)=>a.triggerPWAInstall&&a.triggerPWAInstall(...l)),style:S({backgroundColor:e.designCard.metadata.design.button_color,color:e.designCard.metadata.design.button_text_color,borderRadius:"8px",padding:"8px 16px"}),class:B(["font-semibold",{"opacity-25 cursor-not-allowed":n.promptShown},{"cursor-pointer transition-all duration-300 hover:scale-105 active:scale-100":!n.promptShown}]),title:n.promptShown?"Please refresh the page or interact with the page to try again":"Install the app"},[g("div",Ro,[L(d,{size:"16",style:S({color:e.designCard.metadata.design.button_text_color})},null,8,["style"]),e.designCard.metadata.button_text?(i(),o("span",Lo,f(e.designCard.metadata.button_text),1)):h("",!0)])],14,To)])],4)}const Ao=E(So,[["render",Eo]]),Do={inject:["formState","orderState","storeState"],components:{Input:ge},props:{designCard:{type:Object}},watch:{tips(r){!r.includes("specify")&&this.orderForm.tip_flat_rate!=null&&(this.orderForm.tip_flat_rate=null)}},computed:{tips(){let r=["none",...this.designCard.metadata.tips];return this.designCard.metadata.show_specify_tip&&r.push("specify"),r},store(){return this.storeState.store},hasTips(){return this.tips.length>0},orderForm(){return this.orderState.orderForm}},methods:{setTip(r){r=="none"?(this.orderForm.tip_flat_rate=null,this.orderForm.tip_percentage_rate=null):r=="specify"?(this.orderForm.tip_percentage_rate=null,this.designCard.metadata.tips.length?this.orderForm.tip_flat_rate=this.designCard.metadata.tips[0]:this.orderForm.tip_flat_rate="0.00"):this.designCard.metadata.tips.includes(r)&&(this.orderForm.tip_percentage_rate=r)},isSelectedTip(r){return r=="specify"&&this.orderForm.tip_percentage_rate==null&&this.orderForm.tip_flat_rate!=null||r=="none"&&this.orderForm.tip_percentage_rate==null&&this.orderForm.tip_flat_rate==null||this.orderForm.tip_percentage_rate==r}}},Po={key:0,class:"text-base text-gray-700 font-semibold"},Mo={key:1,class:"text-sm text-gray-700 mt-2"},Io={key:2,class:"space-y-4 mt-4"},Oo={class:"flex flex-wrap gap-2"},Fo=["onClick"],No={key:0,class:"mt-4"};function Bo(r,t,e,s,n,a){const d=y("Input");return e.designCard.metadata.show_tips?(i(),o("div",{key:0,style:S({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(i(),o("h1",Po,f(e.designCard.metadata.title),1)):h("",!0),e.designCard.metadata.description?(i(),o("p",Mo,f(e.designCard.metadata.description),1)):h("",!0),a.hasTips?(i(),o("div",Io,[g("div",Oo,[(i(!0),o(v,null,O(a.tips,(l,m)=>(i(),o("div",{key:m,onClick:q(()=>a.setTip(l),["stop"]),style:S([a.isSelectedTip(l)?{border:"1px solid transparent",color:e.designCard.metadata.design.pill_text_color,backgroundColor:e.designCard.metadata.design.pill_bg_color}:{color:"#111827",backgroundColor:"#ffffff",border:"1px solid #d2d2d2"}]),class:"select-none whitespace-nowrap inline-flex items-center rounded-full px-3 py-1.5 text-xs font-semibold transition-all cursor-pointer hover:scale-95 hover:opacity-80 active:scale-90"},[l=="none"?(i(),o(v,{key:0},[ae("None")],64)):l=="specify"?(i(),o(v,{key:1},[ae("Specify")],64)):(i(),o(v,{key:2},[ae(f(l)+"%",1)],64))],12,Fo))),128))]),a.isSelectedTip("specify")?(i(),o("div",No,[L(d,{type:"money",currency:a.store.currency,modelValue:a.orderForm.tip_flat_rate,"onUpdate:modelValue":t[0]||(t[0]=l=>a.orderForm.tip_flat_rate=l),errorText:a.formState.getFormError("discount_flat_rate")},null,8,["currency","modelValue","errorText"])])):h("",!0)])):h("",!0)],4)):h("",!0)}const zo=E(Do,[["render",Bo]]),jo={inject:["formState","storeState"],components:{Pill:Ie,Input:ge,Button:xe,Datepicker:Qr,AddressInput:Xt},props:{index:{type:Number},designCard:{type:Object}},data(){return{response:null}},watch:{"designCard.type"(){this.initializeResponse()}},computed:{store(){return this.storeState.store},inputKey(){var r,t,e;return`${((r=this.designCard)==null?void 0:r.id)??this.designCard.temporary_id}-${this.designCard.metadata.title.length}-${this.designCard.metadata.required}-${((e=(t=this.designCard.metadata)==null?void 0:t.options)==null?void 0:e.length)??0}}`}},methods:{isNotEmpty:Qe,setAddress(r){},unsetAddress(){},initializeResponse(){this.designCard.type=="checkbox"?this.response=new Array(this.designCard.metadata.options.length).fill(!1):this.designCard.type=="location"?this.response=null:this.designCard.type=="media"?this.response=[]:this.response=""}},created(){this.initializeResponse()}},Uo={key:0,class:"mb-2"},qo={class:"flex items-center text-sm leading-6 font-medium space-x-1"},Vo={key:0,class:"text-red-500"},Ho={key:1,class:"space-y-2"},Wo=["onUpdate:modelValue","id","onChange"],Go=["for"],Zo={class:"space-y-2"},Yo=["name","value","id","onChange"],Xo=["for"];function Qo(r,t,e,s,n,a){const d=y("Input"),l=y("Datepicker"),m=y("Button"),c=y("AddressInput");return i(),o("div",{key:a.inputKey,style:S({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.type=="short answer"?(i(),x(d,{key:0,type:"text",modelValue:n.response,"onUpdate:modelValue":t[0]||(t[0]=_=>n.response=_),label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.title"),secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","errorText","secondaryLabelStyle","showAsterisk","secondaryLabel"])):h("",!0),e.designCard.type=="long answer"?(i(),x(d,{key:1,rows:"2",type:"textarea",modelValue:n.response,"onUpdate:modelValue":t[1]||(t[1]=_=>n.response=_),label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.title"),secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","errorText","secondaryLabelStyle","showAsterisk","secondaryLabel"])):h("",!0),e.designCard.type=="number"?(i(),x(d,{key:2,type:"number",modelValue:n.response,"onUpdate:modelValue":t[2]||(t[2]=_=>n.response=_),label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.title"),secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","errorText","secondaryLabelStyle","showAsterisk","secondaryLabel"])):h("",!0),e.designCard.type=="date"?(i(),x(l,{key:3,modelValue:n.response,"onUpdate:modelValue":t[3]||(t[3]=_=>n.response=_),enableTimePicker:!0,format:"dd MMM yyyy HH:mm",placeholder:"Select a date",modelType:"yyyy-MM-dd HH:mm",label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.title"),secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","errorText","secondaryLabelStyle","showAsterisk","secondaryLabel"])):h("",!0),e.designCard.type=="time"?(i(),x(d,{key:4,type:"time",modelValue:n.response,"onUpdate:modelValue":t[4]||(t[4]=_=>n.response=_),label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.title"),secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","errorText","secondaryLabelStyle","showAsterisk","secondaryLabel"])):h("",!0),["checkbox","selection","location"].includes(e.designCard.type)?(i(),o(v,{key:5},[a.isNotEmpty(e.designCard.metadata.title)||a.isNotEmpty(e.designCard.metadata.description)?(i(),o("div",Uo,[g("div",qo,[g("span",{style:S({color:e.designCard.metadata.design.title_color})},f(e.designCard.metadata.title),5),a.isNotEmpty(e.designCard.metadata.title)?(i(),o(v,{key:0},[e.designCard.metadata.required?(i(),o("span",Vo," * ")):(i(),o("span",{key:1,class:"font-normal text-gray-400 ml-1",style:S({color:e.designCard.metadata.design.optional_text_color})}," (optional) ",4))],64)):h("",!0)]),a.isNotEmpty(e.designCard.metadata.description)?(i(),o("span",{key:0,style:S({color:e.designCard.metadata.design.description_color}),class:"leading-4 text-xs text-gray-400"},f(e.designCard.metadata.description),5)):h("",!0)])):h("",!0),e.designCard.type=="checkbox"?(i(),o("div",Ho,[(i(!0),o(v,null,O(e.designCard.metadata.options,(_,b)=>(i(),o("div",{key:b,class:"flex items-center space-x-2"},[mt(g("input",{type:"checkbox","onUpdate:modelValue":p=>n.response[b]=p,id:`${a.inputKey}-${b}`,onChange:p=>n.response[b]=p.target.checked,style:S(`accent-color:${e.designCard.metadata.design.checkbox_color};`)},null,44,Wo),[[Ir,n.response[b]]]),g("label",{for:`${a.inputKey}-${b}`},[g("span",{style:S({color:e.designCard.metadata.design.title_color})},f(_.name),5)],8,Go)]))),128))])):h("",!0),e.designCard.type=="selection"?(i(),o(v,{key:2},[g("div",Zo,[(i(!0),o(v,null,O(e.designCard.metadata.options,(_,b)=>(i(),o("div",{key:b,class:"flex items-center space-x-2"},[mt(g("input",{type:"radio",name:a.inputKey,"onUpdate:modelValue":t[5]||(t[5]=p=>n.response=p),value:_.name,id:`${a.inputKey}-${b}`,onChange:p=>n.response=_.name,style:S(`accent-color:${e.designCard.metadata.design.radio_color};`)},null,44,Yo),[[Or,n.response]]),g("label",{for:`${a.inputKey}-${b}`},[g("span",{style:S({color:e.designCard.metadata.design.title_color})},f(_.name),5)],8,Xo)]))),128))]),!e.designCard.metadata.required&&e.designCard.metadata.options>=1?(i(),x(m,{key:0,size:"xs",type:"light",class:"mt-4",action:()=>n.response=null},{default:z(()=>[...t[8]||(t[8]=[g("span",null,"Clear selection",-1)])]),_:1},8,["action"])):h("",!0)],64)):h("",!0),e.designCard.type=="location"?(i(),x(c,{key:3,height:"250px",onlyValidate:!0,pinLocationOnMap:!0,triggerClass:"space-y-4",onOnDeleted:a.unsetAddress,address:e.designCard.address,onOnValidated:t[6]||(t[6]=_=>a.setAddress(_)),triggerText:e.designCard.metadata.trigger_text??"Add Address"},null,8,["onOnDeleted","address","triggerText"])):h("",!0)],64)):h("",!0),e.designCard.type=="media"?(i(),x(d,{key:6,type:"file",maxFiles:3,modelValue:n.response,"onUpdate:modelValue":t[7]||(t[7]=_=>n.response=_),mimeTypes:["image/*"],imagePreviewGridCols:3,label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},fileTextStyle:{color:e.designCard.metadata.design.media_text_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.photos"),wrapperStyle:{backgroundColor:e.designCard.metadata.design.media_bg_color},secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","fileTextStyle","errorText","wrapperStyle","secondaryLabelStyle","showAsterisk","secondaryLabel"])):h("",!0)],4)}const Ko=E(jo,[["render",Qo]]),Jo={inject:["formState","orderState","storeState","notificationState"],components:{ArrowRight:Kr,Pill:Ie,Alert:tr,Button:xe,Loader:pt,Skeleton:de},props:{designCard:{type:Object}},data(){return{Plus:ar,pagination:null,storePaymentMethods:[],isLoadingStorePaymentMethods:!1}},watch:{store(r,t){!t&&r&&this.showStorePaymentMethods()}},computed:{store(){return this.storeState.store},order(){return this.orderState.order},isLoadingStore(){return this.storeState.isLoadingStore},isLoadingOrder(){return this.orderState.isLoadingOrder},fakeOutstandingTotal(){return zr("100.00",this.store.currency)},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)}},methods:{navigateToStorePaymentMethod(r){if(this.isDesigning){this.notificationState.showSuccessNotification("Only opens on the actual store");return}this.$router.push({name:"show-shop-payment-method",params:{alias:this.store.alias,order_id:this.order.id,store_payment_method_id:r.id}})},async navigateToShowShopPendingPayment(){this.isDesigning||await this.$router.push({name:"show-shop-pending-payment",params:{alias:this.store.alias,order_id:this.order.id}})},async navigateToShowPaymentMethods(){await this.$router.push({name:"show-payment-methods",query:{store_id:this.store.id}})},async showStorePaymentMethods(){var r,t;try{this.isLoadingStorePaymentMethods=!0;let e={params:{association:"shopper",store_id:this.store.id,_relationships:["logo","paymentMethod"].join(",")}};const s=await axios.get("/api/store-payment-methods",e);this.pagination=s.data,this.storePaymentMethods=this.pagination.data,this.storePaymentMethods.length==0&&this.navigateToShowShopPendingPayment()}catch(e){const s=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching payment methods";this.notificationState.showWarningNotification(s),this.formState.setServerFormErrors(e),console.error("Failed to fetch payment methods:",e)}finally{this.isLoadingStorePaymentMethods=!1}}},created(){this.store&&this.showStorePaymentMethods()}},$o={class:"flex flex-col items-center"},el={class:"space-y-3 mb-4"},tl={key:0,class:"space-y-2"},al={class:"w-full flex justify-between items-center"},rl=["onClick"],nl={class:"flex justify-between items-center"},il={class:"flex items-center space-x-2 font-bold"},sl={class:"w-8 h-8 rounded-full overflow-hidden flex items-center justify-center"},dl=["src"],ol={class:"text-sm"},ll={class:"flex justify-center"};function cl(r,t,e,s,n,a){var _,b;const d=y("Skeleton"),l=y("ArrowRight"),m=y("Button"),c=y("Alert");return i(),o("div",{style:S({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[g("div",$o,[e.designCard.metadata.title?(i(),o("h2",{key:0,class:"text-xl font-semibold text-center mb-4",style:S({color:e.designCard.metadata.design.title_color})},f(e.designCard.metadata.title),5)):h("",!0),e.designCard.metadata.subtitle?(i(),o("h2",{key:1,class:"text-center",style:S({color:e.designCard.metadata.design.subtitle_color})},f(e.designCard.metadata.subtitle),5)):h("",!0),a.isLoadingOrder?(i(),x(d,{key:2,width:"w-40",height:"h-8",shine:!0,class:"my-4"})):(i(),o("h2",{key:3,style:S({color:e.designCard.metadata.design.amount_color}),class:"text-4xl font-semibold text-center mb-8"},f(((b=(_=a.order)==null?void 0:_.outstanding_total)==null?void 0:b.amount_with_currency)??a.fakeOutstandingTotal),5))]),g("div",el,[a.isLoadingOrder?(i(),o("div",tl,[(i(),o(v,null,O([1,2,3],(p,A)=>g("div",{key:A,class:"flex items-center space-x-4 border-b shadow-sm rounded-lg py-6 px-4 bg-gray-50"},[L(d,{width:"w-8",height:"h-8",shine:!0,class:"shrink-0"}),g("div",al,[L(d,{width:"w-40",shine:!0}),L(d,{width:"w-8",shine:!0})])])),64))])):(i(),o(v,{key:1},[n.storePaymentMethods.length>=1?(i(!0),o(v,{key:0},O(n.storePaymentMethods,(p,A)=>(i(),o("div",{key:A,onClick:()=>a.navigateToStorePaymentMethod(p),class:"bg-white p-4 shadow-sm rounded-xl transition-all duration-300 border border-gray-100 hover:border-gray-300 hover:shadow-lg cursor-pointer",s:""},[g("div",nl,[g("div",il,[g("div",sl,[g("img",{alt:"Payment Method Logo",class:"h-full object-contain",src:p.logo?p.logo.path:p.payment_method.image_url},null,8,dl)]),g("span",ol,f(p.payment_method.type=="other"&&p.custom_name?p.custom_name:p.payment_method.name),1)]),L(l,{size:"20"})])],8,rl))),128)):a.isDesigning?(i(),x(c,{key:1,dismissable:!1,title:"No payment methods"},{description:z(()=>[t[1]||(t[1]=g("p",{class:"mb-4"},"You have not added any payment methods, therefore this page will be skipped during checkout.",-1)),g("div",ll,[L(m,{size:"md",type:"light",leftIcon:n.Plus,action:a.navigateToShowPaymentMethods},{default:z(()=>[...t[0]||(t[0]=[g("span",{class:"text-xs"},"Add Payment Method",-1)])]),_:1},8,["leftIcon","action"])])]),_:1})):h("",!0)],64))])],4)}const gl=E(Jo,[["render",cl]]),ul={inject:["formState","storeState","orderState"],components:{X:$a,Image:Yt,Pill:Ie,Input:ge,Button:xe,Skeleton:de},props:{index:{type:Number},cartProduct:{type:Object}},data(){return{}},computed:{store(){return this.storeState.store},hasPhotoPath(){return this.photoPath!=null},photoPath(){return this.cartProduct.photo_path},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart},orderProduct(){return this.orderState.shoppingCart?this.orderState.shoppingCart.order_products.find(r=>r.product_id===this.cartProduct.id):null},errorText(){return this.formState.getFormError(`cart_products.${this.index}`)}},methods:{checkQuantity(){(typeof this.cartProduct.quantity>"u"||this.cartProduct.quantity===null||isNaN(parseInt(this.cartProduct.quantity))||parseInt(this.cartProduct.quantity)<1)&&(this.cartProduct.quantity="1")}}},ml={class:"w-full flex items-center space-x-4"},hl=["src"],_l={class:"w-full flex items-start"},fl={class:"w-full"},pl={class:"text-sm"},yl={key:1,class:"text-xs space-x-2"},bl={key:0},xl={class:"flex justify-end"},Cl={class:"w-fit text-sm flex items-center border border-gray-300 rounded-full overflow-hidden"},kl={key:0,class:"scroll-to-error font-medium text-red-500 text-xs mt-1 ml-1"};function wl(r,t,e,s,n,a){const d=y("Image"),l=y("Skeleton"),m=y("Pill"),c=y("X");return i(),o("div",{class:B({"border-t border-gray-100 pt-4 mt-4":e.index>0})},[g("div",ml,[g("div",{class:B(["flex items-center justify-center w-10 h-10 rounded-lg",{"border border-dashed border-gray-200":!a.hasPhotoPath}])},[a.hasPhotoPath?(i(),o("img",{key:0,class:"w-10 object-contain rounded-lg flex-shrink-0",src:a.photoPath},null,8,hl)):(i(),x(d,{key:1,size:"16",class:"text-gray-300"}))],2),g("div",_l,[g("div",fl,[g("p",pl,f(e.cartProduct.name),1),a.isInspectingShoppingCart?(i(),x(l,{key:0,width:"w-24",height:"h-4",shine:!0,class:"mt-2"})):a.orderProduct?(i(),o(v,{key:1},[a.orderProduct.is_free?(i(),x(m,{key:0,type:"success",size:"xs",showDot:!1},{default:z(()=>[...t[5]||(t[5]=[ae("free",-1)])]),_:1})):(i(),o("p",yl,[g("span",{class:B({"line-through text-gray-500":a.orderProduct.on_sale})},f(a.orderProduct.subtotal.amount_with_currency),3),a.orderProduct.on_sale?(i(),o("span",bl,f(a.orderProduct.grand_total.amount_with_currency),1)):h("",!0)]))],64)):h("",!0)]),L(c,{onClick:t[0]||(t[0]=q(()=>a.orderState.removeCartProduct(e.index,!1),["stop"])),class:"w-4 h-4 flex-shrink-0 text-gray-400 cursor-pointer hover:opacity-90 active:opacity-80 active:scale-90 transition-all"})])]),g("div",xl,[g("div",Cl,[g("button",{onClick:t[1]||(t[1]=q(()=>a.orderState.decreaseCartProductQuantity(e.index,!1),["stop"])),class:"px-3 py-1 bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer"}," - "),mt(g("input",{min:"0",value:"2",type:"number",onBlur:t[2]||(t[2]=(..._)=>a.checkQuantity&&a.checkQuantity(..._)),"onUpdate:modelValue":t[3]||(t[3]=_=>e.cartProduct.quantity=_),class:"w-12 text-center border-0 focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"},null,544),[[Ka,e.cartProduct.quantity]]),g("button",{onClick:t[4]||(t[4]=q(()=>a.orderState.increaseCartProductQuantity(e.index,!1),["stop"])),class:"px-3 py-1 bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer"}," + ")])]),a.errorText?(i(),o("span",kl,f(a.errorText),1)):h("",!0)],2)}const Sl=E(ul,[["render",wl]]),vl={components:{Pill:Ie},props:{parentProduct:{type:Object,default:null},product:{type:Object},onSelectProduct:{type:Function}},computed:{photo(){return this.product.photo},hasPhoto(){return this.photo!=null}}},Tl=["src"],Rl={key:1,class:"w-6 h-6 text-gray-400 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ll={class:"w-full flex items-center justify-between"},El={class:"text-sm font-semibold"},Al={class:"text-xs space-x-2"},Dl={key:0};function Pl(r,t,e,s,n,a){const d=y("Pill");return i(),o("div",{onClick:t[0]||(t[0]=()=>e.onSelectProduct(e.product,e.parentProduct)),class:"flex justify-between items-center cursor-pointer p-2 space-x-4 rounded-lg bg-gray-50 hover:bg-gray-100"},[g("div",{class:B(["flex items-center justify-center w-10 h-10 rounded-lg",{"border border-dashed border-gray-200":!a.hasPhoto}])},[a.hasPhoto?(i(),o("img",{key:0,class:"w-full max-h-10 object-contain rounded-lg flex-shrink-0",src:a.photo.path},null,8,Tl)):(i(),o("svg",Rl,[...t[1]||(t[1]=[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"},null,-1)])]))],2),g("div",Ll,[g("div",null,[g("p",El,f(e.product.name),1),g("p",Al,[g("span",{class:B({"line-through text-gray-500":e.product.on_sale})},f(e.product.unit_regular_price.amount_with_currency),3),e.product.on_sale?(i(),o("span",Dl,f(e.product.unit_sale_price.amount_with_currency),1)):h("",!0)])]),e.product.variants&&e.product.variants.length?(i(),x(d,{key:0,type:"light",size:"xs"},{default:z(()=>[ae(f(e.product.variants.length)+" "+f(e.product.variants.length==1?"option":"options"),1)]),_:1})):h("",!0)])])}const Ml=E(vl,[["render",Pl]]),Il={components:{CartProductOption:Ml},props:{parentProduct:{type:Object,default:null},products:{type:Array},onSelectProduct:{type:Function}}},Ol={class:"max-h-80 overflow-y-auto space-y-2 mb-4"};function Fl(r,t,e,s,n,a){const d=y("CartProductOption");return i(),o("div",Ol,[(i(!0),o(v,null,O(e.products,(l,m)=>(i(),x(d,{key:m,product:l,parentProduct:e.parentProduct,onSelectProduct:e.onSelectProduct},null,8,["product","parentProduct","onSelectProduct"]))),128))])}const yr=E(Il,[["render",Fl]]),Nl={components:{CartProductOptions:yr},props:{selectedProduct:{type:Object},onSelectProduct:{type:Function}}},Bl={class:"space-y-2 mb-4"};function zl(r,t,e,s,n,a){const d=y("CartProductOptions");return i(),o("div",Bl,[L(d,{parentProduct:e.selectedProduct,onSelectProduct:e.onSelectProduct,products:e.selectedProduct.variants},null,8,["parentProduct","onSelectProduct","products"])])}const jl=E(Nl,[["render",zl]]),Ul={inject:["formState","orderState","storeState","notificationState"],components:{Input:ge,Modal:Jr,Button:xe,Skeleton:de,CartProductOptions:yr,CartProductVariationOptions:jl},data(){return{Plus:ar,ArrowLeft:$r,products:[],searchTerm:null,lastSearchTerm:null,selectedProduct:null,isLoadingProducts:!1,hasLoadedInitialProducts:!1}},watch:{searchTerm(){this.showProducts()}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},hasSearchTerm(){return this.isNotEmpty(this.searchTerm)},hasProducts(){return this.products.length>0}},methods:{isNotEmpty:Qe,onShow(){this.hasLoadedInitialProducts=!1,this.selectedProduct=null,this.lastSearchTerm=null,this.searchTerm=null,this.products=[],this.showProducts()},async showProducts(){var r,t;try{this.isLoadingProducts=!0;let e={params:{store_id:this.store.id,association:"team member",_relationships:"photo,variants"}};this.hasSearchTerm&&(e.params.search=this.searchTerm),this.lastSearchTerm=this.searchTerm;const s=await Ja.get("/api/products",e);if(this.searchTerm===this.lastSearchTerm){const n=s.data;this.products=n.data,this.isLoadingProducts=!1,this.hasLoadedInitialProducts=!0}}catch(e){const s=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching products";this.notificationState.showWarningNotification(s),this.formState.setServerFormErrors(e),console.error("Failed to fetch products:",e)}finally{this.isLoadingProducts=!1}},onSelectProduct(r,t){r.variants&&r.variants.length>0?this.selectedProduct=r:(this.$refs.modal.hideModal(),this.orderState.addCartProductUsingProduct(r,t,null,!1))},removeSelectedProduct(){this.selectedProduct=null}}},ql={class:"flex justify-center"},Vl={key:0,class:"space-y-2 mb-4"},Hl={class:"w-full space-y-2"},Wl={class:"flex items-center space-x-4 border-b border-dashed border-gray-300 my-4 pb-4"},Gl={class:"flex items-center space-x-2"},Zl={key:0,class:"flex items-center justify-center w-10 h-10 rounded-lg"},Yl=["src"],Xl={class:"text-lg font-bold"},Ql={key:3,class:"text-sm text-center p-4 rounded-lg bg-gray-50 mb-4"};function Kl(r,t,e,s,n,a){const d=y("Input"),l=y("Skeleton"),m=y("Button"),c=y("CartProductVariationOptions"),_=y("CartProductOptions"),b=y("Modal");return i(),o("div",ql,[L(b,{ref:"modal",onShow:a.onShow,triggerSize:"sm",contentClass:"px-4",triggerType:"light",header:"Add Product",leftTriggerIcon:n.Plus,scrollOnContent:!1,triggerText:"Add Product",showApproveButton:!1,targetClass:"mockup-phone",triggerLoading:a.isLoadingStore},{content:z(()=>[L(d,{type:"search",debounced:!0,class:"w-full my-2",modelValue:n.searchTerm,"onUpdate:modelValue":t[0]||(t[0]=p=>n.searchTerm=p),skeleton:a.isLoadingStore,placeholder:"Search products",onInput:t[1]||(t[1]=p=>n.isLoadingProducts=!0)},null,8,["modelValue","skeleton"]),n.isLoadingProducts?(i(),o("div",Vl,[(i(),o(v,null,O([1,2,3],(p,A)=>g("div",{key:A,class:"flex items-center space-x-2 border-b border-gray-300 shadow-sm rounded-lg p-2 bg-gray-50 w-full"},[L(l,{width:"w-10",height:"h-10",rounded:"rounded-lg",shine:!0,class:"flex-shrink-0"}),g("div",Hl,[L(l,{width:"w-2/3",shine:!0}),L(l,{width:"w-1/3",shine:!0})])])),64))])):n.selectedProduct?(i(),o(v,{key:1},[g("div",Wl,[L(m,{size:"xs",type:"light",leftIcon:n.ArrowLeft,action:a.removeSelectedProduct},{default:z(()=>[...t[2]||(t[2]=[g("span",null,"Back",-1)])]),_:1},8,["leftIcon","action"]),g("div",Gl,[n.selectedProduct.photo.path?(i(),o("div",Zl,[g("img",{class:"w-full max-h-10 object-contain rounded-lg flex-shrink-0",src:n.selectedProduct.photo.path},null,8,Yl)])):h("",!0),g("p",Xl,f(n.selectedProduct.name),1)])]),L(c,{onSelectProduct:a.onSelectProduct,selectedProduct:n.selectedProduct},null,8,["onSelectProduct","selectedProduct"])],64)):a.hasProducts?(i(),x(_,{key:2,products:n.products,onSelectProduct:a.onSelectProduct},null,8,["products","onSelectProduct"])):(i(),o("p",Ql," No products found "))]),_:1},8,["onShow","leftTriggerIcon","triggerLoading"])])}const Jl=E(Ul,[["render",Kl]]),$l={inject:["storeState","orderState"],components:{Skeleton:de,CartProduct:Sl,AddCartProduct:Jl},computed:{isLoadingStore(){return this.storeState.isLoadingStore},cartProducts(){return this.orderState.orderForm.cart_products},hasCartProducts(){return this.cartProducts.length>0}}},ec={key:0,class:"space-y-2"},tc={class:"w-full space-y-4"},ac={key:1,class:"space-y-4"},rc={key:0};function nc(r,t,e,s,n,a){const d=y("Skeleton"),l=y("CartProduct"),m=y("AddCartProduct");return a.isLoadingStore?(i(),o("div",ec,[(i(),o(v,null,O([1,2,3],(c,_)=>g("div",{key:_,class:"flex items-center space-x-4 border-b border-gray-300 shadow-sm rounded-lg py-6 px-4 bg-gray-50"},[t[0]||(t[0]=g("div",{class:"flex items-center justify-center w-16 h-16 border border-dashed border-gray-200 rounded-lg flex-shrink-0"},[g("svg",{class:"w-6 h-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])],-1)),g("div",tc,[L(d,{width:"w-full",shine:!0}),L(d,{width:"w-1/3",shine:!0})])])),64))])):(i(),o("div",ac,[a.hasCartProducts?(i(),o("div",rc,[(i(!0),o(v,null,O(a.cartProducts,(c,_)=>(i(),x(l,{key:_,index:_,cartProduct:c},null,8,["index","cartProduct"]))),128))])):h("",!0),g("div",{class:B(["relative",{"flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg space-y-4 my-4":!a.hasCartProducts}])},[a.hasCartProducts?h("",!0):(i(),o(v,{key:0},[t[1]||(t[1]=g("svg",{class:"w-10 h-10 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})],-1)),t[2]||(t[2]=g("span",{class:"text-sm text-gray-500"},"No products added",-1))],64)),L(m)],2)]))}const ic=E($l,[["render",nc]]),sc={components:{Input:ge,CartProducts:ic},props:{designCard:{type:Object}}},dc={class:"space-y-2 mt-4"};function oc(r,t,e,s,n,a){const d=y("CartProducts");return e.designCard.metadata.show_items?(i(),o("div",{key:0,style:S({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(i(),o("h1",{key:0,class:"text-base font-semibold",style:S({color:e.designCard.metadata.design.title_color})},f(e.designCard.metadata.title),5)):h("",!0),e.designCard.metadata.description?(i(),o("p",{key:1,class:"text-sm text-gray-700 mt-2",style:S({color:e.designCard.metadata.design.description_color})},f(e.designCard.metadata.description),5)):h("",!0),g("div",dc,[L(d)])],4)):h("",!0)}const lc=E(sc,[["render",oc]]),cc={inject:["formState","orderState"],components:{Loader:pt,AddressInput:Xt},props:{index:{type:Number},deliveryMethod:{type:Object}},data(){return{loadingMap:!1}},computed:{orderForm(){return this.orderState.orderForm},selectedDeliveryMethod(){return this.orderState.selectedDeliveryMethod},pinLocationOnMap(){return(this.shoppingCartDeliveryMethodOption||{}).pin_location_on_map||!1},deliveryAddressIsRequired(){return(this.shoppingCartDeliveryMethodOption||{}).delivery_address_is_required||!1},shoppingCartDeliveryMethodOption(){return this.orderState.getShoppingCartDeliveryMethodOption(this.deliveryMethod)},errorText(){return this.formState.getFormError(`delivery_methods.${this.index}.address`)}},methods:{setAddress(r){this.orderState.orderForm.delivery_address=r},unsetAddress(){this.orderState.orderForm.delivery_address=null}},created(){this.orderState.orderForm.delivery_address&&(this.loadingMap=!0,setTimeout(()=>{this.loadingMap=!1},1500))}},gc={key:0,class:"mt-2 pt-2 border-t border-dashed border-gray-200"},uc={key:0,class:"scroll-to-error font-medium text-red-500 text-xs mt-1 ml-1"},mc={key:1,class:"flex items-center justify-center py-2"};function hc(r,t,e,s,n,a){const d=y("Loader"),l=y("AddressInput");return a.deliveryAddressIsRequired?(i(),o("div",gc,[a.errorText?(i(),o("span",uc,f(a.errorText),1)):h("",!0),n.loadingMap?(i(),o("div",mc,[L(d,null,{default:z(()=>[...t[0]||(t[0]=[g("span",{class:"text-sm ml-2"},"Preparing address",-1)])]),_:1})])):(i(),x(l,{key:2,height:"200px",triggerClass:"",onlyValidate:!0,onOnDeleted:a.unsetAddress,onOnValidated:a.setAddress,targetClass:"mockup-phone",pinLocationOnMap:a.pinLocationOnMap,address:a.orderForm.delivery_address},null,8,["onOnDeleted","onOnValidated","pinLocationOnMap","address"]))])):h("",!0)}const _c=E(cc,[["render",hc]]),fc={inject:["formState","orderState"],components:{Alert:tr,Input:ge,Switch:en,Skeleton:de,DeliveryDatePicker:an,DeliveryTimePicker:tn},props:{index:{type:Number},deliveryMethod:{type:Object}},data(){return{isLoadingDateOptions:!1}},computed:{orderForm(){return this.orderState.orderForm},shoppingCart(){return this.orderState.shoppingCart},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart},scheduleIsRequired(){return(this.shoppingCartDeliveryMethodOption||{}).schedule_is_required||!1},scheduleIncompleteReasons(){return(this.shoppingCartDeliveryMethodOption||{}).schedule_incomplete_reasons||[]},shoppingCartDeliveryMethodOption(){return this.orderState.getShoppingCartDeliveryMethodOption(this.deliveryMethod)},errorText(){return this.formState.getFormError(`delivery_methods.${this.index}.schedule`)}},methods:{formattedShortWeekday:Fr,onIsLoadingDateOptions(r){this.isLoadingDateOptions=r}}},pc={key:0,class:"space-y-4 pt-4 px-4"},yc={class:"space-y-2"},bc={class:"text-sm text-gray-500"},xc={key:0,class:"scroll-to-error font-medium text-red-500 text-xs mt-1 ml-1"},Cc={key:1,class:"flex items-center space-x-1 md:space-x-2"},kc={class:"font-medium text-red-500 text-xs md:text-sm"},wc={key:2,class:"space-y-2 border-t border-b border-dashed border-gray-300 py-4"},Sc={class:"text-sm"},vc={class:"font-bold"},Tc={key:0,class:"text-sm"},Rc={class:"font-bold"};function Lc(r,t,e,s,n,a){const d=y("DeliveryDatePicker"),l=y("DeliveryTimePicker"),m=y("Skeleton");return a.scheduleIsRequired?(i(),o("div",pc,[g("div",yc,[t[2]||(t[2]=g("p",{class:"font-bold text-md"},"Schedule",-1)),g("div",null,[g("p",bc,[e.deliveryMethod.schedule_type=="date"?(i(),o(v,{key:0},[ae("The delivery date for this order")],64)):e.deliveryMethod.schedule_type=="date and time"?(i(),o(v,{key:1},[ae("Specify the delivery date and time for this order")],64)):h("",!0)])])]),a.errorText?(i(),o("span",xc,f(a.errorText),1)):h("",!0),L(d,{deliveryMethod:e.deliveryMethod,modelValue:a.orderForm.delivery_date,"onUpdate:modelValue":t[0]||(t[0]=c=>a.orderForm.delivery_date=c),onIsLoading:a.onIsLoadingDateOptions},null,8,["deliveryMethod","modelValue","onIsLoading"]),a.orderForm.delivery_date&&!n.isLoadingDateOptions&&e.deliveryMethod.schedule_type=="date and time"?(i(),x(l,{key:1,class:"w-full",autoSelectFirstTimeslot:!0,deliveryMethod:e.deliveryMethod,modelValue:a.orderForm.delivery_timeslot,"onUpdate:modelValue":t[1]||(t[1]=c=>a.orderForm.delivery_timeslot=c),deliveryDate:a.orderForm.delivery_date},null,8,["deliveryMethod","modelValue","deliveryDate"])):h("",!0),(i(!0),o(v,null,O(a.scheduleIncompleteReasons,(c,_)=>(i(),o("div",{key:_},[a.isInspectingShoppingCart?(i(),x(m,{key:0,width:"w-1/3",shine:!0})):(i(),o("div",Cc,[t[3]||(t[3]=g("svg",{class:"w-4 h-4 md:w-6 md:h-6 flex-shrink-0 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1)),g("span",kc,f(c),1)]))]))),128)),a.orderForm.delivery_date?(i(),o("div",wc,[g("div",Sc,[t[4]||(t[4]=g("span",null,"Delivery date: ",-1)),g("span",vc,f(a.orderForm.delivery_date)+" ("+f(a.formattedShortWeekday(a.orderForm.delivery_date))+") ",1)]),a.orderForm.delivery_timeslot?(i(),o("div",Tc,[t[5]||(t[5]=g("span",null,"Delivery time: ",-1)),g("span",Rc,f(a.orderForm.delivery_timeslot),1)])):h("",!0)])):h("",!0)])):h("",!0)}const Ec=E(fc,[["render",Lc]]),Ac={inject:["formState","orderState"],components:{Info:nn,CircleAlert:rn,Skeleton:de,OrderDeliveryMethodMap:_c,OrderDeliveryMethodSchedule:Ec},props:{index:{type:Number},deliveryMethod:{type:Object}},computed:{shoppingCart(){return this.orderState.shoppingCart},orderForm(){return this.orderState.orderForm},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart},usesFlatFee(){return this.deliveryMethod.fee_type=="flat fee"},usesPercentageFee(){return this.deliveryMethod.fee_type=="percentage fee"},usesFeeByWeight(){return this.deliveryMethod.fee_type=="fee by weight"},usesFeeByDistance(){return this.deliveryMethod.fee_type=="fee by distance"},usesFeeByPostalCode(){return this.deliveryMethod.fee_type=="fee by postal code"},isSelectedDeliveryMethod(){return this.orderForm.delivery_method_id===this.deliveryMethod.id},shoppingCartDeliveryMethodOption(){return((this.shoppingCart||{}).delivery_method_options||[]).find(r=>r.id==this.deliveryMethod.id)},amount(){return(this.shoppingCartDeliveryMethodOption||{}).amount},tips(){return(this.shoppingCartDeliveryMethodOption||{}).tips||[]},unavailabilityReasons(){return(this.shoppingCartDeliveryMethodOption||{}).unavailability_reasons||[]},offersFreeDelivery(){return(this.shoppingCartDeliveryMethodOption||{}).free_delivery},hasTips(){return this.tips.length>0},hasUnavailabilityReasons(){return this.unavailabilityReasons.length>0},errorText(){return this.formState.getFormError(`delivery_methods.${this.index}`)}},methods:{selectDeliveryMethod(){this.orderForm.delivery_method_id=this.deliveryMethod.id}}},Dc={class:"flex items-center space-x-2"},Pc={key:0,class:"w-6 h-6 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Mc={key:1,class:"w-6 h-6 flex justify-center items-center"},Ic={class:"w-full"},Oc={class:"font-bold text-sm transition-colors"},Fc={class:"text-sm transition-colors"},Nc={key:0,class:"text-sm transition-colors text-green-500 font-bold"},Bc={key:1,class:"text-sm transition-colors"},zc={key:2,class:"text-sm transition-colors"},jc={key:3,class:"text-sm transition-colors"},Uc={key:4,class:"text-sm transition-colors"},qc={key:5,class:"text-sm transition-colors"},Vc={key:1,class:"bg-red-50 mt-2 p-4"},Hc={key:1,class:"flex items-center space-x-1 md:space-x-2"},Wc={key:2,class:"bg-blue-50 mt-2 p-4"},Gc={key:1,class:"flex items-center space-x-1 md:space-x-2"},Zc={class:"font-medium italic text-xs md:text-sm text-blue-500"},Yc={key:0,class:"scroll-to-error font-medium text-red-500 text-xs mt-1 ml-1"};function Xc(r,t,e,s,n,a){const d=y("Skeleton"),l=y("Info"),m=y("OrderDeliveryMethodSchedule"),c=y("OrderDeliveryMethodMap");return i(),o("div",{onClick:t[0]||(t[0]=q((..._)=>a.selectDeliveryMethod&&a.selectDeliveryMethod(..._),["stop"])),class:"cursor-pointer p-2 bg-gray-50 border border-gray-300 rounded-lg transition-colors group"},[g("div",Dc,[a.isSelectedDeliveryMethod?(i(),o("svg",Pc,[...t[1]||(t[1]=[g("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"},null,-1)])])):(i(),o("div",Mc,[...t[2]||(t[2]=[g("div",{class:"w-4 h-4 bg-gray-100 border border-gray-300 rounded-full"},null,-1)])])),g("div",Ic,[g("p",Oc,f(e.deliveryMethod.name),1),g("p",Fc,f(e.deliveryMethod.description),1),e.deliveryMethod.charge_fee&&(a.offersFreeDelivery||a.amount)?(i(),o(v,{key:0},[a.offersFreeDelivery?(i(),o("p",Nc," Free delivery ")):a.usesFlatFee?(i(),o("p",Bc," Flat fee of "+f(a.amount.amount_with_currency),1)):a.usesPercentageFee?(i(),o("p",zc," Percentage fee of "+f(a.amount.amount_with_currency)+" ("+f(e.deliveryMethod.percentage_fee_rate)+"%) ",1)):a.usesFeeByWeight?(i(),o("p",jc," Weight fee of "+f(a.amount.amount_with_currency)+" ("+f(a.shoppingCartDeliveryMethodOption.weight.text)+") ",1)):a.usesFeeByDistance?(i(),o("p",Uc," Distance fee of "+f(a.amount.amount_with_currency)+" ("+f(a.shoppingCartDeliveryMethodOption.distance.text)+") ",1)):a.usesFeeByPostalCode?(i(),o("p",qc," Distance fee of "+f(a.amount.amount_with_currency)+" ("+f(a.shoppingCartDeliveryMethodOption.distance.text)+") ",1)):h("",!0)],64)):h("",!0),a.hasUnavailabilityReasons?(i(),o("div",Vc,[(i(!0),o(v,null,O(a.unavailabilityReasons,(_,b)=>(i(),o("div",{key:b},[a.isInspectingShoppingCart?(i(),x(d,{key:0,width:"w-1/3",shine:!0})):(i(),o("div",Hc,[L(l,{size:"16",class:B(["flex-shrink-0",a.isSelectedDeliveryMethod?"text-red-500":"text-blue-500"])},null,8,["class"]),g("span",{class:B(["font-medium italic text-xs md:text-sm",a.isSelectedDeliveryMethod?"text-red-500":"text-blue-500"])},f(_),3)]))]))),128))])):h("",!0),a.hasTips&&!a.hasUnavailabilityReasons?(i(),o("div",Wc,[(i(!0),o(v,null,O(a.tips,(_,b)=>(i(),o("div",{key:b},[a.isInspectingShoppingCart?(i(),x(d,{key:0,width:"w-1/3",shine:!0})):(i(),o("div",Gc,[L(l,{size:"16",class:"flex-shrink-0 text-blue-500"}),g("span",Zc,f(_),1)]))]))),128))])):h("",!0)])]),a.isSelectedDeliveryMethod?(i(),o(v,{key:0},[a.errorText?(i(),o("span",Yc,f(a.errorText),1)):h("",!0),L(m,{index:e.index,deliveryMethod:e.deliveryMethod},null,8,["index","deliveryMethod"]),L(c,{index:e.index,deliveryMethod:e.deliveryMethod},null,8,["index","deliveryMethod"])],64)):h("",!0)])}const Qc=E(Ac,[["render",Xc]]),Kc={inject:["formState","storeState","orderState","notificationState"],components:{Skeleton:de,OrderDeliveryMethod:Qc},watch:{store(r,t){!t&&r&&this.showDeliveryMethods()}},computed:{store(){return this.storeState.store},orderForm(){return this.orderState.orderForm},isLoadingStore(){return this.storeState.isLoadingStore},deliveryMethod(){return this.orderState.deliveryMethod},deliveryMethods(){return this.orderState.deliveryMethods},hasDeliveryMethods(){return this.orderState.hasDeliveryMethods},errorText(){return this.formState.getFormError("delivery_methods")}},methods:{async showDeliveryMethods(){var r,t;try{this.orderState.isLoadingDeliveryMethods=!0;let e={params:{per_page:100,store_id:this.store.id}};const n=(await Ja.get("/api/delivery-methods",e)).data;this.orderState.deliveryMethods=n.data}catch(e){const s=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching delivery methods";this.notificationState.showWarningNotification(s),this.formState.setServerFormErrors(e),console.error("Failed to fetch delivery methods:",e)}finally{this.orderState.isLoadingDeliveryMethods=!1}}},created(){this.store&&this.showDeliveryMethods()}},Jc={key:0,class:"flex items-center space-x-4 rounded-lg"},$c={class:"w-full space-y-4"},eg={key:1,class:"space-y-2"},tg={key:0,class:"scroll-to-error font-medium text-red-500 text-xs mt-1 ml-1"},ag={key:1,class:"flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg space-y-4 my-4"};function rg(r,t,e,s,n,a){const d=y("Skeleton"),l=y("OrderDeliveryMethod");return a.isLoadingStore?(i(),o("div",Jc,[t[0]||(t[0]=g("div",{class:"flex items-center justify-center w-16 h-16 border border-dashed border-gray-200 rounded-lg flex-shrink-0"},[g("svg",{class:"w-6 h-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})])],-1)),g("div",$c,[L(d,{width:"w-full",shine:!0}),L(d,{width:"w-1/3",shine:!0})])])):(i(),o("div",eg,[a.hasDeliveryMethods?(i(),o(v,{key:0},[(i(!0),o(v,null,O(a.deliveryMethods,(m,c)=>(i(),x(l,{key:c,index:c,deliveryMethod:m},null,8,["index","deliveryMethod"]))),128)),a.errorText?(i(),o("span",tg,f(a.errorText),1)):h("",!0)],64)):(i(),o("div",ag,[a.hasDeliveryMethods?h("",!0):(i(),o(v,{key:0},[t[1]||(t[1]=g("svg",{class:"w-10 h-10 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})],-1)),t[2]||(t[2]=g("span",{class:"text-sm text-gray-500"},"No delivery methods",-1))],64))]))]))}const ng=E(Kc,[["render",rg]]),ig={components:{Input:ge,OrderDeliveryMethods:ng},props:{designCard:{type:Object}}},sg={class:"space-y-2 mt-4"};function dg(r,t,e,s,n,a){const d=y("OrderDeliveryMethods");return e.designCard.metadata.show_delivery_methods?(i(),o("div",{key:0,style:S({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(i(),o("h1",{key:0,class:"text-base font-semibold",style:S({color:e.designCard.metadata.design.title_color})},f(e.designCard.metadata.title),5)):h("",!0),e.designCard.metadata.description?(i(),o("p",{key:1,class:"text-sm text-gray-700 mt-2",style:S({color:e.designCard.metadata.design.description_color})},f(e.designCard.metadata.description),5)):h("",!0),g("div",sg,[L(d)])],4)):h("",!0)}const og=E(ig,[["render",dg]]),lg={inject:["orderState","storeState"],components:{Skeleton:de},computed:{isLoadingStore(){return this.storeState.isLoadingStore},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart},isReady(){return!this.isLoadingStore&&!this.isInspectingShoppingCart},shoppingCart(){return this.orderState.shoppingCart},hasDeliveryName(){return this.shoppingCart.totals.delivery.name!=null},hasFees(){return Object.keys(this.shoppingCart.totals.fees).length>0},hasDiscounts(){return Object.keys(this.shoppingCart.totals.discounts).length>0},hasTaxAmount(){return this.shoppingCart.totals.vat.amount.amount>0},hasAdjustmentTotal(){return this.shoppingCart.totals.adjustment_total.amount!=0},adjustmentTotalPositive(){return this.shoppingCart.totals.adjustment_total.amount>0}}},cg={key:0,class:"flex items-center space-x-4"},gg={class:"w-full space-y-4"},ug={key:1,class:"bg-blue-50 border border-blue-400 rounded-lg p-4"},mg={key:0,class:"flex items-center justify-between text-sm border-b border-gray-300 border-dashed pb-2 mb-2"},hg={key:1},_g={key:1,class:"border-b border-gray-300 border-dashed pb-2 mb-2"},fg={key:1},pg={key:3,class:"text-red-500"},yg={key:2,class:"border-b border-gray-300 border-dashed pb-2 mb-2"},bg={class:"flex items-center justify-between text-sm mb-1"},xg={key:1,class:"w-full"},Cg={key:3},kg={key:1,class:"text-xs text-gray-400"},wg={key:3,class:"border-b border-gray-300 border-dashed pb-2 mb-2"},Sg={key:1},vg={key:3,class:"text-green-500"},Tg={key:4,class:"border-b border-gray-300 border-dashed pb-2 mb-2"},Rg={class:"flex items-center justify-between text-sm text-gray-500"},Lg={key:1},Eg={key:5,class:"border-b border-dashed border-gray-300 pb-2 mb-2"},Ag={class:"flex items-center justify-between text-sm text-gray-500"},Dg={key:1},Pg={key:3},Mg={class:"flex items-center justify-between text-lg"},Ig={key:1,class:"font-bold"},Og={key:1,class:"text-sm"};function Fg(r,t,e,s,n,a){const d=y("Skeleton");return i(),o("div",null,[a.isLoadingStore?(i(),o("div",cg,[t[0]||(t[0]=g("div",{class:"flex items-center justify-center w-16 h-16 border border-dashed border-gray-200 rounded-lg shrink-0"},[g("svg",{class:"w-6 h-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[g("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])],-1)),g("div",gg,[L(d,{width:"w-full",shine:!0}),L(d,{width:"w-1/3",shine:!0})])])):(i(),o("div",ug,[a.shoppingCart?(i(),o(v,{key:0},[!a.isReady||a.hasDiscounts||a.hasFees||a.hasDeliveryName?(i(),o("div",mg,[t[1]||(t[1]=g("span",null,"Subtotal",-1)),a.isReady?(i(),o("span",hg,f(a.shoppingCart.totals.subtotal.amount_with_currency),1)):(i(),x(d,{key:0,width:"w-24",color:"bg-blue-200",shine:!0}))])):h("",!0),!a.isReady||a.hasDiscounts?(i(),o("div",_g,[(i(!0),o(v,null,O(a.isReady?a.shoppingCart.totals.discounts:[1],(l,m)=>(i(),o("div",{key:m,class:"flex items-center justify-between text-sm text-gray-500"},[a.isReady?(i(),o("span",fg,f(l.name),1)):(i(),x(d,{key:0,width:"w-24",color:"bg-blue-200",shine:!0})),a.isReady?(i(),o("span",pg,"- "+f(l.amount.amount_with_currency),1)):(i(),x(d,{key:2,width:"w-20",color:"bg-blue-200",shine:!0}))]))),128))])):h("",!0),!a.isReady||a.hasTaxAmount?(i(),o("div",yg,[g("div",bg,[a.isReady?(i(),o("div",xg,"Tax ("+f(a.shoppingCart.totals.vat.rate.value_symbol)+" "+f(a.shoppingCart.totals.vat.method)+")",1)):(i(),x(d,{key:0,width:"w-16",color:"bg-blue-200",shine:!0})),a.isReady?(i(),o("span",Cg,f(a.shoppingCart.totals.vat.amount.amount_with_currency),1)):(i(),x(d,{key:2,width:"w-16",color:"bg-blue-200",shine:!0}))]),a.isReady?(i(),o("p",kg,"Tax calculated on the discounted subtotal of "+f(a.shoppingCart.totals.subtotal_after_discount.amount_with_currency),1)):(i(),x(d,{key:0,width:"w-1/3",color:"bg-blue-200",shine:!0}))])):h("",!0),!a.isReady||a.hasFees?(i(),o("div",wg,[(i(!0),o(v,null,O(a.isReady?a.shoppingCart.totals.fees:[1],(l,m)=>(i(),o("div",{key:m,class:"flex items-center justify-between text-sm text-gray-500"},[a.isReady?(i(),o("span",Sg,f(l.name),1)):(i(),x(d,{key:0,width:"w-20",color:"bg-blue-200",shine:!0})),a.isReady?(i(),o("span",vg,"+ "+f(l.amount.amount_with_currency),1)):(i(),x(d,{key:2,width:"w-16",color:"bg-blue-200",shine:!0}))]))),128))])):h("",!0),!a.isReady||a.hasAdjustmentTotal?(i(),o("div",Tg,[g("div",Rg,[a.isReady?(i(),o("span",Lg,"Adjustment")):(i(),x(d,{key:0,width:"w-20",color:"bg-blue-200",shine:!0})),a.isReady?(i(),o("span",{key:3,class:B([a.adjustmentTotalPositive?"text-green-500":"text-red-500"])},f(a.adjustmentTotalPositive?"+":"-")+" "+f(`${a.shoppingCart.totals.adjustment_total.amount_with_currency}`.replace("-","")),3)):(i(),x(d,{key:2,width:"w-16",color:"bg-blue-200",shine:!0}))])])):h("",!0),!a.isReady||a.hasDeliveryName?(i(),o("div",Eg,[g("div",Ag,[a.isReady?(i(),o("span",Dg,f(a.shoppingCart.totals.delivery.name),1)):(i(),x(d,{key:0,width:"w-20",color:"bg-blue-200",shine:!0})),a.isReady?(i(),o("span",Pg,f(a.shoppingCart.totals.delivery.fee.amount_with_currency),1)):(i(),x(d,{key:2,width:"w-16",color:"bg-blue-200",shine:!0}))])])):h("",!0),g("div",Mg,[t[2]||(t[2]=g("div",{class:"w-full font-bold"},"Grand Total",-1)),a.isReady?(i(),o("span",Ig,f(a.shoppingCart.totals.grand_total.amount_with_currency),1)):(i(),x(d,{key:0,width:"w-24",color:"bg-blue-200",shine:!0}))])],64)):(i(),o("span",Og,"Add products to show total"))]))])}const Ng=E(lg,[["render",Fg]]),Bg={inject:["formState","orderState"],components:{OrderTotals:Ng},props:{designCard:{type:Object}}};function zg(r,t,e,s,n,a){const d=y("OrderTotals");return i(),o("div",{style:S({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(i(),o("h1",{key:0,class:"text-base font-semibold",style:S({color:e.designCard.metadata.design.title_color})},f(e.designCard.metadata.title),5)):h("",!0),e.designCard.metadata.description?(i(),o("p",{key:1,class:"text-sm text-gray-700 mt-2",style:S({color:e.designCard.metadata.design.description_color})},f(e.designCard.metadata.description),5)):h("",!0),L(d,{class:"mt-4"})],4)}const jg=E(Bg,[["render",zg]]),Ug={inject:["formState","orderState"],components:{Input:ge,Skeleton:de,CircleCheckBig:sn},props:{designCard:{type:Object}},computed:{orderForm(){return this.orderState.orderForm},shoppingCart(){return this.orderState.shoppingCart},promotionCode(){return this.shoppingCart.promotion_code},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart}}},qg={class:"space-y-4 mt-4"},Vg={class:"flex items-center space-x-4"},Hg={key:1,class:"py-2 px-4 border-l-4 border-green-500 bg-green-50 rounded-sm"},Wg={class:"text-sm font-bold mb-1"},Gg={class:"text-sm italic"};function Zg(r,t,e,s,n,a){const d=y("Input"),l=y("CircleCheckBig"),m=y("Skeleton");return e.designCard.metadata.show_promo_code?(i(),o("div",{key:0,style:S({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(i(),o("h1",{key:0,class:"text-base font-semibold",style:S({color:e.designCard.metadata.design.title_color})},f(e.designCard.metadata.title),5)):h("",!0),e.designCard.metadata.description?(i(),o("p",{key:1,class:"text-sm text-gray-700 mt-2",style:S({color:e.designCard.metadata.design.description_color})},f(e.designCard.metadata.description),5)):h("",!0),g("div",qg,[g("div",Vg,[L(d,{type:"text",class:"w-full",modelValue:a.orderForm.promotion_code,"onUpdate:modelValue":t[0]||(t[0]=c=>a.orderForm.promotion_code=c),placeholder:"Enter discount or referral code",errorText:a.formState.getFormError("promotion_code")},null,8,["modelValue","errorText"]),a.shoppingCart&&a.promotionCode.applied?(i(),x(l,{key:0,size:"24",class:"text-green-500"})):h("",!0)]),a.isInspectingShoppingCart&&a.orderForm.promotion_code?(i(),x(m,{key:0,width:"w-1/3",shine:!0})):a.shoppingCart&&a.promotionCode.applied?(i(),o("div",Hg,[g("p",Wg,f(a.promotionCode.name),1),g("p",Gg,f(a.promotionCode.message),1)])):h("",!0)])],4)):h("",!0)}const Yg=E(Ug,[["render",Zg]]),Xg={inject:["designState","orderState","storeState"],components:{ShoppingCart:er,Button:xe,MyCartButton:Hn,PlaceOrderButton:Zn,MapDesignCard:ns,LogoDesignCard:ds,LinkDesignCard:ms,TextDesignCard:fs,ImageDesignCard:ws,VideoDesignCard:Ds,ContactDesignCard:Us,BannerDesignCard:Fs,DividerDesignCard:Hs,SocialsDesignCard:$s,CustomerDesignCard:rd,ProductsDesignCard:md,CountdownDesignCard:Ud,CategoriesDesignCard:wo,InstallAppDesignCard:Ao,TipsDesignCard:zo,DataCollectionDesignCard:Ko,PaymentMethodsDesignCard:gl,ItemsDesignCard:lc,DeliveryDesignCard:og,OrderSummaryCard:jg,PromoCodeDesignCard:Yg},props:{placement:{type:String},designCards:{type:Array}},data(){return{localDesignCards:[]}},computed:{designForm(){return this.designState.designForm},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)},shoppingCart(){return this.orderState.shoppingCart},showingCheckout(){return this.$route.name=="show-checkout"},showingStorefront(){return this.$route.name=="show-storefront"},grandTotal(){return this.shoppingCart?this.shoppingCart.totals.grand_total.amount_with_currency:null},totalUncancelledProductQuantities(){return this.shoppingCart?this.shoppingCart.totals_summary.order_products.total_uncancelled_product_quantities:null}},methods:{isDataCollectionField(r){return["short answer","long answer","number","date","time","checkbox","selection","location","media"].includes(r.type)}}},Qg={class:"space-y-2"};function Kg(r,t,e,s,n,a){const d=y("LogoDesignCard"),l=y("LinkDesignCard"),m=y("MapDesignCard"),c=y("TextDesignCard"),_=y("ImageDesignCard"),b=y("VideoDesignCard"),p=y("DividerDesignCard"),A=y("BannerDesignCard"),k=y("ContactDesignCard"),F=y("SocialsDesignCard"),j=y("CategoriesDesignCard"),oe=y("InstallAppDesignCard"),ve=y("CountdownDesignCard"),ue=y("TipsDesignCard"),V=y("ItemsDesignCard"),me=y("ProductsDesignCard"),he=y("CustomerDesignCard"),_e=y("DeliveryDesignCard"),Ct=y("OrderSummaryCard"),kt=y("PromoCodeDesignCard"),wt=y("DataCollectionDesignCard"),Z=y("PaymentMethodsDesignCard"),Oe=y("MyCartButton"),Fe=y("PlaceOrderButton");return i(),o("div",Qg,[g("div",{class:B([{"mb-20":a.showingStorefront}])},[(i(!0),o(v,null,O(e.designCards,(R,St)=>(i(),o(v,{key:(R==null?void 0:R.id)??R.temporary_id},[!R.hasOwnProperty("delete")&&R.visible?(i(),o(v,{key:0},[R.type=="logo"?(i(),x(d,{key:0,designCard:R},null,8,["designCard"])):h("",!0),R.type=="link"?(i(),x(l,{key:1,designCard:R},null,8,["designCard"])):R.type=="map"?(i(),x(m,{key:2,designCard:R},null,8,["designCard"])):R.type=="text"?(i(),x(c,{key:3,designCard:R},null,8,["designCard"])):R.type=="image"?(i(),x(_,{key:4,designCard:R},null,8,["designCard"])):R.type=="video"?(i(),x(b,{key:5,designCard:R},null,8,["designCard"])):h("",!0),R.type=="divider"?(i(),x(p,{key:6,designCard:R},null,8,["designCard"])):R.type=="banner"?(i(),x(A,{key:7,designCard:R},null,8,["designCard"])):R.type=="contact"?(i(),x(k,{key:8,designCard:R},null,8,["designCard"])):R.type=="socials"?(i(),x(F,{key:9,designCard:R},null,8,["designCard"])):h("",!0),R.type=="categories"?(i(),x(j,{key:10,designCard:R},null,8,["designCard"])):h("",!0),R.type=="install_app"?(i(),x(oe,{key:11,designCard:R},null,8,["designCard"])):R.type=="countdown"?(i(),x(ve,{key:12,designCard:R},null,8,["designCard"])):R.type=="tips"?(i(),x(ue,{key:13,designCard:R},null,8,["designCard"])):R.type=="items"?(i(),x(V,{key:14,designCard:R},null,8,["designCard"])):R.type=="products"?(i(),x(me,{key:15,designCard:R},null,8,["designCard"])):R.type=="customer"?(i(),x(he,{key:16,designCard:R},null,8,["designCard"])):R.type=="delivery"?(i(),x(_e,{key:17,designCard:R},null,8,["designCard"])):R.type=="order summary"?(i(),x(Ct,{key:18,designCard:R},null,8,["designCard"])):R.type=="promo code"?(i(),x(kt,{key:19,designCard:R},null,8,["designCard"])):a.isDataCollectionField(R)?(i(),x(wt,{key:20,index:St,designCard:R},null,8,["index","designCard"])):R.type=="payment methods"?(i(),x(Z,{key:21,designCard:R},null,8,["designCard"])):h("",!0)],64)):h("",!0)],64))),128))],2),a.showingStorefront&&a.shoppingCart?(i(),x(Oe,{key:0})):a.showingCheckout&&a.shoppingCart?(i(),x(Fe,{key:1,class:"mt-8",placement:e.placement,designCards:e.designCards},null,8,["placement","designCards"])):h("",!0)])}const Jg=E(Xg,[["render",Kg]]),$g={components:{Loader:pt},props:{placement:{type:String}}},eu={class:"pt-8 flex items-center justify-center"},tu={class:"text-sm ml-2"};function au(r,t,e,s,n,a){const d=y("Loader");return i(),o("div",eu,[L(d,null,{default:z(()=>[g("span",tu,"Loading "+f(e.placement=="storefront"?"store":e.placement),1)]),_:1})])}const ru=E($g,[["render",au]]),nu={inject:["formState","designState","storeState","notificationState"],components:{Button:xe,NoDesignCards:un,DesignCards:Jg,LoadingDesignCards:ru},props:{placement:{type:String}},data(){return{MoveLeft:dn,apiDesignCards:[],isLoadingDesignCards:!1}},watch:{store(){this.setup()},loadFromApi(){this.setup()}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},designForm(){return this.designState.designForm},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)},loadFromApi(){return this.$route.name=="edit-storefront"&&this.placement=="menu"||this.$route.name=="edit-menu"&&this.placement=="storefront"||!this.isDesigning},designCards(){var r;return this.loadFromApi?this.apiDesignCards:((r=this.designForm)==null?void 0:r.design_cards)??[]},hasApiDesignCards(){return this.apiDesignCards.length>0},hasDesignCards(){return this.designCards.filter(r=>!r.hasOwnProperty("delete")).length>0}},methods:{async setup(){this.store&&this.loadFromApi&&!this.hasApiDesignCards&&this.showDesignCards()},async navigateToStorefront(){await this.$router.push({name:"show-storefront",params:{alias:this.store.alias}})},async showDesignCards(){var r,t;try{this.isLoadingDesignCards=!0;let e={params:{per_page:100,store_id:this.store.id,placement:this.placement,_relationships:["address","photos"].join(",")}};const s=await axios.get("/api/design-cards",e);this.apiDesignCards=s.data.data}catch(e){const s=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching design cards";this.notificationState.showWarningNotification(s),this.formState.setServerFormErrors(e),console.error("Failed to fetch design cards:",e)}finally{this.isLoadingDesignCards=!1}}},beforeUnmount(){!this.isDesigning&&this.placement!="menu"&&(console.log("this.designState.reset() 1"),this.designState.reset())},created(){this.setup()}};function iu(r,t,e,s,n,a){const d=y("LoadingDesignCards"),l=y("Button"),m=y("DesignCards"),c=y("NoDesignCards");return i(),o("div",null,[a.isLoadingStore||n.isLoadingDesignCards||a.designState.isLoadingDesignCards?(i(),x(d,{key:0,placement:e.placement},null,8,["placement"])):(i(),o(v,{key:1},[e.placement=="checkout"?(i(),x(l,{key:0,size:"xs",type:"light",class:"mt-8 m-4",leftIcon:n.MoveLeft,action:a.navigateToStorefront},{default:z(()=>[...t[0]||(t[0]=[g("span",null,"Shop",-1)])]),_:1},8,["leftIcon","action"])):h("",!0),a.hasDesignCards?(i(),x(m,{key:1,placement:e.placement,designCards:a.designCards},null,8,["placement","designCards"])):(i(),x(c,{key:2}))],64))])}const zu=E(nu,[["render",iu]]);export{zu as D,Hn as M};
