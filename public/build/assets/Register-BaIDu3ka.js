import{c as u,b as s,a as i,w as x,e as S,g as f,t as n,h as b,r as m,o as c,i as E}from"./app-CfcRgAtV.js";import{L as V}from"./Logo-D4rVQRSS.js";import{I as v}from"./Input-5etQ1obE.js";import{B as F}from"./Button-C-mSVtjr.js";import{i as T}from"./stringUtils-Bvzw0-oW.js";import{V as k}from"./vue-slide-up-down-CJ0dkYte.js";import{S as L}from"./SocialLinks-C1jVlwBf.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Copy-DthcHkWW.js";import"./ShineEffect-DuM8M3bS.js";import"./createLucideIcon-6Wi-O4Lc.js";import"./Popover-CErryWiK.js";import"./Tooltip-DXGv3bv0.js";import"./Skeleton-dcrsQT38.js";import"./capitalize-ChUSrr1V.js";import"./refresh-ccw-BfzP-qh6.js";import"./circle-check-DJt4jgY5.js";import"./circle-alert-DtAPlORr.js";import"./x-0E_1Yt9j.js";import"./parsePhoneNumber-xMTQFMCS.js";import"./Loader-DC71jh3F.js";const C={name:"Register",components:{Logo:V,Input:v,Button:F,SocialLinks:L,VueSlideUpDown:k},inject:["formState","notificationState"],data(){return{form:{email:"",password:"",last_name:"",first_name:"",confirm_password:""},loading:!1,currentYear:new Date().getFullYear(),appName:"Perfect Order"}},computed:{expand(){return this.isEmpty(this.form.first_name)&&this.isEmpty(this.form.last_name)}},methods:{isEmpty:T,async submit(){var d,e;if(!this.loading&&(this.formState.hideFormErrors(),this.isEmpty(this.form.first_name)?this.formState.setFormError("first_name","Enter your first name"):this.isEmpty(this.form.last_name)?this.formState.setFormError("last_name","Enter your last name"):this.isEmpty(this.form.email)?this.formState.setFormError("email","Enter your email"):this.isEmpty(this.form.password)?this.formState.setFormError("password","Enter your password"):this.isEmpty(this.form.confirm_password)?this.formState.setFormError("confirm_password","Confirm your password"):this.form.password!=this.form.confirm_password&&this.formState.setFormError("password","Passwords do not match"),!this.formState.hasErrors)){this.loading=!0;try{await b.post("/api/auth/register",this.form),this.notificationState.showSuccessNotification("Registration successful! Please check your email to verify your account."),this.$router.push({name:"verify-email",query:{email:this.form.email,type:"registration email"}})}catch(a){const p=((e=(d=a==null?void 0:a.response)==null?void 0:d.data)==null?void 0:e.message)||(a==null?void 0:a.message)||"Something went wrong while signing up";this.notificationState.showWarningNotification(p),this.formState.setServerFormErrors(a),console.error("Failed to sign up:",a)}finally{this.loading=!1}}}}},B={class:"min-h-screen grid grid-cols-1 lg:grid-cols-2 transition-opacity opacity-100 duration-750 lg:grow starting:opacity-0"},j={class:"flex items-center justify-center p-6 bg-linear-to-b from-blue-100 to-white-100"},U={class:"w-full max-w-md"},P={class:"bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6"},D={key:0,class:"text-red-500 text-sm mb-3"},I={class:"flex justify-end mb-6"},A={class:"ml-1"},R={class:"text-sm text-center text-gray-500"};function Y(d,e,a,p,t,r){const h=m("Logo"),l=m("Input"),g=m("vue-slide-up-down"),_=m("router-link"),w=m("Button"),y=m("SocialLinks");return c(),u("div",B,[s("div",j,[s("div",U,[i(h,{height:"h-20 mx-auto mb-4"}),s("div",P,[e[7]||(e[7]=s("h1",{class:"text-2xl font-semibold leading-none tracking-tight mb-4"},"Sign up",-1)),e[8]||(e[8]=s("h1",{class:"text-sm text-gray-500 mb-4"},"Lets create your account",-1)),s("form",{onSubmit:e[5]||(e[5]=x((...o)=>r.submit&&r.submit(...o),["prevent"])),class:"space-y-4"},[i(l,{type:"text",label:"First Name",placeholder:"John",modelValue:t.form.first_name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.form.first_name=o),errorText:r.formState.getFormError("first_name")},null,8,["modelValue","errorText"]),i(l,{type:"text",label:"Last Name",placeholder:"Doe",modelValue:t.form.last_name,"onUpdate:modelValue":e[1]||(e[1]=o=>t.form.last_name=o),errorText:r.formState.getFormError("last_name")},null,8,["modelValue","errorText"]),i(g,{active:r.expand,class:"space-y-4"},{default:f(()=>[i(l,{type:"email",label:"Email",modelValue:t.form.email,"onUpdate:modelValue":e[2]||(e[2]=o=>t.form.email=o),placeholder:"john@gmail.com",errorText:r.formState.getFormError("email")},null,8,["modelValue","errorText"]),i(l,{type:"password",label:"Password",placeholder:"******",modelValue:t.form.password,"onUpdate:modelValue":e[3]||(e[3]=o=>t.form.password=o),errorText:r.formState.getFormError("password")},null,8,["modelValue","errorText"]),i(l,{type:"password",placeholder:"******",label:"Confirm Password",modelValue:t.form.confirm_password,"onUpdate:modelValue":e[4]||(e[4]=o=>t.form.confirm_password=o),errorText:r.formState.getFormError("confirm_password")},null,8,["modelValue","errorText"])]),_:1},8,["active"]),r.formState.generalErrorText?(c(),u("div",D,n(r.formState.generalErrorText),1)):S("",!0),s("div",I,[i(_,{to:{name:"login"},class:"text-sm text-blue-600 hover:underline"},{default:f(()=>[...e[6]||(e[6]=[E("Already have an account?",-1)])]),_:1})]),i(w,{size:"md",type:"primary",action:r.submit,buttonClass:"w-full"},{default:f(()=>[s("span",A,n(t.loading?"Creating account...":"Create Account"),1)]),_:1},8,["action"])],32)]),i(y,{class:"mb-6"}),s("p",R,"Â© "+n(t.currentYear)+" "+n(t.appName)+". All rights reserved.",1)])]),e[9]||(e[9]=s("div",{class:"hidden lg:block"},[s("img",{src:"/images/lady-with-laptop.jpg",class:"w-full h-full object-cover",alt:"Lady holding boxes"})],-1))])}const le=N(C,[["render",Y]]);export{le as default};
