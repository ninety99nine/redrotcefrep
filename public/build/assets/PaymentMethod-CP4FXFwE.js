import{c as g,a as y,b as i,e as S,g as _,d as p,F,f as q,t as b,k as G,i as M,C as P,r as d,o as m}from"./app-CfcRgAtV.js";import{a as R}from"./Copy-DthcHkWW.js";import{P as Y}from"./Pill-26NEKJFK.js";import{M as K}from"./Modal-1KuVnYqp.js";import{A as J}from"./Alert-bq35X3g6.js";import{I as Q}from"./Input-5etQ1obE.js";import{S as X}from"./Switch-CqEacRY-.js";import{B as Z}from"./Button-C-mSVtjr.js";import{S as $}from"./Skeleton-dcrsQT38.js";import{W as ee}from"./WhatsappIcon-DJrQkeSD.js";import{c as te,i as oe}from"./stringUtils-Bvzw0-oW.js";import{W as ae}from"./WhatsappMessage-H7jeDrYD.js";import{M as se,C as ne,a as re,S as ie,b as me,I as de,E as le}from"./MobileNumberConfig-BEdBInBe.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as ue}from"./info-DEPUf9Rq.js";import{M as ye}from"./move-left-Dt2sjdDQ.js";import{T as ce}from"./trash-2-DH-tWKqJ.js";import"./ShineEffect-DuM8M3bS.js";import"./createLucideIcon-6Wi-O4Lc.js";import"./Popover-CErryWiK.js";import"./Tooltip-DXGv3bv0.js";import"./x-0E_1Yt9j.js";import"./circle-check-DJt4jgY5.js";import"./capitalize-ChUSrr1V.js";import"./refresh-ccw-BfzP-qh6.js";import"./circle-alert-DtAPlORr.js";import"./parsePhoneNumber-xMTQFMCS.js";import"./Loader-DC71jh3F.js";import"./Select-mk4gS599.js";import"./external-link-BQUbRbuL.js";import"./SelectCurrency-c9b_Ayom.js";const pe={inject:["formState","authState","storeState","storePaymentMethodState","changeHistoryState","notificationState"],components:{Copy:R,Pill:Y,Info:ue,Modal:K,Alert:J,Input:Q,Switch:X,Button:Z,Skeleton:$,WhatsappIcon:ee,WhatsappMessage:ae,EmailConfig:le,ImageConfig:de,SelectConfig:me,StringConfig:ie,ContentConfig:re,CurrencyConfig:ne,MobileNumberConfig:se},data(){return{Trash2:ce,MoveLeft:ye,isLoadingPaymentMethod:!1,appName:"Perfect Order",whatsappGroupLink:"https://chat.whatsapp.com/FR9xLOjlcIs6KO0uHiLnTc"}},watch:{store(r,t){!t&&r&&this.setup()}},computed:{authUser(){return this.authState.user},store(){return this.storeState.store},isEditing(){return this.storePaymentMethodId!=null},isLoadingStore(){return this.storeState.isLoadingStore},paymentMethodId(){return this.$route.query.payment_method_id},storePaymentMethodId(){return this.$route.params.store_payment_method_id},paymentMethod(){return this.storePaymentMethodState.paymentMethod},storePaymentMethod(){return this.storePaymentMethodState.storePaymentMethod},storePaymentMethodForm(){return this.storePaymentMethodState.storePaymentMethodForm},isLoadingStorePaymentMethod(){return this.storePaymentMethodState.isLoadingStorePaymentMethod},isDeletingStorePaymentMethod(){return this.storePaymentMethodState.isDeletingStorePaymentMethod},mockMessages(){return[{sender:"You",text:`Hello, I would like to activate *${this.storePaymentMethod.custom_name}* for *${this.store.name}* so that we can take payments`,timestamp:P().subtract(7,"minute").format("HH:mm"),isOwnMessage:!0},{sender:"Support Team",text:`Hi ${this.authUser.first_name||"there"}! Could you share your company profile and refund policy with us`,timestamp:P().subtract(6,"minute").format("HH:mm"),isOwnMessage:!1,nameColor:"#165dfc"},{sender:"You",text:"Here is our company profile üëÜ",timestamp:P().subtract(5,"minute").format("HH:mm"),isOwnMessage:!0,attachments:[{name:"CompanyProfile.pdf",pages:3,size:950}]},{sender:"You",text:"Here is our refund policy üëÜ",timestamp:P().subtract(4,"minute").format("HH:mm"),isOwnMessage:!0,attachments:[{name:"RefundPolicy.pdf",pages:1,size:325}]},{sender:"Support Team",text:"Great! Can you share the store ID from your dashboard",timestamp:P().subtract(3,"minute").format("HH:mm"),isOwnMessage:!1,nameColor:"#165dfc"},{sender:"You",text:`It's ${this.store.id}`,timestamp:P().subtract(2,"minute").format("HH:mm"),isOwnMessage:!0},{sender:"Support Team",text:`*${this.storePaymentMethod.custom_name}* is now activated to take payments for *${this.store.name}* üëè`,timestamp:P().subtract(1,"minute").format("HH:mm"),isOwnMessage:!1,nameColor:"#165dfc"},{sender:"You",text:"Thank you üôè",timestamp:P().format("HH:mm"),isOwnMessage:!0}]}},methods:{isEmpty:oe,capitalize:te,setup(){this.storePaymentMethodState.setStorePaymentMethodForm(null,null,!0),this.store&&this.paymentMethodId&&this.showPaymentMethod(),this.store&&this.storePaymentMethodId&&this.showStorePaymentMethod()},setActionButtons(){this.changeHistoryState.removeButtons(),this.changeHistoryState.addDiscardButton(),this.changeHistoryState.addActionButton(this.isEditing?"Save Changes":"Add Payment Method",this.isEditing?this.updateStorePaymentMethod:this.createStorePaymentMethod,"primary",null)},async navigateToShowPaymentMethods(){await this.$router.push({name:"show-payment-methods",query:{store_id:this.store.id}})},openWhatsappGroup(){window.open(this.whatsappGroupLink,"_blank")},getPaymentMethodFirstValidationError(r,t){return this.storePaymentMethodState.getPaymentMethodFirstValidationError(r,t)},checkIfPaymentMethodConfigSchemaEntityPassesCondition(r,t){return this.storePaymentMethodState.checkIfPaymentMethodConfigSchemaEntityPassesCondition(r,t)},async showPaymentMethod(){var r,t,s;try{this.isLoadingPaymentMethod=!0;let o={params:{store_id:this.store.id}};const e=(await axios.get(`/api/payment-methods/${this.paymentMethodId}`,o)).data;this.storePaymentMethodState.setPaymentMethod(e),this.storePaymentMethodState.setStorePaymentMethodForm(null,e,!0)}catch(o){const n=((t=(r=o==null?void 0:o.response)==null?void 0:r.data)==null?void 0:t.message)||(o==null?void 0:o.message)||"Something went wrong while fetching payment method";this.notificationState.showWarningNotification(n),this.formState.setServerFormErrors(o),console.error("Failed to fetch payment method:",o),((s=o.response)==null?void 0:s.status)===404&&await this.navigateToShowPaymentMethods()}finally{this.isLoadingPaymentMethod=!1}},async showStorePaymentMethod(){var r,t,s;try{this.storePaymentMethodState.isLoadingStorePaymentMethod=!0;let o={params:{store_id:this.store.id,_relationships:["logo","photo","paymentMethod"].join(",")}};const e=(await axios.get(`/api/store-payment-methods/${this.storePaymentMethodId}`,o)).data,h=e.payment_method;this.storePaymentMethodState.setPaymentMethod(h),this.storePaymentMethodState.setStorePaymentMethod(e),this.storePaymentMethodState.setStorePaymentMethodForm(e,h,!0)}catch(o){const n=((t=(r=o==null?void 0:o.response)==null?void 0:r.data)==null?void 0:t.message)||(o==null?void 0:o.message)||"Something went wrong while fetching store payment method";this.notificationState.showWarningNotification(n),this.formState.setServerFormErrors(o),console.error("Failed to fetch store payment method:",o),((s=o.response)==null?void 0:s.status)===404&&await this.navigateToShowPaymentMethods()}finally{this.storePaymentMethodState.isLoadingStorePaymentMethod=!1}},async createStorePaymentMethod(){var r,t;try{if(this.storePaymentMethodState.isCreatingStorePaymentMethod||(this.formState.hideFormErrors(),this.paymentMethod.type=="other"&&this.isEmpty(this.storePaymentMethodForm.custom_name)&&this.formState.setFormError("custom_name","The name is required"),this.formState.hasErrors))return;for(let e=0;e<this.paymentMethod.config_schema.length;e++){const h=this.paymentMethod.config_schema[e];if(this.checkIfPaymentMethodConfigSchemaEntityPassesCondition(h,this.storePaymentMethodForm.configs)){const c=this.getPaymentMethodFirstValidationError(h,this.storePaymentMethodForm.configs);if(c){this.notificationState.showWarningNotification(c);return}}}this.storePaymentMethodState.isCreatingStorePaymentMethod=!0,this.changeHistoryState.actionButtons[1].loading=!0;const s={payment_method_id:this.paymentMethod.id,...this.storePaymentMethodForm,store_id:this.store.id},n=(await axios.post("/api/store-payment-methods",s)).data.store_payment_method;this.storePaymentMethodState.setStorePaymentMethod(n),await this.uploadImages(),this.notificationState.showSuccessNotification("Payment method created"),this.storePaymentMethodState.saveOriginalState("Original payment method"),this.navigateToShowPaymentMethods()}catch(s){const o=((t=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:t.message)||(s==null?void 0:s.message)||"Something went wrong while creating payment method";this.notificationState.showWarningNotification(o),this.formState.setServerFormErrors(s),console.error("Failed to create payment method:",s)}finally{this.storePaymentMethodState.isCreatingStorePaymentMethod=!1,this.changeHistoryState.actionButtons[1].loading=!1}},async updateStorePaymentMethod(){var r,t;try{if(this.storePaymentMethodState.isUpdatingStorePaymentMethod||(this.formState.hideFormErrors(),this.isEmpty(this.storePaymentMethodForm.custom_name)&&this.formState.setFormError("custom_name","The name is required"),this.formState.hasErrors))return;for(let e=0;e<this.paymentMethod.config_schema.length;e++){const h=this.paymentMethod.config_schema[e];if(this.checkIfPaymentMethodConfigSchemaEntityPassesCondition(h,this.storePaymentMethodForm.configs)){const c=this.getPaymentMethodFirstValidationError(h,this.storePaymentMethodForm.configs);if(c){this.notificationState.showWarningNotification(c);return}}}this.storePaymentMethodState.isUpdatingStorePaymentMethod=!0,this.changeHistoryState.actionButtons[1].loading=!0;const s={...this.storePaymentMethodForm,store_id:this.store.id},n=(await axios.put(`/api/store-payment-methods/${this.storePaymentMethodId}`,s)).data.store_payment_method;this.storePaymentMethodState.setStorePaymentMethod(n),await this.uploadImages(),this.notificationState.showSuccessNotification("Payment method updated"),this.storePaymentMethodState.saveOriginalState("Original payment method")}catch(s){const o=((t=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:t.message)||(s==null?void 0:s.message)||"Something went wrong while updating payment method";this.notificationState.showWarningNotification(o),this.formState.setServerFormErrors(s),console.error("Failed to update payment method:",s)}finally{this.storePaymentMethodState.isUpdatingStorePaymentMethod=!1,this.changeHistoryState.actionButtons[1].loading=!1}},async deleteStorePaymentMethod(r){var t,s;try{if(this.storePaymentMethodState.isDeletingStorePaymentMethod)return;this.storePaymentMethodState.isDeletingStorePaymentMethod=!0;const o={data:{store_id:this.store.id}};await axios.delete(`/api/store-payment-methods/${this.storePaymentMethodId}`,o),r(),await new Promise(n=>setTimeout(n,500)),this.notificationState.showSuccessNotification("Payment method deleted"),await this.navigateToShowPaymentMethods()}catch(o){const n=((s=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:s.message)||(o==null?void 0:o.message)||"Something went wrong while deleting payment method";this.notificationState.showWarningNotification(n),this.formState.setServerFormErrors(o),console.error("Failed to delete payment method:",o),r()}finally{this.storePaymentMethodState.isDeletingStorePaymentMethod=!1}},async uploadImages(r=null){let t=this.paymentMethod.config_schema.filter(o=>o.type==="image").map(o=>this.storePaymentMethodForm.configs[o.attribute].length?[o.attribute,this.storePaymentMethodForm.configs[o.attribute][0]]:null).filter(o=>o!=null),s=[];for(let o=0;o<t.length;o++){let n=t[o][0],e=t[o][1];e.id==null&&e.uploading==!1&&(e.uploaded===null||e.uploaded===!1)&&(r==null||r==o)&&s.push(this.uploadSingleImage(n,e,o))}if(s.length===0){this.storePaymentMethodState.isUploading=!1;return}return this.storePaymentMethodState.isUploading=!0,Promise.allSettled(s).then(o=>{let n=o.filter(e=>e.status==="rejected").length;n>0&&this.notificationState.showWarningNotification(`‚ö†Ô∏è ${n} image(s) failed to upload. Try again or change the image.`),this.storePaymentMethodState.isUploading=!1})},async uploadSingleImage(r,t,s,o=0,n=null){var e,h,c;try{if(o>2)return console.log(`‚ùå Image ${s+1} permanently failed after 3 attempts.`),t.uploaded=!1,t.uploading=!1,t.error_message=((h=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:h.message)||(n==null?void 0:n.message)||"Upload failed",Promise.reject("Failed after 3 attempts");let u=new FormData;u.append("file",t.file_ref),u.append("store_id",this.store.id),u.append("mediable_type","store payment method"),u.append("mediable_id",this.storePaymentMethod.id),u.append("upload_folder_name",`store_payment_method_${r}`),t.uploading=!0,t.error_message=null;const v={headers:{"Content-Type":"multipart/form-data"}},f=await axios.post("/api/media-files",u,v),w=f.data.media_file;return t.uploaded=!0,t.uploading=!1,t.id=w.id,t.path=w.path,console.log(`‚úÖ Image ${s+1} uploaded successfully.`),f}catch(u){return console.error(`‚ö†Ô∏è Image ${s+1} upload attempt ${o+1} failed.`,u),u.code==="ECONNABORTED"||((c=u.response)==null?void 0:c.status)===504?void 0:this.uploadSingleImage(r,t,s,o+1,u)}},async deletePaymentMethodImage(r,t){var s,o;try{if(r.configs[t].deleting)return;r.configs[t].deleting=!0;let n={data:{store_id:this.store.id}};await axios.delete(`/api/media-files/${r.configs[t].id}`,n),r.configs[t].path=null,r.configs[t].uploaded=!1,console.log(`‚úÖ Successfully deleted ${t} for '${r.name}'`)}catch(n){const e=((o=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:o.message)||(n==null?void 0:n.message)||`Something went wrong while deleting ${r.name} ${t}`;this.notificationState.showWarningNotification(e),this.formState.setServerFormErrors(n),console.error(`Failed to delete ${t} for '${r.name}':`,n)}finally{r.configs[t].deleting=!1}},setStorePaymentMethodForm(r){this.storePaymentMethodState.storePaymentMethodForm=r}},beforeUnmount(){this.storePaymentMethodState.reset()},created(){this.setup(),this.setActionButtons();const r=["undo","redo","jumpToHistory","resetHistoryToCurrent","resetHistoryToOriginal"];for(let t=0;t<r.length;t++){let s=r[t];this.changeHistoryState.listeners[s]=this.setStorePaymentMethodForm}}},ge={class:"max-w-2xl mx-auto pt-24 pb-40"},fe={class:"bg-gray-50 border border-gray-300 rounded-lg p-4"},Me={class:"flex items-center justify-between border-b border-gray-200 border-dashed pb-4 mb-4"},Pe={key:1,class:"w-16 h-16 rounded-full overflow-hidden shadow"},Se=["src"],_e={class:"space-y-2"},be={key:7,class:"flex space-x-1 text-xs text-yellow-600 font-semibold bg-yellow-100 border border-yellow-300 p-3 rounded-lg shadow-md"},we={key:1,class:"border-t border-gray-200 border-dashed space-y-4 mt-4 pt-4"},ve={key:2,class:"space-y-4 border-t border-gray-300 border-dashed mt-4 pt-4"},Fe={class:"text-xs text-justify"},xe={class:"font-bold"},Ce={class:"space-y-2"},ke={class:"bg-white p-4 shadow-sm rounded-xl"},Ie={class:"flex items-end justify-between mb-4"},Ve={class:"text-sm text-gray-500"},Te={class:"flex items-center space-x-1"},Le={class:"border border-gray-200 rounded-lg overflow-hidden"},De={class:"space-y-2"},He={class:"font-bold text-black"},Ue={class:"flex justify-end"},Ne={class:"mb-8"},We={class:"font-bold text-black"};function Ee(r,t,s,o,n,e){var x,C,k,I,V;const h=d("Button"),c=d("Skeleton"),u=d("Pill"),v=d("Switch"),f=d("Input"),w=d("StringConfig"),T=d("MobileNumberConfig"),L=d("EmailConfig"),D=d("SelectConfig"),H=d("CurrencyConfig"),U=d("ImageConfig"),N=d("ContentConfig"),W=d("Info"),E=d("Alert"),B=d("Copy"),A=d("WhatsappIcon"),O=d("WhatsappMessage"),z=d("Modal");return m(),g("div",ge,[y(h,{size:"xs",type:"light",class:"mb-4",leftIcon:n.MoveLeft,action:e.navigateToShowPaymentMethods},{default:_(()=>[...t[13]||(t[13]=[i("span",null,"Back",-1)])]),_:1},8,["leftIcon","action"]),i("div",fe,[i("div",Me,[e.isLoadingStore||e.isLoadingStorePaymentMethod||n.isLoadingPaymentMethod?(m(),p(c,{key:0,width:"w-16",height:"h-16",rounded:"rounded-full",shine:!0,class:"flex-shrink-0"})):(m(),g("div",Pe,[i("img",{alt:"Payment Method Logo",class:"h-full object-contain",src:((I=(k=(C=(x=e.storePaymentMethodForm)==null?void 0:x.configs)==null?void 0:C.logo)==null?void 0:k[0])==null?void 0:I.path)??e.paymentMethod.image_url},null,8,Se)])),e.isLoadingStore||e.isLoadingStorePaymentMethod||n.isLoadingPaymentMethod?(m(),p(c,{key:2,width:"w-16",height:"h-4",rounded:"rounded-full",shine:!0,class:"flex-shrink-0"})):e.storePaymentMethod&&e.storePaymentMethod.requires_verification?(m(),p(u,{key:3,type:"warning",size:"xs"},{default:_(()=>[...t[14]||(t[14]=[M("Requires verification",-1)])]),_:1})):(m(),p(v,{key:4,size:"xs",prefixText:"Active",modelValue:e.storePaymentMethodForm.active,"onUpdate:modelValue":t[0]||(t[0]=a=>e.storePaymentMethodForm.active=a),errorText:e.formState.getFormError("active"),onChange:t[1]||(t[1]=a=>e.storePaymentMethodState.saveStateDebounced("Active status changed"))},null,8,["modelValue","errorText"]))]),i("div",_e,[y(f,{max:"40",type:"text",label:"Name",placeholder:((V=e.paymentMethod)==null?void 0:V.name)??"Name",modelValue:e.storePaymentMethodForm.custom_name,"onUpdate:modelValue":t[2]||(t[2]=a=>e.storePaymentMethodForm.custom_name=a),errorText:e.formState.getFormError("custom_name"),onInput:t[3]||(t[3]=a=>e.storePaymentMethodState.saveStateDebounced("Name changed")),skeleton:e.isLoadingStore||e.isLoadingStorePaymentMethod||n.isLoadingPaymentMethod},null,8,["placeholder","modelValue","errorText","skeleton"]),e.paymentMethod?(m(!0),g(F,{key:0},q(e.paymentMethod.config_schema,(a,j)=>(m(),g(F,{key:j},[e.checkIfPaymentMethodConfigSchemaEntityPassesCondition(a,e.storePaymentMethodForm.configs)?(m(),g(F,{key:0},[a.type=="string"?(m(),p(w,{key:0,configSchemaEntity:a,modelValue:e.storePaymentMethodForm.configs[a.attribute],"onUpdate:modelValue":l=>e.storePaymentMethodForm.configs[a.attribute]=l,onChange:l=>e.storePaymentMethodState.saveStateDebounced(`${e.capitalize(a.attribute)} changed`)},null,8,["configSchemaEntity","modelValue","onUpdate:modelValue","onChange"])):a.type=="mobile_number"?(m(),p(T,{key:1,configSchemaEntity:a,modelValue:e.storePaymentMethodForm.configs[a.attribute],"onUpdate:modelValue":l=>e.storePaymentMethodForm.configs[a.attribute]=l,onChange:l=>e.storePaymentMethodState.saveStateDebounced(`${e.capitalize(a.attribute)} changed`)},null,8,["configSchemaEntity","modelValue","onUpdate:modelValue","onChange"])):a.type=="email"?(m(),p(L,{key:2,configSchemaEntity:a,modelValue:e.storePaymentMethodForm.configs[a.attribute],"onUpdate:modelValue":l=>e.storePaymentMethodForm.configs[a.attribute]=l,onChange:l=>e.storePaymentMethodState.saveStateDebounced(`${e.capitalize(a.attribute)} changed`)},null,8,["configSchemaEntity","modelValue","onUpdate:modelValue","onChange"])):a.type=="select"?(m(),p(D,{key:3,configSchemaEntity:a,modelValue:e.storePaymentMethodForm.configs[a.attribute],"onUpdate:modelValue":l=>e.storePaymentMethodForm.configs[a.attribute]=l,onChange:l=>e.storePaymentMethodState.saveStateDebounced(`${e.capitalize(a.attribute)} changed`)},null,8,["configSchemaEntity","modelValue","onUpdate:modelValue","onChange"])):a.type=="currency"?(m(),p(H,{key:4,paymentMethod:e.paymentMethod,configSchemaEntity:a,modelValue:e.storePaymentMethodForm.configs[a.attribute],"onUpdate:modelValue":l=>e.storePaymentMethodForm.configs[a.attribute]=l,onChange:l=>e.storePaymentMethodState.saveStateDebounced(`${e.capitalize(a.attribute)} changed`)},null,8,["paymentMethod","configSchemaEntity","modelValue","onUpdate:modelValue","onChange"])):a.type=="image"?(m(),p(U,{key:5,uploadImages:e.uploadImages,configSchemaEntity:a,modelValue:e.storePaymentMethodForm.configs[a.attribute],"onUpdate:modelValue":l=>e.storePaymentMethodForm.configs[a.attribute]=l,onChange:l=>e.storePaymentMethodState.saveStateDebounced(`${e.capitalize(a.attribute)} changed`)},null,8,["uploadImages","configSchemaEntity","modelValue","onUpdate:modelValue","onChange"])):a.type=="content"?(m(),p(N,{key:6,configSchemaEntity:a},null,8,["configSchemaEntity"])):S("",!0),e.getPaymentMethodFirstValidationError(a,e.storePaymentMethodForm.configs)?(m(),g("p",be,[y(W,{size:"14",class:"shrink-0"}),i("span",null,b(e.getPaymentMethodFirstValidationError(a,e.storePaymentMethodForm.configs)),1)])):S("",!0)],64)):S("",!0)],64))),128)):S("",!0),e.paymentMethod&&!e.paymentMethod.automated_verification?(m(),g("div",we,[y(f,{rows:"2",type:"textarea",label:"Instruction",secondaryLabel:"(optional)",modelValue:e.storePaymentMethodForm.instruction,"onUpdate:modelValue":t[4]||(t[4]=a=>e.storePaymentMethodForm.instruction=a),errorText:e.formState.getFormError("instruction"),placeholder:"Provide your own instruction about how the customer must pay",onInput:t[5]||(t[5]=a=>e.storePaymentMethodState.saveStateDebounced("Instruction changed")),skeleton:e.isLoadingStore||e.isLoadingStorePaymentMethod||n.isLoadingPaymentMethod},null,8,["modelValue","errorText","skeleton"]),y(f,{type:"checkbox",inputLabel:"Require payment proof",modelValue:e.storePaymentMethodForm.require_proof_of_payment,"onUpdate:modelValue":t[6]||(t[6]=a=>e.storePaymentMethodForm.require_proof_of_payment=a),errorText:e.formState.getFormError("require_proof_of_payment"),onChange:t[7]||(t[7]=a=>e.storePaymentMethodState.saveStateDebounced("Require payment proof changed")),inputDescription:"To finalize the checkout, customers must upload a screenshot. This could be a receipt, bank transfer confirmation, or any other proof of payment."},null,8,["modelValue","errorText"]),y(f,{type:"checkbox",inputLabel:"Enable contact seller before payment",modelValue:e.storePaymentMethodForm.enable_contact_seller_before_payment,"onUpdate:modelValue":t[8]||(t[8]=a=>e.storePaymentMethodForm.enable_contact_seller_before_payment=a),errorText:e.formState.getFormError("enable_contact_seller_before_payment"),onChange:t[9]||(t[9]=a=>e.storePaymentMethodState.saveStateDebounced("Enable contact seller before payment changed")),inputDescription:"Enables skipping payment to message the seller, increasing inquiries but building trust and reducing cancellations."},null,8,["modelValue","errorText"]),y(f,{type:"checkbox",inputLabel:"Mark as paid upon customer confirmation",modelValue:e.storePaymentMethodForm.mark_as_paid_on_customer_confirmation,"onUpdate:modelValue":t[10]||(t[10]=a=>e.storePaymentMethodForm.mark_as_paid_on_customer_confirmation=a),errorText:e.formState.getFormError("mark_as_paid_on_customer_confirmation"),onChange:t[11]||(t[11]=a=>e.storePaymentMethodState.saveStateDebounced("Mark as paid upon customer confirmation changed")),inputDescription:"This will automatically update the payment status to 'Paid' once the customer confirms their payment. This feature is ideal if you trust your customers and wish to streamline the payment process."},null,8,["modelValue","errorText"])])):S("",!0),e.storePaymentMethod&&e.storePaymentMethod.requires_verification?(m(),g("div",ve,[y(E,{type:"warning",dismissable:!1,title:"Activation Pending"},{description:_(()=>[i("p",Fe,[t[15]||(t[15]=M(" To activate this payment method so that ",-1)),i("span",xe,b(n.appName),1),t[16]||(t[16]=M(" collects payments on your behalf, our team needs to verify your business. Please contact us via ",-1)),i("span",{onClick:t[12]||(t[12]=(...a)=>e.openWhatsappGroup&&e.openWhatsappGroup(...a)),class:"font-bold cursor-pointer hover:underline"},"WhatsApp"),t[17]||(t[17]=M(" to provide documents confirming your business's legitimacy and refund policy. Include your Store ID, found below. ",-1))])]),_:1}),i("div",Ce,[t[18]||(t[18]=i("p",{class:"text-sm font-medium text-gray-900"},"Store ID",-1)),y(B,{text:e.store.id},null,8,["text"])]),i("div",ke,[i("div",Ie,[i("div",null,[t[19]||(t[19]=i("h2",{class:"font-semibold"},"Activate Now",-1)),i("h3",Ve,"Lets activate "+b(e.storePaymentMethod.custom_name)+" for you",1)]),y(h,{size:"xs",type:"success",action:e.openWhatsappGroup},{default:_(()=>[i("div",Te,[y(A,{size:"w-4 h-4",color:"#ffffff",class:"mx-2"}),t[20]||(t[20]=i("span",{class:"text-xs"},"Send Whatsapp",-1))])]),_:1},8,["action"])]),i("div",Le,[y(O,{messages:e.mockMessages,animate:!0,loopAnimation:!0,class:"h-80"},null,8,["messages"])])])])):S("",!0)])]),e.storePaymentMethod?(m(),g("div",{key:0,class:G(["flex items-center justify-between space-x-4 overflow-hidden rounded-lg p-4 border mt-4",e.isLoadingStore||e.isLoadingStorePaymentMethod?"border-gray-300 bg-gray-50":"border-red-300 bg-red-50"])},[i("div",De,[i("p",null,[t[21]||(t[21]=M("Delete ",-1)),i("span",He,b(e.storePaymentMethod.custom_name),1),t[22]||(t[22]=M("?",-1))])]),i("div",Ue,[y(z,{triggerType:"danger",approveType:"danger",approveLeftIcon:n.Trash2,triggerText:"Delete Payment Method",approveText:"Delete Payment Method",approveAction:e.deleteStorePaymentMethod,triggerLoading:e.isDeletingStorePaymentMethod,approveLoading:e.isDeletingStorePaymentMethod},{content:_(()=>[t[25]||(t[25]=i("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Confirm Delete",-1)),i("p",Ne,[t[23]||(t[23]=M("Are you sure you want to delete ",-1)),i("span",We,b(e.storePaymentMethod.custom_name),1),t[24]||(t[24]=M("?",-1))])]),_:1},8,["approveLeftIcon","approveAction","triggerLoading","approveLoading"])])],2)):S("",!0)])}const gt=he(pe,[["render",Ee]]);export{gt as default};
