import{c,b as r,a as l,r as n,w as k,d as g,e as _,F as v,f as E,t as u,g as d,h as F,o as a,i as b}from"./app-Cn46GS3I.js";import{P as V}from"./Pill-CfvZYk9z.js";import{L}from"./Logo-C5gCsuog.js";import{I as T}from"./Input-CS_IpxN-.js";import{B}from"./Button-CbwcBUhP.js";import{S as P}from"./SocialLinks-CgUo3zVV.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Copy-BjK3wMF-.js";import"./ShineEffect-BLGg8IQO.js";import"./createLucideIcon-BlsGDRHQ.js";import"./Popover-CYo5yYtG.js";import"./Skeleton-ConmgPQ-.js";import"./Loader-9AWAUH8r.js";const C={name:"Login",components:{Pill:V,Logo:L,Input:T,Button:B,SocialLinks:P},inject:["authState","formState","notificationState"],data(){return{form:{email:"",password:"",type:"email",mobile_number:""},loginTypes:[{label:"Email",value:"email"},{label:"Mobile Number",value:"mobile_number"}],loading:!1,currentYear:new Date().getFullYear()}},methods:{async submit(){var f,e;if(!this.loading&&(this.formState.hideFormErrors(),this.form.type=="email"&&this.form.email.trim()===""?this.formState.setFormError("email","Enter your email"):this.form.type=="mobile_number"&&this.form.mobile_number.trim()===""?this.formState.setFormError("mobile_number","Enter your mobile number"):this.form.password.trim()===""&&this.formState.setFormError("password","Enter your password"),!this.formState.hasErrors)){this.loading=!0;try{const m=(await F.post("/api/auth/login",this.form)).data.token;this.authState.setTokenOnRequest(m),this.authState.setTokenOnLocalStorage(m);const t=this.$route.query.redirect;t?this.$router.push(t):this.$router.push({name:"show-stores"})}catch(s){const m=((e=(f=s==null?void 0:s.response)==null?void 0:f.data)==null?void 0:e.message)||(s==null?void 0:s.message)||"Something went wrong while signing in";this.notificationState.showWarningNotification(m),this.formState.setServerFormErrors(s),console.error("Failed to sign in:",s)}finally{this.loading=!1}}}}},N={class:"min-h-screen grid grid-cols-1 lg:grid-cols-2 transition-opacity opacity-100 duration-750 lg:grow starting:opacity-0"},I={class:"flex items-center justify-center p-6 bg-gradient-to-b from-blue-100 to-white-100"},M={class:"w-full max-w-md"},O={class:"bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6"},U={class:"flex space-x-2"},Y={key:2,class:"text-red-500 text-sm mb-3"},q={class:"flex justify-between mb-6"},D={class:"ml-1"},z={class:"text-sm text-center text-gray-500"};function A(f,e,s,m,t,i){const y=n("Logo"),x=n("Pill"),p=n("Input"),h=n("router-link"),w=n("Button"),S=n("SocialLinks");return a(),c("div",N,[r("div",I,[r("div",M,[l(y,{height:"h-20 mx-auto mb-4"}),r("div",O,[e[6]||(e[6]=r("h1",{class:"text-2xl font-semibold leading-none tracking-tight mb-4"},"Sign in",-1)),e[7]||(e[7]=r("h1",{class:"text-sm text-gray-500 mb-4"},"Pick how you would like to sign in",-1)),r("form",{onSubmit:e[3]||(e[3]=k((...o)=>i.submit&&i.submit(...o),["prevent"])),class:"space-y-4"},[r("div",U,[(a(!0),c(v,null,E(t.loginTypes,o=>(a(),g(x,{type:t.form.type===o.value?"primary":"light",action:()=>t.form.type=o.value,key:o.value},{default:d(()=>[b(u(o.label),1)]),_:2},1032,["type","action"]))),128))]),t.form.type=="email"?(a(),g(p,{key:0,type:"email",label:"Email",modelValue:t.form.email,"onUpdate:modelValue":e[0]||(e[0]=o=>t.form.email=o),placeholder:"john@gmail.com",errorText:i.formState.getFormError("email")},null,8,["modelValue","errorText"])):t.form.type=="mobile_number"?(a(),g(p,{key:1,type:"text",label:"Mobile",placeholder:"+26772000001",modelValue:t.form.mobile_number,"onUpdate:modelValue":e[1]||(e[1]=o=>t.form.mobile_number=o),errorText:i.formState.getFormError("mobile_number")},null,8,["modelValue","errorText"])):_("",!0),l(p,{type:"password",label:"Password",modelValue:t.form.password,"onUpdate:modelValue":e[2]||(e[2]=o=>t.form.password=o),placeholder:"******",errorText:i.formState.getFormError("password")},null,8,["modelValue","errorText"]),i.formState.generalErrorText?(a(),c("div",Y,u(i.formState.generalErrorText),1)):_("",!0),r("div",q,[l(h,{to:{name:"register"},class:"text-sm text-blue-600 hover:underline"},{default:d(()=>e[4]||(e[4]=[b("Create account")])),_:1,__:[4]}),l(h,{to:{name:"forgot-password"},class:"text-sm text-blue-600 hover:underline"},{default:d(()=>e[5]||(e[5]=[b("Forgot password?")])),_:1,__:[5]})]),l(w,{size:"md",type:"primary",action:i.submit,buttonClass:"w-full"},{default:d(()=>[r("span",D,u(t.loading?"Signing in...":"Continue"),1)]),_:1},8,["action"])],32)]),l(S,{class:"mb-6"}),r("p",z,"Â© "+u(t.currentYear)+" Perfect Order. All rights reserved.",1)])]),e[8]||(e[8]=r("div",{class:"hidden lg:block"},[r("img",{src:"/images/lady-holding-boxes.jpg",class:"w-full h-full object-cover",alt:"Lady holding boxes"})],-1))])}const re=j(C,[["render",A]]);export{re as default};
