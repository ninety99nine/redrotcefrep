import{S as d}from"./Skeleton-CCmfEA-R.js";import{c as r,b as o,a as h,n as u,j as g,g as m,T as p,t as i,r as _,o as t,d as f}from"./app-GlJHzU_x.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShineEffect-B9_RJRQO.js";const w={inject:["authState"],components:{Skeleton:d},data(){return{countdown:5,errorMessage:null,isLoadingLogo:!0,countdownInterval:null,error:this.$route.query.error,token:this.$route.query.token,logoUrl:this.$route.query.logo_url,storeId:this.$route.query.store_id,provider:this.$route.query.provider,errorDescription:this.$route.query.error_description}},computed:{borderColor(){return this.errorMessage?"#e02523":{google:"#df4b39",linkedin:"#117bb8",facebook:"#3f5c9b"}[this.provider]}},methods:{onLogoLoaded(){this.isLoadingLogo=!1},startRedirectCountdown(){this.countdownInterval=setInterval(()=>{this.countdown>0?this.countdown-=1:(clearInterval(this.countdownInterval),this.$router.replace({name:"login"}))},1e3)},completeSocialLogin(){this.authState.setTokenOnRequest(this.token),this.authState.setTokenOnLocalStorage(this.token),this.storeId?this.$router.push({name:"show-store-home",params:{store_id:this.storeId}}):this.$router.push({name:"show-stores"})}},created(){this.errorDescription||this.error?(this.errorMessage=this.errorDescription||this.error,this.startRedirectCountdown()):this.completeSocialLogin()}},b={class:"flex flex-col justify-center items-center w-full bg-gradient-to-b from-blue-100 to-white-100 min-h-screen overflow-x-hidden"},L={class:"flex flex-col justify-center items-center"},k={class:"relative inline-flex items-center justify-center w-28 h-28"},v=["src"],x=["src"],S={key:0,class:"mt-8"},I={class:"font-medium text-red-500 text-sm mb-4"},q={class:"text-gray-400 text-sm text-center"},C={key:1,class:"text-gray-400 text-center mt-8"};function M(l,n,j,R,e,s){const c=_("Skeleton");return t(),r("div",b,[o("div",L,[o("div",k,[o("div",{class:g(["absolute inset-0 animate-spin rounded-full border-4 border-gray-300"]),style:u("border-top-color:"+s.borderColor+";")},null,4),h(p,{name:"fade-1",mode:"out-in"},{default:m(()=>[e.isLoadingLogo?(t(),f(c,{key:0,width:"w-20",height:"h-20",color:"bg-gray-200",class:"border border-gray-300"})):(t(),r("img",{key:1,src:e.logoUrl,alt:"Social Logo",class:"w-20 h-20 relative"},null,8,v))]),_:1})]),o("img",{src:e.logoUrl,onLoad:n[0]||(n[0]=(...a)=>s.onLogoLoaded&&s.onLogoLoaded(...a)),class:"hidden"},null,40,x),e.errorMessage?(t(),r("div",S,[o("p",I,i(e.errorMessage),1),o("p",q,i(e.countdown==0?"Redirecting...":`${"Redirecting in "+e.countdown}`),1)])):(t(),r("p",C,"Logging In"))])])}const U=y(w,[["render",M]]);export{U as default};
