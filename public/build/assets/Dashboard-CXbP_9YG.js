import{L as K}from"./Logo-Dhzb3uQE.js";import{I as Q}from"./Input-DBnU4wzW.js";import{B as O}from"./Button-B134edVj.js";import{L as A}from"./Loader-DZWJgCmt.js";import{S as X}from"./Select-BriLwhlS.js";import{D as j}from"./Dropdown-C_bLQQlo.js";import{S as P}from"./Skeleton-Dmr_VmHU.js";import{S as Y}from"./StoreLogo-Ch_dhXf0.js";import{p as $,c as l,b as a,a as p,k as v,g,F as k,f as N,r as n,o as s,e as m,t as S,d as i,w as D,m as ee,C as te,T as oe}from"./app-CGNgl8eN.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{U as E}from"./user-round-CsYCQFs5.js";import{E as se}from"./external-link-DJDF6tha.js";import{M as re}from"./menu-D8yCOdfe.js";import{P as ae}from"./plus-B1hMjDDg.js";import{Z as ne}from"./zap-BpTqGeH5.js";import{V as ie}from"./vue-slide-up-down-Ce1Dvygw.js";import{C as le}from"./chevron-down-wPajd1_B.js";import{C as de}from"./chevron-up-DDBk_8YV.js";import{c as I}from"./createLucideIcon-BakIve7O.js";import{R as ce}from"./rocket-CKRzrUO2.js";import{S as ue}from"./smartphone-BB9MJ_Oj.js";import{B as me}from"./banknote-BhOmSRfd.js";import{S as he}from"./star-Bmp9wHC5.js";import{M as ge}from"./megaphone-DzSotej7.js";import{T as pe}from"./ticket-percent-CFGoRldk.js";import{B as fe}from"./box-BUyd14o-.js";import{I as ye}from"./inbox-Cah5gp8z.js";import{H as we}from"./house-BR9y1jq-.js";import{M as _e}from"./move-left-CQva05e2.js";import{N as Se}from"./Notifications-DUkGCqQ9.js";import"./Copy-Bp4ENaQe.js";import"./ShineEffect-D1V-RWKB.js";import"./Popover-BZ2E_DR-.js";import"./Tooltip-BCHxPPLL.js";import"./capitalize-ChUSrr1V.js";import"./refresh-ccw-DblrTBks.js";import"./circle-check-Bkm_qb2i.js";import"./circle-alert-uARVagVJ.js";import"./x-DHw5U7EU.js";import"./parsePhoneNumber-xMTQFMCS.js";import"./trash-2-Bff_GbSw.js";import"./toastify-CKY61ApU.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=I("chart-area",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=I("files",[["path",{d:"M15 2a2 2 0 0 1 1.414.586l4 4A2 2 0 0 1 21 8v7a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z",key:"1vo8kb"}],["path",{d:"M15 2v4a2 2 0 0 0 2 2h4",key:"sud9ri"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=I("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=I("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Ne={inject:["orderState","changeHistoryState"],components:{Button:O,Dropdown:j},emits:["updatedProducts"],computed:{canUndo(){return this.changeHistoryState.canUndo},canRedo(){return this.changeHistoryState.canRedo},historyItems(){return this.changeHistoryState.historyItems}},methods:{formattedRelativeDate:$,hideDropdown(){this.$refs.dropdown.hideDropdown()},undo(){this.changeHistoryState.undo()},redo(){this.changeHistoryState.redo()},jumpToHistory(o){this.changeHistoryState.jumpToHistory(o)},resetHistoryToOriginal(){this.hideDropdown(),this.changeHistoryState.resetHistoryToOriginal()},buttonClasses(o){return["w-8 h-8 p-2 flex items-center justify-center rounded-full",o?"cursor-pointer text-blue-600 border border-blue-400 bg-blue-50 hover:text-blue-700 hover:border-blue-500 hover:bg-blue-100 active:scale-90 transition-all":"cursor-not-allowed text-gray-300 border border-gray-200"]}}},Ce={class:"w-full flex justify-between items-center"},Me={class:"flex justify-center items-center space-x-2"},Ie=["onClick"],Le={class:"z-20 w-96 bg-white divide-y divide-gray-100 rounded-lg shadow-md"},He={class:"max-h-40 overflow-y-auto"},Te={class:"divide-y divide-gray-100"},Re=["onClick"],ze={class:"flex items-center space-x-2"},Be={key:0,class:"text-xs text-green-500 font-bold"},Ue={class:"text-xs text-gray-900"},De={class:"text-xs text-gray-400 whitespace-nowrap"},Oe={key:0,class:"text-xs text-center bg-yellow-100 p-4 mt-4"},Ae={key:1,class:"p-2"},je={class:"flex items-center space-x-2"};function Pe(o,e,r,f,d,t){const h=n("Button"),y=n("Dropdown");return s(),l("div",Ce,[a("div",Me,[(s(),l("svg",{class:v(t.buttonClasses(t.canUndo)),onClick:e[0]||(e[0]=u=>t.canUndo?t.undo():null),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...e[2]||(e[2]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"},null,-1)])],2)),p(y,{ref:"dropdown",dropdownClasses:"w-96"},{trigger:g(u=>[a("div",{class:v(t.buttonClasses(t.canUndo||t.canRedo)),onClick:_=>t.canUndo||t.canRedo?u.toggleDropdown:null},[...e[3]||(e[3]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1)])],10,Ie)]),content:g(()=>[a("div",Le,[e[5]||(e[5]=a("div",{class:"px-4 py-2 font-medium text-gray-700 bg-gray-50"},"History",-1)),a("div",He,[a("div",Te,[(s(!0),l(k,null,N(t.historyItems,(u,_)=>(s(),l("div",{key:_,onClick:x=>t.jumpToHistory(_),class:"space-x-2 px-4 py-3 hover:bg-gray-100 cursor-pointer flex justify-between items-center"},[a("div",ze,[u.isActive?(s(),l("span",Be,"âœ”")):m("",!0),a("span",Ue,S(u.name),1)]),a("span",De,S(t.formattedRelativeDate(u.timestamp)),1)],8,Re))),128))])]),t.historyItems.length===1?(s(),l("p",Oe," No history to undo or redo ")):(s(),l("div",Ae,[p(h,{size:"sm",type:"light",buttonClass:"w-full",action:t.resetHistoryToOriginal},{default:g(()=>[...e[4]||(e[4]=[a("span",null,"Reset to Original",-1)])]),_:1},8,["action"])]))])]),_:1},512),(s(),l("svg",{class:v(t.buttonClasses(t.canRedo)),onClick:e[1]||(e[1]=u=>t.canRedo?t.redo():null),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...e[6]||(e[6]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3"},null,-1)])],2))]),a("div",je,[(s(!0),l(k,null,N(t.changeHistoryState.actionButtons,(u,_)=>(s(),l(k,{key:_},[u.label!="Discard"||u.label=="Discard"&&t.historyItems.length>1?(s(),i(h,{key:0,size:"sm",type:u.type,leftIcon:u.icon,loading:u.loading,action:()=>u.action()},{default:g(()=>[a("span",null,S(u.label),1)]),_:2},1032,["type","leftIcon","loading","action"])):m("",!0)],64))),128))])])}const Ee=C(Ne,[["render",Pe]]),Ve={inject:["storeState","authState","formState","notificationState","changeHistoryState"],components:{UserRound:E,Logo:K,Input:Q,Button:O,Loader:A,Select:X,Dropdown:j,Skeleton:P,StoreLogo:Y,ChangeHistoryNavigation:Ee},props:{stores:{type:Array},storeMode:{type:Boolean},isOnboarding:{type:Boolean},isLoadingStore:{type:Boolean},selectedStoreId:{type:[String,null]}},data(){return{Zap:ne,Plus:ae,Menu:re,ExternalLink:se,searchTerm:"",isLoggingOut:!1}},computed:{store(){return this.storeState.store},authUser(){return this.authState.user},activeSubscription(){return this.store.active_subscription},localSelectedStoreId:{get(){return this.selectedStoreId},set(o){this.navigateToShowStoreHome(o),this.$emit("update:selectedStoreId",o)}},storeOptions(){return this.stores.map(o=>({value:o.id,label:o.name}))},hasStores(){return this.stores.length>0},duplicateOrderId(){return this.$route.query.duplicate_order_id},profileNavMenus(){let o=[{name:"My Stores",action:this.navigateToShowStores}];return this.storeMode&&o.push({name:"Billing",action:this.navigateToShowBillingSettings}),o.push({name:"Sign Out",routeName:null}),o}},methods:{navigateToCreateStore(){this.$router.push({name:"create-store",query:{can_go_back:1}})},navigateToShowStoreHome(o){console.log("navigateToShowStoreHome"),this.$router.push({name:"show-store-home",params:{store_id:o}})},navigateToShowStores(o=null){this.$router.push({name:"show-stores"}),o&&o()},navigateToAccountSettings(o){this.$router.push({name:"show-account-settings",query:{store_id:this.localSelectedStoreId}}),o()},navigateToShowBillingSettings(o){this.$router.push({name:"show-billing-settings",query:{store_id:this.localSelectedStoreId}}),o()},navigateToPricingPlans(){this.$router.push({name:"show-pricing-plans",query:{store_id:this.store.id}})},openWebLink(){this.store.web_link&&window.open(this.store.web_link,"_blank")},onSearch(){},async logout(){var o,e;try{this.isLoggingOut=!0,await axios.post("/api/auth/logout"),this.authState.unsetUser(),this.authState.unsetToken(),this.$router.replace({name:"login"})}catch(r){const f=((e=(o=r==null?void 0:r.response)==null?void 0:o.data)==null?void 0:e.message)||(r==null?void 0:r.message)||"Something went wrong while signing out";this.notificationState.showWarningNotification(f),this.formState.setServerFormErrors(r),console.error("Failed to sign out:",r)}finally{this.isLoggingOut=!1}}}},Fe={class:"px-3 py-3 lg:px-5 lg:pl-3"},qe={class:"flex items-center justify-between"},We={class:"w-full flex items-center justify-start rtl:justify-end space-x-4"},Ze={class:"flex items-center space-x-4"},Ge={class:"border-t border-dashed border-gray-300 pt-2 m-2"},Je={key:0,class:"relative w-full md:max-w-md group"},Ke={class:"w-full flex justify-end items-center space-x-4"},Qe={class:"flex items-center"},Xe=["onClick"],Ye={class:"text-xs font-semibold text-gray-700"},$e={class:"flex items-center justify-center w-8 h-8 px-2 border border-gray-300 text-gray-500 rounded-full p-2 hover:scale-110 transition-all duration-300"},et={class:"max-h-60 overflow-auto"},tt=["onClick"],ot={class:"text-sm text-gray-900 font-medium truncate w-4/5"},st={key:0,class:"text-xs text-gray-500 truncate w-4/5"},rt={key:1,class:"text-xs text-gray-500 truncate w-4/5"},at=["onClick"],nt={class:"text-sm text-gray-500 group-hover:text-gray-900"};function it(o,e,r,f,d,t){const h=n("Button"),y=n("Skeleton"),u=n("StoreLogo"),_=n("Select"),x=n("Logo"),L=n("ChangeHistoryNavigation"),H=n("UserRound"),T=n("Loader"),R=n("Dropdown");return s(),l("nav",{class:v(["select-none fixed top-0 z-30 w-full",{"bg-white border-b border-gray-200":!r.isOnboarding}])},[a("div",Fe,[a("div",qe,[a("div",We,[r.storeMode?(s(),i(h,{key:0,type:"light",leftIcon:d.Menu,buttonClass:"block md:hidden"},null,8,["leftIcon"])):m("",!0),a("div",Ze,[r.storeMode?(s(),l(k,{key:0},[r.isLoadingStore?(s(),i(y,{key:0,width:"w-8",height:"h-8",shine:!0})):(s(),i(u,{key:1,size:"w-10 h-10",showButton:!1})),r.isLoadingStore?(s(),i(y,{key:2,width:"w-32",shine:!0})):(s(),i(_,{key:3,class:"w-48",search:!1,options:t.storeOptions,modelValue:t.localSelectedStoreId,"onUpdate:modelValue":e[0]||(e[0]=w=>t.localSelectedStoreId=w)},{footer:g(()=>[a("div",Ge,[p(h,{size:"xs",type:"light",leftIcon:d.Plus,buttonClass:"w-full",action:t.navigateToCreateStore},{default:g(()=>[...e[4]||(e[4]=[a("span",{class:"ml-1"},"Create New Store",-1)])]),_:1},8,["leftIcon","action"])])]),_:1},8,["options","modelValue"])),r.isLoadingStore?(s(),i(y,{key:4,width:"w-8",shine:!0})):m("",!0),p(h,{size:"xs",type:"light",action:t.openWebLink,leftIcon:d.ExternalLink},{default:g(()=>[...e[5]||(e[5]=[a("span",{class:"ml-1"},"visit",-1)])]),_:1},8,["action","leftIcon"])],64)):r.isOnboarding?m("",!0):(s(),i(x,{key:1,height:"h-10",onClick:e[1]||(e[1]=D(()=>t.navigateToShowStores(),["stop"])),class:"cursor-pointer hover:shadow-sm active:scale-95 transition-all duration-250"}))])]),t.changeHistoryState.showActionButtons||t.changeHistoryState.hasChangeHistory||t.duplicateOrderId?(s(),i(L,{key:0})):(s(),l(k,{key:1},[r.isOnboarding?m("",!0):(s(),l("div",Je,[ee(a("input",{type:"text",onInput:e[2]||(e[2]=(...w)=>t.onSearch&&t.onSearch(...w)),autocomplete:"off",spellcheck:"false","onUpdate:modelValue":e[3]||(e[3]=w=>d.searchTerm=w),placeholder:"How can i help...",class:"w-full pl-12 pr-12 py-3 text-xs font-medium bg-white/90 backdrop-blur-xl border border-gray-200 rounded-2xl placeholder-gray-400 text-gray-800 focus:outline-none focus:ring-4 focus:ring-blue-500/20 focus:border-blue-400 focus:bg-white shadow-inner shadow-blue-500/5 transition-all duration-300 group-hover:bg-white group-hover:shadow-lg caret-blue-500"},null,544),[[te,d.searchTerm]]),e[6]||(e[6]=a("div",{class:"absolute left-3.5 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none"},[a("div",{class:"relative"},[a("div",{class:"absolute -inset-1 rounded-lg bg-linear-to-br from-blue-500 to-purple-600 blur-xl opacity-30 group-focus-within:opacity-50 animate-pulse"})]),a("span",{class:"text-md font-bold bg-linear-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent hidden sm:inline"}," AI ")],-1))])),a("div",Ke,[r.storeMode&&!r.isLoadingStore&&!t.activeSubscription?(s(),i(h,{key:0,leftIcon:d.Zap,action:t.navigateToPricingPlans,type:"primary",size:"sm",skeleton:r.isLoadingStore,icon:"rocket"},{default:g(()=>[...e[7]||(e[7]=[a("span",null,"Upgrade",-1)])]),_:1},8,["leftIcon","action","skeleton"])):m("",!0),a("div",Qe,[p(R,{position:"left",dropdownClasses:"w-72"},{trigger:g(w=>[a("div",{onClick:w.toggleDropdown,class:"flex items-center justify-center space-x-2 pl-4 cursor-pointer text-sm bg-gray-50 rounded-full focus:ring-4 focus:ring-gray-250"},[a("span",Ye,S(t.authUser.first_name),1),a("div",$e,[p(H,{size:"12"})])],8,Xe)]),content:g(w=>[a("div",et,[t.authUser?(s(),l("div",{key:0,class:"p-4 space-y-2 border-b border-gray-100 cursor-pointer hover:bg-gray-100 group",onClick:b=>t.navigateToAccountSettings(()=>w.toggleDropdown(b))},[a("p",ot,S(t.authUser.name),1),t.authUser.email?(s(),l("p",st,S(t.authUser.email),1)):m("",!0),t.authUser.mobile_number?(s(),l("p",rt,S(t.authUser.mobile_number.international),1)):m("",!0)],8,tt)):m("",!0),(s(!0),l(k,null,N(t.profileNavMenus,(b,z)=>(s(),l("div",{key:z,onClick:B=>b.name=="Sign Out"?t.logout():b.action(()=>w.toggleDropdown(B)),class:"cursor-pointer flex space-x-2 items-center py-2.5 px-4 text-gray-900 hover:bg-gray-100 group"},[b.name=="Sign Out"&&d.isLoggingOut?(s(),i(T,{key:0})):m("",!0),a("span",nt,S(b.name),1)],8,at))),128))])]),_:1})])])],64))])])],2)}const lt=C(Ve,[["render",it]]),dt={inject:["storeState"],components:{House:we,Inbox:ye,Box:fe,UserRound:E,TicketPercent:pe,Megaphone:ge,WandSparkles:xe,Star:he,ChartArea:ve,Banknote:me,Files:ke,Smartphone:ue,Rocket:ce,Settings:be,ChevronUp:de,ChevronDown:le,Button:O,Skeleton:P,VueSlideUpDown:ie},props:{storeMode:{type:Boolean},isLoadingStore:{type:Boolean}},data(){return{MoveLeft:_e,navMenus:[]}},watch:{$route(){this.navMenus=this.buildNavMenus()}},computed:{store(){return this.storeState.store},isShowingSettings(){return this.$route.meta.settings===!0}},methods:{navigateToHome(){this.$router.push({name:"show-store-home",params:{store_id:this.store.id}})},isActiveNavMenu(o){const e=[o.routeName];return o.hasOwnProperty("associatedRouteNames")&&e.push(...o.associatedRouteNames),e.includes(this.$route.name)},hasActiveNavMenuChildren(o){return this.navMenuHasChildren(o)&&o.children.some(e=>this.isActiveNavMenu(e))},navMenuHasChildren(o){return(o.children??[]).length},hasExpandedNavMenu(o){return o.expanded},expandNavMenu(o){for(let e=0;e<this.navMenus.length;e++)e==o?this.navMenus[e].expanded=!0:this.navMenus[e].expanded=!1},toggleNavMenuExpansion(o){for(let e=0;e<this.navMenus.length;e++)e==o?this.navMenus[e].expanded=!this.navMenus[e].expanded:this.navMenus[e].expanded=!1},collapseAllNavMenus(){for(let o=0;o<this.navMenus.length;o++)this.navMenus[o].expanded=!1},navigateToNavRoute(o,e=null){e==null?this.collapseAllNavMenus():this.expandNavMenu(e),["show-store-home"].includes(o.routeName)?this.$router.push({name:o.routeName,params:{store_id:this.store.id}}):this.$router.push({name:o.routeName,query:{store_id:this.store.id}})},buildNavMenus(){let o;this.isShowingSettings?o=[{name:"Store Settings",routeName:"show-general-settings"},{name:"Payment Methods",routeName:"show-payment-methods",associatedRouteNames:["add-payment-method","edit-payment-method"]},{name:"Delivery Methods",routeName:"show-delivery-methods",associatedRouteNames:["add-delivery-method","edit-delivery-method"]},{name:"Workflows",routeName:"show-workflows",associatedRouteNames:["add-workflow","edit-workflow"]},{name:"Checkout",routeName:"show-checkout-settings"},{name:"Domains",routeName:"show-domains",associatedRouteNames:["edit-domain","buy-domain","add-domain"]},{name:"Account",routeName:"show-account-settings"},{name:"Billing",routeName:"show-billing-settings"},{name:"Team",routeName:"show-team-members",associatedRouteNames:["edit-team-member","add-team-member"]},{name:"SEO",routeName:"show-seo-settings"}]:o=[{name:"Home",routeName:"show-store-home"},{name:"Orders",routeName:"show-orders",associatedRouteNames:["show-order","create-order"]},{name:"Products",children:[{name:"All",routeName:"show-products",associatedRouteNames:["create-product","edit-product"]},{name:"Tags",routeName:"show-product-tags",associatedRouteNames:["create-product-tag","edit-product-tag"]},{name:"Categories",routeName:"show-categories",associatedRouteNames:["create-categories","edit-category"]},{name:"Import",routeName:"import-products"},{name:"Bulk Edit",routeName:"bulk-edit-products"}]},{name:"Customers",children:[{name:"All",routeName:"show-customers",associatedRouteNames:["create-customer","edit-customer"]},{name:"Tags",routeName:"show-customer-tags",associatedRouteNames:["create-customer-tag","edit-customer-tag"]},{name:"Import",routeName:"import-customers"},{name:"Bulk Edit",routeName:"bulk-edit-customers"}]},{name:"Promotions",children:[{name:"All",routeName:"show-promotions",associatedRouteNames:["create-promotion","edit-promotion"]},{name:"Import",routeName:"import-promotions"},{name:"Bulk Edit",routeName:"bulk-edit-promotions"}]},{name:"Marketing",routeName:"show-marketing"},{name:"Reviews",routeName:"show-reviews",associatedRouteNames:["create-review","edit-review"]},{name:"Analytics",routeName:"show-analytics"},{name:"Design",routeName:"edit-storefront",associatedRouteNames:["edit-checkout","edit-payment","edit-menu"]},{name:"Settings",routeName:"show-general-settings"}];for(let e=0;e<o.length;e++)this.navMenuHasChildren(o[e])&&(o[e].expanded=this.hasActiveNavMenuChildren(o[e]));return o}},created(){this.navMenus=this.buildNavMenus()}},ct={key:0,class:"select-none fixed top-0 left-0 z-20 w-64 h-screen pt-16 transition-transform -translate-x-full bg-white border-r border-gray-200 sm:translate-x-0"},ut={class:"h-full overflow-y-auto bg-white"},mt={class:"font-medium"},ht={key:0,class:"flex justify-center my-4"},gt=["onClick"],pt={class:"flex items-center text-gray-700"},ft={key:17},yt=["onClick"],wt={key:1,class:"border-t border-gray-300 border-dashed pt-2 mt-2"};function _t(o,e,r,f,d,t){const h=n("Button"),y=n("Skeleton"),u=n("House"),_=n("Inbox"),x=n("Box"),L=n("UserRound"),H=n("TicketPercent"),T=n("Megaphone"),R=n("WandSparkles"),w=n("Star"),b=n("ChartArea"),z=n("Banknote"),B=n("Files"),V=n("Smartphone"),F=n("Rocket"),q=n("Settings"),W=n("ChevronUp"),Z=n("ChevronDown"),G=n("VueSlideUpDown");return r.storeMode?(s(),l("aside",ct,[a("div",ut,[a("div",mt,[t.isShowingSettings?(s(),l("div",ht,[p(h,{size:"sm",type:"light",leftIcon:d.MoveLeft,buttonClass:"w-full",action:t.navigateToHome,skeleton:r.isLoadingStore},{default:g(()=>[...e[0]||(e[0]=[a("span",{class:"ml-1"},"Return to dashboard",-1)])]),_:1},8,["leftIcon","action","skeleton"])])):m("",!0),(s(!0),l(k,null,N(d.navMenus,(c,U)=>(s(),l(k,{key:U},[a("div",{onClick:D(()=>t.navMenuHasChildren(c)?t.toggleNavMenuExpansion(U):t.navigateToNavRoute(c),["stop"]),class:v([{"bg-gray-100":t.isActiveNavMenu(c)&&!t.navMenuHasChildren(c)},"cursor-pointer py-2.5 px-4 text-gray-900 hover:bg-gray-100 group"])},[a("div",pt,[r.isLoadingStore?(s(),i(y,{key:0,width:"w-5",height:"h-5",shine:!1})):c.name=="Home"?(s(),i(u,{key:1,size:"20"})):c.name=="Orders"?(s(),i(_,{key:2,size:"20"})):c.name=="Products"?(s(),i(x,{key:3,size:"20"})):c.name=="Customers"?(s(),i(L,{key:4,size:"20"})):c.name=="Promotions"?(s(),i(H,{key:5,size:"20"})):c.name=="Marketing"?(s(),i(T,{key:6,size:"20"})):c.name=="Design"?(s(),i(R,{key:7,size:"20"})):c.name=="Reviews"?(s(),i(w,{key:8,size:"20"})):c.name=="Analytics"?(s(),i(b,{key:9,size:"20"})):c.name=="Transactions"?(s(),i(z,{key:10,size:"20"})):c.name=="Pages"?(s(),i(B,{key:11,size:"20"})):c.name=="Offline Store"?(s(),i(V,{key:12,size:"20"})):c.name=="Subscriptions"?(s(),i(F,{key:13,size:"20"})):c.name=="Settings"?(s(),i(q,{key:14,size:"20"})):m("",!0),r.isLoadingStore?(s(),i(y,{key:15,width:"w-24",shine:!0,class:"ms-3"})):(s(),l("span",{key:16,class:v([{"text-gray-900":t.isActiveNavMenu(c)},"w-full text-sm ms-3 group-hover:text-gray-900"])},S(c.name),3)),t.navMenuHasChildren(c)?(s(),l("div",ft,[c.expanded?(s(),i(W,{key:0,size:"16"})):(s(),i(Z,{key:1,size:"16"}))])):m("",!0)])],10,gt),t.navMenuHasChildren(c)?(s(),i(G,{key:0,active:t.navMenuHasChildren(c)&&t.hasExpandedNavMenu(c)},{default:g(()=>[(s(!0),l(k,null,N(c.children,(M,J)=>(s(),l("div",{key:J,onClick:D(Lt=>t.navigateToNavRoute(M,U),["stop"]),class:v([{"bg-gray-100":t.isActiveNavMenu(M)},"cursor-pointer pl-8 py-1 text-gray-900 hover:bg-gray-100 group"])},[a("span",{class:v([{"text-gray-900":t.isActiveNavMenu(M)},"font-normal text-sm ms-3 text-gray-500 group-hover:text-gray-900"])},S(M.name),3)],10,yt))),128))]),_:2},1032,["active"])):m("",!0),["Team Members","Subscriptions"].includes(c.name)?(s(),l("div",wt)):m("",!0)],64))),128))])])])):m("",!0)}const St=C(dt,[["render",_t]]),vt={inject:["uiState"],components:{Loader:A},props:{storeMode:{type:Boolean}}},kt={key:0,class:"absolute top-0 bottom-0 left-0 right-0 inset-0 bg-white bg-opacity-90 z-20"},bt={class:"absolute w-full flex justify-center items-center h-screen"};function xt(o,e,r,f,d,t){const h=n("Loader"),y=n("router-view");return s(),l("div",{class:v(["relative",{"sm:ml-64":r.storeMode}])},[r.storeMode?(s(),i(oe,{key:0,name:"fade-loader"},{default:g(()=>[t.uiState.isLoading?(s(),l("div",kt,[a("div",bt,[p(h,{size:"custom",customSize:"w-8 h-8 border-4"})])])):m("",!0)]),_:1})):m("",!0),p(y)],2)}const Nt=C(vt,[["render",xt]]),Ct={inject:["formState","storeState","notificationState"],components:{Header:lt,Sidebar:St,Content:Nt,Notifications:Se},data(){return{stores:[],selectedStoreId:null,isLoadingStores:!1}},watch:{storeId(o,e){this.showStore(),!e&&o&&this.showStores()}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},storeId(){return this.$route.params.store_id||this.$route.query.store_id},storeMode(){return!this.isOnboarding&&this.storeId!=null},isOnboarding(){return this.$route.meta.onboarding===!0}},methods:{async showStore(o=!1){var e,r,f;try{if(!this.storeId)return;this.selectedStoreId=this.storeId,o||(this.storeState.isLoadingStore=!0);let d={params:{_relationships:["logo","backgroundPhoto","seoImage","productTags","customerTags","categories","myMembership","activeSubscription.pricingPlan","address"].join(",")}};const t=await axios.get(`/api/stores/${this.storeId}`,d);this.storeState.setStore(t.data)}catch(d){const t=((r=(e=d==null?void 0:d.response)==null?void 0:e.data)==null?void 0:r.message)||(d==null?void 0:d.message)||"Something went wrong while fetching store";this.notificationState.showWarningNotification(t),this.formState.setServerFormErrors(d),console.error("Failed to fetch store:",d),((f=d.response)==null?void 0:f.status)===404&&await this.$router.replace({name:"show-stores"})}finally{o||(this.storeState.isLoadingStore=!1)}},async showStores(){var o,e;try{this.isLoadingStores=!0;let r={params:{association:"team member"}};const d=(await axios.get("/api/stores",r)).data;this.stores=d.data}catch(r){const f=((e=(o=r==null?void 0:r.response)==null?void 0:o.data)==null?void 0:e.message)||(r==null?void 0:r.message)||"Something went wrong while fetching stores";this.notificationState.showWarningNotification(f),this.formState.setServerFormErrors(r),console.error("Failed to fetch stores:",r)}finally{this.isLoadingStores=!1}}},created(){this.showStores(),this.storeId&&this.showStore(),this.storeState.silentUpdate=()=>this.showStore(!0)}},Mt={class:"w-full bg-linear-to-b from-blue-100 to-blue-50 min-h-screen overflow-x-hidden"};function It(o,e,r,f,d,t){const h=n("Notifications"),y=n("Header"),u=n("Sidebar"),_=n("Content");return s(),l("div",Mt,[p(h),p(y,{stores:d.stores,storeMode:t.storeMode,isOnboarding:t.isOnboarding,isLoadingStore:t.isLoadingStore,selectedStoreId:d.selectedStoreId,"onUpdate:selectedStoreId":e[0]||(e[0]=x=>d.selectedStoreId=x)},null,8,["stores","storeMode","isOnboarding","isLoadingStore","selectedStoreId"]),p(u,{storeMode:t.storeMode,isLoadingStore:t.isLoadingStore},null,8,["storeMode","isLoadingStore"]),p(_,{storeMode:t.storeMode},null,8,["storeMode"])])}const _o=C(Ct,[["render",It]]);export{_o as default};
