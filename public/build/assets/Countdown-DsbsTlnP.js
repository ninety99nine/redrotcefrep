import{W as H,P as O,X as v,d as _,g as S,r as E,o as a,B as m,c as h,e as p,F as y,j as b,b as t,t as s,i as I}from"./app-GlJHzU_x.js";import{P}from"./Popover-CDw03pE7.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";/*! vue-countdown v2.1.3 | (c) 2018-present Chen Fengyuan | MIT */const g=1e3,x=60*g,M=60*x,C=24*M,w="abort",k="end",L="progress",N="start",T="visibilitychange";var B=H({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:e=>e>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:e=>e>=0},transform:{type:Function,default:e=>e}},emits:[w,k,L,N],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0,autoPauseOnHide:!1}},computed:{days(){return Math.floor(this.totalMilliseconds/C)},hours(){return Math.floor(this.totalMilliseconds%C/M)},minutes(){return Math.floor(this.totalMilliseconds%M/x)},seconds(){return Math.floor(this.totalMilliseconds%x/g)},milliseconds(){return Math.floor(this.totalMilliseconds%g)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/M)},totalMinutes(){return Math.floor(this.totalMilliseconds/x)},totalSeconds(){return Math.floor(this.totalMilliseconds/g)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(T,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(T,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.autoStart||(this.totalMilliseconds=this.time,this.endTime=this.now()+this.time),this.emitEvents&&this.$emit(N),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const e=Math.min(this.totalMilliseconds,this.interval);if(e>0){let i,r;const f=u=>{i||(i=u),r||(r=u);const c=u-i;c>=e||c+(u-r)/2>=e?this.progress():this.requestId=requestAnimationFrame(f),r=u};this.requestId=requestAnimationFrame(f)}else this.end()},pause(){cancelAnimationFrame(this.requestId),this.requestId=0},progress(){this.counting&&(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(L,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(w))},end(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(k))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.requestId===0&&this.autoPauseOnHide&&(this.update(),this.continue()),this.autoPauseOnHide=!1;break;case"hidden":this.requestId>0&&(this.autoPauseOnHide=!0,this.pause());break}}},render(){return O(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const A={components:{VueCountdown:B,Popover:P},props:{time:{type:[String,null],required:!0},textClass:{type:String,default:""},type:{type:String,default:"design1",validator:e=>["design1","design2"].includes(e)},showPopover:{type:Boolean,default:!0},popoverClass:{type:String,default:""}},data(){return{timeLeftInMilliSeconds:0}},watch:{time:{immediate:!0,handler(e){this.calculateTimeLeft(e)}}},computed:{hasExpired(){return this.timeLeftInMilliSeconds==0}},methods:{calculateTimeLeft(e){if(!e){this.timeLeftInMilliSeconds=0;return}const i=v(e),r=v(),f=i.diff(r);f>0?this.timeLeftInMilliSeconds=f:this.timeLeftInMilliSeconds=0}}},F={key:0},$={key:0},R={key:0},U={key:3},j={class:"w-full text-sm text-left rtl:text-right text-gray-500"},G={class:"px-2 py-1 text-center"},Y={class:"px-2 py-1 text-center"},z={class:"px-2 py-1 text-center"},W={class:"px-2 py-1 text-center"},X={key:0,class:"w-full flex space-x-1"},J={class:"w-full flex flex-col items-center p-2 bg-gray-100 rounded-lg"},K={class:"font-bold"},Q={class:"w-full flex flex-col items-center p-2 bg-gray-100 rounded-lg"},Z={class:"font-bold"},tt={class:"w-full flex flex-col items-center p-2 bg-gray-100 rounded-lg"},et={class:"font-bold"},st={class:"w-full flex flex-col items-center p-2 bg-gray-100 rounded-lg"},it={class:"font-bold"};function nt(e,i,r,f,u,c){const D=E("Popover"),V=E("vue-countdown");return a(),_(V,{time:u.timeLeftInMilliSeconds,class:"flex items-center space-x-1"},{default:S(({days:d,hours:n,minutes:o,seconds:l})=>[m(e.$slots,"prefix",{hasExpired:c.hasExpired}),r.type=="design1"?(a(),h(y,{key:0},[d>0||n>0||o>0||l>0?(a(),h("span",{key:0,class:b(r.textClass)},[d>0?(a(),h(y,{key:0},[t("span",null,s(d)+" "+s(d==1?"day ":"days "),1),n>0?(a(),h("span",F,s(n)+" "+s(n==1?"hr ":"hrs "),1)):p("",!0)],64)):n>0?(a(),h(y,{key:1},[t("span",null,s(n)+" "+s(n==1?"hr ":"hrs "),1),o>0?(a(),h("span",$,s(o)+" "+s(o==1?"min ":"mins "),1)):p("",!0)],64)):o>0?(a(),h(y,{key:2},[t("span",null,s(o)+" "+s(o==1?"min ":"mins "),1),l>0?(a(),h("span",R,s(l)+" "+s(l==1?"sec ":"secs "),1)):p("",!0)],64)):l>0?(a(),h("span",U,s(l)+" "+s(l==1?"sec ":"secs "),1)):p("",!0)],2)):m(e.$slots,"default",{key:1},()=>[i[0]||(i[0]=I("Expired"))]),m(e.$slots,"suffix",{hasExpired:c.hasExpired}),r.showPopover&&!c.hasExpired?(a(),_(D,{key:2,placement:"top",class:b(r.popoverClass)},{content:S(()=>[t("table",j,[i[1]||(i[1]=t("thead",{class:"font-bold text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("td",{class:"px-2 py-1 text-center"},"Days"),t("td",{class:"px-2 py-1 text-center"},"Hrs"),t("td",{class:"px-2 py-1 text-center"},"Mins"),t("td",{class:"px-2 py-1 text-center"},"Secs")])],-1)),t("tbody",null,[t("tr",null,[t("td",G,s(d<10?"0"+d:d),1),t("td",Y,s(n<10?"0"+n:n),1),t("td",z,s(o<10?"0"+o:o),1),t("td",W,s(l<10?"0"+l:l),1)])])])]),_:2},1032,["class"])):p("",!0)],64)):r.type=="design2"?(a(),h(y,{key:1},[d>0||n>0||o>0||l>0?(a(),h("div",X,[t("div",J,[t("div",K,s(d<10?"0"+d:d),1),i[2]||(i[2]=t("div",null,"Days",-1))]),t("div",Q,[t("div",Z,s(n<10?"0"+n:n),1),i[3]||(i[3]=t("div",null,"Hrs",-1))]),t("div",tt,[t("div",et,s(o<10?"0"+o:o),1),i[4]||(i[4]=t("div",null,"Mins",-1))]),t("div",st,[t("div",it,s(l<10?"0"+l:l),1),i[5]||(i[5]=t("div",null,"Secs",-1))])])):m(e.$slots,"default",{key:1},()=>[i[6]||(i[6]=I("Expired"))]),m(e.$slots,"suffix",{hasExpired:c.hasExpired})],64)):p("",!0)]),_:3},8,["time"])}const rt=q(A,[["render",nt]]);export{rt as C};
