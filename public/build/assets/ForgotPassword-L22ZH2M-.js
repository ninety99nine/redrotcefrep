import{c as n,b as e,a as m,r as d,F as u,i as s,w as k,f as S,e as v,t as p,g as c,h as E,o as l,d as F}from"./app-Cn46GS3I.js";import{P as L}from"./Pill-CfvZYk9z.js";import{L as P}from"./Logo-C5gCsuog.js";import{I as B}from"./Input-CS_IpxN-.js";import{A as N}from"./Alert-CB3c9GAw.js";import{B as V}from"./Button-CbwcBUhP.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Copy-BjK3wMF-.js";import"./ShineEffect-BLGg8IQO.js";import"./createLucideIcon-BlsGDRHQ.js";import"./Popover-CYo5yYtG.js";import"./Skeleton-ConmgPQ-.js";import"./info-EKKYiE0H.js";import"./Loader-9AWAUH8r.js";const T={name:"ForgotPassword",components:{Pill:L,Logo:P,Input:B,Alert:N,Button:V},inject:["formState","notificationState"],data(){return{form:{email:""},type:"email",loginTypes:[{label:"Email",value:"email"},{label:"Mobile Number",value:"mobile_number"}],loading:!1,currentYear:new Date().getFullYear()}},methods:{goToLogin(){this.$router.push({name:"login"})},async submit(){var g,t;if(!this.loading&&(this.formState.hideFormErrors(),this.form.email.trim()===""&&this.formState.setFormError("email","Email is required"),!this.formState.hasErrors)){this.loading=!0;try{await E.post("/api/auth/forgot-password",this.form),this.notificationState.showSuccessNotification("A password reset link has been sent to your email."),this.$router.push({name:"login"})}catch(r){const f=((t=(g=r==null?void 0:r.response)==null?void 0:g.data)==null?void 0:t.message)||(r==null?void 0:r.message)||"Something went wrong while requesting a password reset link";this.notificationState.showWarningNotification(f),this.formState.setServerFormErrors(r),console.error("Failed to request password reset link:",r)}finally{this.loading=!1}}}},mounted(){this.form.email=this.$route.query.email||""}},j={class:"min-h-screen grid grid-cols-1 lg:grid-cols-2 transition-opacity opacity-100 duration-750 lg:grow starting:opacity-0"},C={class:"flex items-center justify-center p-6 bg-gradient-to-b from-blue-100 to-white-100"},q={class:"w-full max-w-md"},I={class:"bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6"},D={class:"text-sm text-gray-500 mb-4"},Y={class:"flex space-x-2"},z={key:0,class:"text-red-500 text-sm mb-3"},M={class:"ml-1"},O={class:"flex justify-center mt-4"},R={class:"text-sm text-center text-gray-500"};function U(g,t,r,f,o,a){const w=d("Logo"),y=d("Pill"),_=d("Input"),b=d("Button"),x=d("router-link"),h=d("Alert");return l(),n("div",j,[e("div",C,[e("div",q,[m(w,{height:"h-20 mx-auto mb-4"}),e("div",I,[t[6]||(t[6]=e("h1",{class:"text-2xl font-semibold leading-none tracking-tight mb-4"},"Forgot Password",-1)),e("h1",D,[o.type=="email"?(l(),n(u,{key:0},[s("Enter your email address to receive a password reset link.")],64)):(l(),n(u,{key:1},[s("Follow instructions to reset your password")],64))]),e("form",{onSubmit:t[1]||(t[1]=k((...i)=>a.submit&&a.submit(...i),["prevent"])),class:"space-y-4"},[e("div",Y,[(l(!0),n(u,null,S(o.loginTypes,i=>(l(),F(y,{type:o.type===i.value?"primary":"light",action:()=>o.type=i.value,key:i.value},{default:c(()=>[s(p(i.label),1)]),_:2},1032,["type","action"]))),128))]),o.type=="email"?(l(),n(u,{key:0},[m(_,{type:"email",label:"Email",modelValue:o.form.email,"onUpdate:modelValue":t[0]||(t[0]=i=>o.form.email=i),errorText:a.formState.getFormError("email")},null,8,["modelValue","errorText"]),a.formState.generalErrorText?(l(),n("div",z,p(a.formState.generalErrorText),1)):v("",!0),m(b,{size:"md",type:"primary",action:a.submit,disabled:o.loading,buttonClass:"w-full"},{default:c(()=>[e("span",M,p(o.loading?"Sending...":"Send Reset Link"),1)]),_:1},8,["action","disabled"]),e("div",O,[m(x,{to:{name:"login"},class:"text-sm text-blue-600 hover:underline"},{default:c(()=>t[2]||(t[2]=[s("Back to Login")])),_:1,__:[2]})])],64)):(l(),n(u,{key:1},[m(h,{dismissable:!1},{description:c(()=>t[3]||(t[3]=[e("p",{class:"font-semibold mb-4"},"Supported Networks",-1),e("img",{src:"/images/mobile-network-icons/orange.png",class:"w-10 rounded-sm"},null,-1)])),_:1}),m(h,{dismissable:!1},{description:c(()=>t[4]||(t[4]=[e("p",{class:"mb-4"},[s("Dial "),e("span",{class:"font-bold"},"*250#"),s(" on your mobile phone. Select "),e("span",{class:"font-bold"},"Profile"),s(", then select "),e("span",{class:"font-bold"},"Set Password"),s(" and enter your new password.")],-1),e("p",null,[s("Now click the login button below and login using your "),e("span",{class:"font-bold"},"mobile number"),s(" and "),e("span",{class:"font-bold"},"new password")],-1)])),_:1}),m(b,{size:"md",type:"primary",action:a.goToLogin,disabled:o.loading,buttonClass:"w-full"},{default:c(()=>t[5]||(t[5]=[e("span",{class:"ml-1"},"Login",-1)])),_:1,__:[5]},8,["action","disabled"])],64))],32)]),e("p",R,"Â© "+p(o.currentYear)+" Perfect Order. All rights reserved.",1)])]),t[7]||(t[7]=e("div",{class:"hidden lg:block"},[e("img",{src:"/images/lady-with-laptop.jpg",class:"w-full h-full object-cover",alt:"Lady holding boxes"})],-1))])}const ie=A(T,[["render",U]]);export{ie as default};
