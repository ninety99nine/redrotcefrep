import{P as _}from"./Popover-DmuV9HMk.js";import{T as V}from"./x-DdzUJel4.js";import{a as M}from"./stringUtils-Bvzw0-oW.js";import{a as Q}from"./Input-l_fu_pN6.js";import{V as N}from"./vue-draggable-next.esm-bundler-CKzVtxep.js";import{P as B,c as i,b as o,e as a,E as u,n as h,F as f,k,d as g,j as v,i as T,t as d,g as x,N as I,f as b,x as A,w as p,Q as j,r as w,R as D,o as r}from"./app-DF0QnPU4.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={inject:["notificationState"],directives:{capitalize:Q},components:{Popover:_,Tooltip:V,draggable:N},props:{modelValue:{type:Array,default:()=>[]},label:{type:[String,null],default:null},labelStyle:{type:[Object,String,null],default:null},secondaryLabel:{type:[String,null],default:null},secondaryLabelStyle:{type:[Object,String,null],default:null},popoverContent:{type:[String,null],default:null},tooltipContent:{type:[String,null],default:null},showAsterisk:{type:Boolean,default:!1},description:{type:[String,null],default:null},externalLinkName:{type:[String,null],default:null},externalLinkUrl:{type:[String,null],default:null},placeholder:{type:[String,null],default:null},disabled:{type:Boolean,default:!1},skeleton:{type:Boolean,default:!1},alignItems:{type:[String,null],default:"items-center"},errorText:{type:[String,null],default:null},options:{type:Array,default:()=>[]},showOptions:{type:Boolean,default:!0},search:{type:Boolean,default:!0},noResultsText:{type:[String,null],default:"No tags available"},searchableFields:{type:[Array,null],default:()=>["label","value"]},isDraggable:{type:Boolean,default:!0},allowCustom:{type:Boolean,default:!0},addNewText:{type:[String,null],default:"+ Create"},onAddCustomOption:{type:Function,default:null}},emits:["update:modelValue","update:options","change"],data(){return{isOpen:!1,searchQuery:null,uniqueId:B("input")}},computed:{localModelValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e),this.$emit("change",e)}},localOptions:{get(){return this.options},set(e){this.$emit("update:options",e)}},selectedOptions:{get(){return this.modelValue.map(e=>{const l=this.localOptions.find(t=>t.value===e);return l||{label:e,value:e}}).filter(e=>e)},set(e){this.localModelValue=e.map(l=>l.value)}},hasSelectedOptions(){return this.selectedOptions.length>0},hasSearchQuery(){return this.isNotEmpty(this.searchQuery)},filteredOptions(){return this.searchQuery?this.localOptions.filter(e=>this.searchableFields.some(l=>{var t;return(t=e[l])==null?void 0:t.toLowerCase().includes(this.searchQuery.toLowerCase())})):this.localOptions}},methods:{isNotEmpty:M,openDropdown(){this.disabled||(this.isOpen||(this.isOpen=!0),this.focusOnInput())},toggleDropdown(){this.disabled||(this.isOpen=!this.isOpen,this.focusOnInput())},focusOnInput(){this.$nextTick(()=>{this.$refs.search&&this.$refs.search.focus()})},toggleOption(e){if(this.disabled||(this.focusOnInput(),e.disabled))return;this.isSelected(e)?this.removeOption(e):this.localModelValue=[...this.localModelValue,e.value],this.searchQuery=""},removeOption(e){this.focusOnInput(),this.localModelValue=this.localModelValue.filter(l=>l!==e.value)},isSelected(e){return this.localModelValue.includes(e.value)},isOptionInList(e){return this.localOptions.some(l=>this.searchableFields.some(t=>{var m;return((m=l[t])==null?void 0:m.toLowerCase())===e.toLowerCase()}))},isOptionCaptured(e){return this.localModelValue.some(l=>l.toLowerCase()===e.toLowerCase())},handleClickOutside(e){this.$refs.dropdown.contains(e.target)||(this.isOpen=!1)},handleEnterKey(){this.allowCustom&&this.hasSearchQuery&&!this.isOptionInList(this.searchQuery)&&this.addCustomOption()},addCustomOption(){if(this.isOptionCaptured(this.searchQuery)){this.notificationState.showWarningNotification("This option already exists"),this.searchQuery="";return}const e=this.searchQuery,l={label:this.searchQuery,value:e};this.onAddCustomOption?this.onAddCustomOption(this.localOptions,this.localModelValue,e):(this.localOptions=[...this.localOptions,l],this.localModelValue=[...this.localModelValue,e]),this.searchQuery="",this.focusOnInput()}},mounted(){document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}},F={class:"space-y-2"},P={key:0},U=["for"],K={key:3,class:"text-red-500"},q={key:2,class:"leading-4"},R={key:0,class:"text-xs text-gray-400 mr-1"},H=["href"],W={class:"w-full relative",ref:"dropdown"},G={class:"flex items-center space-x-1 bg-gray-100 rounded-full px-2 py-1"},J={class:"text-xs font-medium text-gray-900"},X=["onClick"],Y={class:"flex items-center space-x-1 bg-gray-100 rounded-full px-2 py-1"},Z={class:"text-xs font-medium text-gray-900"},$=["onClick"],ee=["id","disabled","placeholder"],te={key:0,class:"w-full absolute z-10 mt-1 select-none bg-white border border-gray-300 rounded-md shadow-lg overflow-hidden"},le={class:"max-h-60 overflow-auto"},se=["onClick"],oe={class:"truncate"},ne={key:0},re={class:"w-full flex items-center gap-3"},ie={class:"flex items-center space-x-2 bg-gray-100 rounded-full px-3 py-1 border shadow-sm"},ae={class:"text-xs font-medium text-gray-900"},de={class:"text-xs text-gray-500"},ue={key:0,class:"text-center px-4 py-2 text-gray-500 text-sm"},ce={key:0,class:"scroll-to-error font-medium text-red-500 text-xs mt-1 ml-1"};function he(e,l,t,m,c,n){const O=w("Popover"),C=w("Tooltip"),S=w("draggable"),L=D("capitalize");return r(),i("div",null,[o("div",F,[e.$slots.label||t.label||t.secondaryLabel||t.showAsterisk||e.$slots.description||t.description||t.externalLinkName?(r(),i("div",P,[e.$slots.label||t.label||t.secondaryLabel||t.showAsterisk?(r(),i("label",{key:0,for:c.uniqueId,class:h({"flex items-center text-sm leading-6 font-medium text-gray-900 space-x-1":!e.$slots.label})},[e.$slots.label?u(e.$slots,"label",{key:0}):(r(),i(f,{key:1},[k((r(),i("span",{style:v(t.labelStyle)},[T(d(t.label),1)],4)),[[L]]),t.secondaryLabel?(r(),i("span",{key:0,style:v(t.secondaryLabelStyle),class:h({"font-normal text-gray-400":!t.secondaryLabelStyle})},d(t.secondaryLabel),7)):a("",!0),t.popoverContent||e.$slots.popoverContent?(r(),g(O,{key:1,trigger:"hover",content:t.popoverContent},{default:x(()=>[u(e.$slots,"popoverContent")]),_:3},8,["content"])):a("",!0),t.tooltipContent||e.$slots.tooltip?(r(),g(C,{key:2,trigger:"hover",content:t.tooltipContent},{default:x(()=>[u(e.$slots,"tooltipContent")]),_:3},8,["content"])):a("",!0),t.showAsterisk?(r(),i("span",K,"*")):a("",!0)],64))],10,U)):a("",!0),e.$slots.description?u(e.$slots,"description",{key:1}):t.description||t.externalLinkName?(r(),i("div",q,[t.description?(r(),i("span",R,d(t.description),1)):a("",!0),t.externalLinkName?(r(),i("a",I({key:1,target:"_blank",href:t.externalLinkUrl},e.type==="file"?e.fileEventListeners:{},{class:"inline-block text-xs text-blue-700 hover:underline hover:text-blue-90"}),[o("span",null,d(t.externalLinkName),1),l[7]||(l[7]=o("svg",{class:"w-3 h-3 inline-block ml-0.5 -mt-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})],-1))],16,H)):a("",!0)])):a("",!0)])):a("",!0),o("div",{class:h(["w-full flex",t.alignItems,{"opacity-50":t.disabled}])},[e.$slots.prefix?u(e.$slots,"prefix",{key:0}):a("",!0),o("div",W,[o("div",{onClick:l[5]||(l[5]=(...s)=>n.toggleDropdown&&n.toggleDropdown(...s)),class:h(["w-full select-none bg-white border border-gray-300 rounded-md py-1 px-2 flex flex-wrap gap-2 items-center overflow-hidden",t.disabled?"cursor-not-allowed":"cursor-pointer"])},[t.isDraggable?(r(),g(S,{key:0,modelValue:n.selectedOptions,"onUpdate:modelValue":l[0]||(l[0]=s=>n.selectedOptions=s),handle:".draggable-handle","ghost-class":"bg-yellow-50",class:"flex flex-wrap gap-2"},{default:x(()=>[(r(!0),i(f,null,b(n.selectedOptions,(s,y)=>(r(),i("div",{key:y,class:"draggable-handle"},[u(e.$slots,"selectedOption",{selectedOption:s,removeOption:()=>n.removeOption(s)},()=>[o("div",G,[o("span",J,d(s.label),1),o("button",{onClick:p(()=>n.removeOption(s),["prevent","stop"]),class:"focus:outline-none"},l[8]||(l[8]=[o("svg",{class:"w-3 h-3 text-gray-500 hover:text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,X)])])]))),128))]),_:3},8,["modelValue"])):(r(!0),i(f,{key:1},b(n.selectedOptions,(s,y)=>u(e.$slots,"selectedOption",{key:y,selectedOption:s,removeOption:()=>n.removeOption(s)},()=>[o("div",Y,[o("span",Z,d(s.label),1),o("button",{onClick:p(()=>n.removeOption(s),["prevent","stop"]),class:"focus:outline-none"},l[9]||(l[9]=[o("svg",{class:"w-3 h-3 text-gray-500 hover:text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,$)])])),128)),t.search?k((r(),i("input",{key:2,type:"text",ref:"search",onKeydown:[l[1]||(l[1]=p(()=>{},["stop"])),l[4]||(l[4]=j(p((...s)=>n.handleEnterKey&&n.handleEnterKey(...s),["prevent"]),["enter"]))],id:c.uniqueId,disabled:t.disabled,"onUpdate:modelValue":l[2]||(l[2]=s=>c.searchQuery=s),placeholder:t.placeholder,onClick:l[3]||(l[3]=p((...s)=>n.openDropdown&&n.openDropdown(...s),["stop"])),class:h(["flex-1 outline-none text-sm text-gray-900 placeholder:text-gray-400 border-0 focus:ring-0 py-1",n.hasSelectedOptions?"px-2":"px-0"])},null,42,ee)),[[A,c.searchQuery]]):a("",!0)],2),c.isOpen&&(n.hasSearchQuery||t.showOptions)?(r(),i("div",te,[o("ul",le,[(r(!0),i(f,null,b(n.filteredOptions,(s,y)=>(r(),i(f,{key:y},[s.label?(r(),i("li",{key:0,onClick:()=>n.toggleOption(s),class:h(["px-4 py-2 text-sm flex justify-between items-center hover:bg-gray-100",s.disabled?"cursor-not-allowed text-gray-400":"cursor-pointer text-gray-700"])},[u(e.$slots,"option",{option:s,isSelected:n.isSelected(s)},()=>[o("span",oe,d(s.label),1)]),n.isSelected(s)?(r(),i("span",ne,l[10]||(l[10]=[o("svg",{class:"w-4 h-4 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):a("",!0)],10,se)):a("",!0)],64))),128)),t.allowCustom&&n.hasSearchQuery&&!n.isOptionInList(c.searchQuery)?(r(),i("li",{key:0,onClick:l[6]||(l[6]=(...s)=>n.addCustomOption&&n.addCustomOption(...s)),class:"w-full flex items-center justify-between px-4 py-2 cursor-pointer hover:bg-gray-50 text-gray-700"},[o("div",re,[o("div",ie,[o("span",ae,d(c.searchQuery),1)]),o("span",de,d(t.addNewText),1)]),l[11]||(l[11]=o("div",{class:"size-6 flex flex-col justify-center items-center bg-white border border-gray-200 text-xs uppercase text-gray-400 shadow-2xs rounded-sm dark:bg-neutral-800 dark:border-neutral-700"},[o("svg",{class:"shrink-0 size-3.5",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[o("polyline",{points:"9 10 4 15 9 20"}),o("path",{d:"M20 4v7a4 4 0 0 1-4 4H4"})])],-1))])):a("",!0)]),n.filteredOptions.length===0&&!(t.allowCustom&&n.hasSearchQuery)?(r(),i("div",ue,d(t.noResultsText),1)):a("",!0)])):a("",!0)],512),e.$slots.suffix?u(e.$slots,"suffix",{key:1}):a("",!0)],2)]),t.errorText?(r(),i("span",ce,d(t.errorText),1)):a("",!0)])}const we=E(z,[["render",he]]);export{we as S};
