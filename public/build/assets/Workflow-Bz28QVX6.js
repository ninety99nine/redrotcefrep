import{A as j}from"./Alert-jIC638EV.js";import{M as z}from"./Modal-UBL0nJJO.js";import{I as O,M as q}from"./Input-QwDj8T87.js";import{S as P}from"./Switch-TKSotGnN.js";import{S as Z}from"./Select-DopDm6jM.js";import{B as R}from"./Button-Dy6BYOYD.js";import{c as b,i as G}from"./stringUtils-Bvzw0-oW.js";import{S as Y}from"./Skeleton-BfdDUyfM.js";import{W as J}from"./WhatsappIcon-CawMyV9I.js";import{V as K}from"./vue-draggable-next.esm-bundler-D8Jtphk6.js";import{I as Q}from"./InputMobileNumbers-B-0sPLTs.js";import{c as f,a as m,b as l,e as g,g as x,d as W,t as F,n as V,i as v,r as p,o as w,F as T,f as C,w as X}from"./app-CAsQYp3T.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as $}from"./star-D2qLTOf1.js";import{M as ee}from"./move-CrqEeJEG.js";import{M as te}from"./move-left-Cp2UyO56.js";import{T as oe}from"./trash-2-Cze44q0v.js";import{P as re}from"./plus-BwaaZFcM.js";import"./createLucideIcon-Dd5tvPb0.js";import"./circle-check-Coc-yKcS.js";import"./info-BxOCgZi_.js";import"./x-ICmzimgK.js";import"./Copy-B_MLEMQD.js";import"./ShineEffect-DjmscYxr.js";import"./Popover-DUH2qEVS.js";import"./Tooltip-Gwe3QXsJ.js";import"./capitalize-ChUSrr1V.js";import"./refresh-ccw-D7oBzLST.js";import"./circle-alert-BwdAp8OB.js";import"./parsePhoneNumber-xMTQFMCS.js";import"./Loader-j3Xd9R0O.js";import"./index-BlT6DaHK.js";import"./Pill-_ubzDuHk.js";const ae={inject:["formState","storeState","workflowState","changeHistoryState","notificationState"],components:{Move:ee,Mail:q,Star:$,Alert:j,Modal:z,Input:O,Switch:P,Select:Z,Button:R,Skeleton:Y,WhatsappIcon:J,InputMobileNumbers:Q,draggable:K},data(){return{Plus:re,Trash2:oe,MoveLeft:te,maxWorkflowActions:3,workflowConfigurations:[],appName:"Perfect Order",isLoadingWorkflowConfigurations:!1}},watch:{store(a,e){!e&&a&&this.setup()},"workflowForm.target":{handler(){var o;const a=this.workflowForm.trigger,e=this.triggerTypes.map(s=>s.value);this.workflowForm.trigger=e.includes(a)?a:((o=this.triggerTypes[0])==null?void 0:o.value)||null}},"workflowForm.trigger":{handler(){const a=this.actionTypes.map(e=>e.value);this.workflowForm.actions=this.workflowForm.actions.map(e=>{var o,s;if(!a.includes(e.action)){const n=(o=this.actionTypes[0])==null?void 0:o.value,t=((s=this.templateTypes(n)[0])==null?void 0:s.value)||null,c=this.getActionFields(n,t,0);return{action:n,template:t,...c}}return e})}}},computed:{store(){return this.storeState.store},isEditing(){return this.workflowId!=null},isLoadingStore(){return this.storeState.isLoadingStore},workflowId(){return this.$route.params.workflow_id},workflow(){return this.workflowState.workflow},workflowForm(){return this.workflowState.workflowForm},isLoadingWorkflow(){return this.workflowState.isLoadingWorkflow},isDeletingWorkflow(){return this.workflowState.isDeletingWorkflow},hasWorkflowActions(){return this.totalWorkflowActions>0},totalWorkflowActions(){var a;return((a=this.workflowForm.actions)==null?void 0:a.length)??0},targetTypes(){return[...new Set(this.workflowConfigurations.map(e=>e.target))].map(e=>({label:b(e),value:e}))},triggerTypes(){if(!this.workflowForm.target)return[];const a=this.workflowConfigurations.filter(e=>e.target===this.workflowForm.target).map(e=>e.trigger);return[...new Set(a)].map(e=>({label:b(e),value:e}))},actionTypes(){if(!this.workflowForm.target||!this.workflowForm.trigger)return[];const a=this.workflowConfigurations.find(e=>e.target===this.workflowForm.target&&e.trigger===this.workflowForm.trigger);return a?a.actions.map(e=>({label:b(e.name.replace(/([A-Z])/g," $1").trim()),value:e.name})):[]}},methods:{isEmpty:G,capitalize:b,async setup(){this.workflowState.setWorkflowForm(null,!1),this.store&&await this.showWorkflowConfigurations(),this.store&&this.workflowId&&await this.showWorkflow()},setActionButtons(){this.changeHistoryState.removeButtons(),this.changeHistoryState.addDiscardButton(),this.changeHistoryState.addActionButton(this.isEditing?"Save Changes":"Add Workflow",this.isEditing?this.updateWorkflow:this.createWorkflow,"primary",null)},delayTimeUnits(a){return[{label:a=="1"?"Minute":"Minutes",value:"minute"},{label:a=="1"?"Hour":"Hours",value:"hour"}]},templateTypes(a){if(!this.workflowForm.target||!this.workflowForm.trigger)return[];const e=this.workflowConfigurations.find(s=>s.target===this.workflowForm.target&&s.trigger===this.workflowForm.trigger);if(!e)return[];const o=e.actions.find(s=>s.name===a);return o?o.templates.map(s=>({label:b(s.name.replace(/([A-Z])/g," $1").trim()),value:s.name})):[]},updateTemplateFields(a){const e=this.workflowForm.actions[a],o=this.getActionFields(e.action,e.template,a);Object.keys(e).forEach(s=>{s!=="action"&&s!=="template"&&delete e[s]}),Object.assign(e,o),this.workflowState.saveStateDebounced("Template changed")},getActionFields(a,e,o){if(!this.workflowForm.target||!this.workflowForm.trigger)return{};const s=this.workflowConfigurations.find(c=>c.target===this.workflowForm.target&&c.trigger===this.workflowForm.trigger);if(!s)return{};const n=s.actions.find(c=>c.name===a);if(!n)return{};const t=n.templates.find(c=>c.name===e);return t?t.fields:{}},updateActionFields(a){var c;const e=this.workflowForm.actions[a],o=this.workflowConfigurations.find(h=>h.target===this.workflowForm.target&&h.trigger===this.workflowForm.trigger);if(!o)return;const s=o.actions.find(h=>h.name===e.action);if(!s)return;const n=((c=s.templates[0])==null?void 0:c.name)||"order details";e.template=n;const t=this.getActionFields(e.action,n,a);Object.keys(e).forEach(h=>{h!=="action"&&h!=="template"&&delete e[h]}),Object.assign(e,t),this.workflowState.saveStateDebounced("Action changed")},addWorkflowAction(){var s;if(!this.actionTypes.length)return;const a=this.actionTypes[0].value,e=((s=this.templateTypes(a)[0])==null?void 0:s.value)||"order details",o=this.getActionFields(a,e,0);this.workflowForm.actions.push({action:a,template:e,...o}),this.workflowState.saveStateDebounced("Action added")},removeWorkflowAction(a){this.workflowForm.actions.splice(a,1),this.workflowState.saveStateDebounced("Action removed")},async showWorkflowConfigurations(){var a,e;try{this.isLoadingWorkflowConfigurations=!0;const o={params:{store_id:this.store.id}},s=await axios.get("/api/workflows/configurations",o);this.workflowConfigurations=s.data}catch(o){const s=((e=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Failed to fetch workflow configurations";this.notificationState.showWarningNotification(s),console.error("Failed to fetch workflow configurations:",o)}finally{this.isLoadingWorkflowConfigurations=!1}},async showWorkflow(){var a,e;try{this.workflowState.isLoadingWorkflow=!0;const s=(await axios.get(`/api/workflows/${this.workflowId}`,{params:{store_id:this.store.id}})).data;this.workflowState.setWorkflow(s),this.workflowState.setWorkflowForm(s,!0)}catch(o){const s=((e=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Something went wrong while fetching workflow";this.notificationState.showWarningNotification(s),this.formState.setServerFormErrors(o),console.error("Failed to fetch workflow:",o)}finally{this.workflowState.isLoadingWorkflow=!1}},async createWorkflow(){var a,e;try{if(this.workflowState.isCreatingWorkflow||(this.formState.hideFormErrors(),this.isEmpty(this.workflowForm.name)&&this.formState.setFormError("name","The name is required"),this.formState.hasErrors))return;this.workflowState.isCreatingWorkflow=!0,this.changeHistoryState.actionButtons[1].loading=!0;const o={...this.workflowForm,store_id:this.store.id},n=(await axios.post("/api/workflows",o)).data;this.workflowState.setWorkflow(n),this.notificationState.showSuccessNotification("Workflow created"),this.workflowState.saveOriginalState("Original workflow"),await this.navigateToShowWorkflows()}catch(o){const s=((e=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Something went wrong while creating workflow";this.notificationState.showWarningNotification(s),this.formState.setServerFormErrors(o),console.error("Failed to create workflow:",o)}finally{this.workflowState.isCreatingWorkflow=!1,this.changeHistoryState.actionButtons[1].loading=!1}},async updateWorkflow(){var a,e;try{if(this.workflowState.isUpdatingWorkflow||(this.formState.hideFormErrors(),this.isEmpty(this.workflowForm.name)&&this.formState.setFormError("name","The name is required"),this.formState.hasErrors))return;this.workflowState.isUpdatingWorkflow=!0,this.changeHistoryState.actionButtons[1].loading=!0;const o={...this.workflowForm,store_id:this.store.id},n=(await axios.put(`/api/workflows/${this.workflowId}`,o)).data;this.workflowState.setWorkflow(n),this.notificationState.showSuccessNotification("Workflow updated"),this.workflowState.saveOriginalState("Original workflow")}catch(o){const s=((e=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Something went wrong while updating workflow";this.notificationState.showWarningNotification(s),this.formState.setServerFormErrors(o),console.error("Failed to update workflow:",o)}finally{this.workflowState.isUpdatingWorkflow=!1,this.changeHistoryState.actionButtons[1].loading=!1}},async deleteWorkflow(a){var e,o;try{if(this.workflowState.isDeletingWorkflow)return;this.workflowState.isDeletingWorkflow=!0,await axios.delete(`/api/workflows/${this.workflowId}`,{data:{store_id:this.store.id}}),a(),await new Promise(s=>setTimeout(s,500)),this.notificationState.showSuccessNotification("Workflow deleted"),await this.navigateToShowWorkflows()}catch(s){const n=((o=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:o.message)||(s==null?void 0:s.message)||"Something went wrong while deleting workflow";this.notificationState.showWarningNotification(n),this.formState.setServerFormErrors(s),console.error("Failed to delete workflow:",s),a()}finally{this.workflowState.isDeletingWorkflow=!1}},async navigateToShowWorkflows(){await this.$router.push({name:"show-workflows",query:{store_id:this.store.id}})},setWorkflowForm(a){this.workflowState.workflowForm=a}},beforeUnmount(){this.workflowState.reset()},created(){this.setup(),this.setActionButtons();const a=["undo","redo","jumpToHistory","resetHistoryToCurrent","resetHistoryToOriginal"];for(let e of a)this.changeHistoryState.listeners[e]=this.setWorkflowForm}},se={class:"max-w-2xl mx-auto pt-24 pb-40"},le={class:"bg-gray-50 border border-gray-300 rounded-lg p-4 space-y-4 mb-4"},ie={class:"bg-gray-50 border border-gray-300 rounded-lg p-4 space-y-4 mb-4"},ne={class:"flex items-center space-x-2 mb-4"},de={class:"w-full flex items-center space-x-4"},we={key:0},me={class:"w-40 text-blue-500 border border-blue-500 mx-auto py-1 px-2 rounded-xl"},fe={class:"text-xs text-center"},ue={key:0,class:"w-0 h-4 mx-auto border-l border-r border-blue-200 border-dashed absolute -top-4 left-1/2 translate-x-1/2"},ge={class:"bg-gray-50 border border-gray-300 rounded-lg p-4 space-y-4"},ce={class:"flex items-center space-x-8"},pe={class:"w-full flex items-center space-x-4"},he={class:"flex items-center space-x-2"},ke={key:0,class:"space-y-1 mb-4"},ye={class:"flex justify-center"},Se={key:1},ve={key:2,class:"space-y-4"},be={class:"space-y-2"},xe={class:"flex items-center space-x-4"},Fe={class:"flex items-center space-x-4"},Te={key:4},We={key:5},Ve={key:1,class:"flex justify-center mb-16"},_e={class:"flex items-center space-x-2"},Ae={class:"font-bold"},Ce={class:"space-y-2"},De={class:"font-bold text-black"},Ee={class:"flex justify-end"},Ue={class:"mb-8"},Ie={class:"font-bold text-black"};function Le(a,e,o,s,n,t){const c=p("Button"),h=p("Switch"),k=p("Input"),D=p("Star"),y=p("Select"),E=p("WhatsappIcon"),U=p("Mail"),I=p("Move"),L=p("InputMobileNumbers"),M=p("draggable"),B=p("Alert"),H=p("Modal");return w(),f("div",se,[m(c,{size:"xs",type:"light",class:"mb-4",leftIcon:n.MoveLeft,action:t.navigateToShowWorkflows},{default:x(()=>[...e[21]||(e[21]=[l("span",null,"Back",-1)])]),_:1},8,["leftIcon","action"]),l("div",le,[m(h,{size:"xs",suffixText:"Active",modelValue:t.workflowForm.active,"onUpdate:modelValue":e[0]||(e[0]=r=>t.workflowForm.active=r),errorText:t.formState.getFormError("active"),onChange:e[1]||(e[1]=r=>t.workflowState.saveStateDebounced("Active status changed"))},null,8,["modelValue","errorText"]),m(k,{max:"40",type:"text",label:"Name",modelValue:t.workflowForm.name,"onUpdate:modelValue":e[2]||(e[2]=r=>t.workflowForm.name=r),placeholder:"New order notification",errorText:t.formState.getFormError("name"),skeleton:t.isLoadingStore||t.isLoadingWorkflow,onInput:e[3]||(e[3]=r=>t.workflowState.saveStateDebounced("Name changed")),tooltipContent:"The workflow name to help you know what this workflow does e.g New order notification"},null,8,["modelValue","errorText","skeleton"])]),l("div",ie,[l("div",ne,[m(D,{size:"20",class:"shrink-0"}),e[22]||(e[22]=l("h1",{class:"font-bold text-lg"},"Trigger",-1))]),l("div",de,[e[23]||(e[23]=l("span",null,"when",-1)),m(y,{class:"w-full",search:!1,options:t.targetTypes,modelValue:t.workflowForm.target,"onUpdate:modelValue":e[4]||(e[4]=r=>t.workflowForm.target=r),errorText:t.formState.getFormError("target"),onChange:e[5]||(e[5]=r=>t.workflowState.saveStateDebounced("Target changed"))},null,8,["options","modelValue","errorText"]),e[24]||(e[24]=l("span",null,"is",-1)),m(y,{class:"w-full",search:!1,options:t.triggerTypes,modelValue:t.workflowForm.trigger,"onUpdate:modelValue":e[6]||(e[6]=r=>t.workflowForm.trigger=r),errorText:t.formState.getFormError("trigger"),onChange:e[7]||(e[7]=r=>t.workflowState.saveStateDebounced("Trigger changed"))},null,8,["options","modelValue","errorText"])])]),!t.isLoadingStore&&!t.isLoadingWorkflow&&!n.isLoadingWorkflowConfigurations?(w(),f("div",we,[l("div",me,[l("h1",fe,F(t.totalWorkflowActions)+" "+F(t.totalWorkflowActions==1?"Action":"Actions"),1)]),e[33]||(e[33]=l("div",{class:"flex justify-center"},[l("svg",{class:"w-6 h-6 text-blue-500 -mt-0.5 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25 12 21m0 0-3.75-3.75M12 21V3"})])],-1)),t.hasWorkflowActions?(w(),W(M,{key:0,class:"space-y-4 mb-8",handle:".draggable-handle","ghost-class":"bg-yellow-50",modelValue:t.workflowForm.actions,"onUpdate:modelValue":e[19]||(e[19]=r=>t.workflowForm.actions=r),onChange:e[20]||(e[20]=r=>t.workflowState.saveStateDebounced("Action arrangement changed"))},{default:x(()=>[(w(!0),f(T,null,C(t.workflowForm.actions,(r,u)=>(w(),f("div",{key:u,class:"relative"},[u!=0?(w(),f("div",ue)):g("",!0),l("div",ge,[l("div",ce,[l("div",pe,[["whatsapp customer","whatsapp team"].includes(r.action)?(w(),W(E,{key:0,class:"shrink-0 mr-2"})):["email customer","email team"].includes(r.action)?(w(),W(U,{key:1,size:"28",class:"shrink-0 text-indigo-500"})):g("",!0),m(y,{class:"w-full",search:!1,options:t.actionTypes,modelValue:r.action,"onUpdate:modelValue":S=>r.action=S,onChange:S=>t.updateActionFields(u),errorText:t.formState.getFormError(`actions.${u}.action`)},null,8,["options","modelValue","onUpdate:modelValue","onChange","errorText"]),t.templateTypes(r.action).length>=2?(w(),f(T,{key:2},[e[25]||(e[25]=l("span",null,"using",-1)),m(y,{class:"w-full",search:!1,modelValue:r.template,"onUpdate:modelValue":S=>r.template=S,options:t.templateTypes(r.action),onChange:S=>t.updateTemplateFields(u),errorText:t.formState.getFormError(`actions.${u}.template`)},null,8,["modelValue","onUpdate:modelValue","options","onChange","errorText"])],64)):g("",!0)]),l("div",he,[m(c,{size:"xs",type:"bareDanger",leftIcon:n.Trash2,action:()=>t.removeWorkflowAction(u)},null,8,["leftIcon","action"]),m(I,{onClick:e[8]||(e[8]=X(()=>{},["stop"])),size:"16",class:"draggable-handle cursor-grab active:cursor-grabbing text-gray-500 hover:text-yellow-500"})])]),(w(!0),f(T,null,C(t.getActionFields(r.action,r.template,u),(S,d)=>{var _,A;return w(),f("div",{key:d},[d==="mobile_numbers"&&r.action==="whatsapp team"?(w(),f("div",{key:0,class:V({"space-y-4 p-4 bg-slate-100 border border-gray-200 rounded-lg":!((_=r[d])!=null&&_.length)})},[(A=r[d])!=null&&A.length?g("",!0):(w(),f("div",ke,[...e[26]||(e[26]=[l("h1",{class:"flex items-center font-lg font-bold"},[l("span",null,"Send WhatsApp")],-1),l("p",{class:"text-sm text-gray-500"}," Add one or more mobile numbers to send the Whatsapp message ",-1)])])),l("div",ye,[m(L,{isSubmitting:!1,modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,onChange:e[9]||(e[9]=i=>t.workflowState.saveStateDebounced("Mobile numbers changed"))},null,8,["modelValue","onUpdate:modelValue"])])],2)):g("",!0),d==="email"&&r.action==="email team"?(w(),f("div",Se,[m(k,{type:"email",label:"Email",modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,placeholder:"company@example.com",onInput:e[10]||(e[10]=i=>t.workflowState.saveStateDebounced("Email changed")),errorText:t.formState.getFormError(`actions.${u}.email`)},null,8,["modelValue","onUpdate:modelValue","errorText"])])):g("",!0),r.template==="payment reminder"&&d==="add_delay"?(w(),f("div",ve,[l("div",be,[m(k,{type:"checkbox",inputLabel:"Add delay",modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,errorText:t.formState.getFormError(`actions.${u}.add_delay`),onChange:e[11]||(e[11]=i=>t.workflowState.saveStateDebounced("Add delay status changed"))},null,8,["modelValue","onUpdate:modelValue","errorText"]),r[d]?(w(),f(T,{key:0},[e[27]||(e[27]=l("p",{class:"text-xs text-gray-400 mb-2"},"Time to wait before sending payment reminder",-1)),l("div",xe,[m(k,{min:"1",type:"number",class:"w-40",modelValue:r.delay_time_value,"onUpdate:modelValue":i=>r.delay_time_value=i,onInput:e[12]||(e[12]=i=>t.workflowState.saveStateDebounced("Delay time changed")),errorText:t.formState.getFormError(`actions.${u}.delay_time_value`)},null,8,["modelValue","onUpdate:modelValue","errorText"]),m(y,{class:"w-40",search:!1,modelValue:r.delay_time_unit,"onUpdate:modelValue":i=>r.delay_time_unit=i,options:t.delayTimeUnits(r.delay_time_value),onChange:e[13]||(e[13]=i=>t.workflowState.saveStateDebounced("Delay time changed")),errorText:t.formState.getFormError(`actions.${u}.delay_time_unit`)},null,8,["modelValue","onUpdate:modelValue","options","errorText"])])],64)):g("",!0)])])):g("",!0),r.template==="payment reminder"&&d==="auto_cancel"?(w(),f("div",{key:3,class:V(["space-y-2",{"border-t border-b border-gray-300 border-dashed py-4":r.add_delay&&r[d]}])},[m(k,{type:"checkbox",modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,inputLabel:"Cancel order if payment is not received",errorText:t.formState.getFormError(`actions.${u}.auto_cancel`),onChange:e[14]||(e[14]=i=>t.workflowState.saveStateDebounced("Auto cancel status changed"))},null,8,["modelValue","onUpdate:modelValue","errorText"]),r[d]?(w(),f(T,{key:0},[e[28]||(e[28]=l("p",{class:"text-xs text-gray-400 mb-2"},"Time to wait before cancelling the order after sending payment reminder",-1)),l("div",Fe,[m(k,{min:"1",type:"number",class:"w-40",modelValue:r.cancel_time_value,"onUpdate:modelValue":i=>r.cancel_time_value=i,onInput:e[15]||(e[15]=i=>t.workflowState.saveStateDebounced("Cancel time changed")),errorText:t.formState.getFormError(`actions.${u}.cancel_time_value`)},null,8,["modelValue","onUpdate:modelValue","errorText"]),m(y,{class:"w-40",search:!1,modelValue:r.cancel_time_unit,"onUpdate:modelValue":i=>r.cancel_time_unit=i,options:t.delayTimeUnits(r.cancel_time_value),onChange:e[16]||(e[16]=i=>t.workflowState.saveStateDebounced("Cancel time changed")),errorText:t.formState.getFormError(`actions.${u}.cancel_time_unit`)},null,8,["modelValue","onUpdate:modelValue","options","errorText"])])],64)):g("",!0)],2)):g("",!0),d==="review_link"&&r.template==="request review"?(w(),f("div",Te,[m(k,{type:"text",label:"Review Link",placeholder:"https://",secondaryLabel:"(optional)",modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,onInput:e[17]||(e[17]=i=>t.workflowState.saveStateDebounced("Review link changed")),errorText:t.formState.getFormError(`actions.${u}.review_link`),description:"If empty a review link will be provided automatically",tooltipContent:"Link to the platform that allows customers to add a review e.g Google Reviews"},null,8,["modelValue","onUpdate:modelValue","errorText"])])):g("",!0),d==="notes"&&["payment reminder","request review"].includes(r.template)?(w(),f("div",We,[m(k,{rows:"1",max:"200",resize:!0,type:"textarea",label:"Additional Notes",secondaryLabel:"(optional)",description:"Less than 200 characters",modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,errorText:t.formState.getFormError(`actions.${u}.notes`),onInput:e[18]||(e[18]=i=>t.workflowState.saveStateDebounced("Additional notes changed"))},null,8,["modelValue","onUpdate:modelValue","errorText"])])):g("",!0)])}),128))])]))),128))]),_:1},8,["modelValue"])):g("",!0),t.totalWorkflowActions<n.maxWorkflowActions?(w(),f("div",Ve,[m(c,{size:"md",type:"primary",leftIcon:n.Plus,buttonClass:"w-60",action:t.addWorkflowAction},{default:x(()=>[...e[29]||(e[29]=[l("span",{class:"ml-1"},"Add Action",-1)])]),_:1},8,["leftIcon","action"])])):g("",!0),t.totalWorkflowActions==n.maxWorkflowActions?(w(),W(B,{key:2,type:"light",class:"flex justify-between items-center mb-4"},{content:x(()=>[l("div",_e,[e[32]||(e[32]=l("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})],-1)),l("span",null,[e[30]||(e[30]=v("You can only add up to ",-1)),l("span",Ae,F(n.maxWorkflowActions)+" actions",1),e[31]||(e[31]=v(" per workflow",-1))])])]),_:1})):g("",!0)])):g("",!0),t.workflow?(w(),f("div",{key:1,class:V(["flex items-center justify-between space-x-4 overflow-hidden rounded-lg p-4 border mt-4",t.isLoadingStore||t.isLoadingWorkflow?"border-gray-300 bg-gray-50":"border-red-300 bg-red-50"])},[l("div",Ce,[l("p",null,[e[34]||(e[34]=v("Delete ",-1)),l("span",De,F(t.workflow.name),1),e[35]||(e[35]=v("?",-1))])]),l("div",Ee,[m(H,{triggerType:"danger",approveType:"danger",approveLeftIcon:n.Trash2,triggerText:"Delete Workflow",approveText:"Delete Workflow",approveAction:t.deleteWorkflow,triggerLoading:t.isDeletingWorkflow,approveLoading:t.isDeletingWorkflow},{content:x(()=>[e[38]||(e[38]=l("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Confirm Delete",-1)),l("p",Ue,[e[36]||(e[36]=v("Are you sure you want to delete ",-1)),l("span",Ie,F(t.workflow.name),1),e[37]||(e[37]=v("?",-1))])]),_:1},8,["approveLeftIcon","approveAction","triggerLoading","approveLoading"])])],2)):g("",!0)])}const ct=N(ae,[["render",Le]]);export{ct as default};
