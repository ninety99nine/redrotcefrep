import{au as le,u as Or,A as Qe,d as J,g as D,r as ue,o as j,b as v,n as Fr,E as $e,c as ke,a as et,F as Pr,f as Lr,t as tt,e as zr}from"./app-CaCDZNvD.js";import{P as Br}from"./Pill-CfzFjwDX.js";import{I as Dr}from"./Input-CI0gKfpk.js";import{M as jr}from"./Modal-B0SwX18I.js";import{B as Rr}from"./Button-CMAESCwz.js";import{_ as Gr}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{p as ve}from"./parsePhoneNumber-DR0S47Bc.js";import{P as Ur}from"./plus-BsLTh-Ke.js";var X={exports:{}};X.exports;var rt;function Vr(){return rt||(rt=1,function(l,s){var w=200,C="__lodash_hash_undefined__",h=1,b=2,Y=9007199254740991,T="[object Arguments]",H="[object Array]",fe="[object AsyncFunction]",N="[object Boolean]",R="[object Date]",G="[object Error]",we="[object Function]",nt="[object GeneratorFunction]",Q="[object Map]",Ne="[object Number]",it="[object Null]",U="[object Object]",xe="[object Promise]",st="[object Proxy]",Te="[object RegExp]",$="[object Set]",Ae="[object String]",at="[object Symbol]",ot="[object Undefined]",ce="[object WeakMap]",Se="[object ArrayBuffer]",k="[object DataView]",lt="[object Float32Array]",ut="[object Float64Array]",ft="[object Int8Array]",ct="[object Int16Array]",mt="[object Int32Array]",dt="[object Uint8Array]",ht="[object Uint8ClampedArray]",bt="[object Uint16Array]",pt="[object Uint32Array]",_t=/[\\^$.*+?()[\]{}|]/g,gt=/^\[object .+?Constructor\]$/,yt=/^(?:0|[1-9]\d*)$/,a={};a[lt]=a[ut]=a[ft]=a[ct]=a[mt]=a[dt]=a[ht]=a[bt]=a[pt]=!0,a[T]=a[H]=a[Se]=a[N]=a[k]=a[R]=a[G]=a[we]=a[Q]=a[Ne]=a[U]=a[Te]=a[$]=a[Ae]=a[ce]=!1;var Me=typeof le=="object"&&le&&le.Object===Object&&le,vt=typeof self=="object"&&self&&self.Object===Object&&self,A=Me||vt||Function("return this")(),Ce=s&&!s.nodeType&&s,Ie=Ce&&!0&&l&&!l.nodeType&&l,Ee=Ie&&Ie.exports===Ce,me=Ee&&Me.process,Oe=function(){try{return me&&me.binding&&me.binding("util")}catch{}}(),Fe=Oe&&Oe.isTypedArray;function wt(e,t){for(var r=-1,n=e==null?0:e.length,o=0,i=[];++r<n;){var f=e[r];t(f,r,e)&&(i[o++]=f)}return i}function Nt(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function xt(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Tt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function At(e){return function(t){return e(t)}}function St(e,t){return e.has(t)}function Mt(e,t){return e==null?void 0:e[t]}function Ct(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}function It(e,t){return function(r){return e(t(r))}}function Et(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Ot=Array.prototype,Ft=Function.prototype,ee=Object.prototype,de=A["__core-js_shared__"],Pe=Ft.toString,x=ee.hasOwnProperty,Le=function(){var e=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ze=ee.toString,Pt=RegExp("^"+Pe.call(x).replace(_t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=Ee?A.Buffer:void 0,te=A.Symbol,De=A.Uint8Array,je=ee.propertyIsEnumerable,Lt=Ot.splice,F=te?te.toStringTag:void 0,Re=Object.getOwnPropertySymbols,zt=Be?Be.isBuffer:void 0,Bt=It(Object.keys,Object),he=V(A,"DataView"),K=V(A,"Map"),be=V(A,"Promise"),pe=V(A,"Set"),_e=V(A,"WeakMap"),q=V(Object,"create"),Dt=z(he),jt=z(K),Rt=z(be),Gt=z(pe),Ut=z(_e),Ge=te?te.prototype:void 0,ge=Ge?Ge.valueOf:void 0;function P(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vt(){this.__data__=q?q(null):{},this.size=0}function Ht(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Kt(e){var t=this.__data__;if(q){var r=t[e];return r===C?void 0:r}return x.call(t,e)?t[e]:void 0}function qt(e){var t=this.__data__;return q?t[e]!==void 0:x.call(t,e)}function Wt(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=q&&t===void 0?C:t,this}P.prototype.clear=Vt,P.prototype.delete=Ht,P.prototype.get=Kt,P.prototype.has=qt,P.prototype.set=Wt;function S(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Zt(){this.__data__=[],this.size=0}function Jt(e){var t=this.__data__,r=ne(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Lt.call(t,r,1),--this.size,!0}function Xt(e){var t=this.__data__,r=ne(t,e);return r<0?void 0:t[r][1]}function Yt(e){return ne(this.__data__,e)>-1}function Qt(e,t){var r=this.__data__,n=ne(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}S.prototype.clear=Zt,S.prototype.delete=Jt,S.prototype.get=Xt,S.prototype.has=Yt,S.prototype.set=Qt;function L(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $t(){this.size=0,this.__data__={hash:new P,map:new(K||S),string:new P}}function kt(e){var t=ie(this,e).delete(e);return this.size-=t?1:0,t}function er(e){return ie(this,e).get(e)}function tr(e){return ie(this,e).has(e)}function rr(e,t){var r=ie(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}L.prototype.clear=$t,L.prototype.delete=kt,L.prototype.get=er,L.prototype.has=tr,L.prototype.set=rr;function re(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new L;++t<r;)this.add(e[t])}function nr(e){return this.__data__.set(e,C),this}function ir(e){return this.__data__.has(e)}re.prototype.add=re.prototype.push=nr,re.prototype.has=ir;function I(e){var t=this.__data__=new S(e);this.size=t.size}function sr(){this.__data__=new S,this.size=0}function ar(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function or(e){return this.__data__.get(e)}function lr(e){return this.__data__.has(e)}function ur(e,t){var r=this.__data__;if(r instanceof S){var n=r.__data__;if(!K||n.length<w-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new L(n)}return r.set(e,t),this.size=r.size,this}I.prototype.clear=sr,I.prototype.delete=ar,I.prototype.get=or,I.prototype.has=lr,I.prototype.set=ur;function fr(e,t){var r=se(e),n=!r&&Ar(e),o=!r&&!n&&ye(e),i=!r&&!n&&!o&&Xe(e),f=r||n||o||i,c=f?Tt(e.length,String):[],m=c.length;for(var u in e)x.call(e,u)&&!(f&&(u=="length"||o&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||vr(u,m)))&&c.push(u);return c}function ne(e,t){for(var r=e.length;r--;)if(qe(e[r][0],t))return r;return-1}function cr(e,t,r){var n=t(e);return se(e)?n:Nt(n,r(e))}function W(e){return e==null?e===void 0?ot:it:F&&F in Object(e)?gr(e):Tr(e)}function Ue(e){return Z(e)&&W(e)==T}function Ve(e,t,r,n,o){return e===t?!0:e==null||t==null||!Z(e)&&!Z(t)?e!==e&&t!==t:mr(e,t,r,n,Ve,o)}function mr(e,t,r,n,o,i){var f=se(e),c=se(t),m=f?H:E(e),u=c?H:E(t);m=m==T?U:m,u=u==T?U:u;var p=m==U,y=u==U,d=m==u;if(d&&ye(e)){if(!ye(t))return!1;f=!0,p=!1}if(d&&!p)return i||(i=new I),f||Xe(e)?He(e,t,r,n,o,i):pr(e,t,m,r,n,o,i);if(!(r&h)){var _=p&&x.call(e,"__wrapped__"),g=y&&x.call(t,"__wrapped__");if(_||g){var O=_?e.value():e,M=g?t.value():t;return i||(i=new I),o(O,M,r,n,i)}}return d?(i||(i=new I),_r(e,t,r,n,o,i)):!1}function dr(e){if(!Je(e)||Nr(e))return!1;var t=We(e)?Pt:gt;return t.test(z(e))}function hr(e){return Z(e)&&Ze(e.length)&&!!a[W(e)]}function br(e){if(!xr(e))return Bt(e);var t=[];for(var r in Object(e))x.call(e,r)&&r!="constructor"&&t.push(r);return t}function He(e,t,r,n,o,i){var f=r&h,c=e.length,m=t.length;if(c!=m&&!(f&&m>c))return!1;var u=i.get(e);if(u&&i.get(t))return u==t;var p=-1,y=!0,d=r&b?new re:void 0;for(i.set(e,t),i.set(t,e);++p<c;){var _=e[p],g=t[p];if(n)var O=f?n(g,_,p,t,e,i):n(_,g,p,e,t,i);if(O!==void 0){if(O)continue;y=!1;break}if(d){if(!xt(t,function(M,B){if(!St(d,B)&&(_===M||o(_,M,r,n,i)))return d.push(B)})){y=!1;break}}else if(!(_===g||o(_,g,r,n,i))){y=!1;break}}return i.delete(e),i.delete(t),y}function pr(e,t,r,n,o,i,f){switch(r){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Se:return!(e.byteLength!=t.byteLength||!i(new De(e),new De(t)));case N:case R:case Ne:return qe(+e,+t);case G:return e.name==t.name&&e.message==t.message;case Te:case Ae:return e==t+"";case Q:var c=Ct;case $:var m=n&h;if(c||(c=Et),e.size!=t.size&&!m)return!1;var u=f.get(e);if(u)return u==t;n|=b,f.set(e,t);var p=He(c(e),c(t),n,o,i,f);return f.delete(e),p;case at:if(ge)return ge.call(e)==ge.call(t)}return!1}function _r(e,t,r,n,o,i){var f=r&h,c=Ke(e),m=c.length,u=Ke(t),p=u.length;if(m!=p&&!f)return!1;for(var y=m;y--;){var d=c[y];if(!(f?d in t:x.call(t,d)))return!1}var _=i.get(e);if(_&&i.get(t))return _==t;var g=!0;i.set(e,t),i.set(t,e);for(var O=f;++y<m;){d=c[y];var M=e[d],B=t[d];if(n)var Ye=f?n(B,M,d,t,e,i):n(M,B,d,e,t,i);if(!(Ye===void 0?M===B||o(M,B,r,n,i):Ye)){g=!1;break}O||(O=d=="constructor")}if(g&&!O){var ae=e.constructor,oe=t.constructor;ae!=oe&&"constructor"in e&&"constructor"in t&&!(typeof ae=="function"&&ae instanceof ae&&typeof oe=="function"&&oe instanceof oe)&&(g=!1)}return i.delete(e),i.delete(t),g}function Ke(e){return cr(e,Cr,yr)}function ie(e,t){var r=e.__data__;return wr(t)?r[typeof t=="string"?"string":"hash"]:r.map}function V(e,t){var r=Mt(e,t);return dr(r)?r:void 0}function gr(e){var t=x.call(e,F),r=e[F];try{e[F]=void 0;var n=!0}catch{}var o=ze.call(e);return n&&(t?e[F]=r:delete e[F]),o}var yr=Re?function(e){return e==null?[]:(e=Object(e),wt(Re(e),function(t){return je.call(e,t)}))}:Ir,E=W;(he&&E(new he(new ArrayBuffer(1)))!=k||K&&E(new K)!=Q||be&&E(be.resolve())!=xe||pe&&E(new pe)!=$||_e&&E(new _e)!=ce)&&(E=function(e){var t=W(e),r=t==U?e.constructor:void 0,n=r?z(r):"";if(n)switch(n){case Dt:return k;case jt:return Q;case Rt:return xe;case Gt:return $;case Ut:return ce}return t});function vr(e,t){return t=t??Y,!!t&&(typeof e=="number"||yt.test(e))&&e>-1&&e%1==0&&e<t}function wr(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Nr(e){return!!Le&&Le in e}function xr(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ee;return e===r}function Tr(e){return ze.call(e)}function z(e){if(e!=null){try{return Pe.call(e)}catch{}try{return e+""}catch{}}return""}function qe(e,t){return e===t||e!==e&&t!==t}var Ar=Ue(function(){return arguments}())?Ue:function(e){return Z(e)&&x.call(e,"callee")&&!je.call(e,"callee")},se=Array.isArray;function Sr(e){return e!=null&&Ze(e.length)&&!We(e)}var ye=zt||Er;function Mr(e,t){return Ve(e,t)}function We(e){if(!Je(e))return!1;var t=W(e);return t==we||t==nt||t==fe||t==st}function Ze(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Y}function Je(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Z(e){return e!=null&&typeof e=="object"}var Xe=Fe?At(Fe):hr;function Cr(e){return Sr(e)?fr(e):br(e)}function Ir(){return[]}function Er(){return!1}l.exports=Mr}(X,X.exports)),X.exports}var Hr=Vr();const Kr=Or(Hr),qr={inject:["formState","notificationState"],components:{Pill:Br,Input:Dr,Modal:jr,Button:Rr},props:{modelValue:{type:[String,Array]},isSubmitting:{type:Boolean,default:!1},createMobileNumber:{type:Function,default:null},updateMobileNumber:{type:Function,default:null},deleteMobileNumber:{type:Function,default:null},bodyClass:{type:String,default:null}},data(){return{Plus:Ur,form:{mobile_number:""},InputKey:0,originalForm:null,mobileNumber:null,mobileNumberIndex:null}},computed:{hasMobileNumbers(){return this.modelValue.length>0},nationalMobileNumbers(){return this.modelValue.map(l=>{const s=ve(l)||null;return s&&s.isValid()?s.formatNational().replace(/\s+/g,""):null}).filter(l=>l!=null)},formHasChanged(){return!Kr(this.form,this.originalForm)},mustSaveChanges(){return this.formHasChanged&&!this.isSubmitting}},methods:{onShow(){++this.InputKey},showMobileNumber(l,s,w){this.mobileNumberIndex=w,this.mobileNumber=s,this.mobileNumber?this.setForm():this.resetForm(),l()},setForm(){this.form.mobile_number=this.mobileNumber,this.originalForm=Qe(this.form)},resetForm(){this.form.mobile_number="",this.originalForm=Qe(this.form)},_createMobileNumber(l){const s=ve(this.form.mobile_number)||null;if(!s||!s.isValid()){this.formState.setFormError("mobile_number","This is not a valid mobile number");return}if(this.modelValue.some(C=>C===this.form.mobile_number)){this.notificationState.showWarningNotification("Mobile number already exists"),l();return}this.createMobileNumber?this.createMobileNumber(this.form.mobile_number,this.resetForm,l):(this.modelValue.push(this.form.mobile_number),this.$emit("change",this.modelValue),this.resetForm(),l())},_updateMobileNumber(l){const s=ve(this.form.mobile_number)||null;if(!s||!s.isValid()){this.formState.setFormError("mobile_number","This is not a valid mobile number");return}if(this.modelValue.some(C=>C===this.form.mobile_number)){this.notificationState.showWarningNotification("Mobile number already exists"),l();return}this.updateMobileNumber?this.updateMobileNumber(this.form.mobile_number,this.mobileNumberIndex,this.resetForm,l):(this.modelValue.splice(this.mobileNumberIndex,1,this.form.mobile_number),this.$emit("change",this.modelValue),this.resetForm(),l())},_deleteMobileNumber(l){this.deleteMobileNumber?this.deleteMobileNumber(this.mobileNumberIndex,this.resetForm,l):(this.modelValue.splice(this.mobileNumberIndex,1),this.$emit("change",this.modelValue),this.resetForm(),l())}}},Wr={class:"flex space-x-2 mt-4"},Zr={key:0,class:"flex flex-wrap gap-2"},Jr={class:"flex items-center"},Xr={class:"mx-2"};function Yr(l,s,w,C,h,b){const Y=ue("Input"),T=ue("Button"),H=ue("Pill"),fe=ue("Modal");return j(),J(fe,{onShow:b.onShow,showFooter:!1,scrollOnContent:!0,header:h.mobileNumber?"Edit Mobile Number":"Add Mobile Number"},{content:D(N=>[v("div",null,[(j(),J(Y,{type:"text",key:h.InputKey,label:"Mobile Number",placeholder:"+26772000001",modelValue:h.form.mobile_number,"onUpdate:modelValue":s[0]||(s[0]=R=>h.form.mobile_number=R),errorText:b.formState.getFormError("mobile_number")},null,8,["modelValue","errorText"])),v("div",Wr,[h.mobileNumber?(j(),J(T,{key:0,size:"sm",type:"danger",disabled:w.isSubmitting,action:()=>b._deleteMobileNumber(N.hideModal)},{default:D(()=>s[1]||(s[1]=[v("span",null,"Delete",-1)])),_:2,__:[1]},1032,["disabled","action"])):zr("",!0),et(T,{size:"sm",type:"success",class:"w-full",buttonClass:"w-full",disabled:!b.mustSaveChanges,action:()=>h.mobileNumber?b._updateMobileNumber(N.hideModal):b._createMobileNumber(N.hideModal)},{default:D(()=>[v("span",null,tt(h.mobileNumber?"Save Changes":"Add Mobile Number"),1)]),_:2},1032,["disabled","action"])])])]),trigger:D(N=>[v("div",{class:Fr(w.bodyClass)},[$e(l.$slots,"content"),b.hasMobileNumbers?(j(),ke("div",Zr,[$e(l.$slots,"prefix"),(j(!0),ke(Pr,null,Lr(b.nationalMobileNumbers,(R,G)=>(j(),J(H,{size:"xs",key:G,type:"primary",showDot:!1,action:()=>b.showMobileNumber(N.showModal,w.modelValue[G],G)},{default:D(()=>[v("div",Jr,[v("span",Xr,tt(R),1),s[2]||(s[2]=v("svg",{class:"w-3 h-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})],-1))])]),_:2},1032,["action"]))),128)),et(T,{size:"sm",icon:"add",leftIcon:h.Plus,leftIconSize:"16",buttonClass:"w-48",rounded:"rounded-full",action:()=>b.showMobileNumber(N.showModal,null,null)},{default:D(()=>s[3]||(s[3]=[v("span",{class:"text-xs"},"Add Mobile Number",-1)])),_:2,__:[3]},1032,["leftIcon","action"])])):(j(),J(T,{key:1,size:"xs",type:"light",leftIcon:h.Plus,action:()=>b.showMobileNumber(N.showModal,null,null),buttonClass:"w-48"},{default:D(()=>s[4]||(s[4]=[v("span",{class:"whitespace-nowrap"},"Add Mobile Number",-1)])),_:2,__:[4]},1032,["leftIcon","action"]))],2)]),_:3},8,["onShow","header"])}const an=Gr(qr,[["render",Yr]]);export{an as I};
