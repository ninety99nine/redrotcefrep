import{B as k}from"./Button-B134edVj.js";import{D as j}from"./Drawer-DpkWEHvn.js";import{S}from"./Skeleton-Dmr_VmHU.js";import{P as B}from"./Pill-CuSw6nga.js";import{I as D}from"./Input-DBnU4wzW.js";import{c as o,b as t,k as f,d as _,a as d,e as y,t as h,F as x,g,w,m as z,C as I,r as a,o as s,i as F,f as b}from"./app-CGNgl8eN.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as M}from"./image-D1UoBb86.js";import{X as T}from"./x-DHw5U7EU.js";import{S as V}from"./shopping-cart-BJpzLNT2.js";const N={inject:["storeState","orderState"],components:{X:T,Image:M,Pill:B,Input:D,Button:k,Skeleton:S},props:{index:{type:Number},cartProduct:{type:Object}},data(){return{}},computed:{store(){return this.storeState.store},hasPhotoPath(){return this.photoPath!=null},photoPath(){return this.cartProduct.photo_path},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart},orderProduct(){return this.orderState.shoppingCart?this.orderState.shoppingCart.order_products.find(i=>i.product_id===this.cartProduct.id):null}}},L={class:"w-full flex items-center space-x-4"},Q=["src"],U={class:"w-full flex items-start"},q={class:"w-full"},O={class:"text-sm"},X={key:1,class:"text-xs space-x-2"},Z={key:0},E={class:"flex justify-end"},A={class:"w-fit text-sm flex items-center border border-gray-300 rounded-full overflow-hidden"};function H(i,e,n,C,v,r){const l=a("Image"),u=a("Skeleton"),m=a("Pill"),c=a("X");return s(),o("div",{class:f({"border-t border-gray-100 pt-4 mt-4":n.index>0})},[t("div",L,[t("div",{class:f(["flex items-center justify-center w-10 h-10 rounded-lg",{"border border-dashed border-gray-200":!r.hasPhotoPath}])},[r.hasPhotoPath?(s(),o("img",{key:0,class:"w-10 object-contain rounded-lg shrink-0",src:r.photoPath},null,8,Q)):(s(),_(l,{key:1,size:"16",class:"text-gray-300"}))],2),t("div",U,[t("div",q,[t("p",O,h(n.cartProduct.name),1),r.isInspectingShoppingCart?(s(),_(u,{key:0,width:"w-24",height:"h-4",shine:!0,class:"mt-2"})):r.orderProduct?(s(),o(x,{key:1},[r.orderProduct.is_free?(s(),_(m,{key:0,type:"success",size:"xs",showDot:!1},{default:g(()=>[...e[4]||(e[4]=[F("free",-1)])]),_:1})):(s(),o("p",X,[t("span",{class:f({"line-through text-gray-500":r.orderProduct.on_sale})},h(r.orderProduct.subtotal.amount_with_currency),3),r.orderProduct.on_sale?(s(),o("span",Z,h(r.orderProduct.grand_total.amount_with_currency),1)):y("",!0)]))],64)):y("",!0)]),d(c,{onClick:e[0]||(e[0]=w(()=>r.orderState.removeCartProduct(n.index,!1),["stop"])),class:"w-4 h-4 shrink-0 text-gray-400 cursor-pointer hover:opacity-90 active:opacity-80 active:scale-90 transition-all"})])]),t("div",E,[t("div",A,[t("button",{onClick:e[1]||(e[1]=w(()=>r.orderState.decreaseCartProductQuantity(n.index,!1),["stop"])),class:"px-3 py-1 bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer"}," - "),z(t("input",{min:"0",value:"2","onUpdate:modelValue":e[2]||(e[2]=p=>n.cartProduct.quantity=p),class:"w-12 text-center border-0 focus:outline-none"},null,512),[[I,n.cartProduct.quantity]]),t("button",{onClick:e[3]||(e[3]=w(()=>r.orderState.increaseCartProductQuantity(n.index,!1),["stop"])),class:"px-3 py-1 bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer"}," + ")])])],2)}const W=P(N,[["render",H]]),G={inject:["storeState","orderState"],components:{Skeleton:S,CartProduct:W},computed:{isLoadingStore(){return this.storeState.isLoadingStore},cartProducts(){return this.orderState.orderForm.cart_products},hasCartProducts(){return this.cartProducts.length>0}}},J={key:0,class:"space-y-2"},K={class:"w-full space-y-4"},R={key:1,class:"space-y-4"},Y={key:0};function $(i,e,n,C,v,r){const l=a("Skeleton"),u=a("CartProduct");return r.isLoadingStore?(s(),o("div",J,[(s(),o(x,null,b([1,2,3],(m,c)=>t("div",{key:c,class:"flex items-center space-x-4 border-b border-gray-300 shadow-sm rounded-lg py-6 px-4 bg-gray-50"},[e[0]||(e[0]=t("div",{class:"flex items-center justify-center w-16 h-16 border border-dashed border-gray-200 rounded-lg shrink-0"},[t("svg",{class:"w-6 h-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])],-1)),t("div",K,[d(l,{width:"w-full",shine:!0}),d(l,{width:"w-1/3",shine:!0})])])),64))])):(s(),o("div",R,[r.hasCartProducts?(s(),o("div",Y,[(s(!0),o(x,null,b(r.cartProducts,(m,c)=>(s(),_(u,{key:c,index:c,cartProduct:m},null,8,["index","cartProduct"]))),128))])):y("",!0),t("div",{class:f(["relative",{"flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg space-y-4 my-4":!r.hasCartProducts}])},[r.hasCartProducts?y("",!0):(s(),o(x,{key:0},[e[1]||(e[1]=t("svg",{class:"w-10 h-10 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})],-1)),e[2]||(e[2]=t("span",{class:"text-sm text-gray-500"},"No products added",-1))],64))],2)]))}const tt=P(G,[["render",$]]),et={inject:["orderState","storeState"],components:{ShoppingCart:V,Button:k,Drawer:j,CartProducts:tt},computed:{store(){return this.storeState.store},orderForm(){return this.orderState.orderForm},shoppingCart(){return this.orderState.shoppingCart},grandTotal(){return this.shoppingCart?this.shoppingCart.totals.grand_total.amount_with_currency:null},totalUncancelledProductQuantities(){return this.shoppingCart?this.shoppingCart.totals_summary.order_products.total_uncancelled_product_quantities:null}},methods:{async checkout(i){i(),await new Promise(e=>setTimeout(e,500)),await this.$router.push({name:"show-checkout",params:{alias:this.store.alias}})},async emptyCart(i){i(),await new Promise(e=>setTimeout(e,500)),this.orderState.resetOrderForm()}}},rt={class:"z-20 fixed left-0 right-0 bottom-0 p-4"},st={class:"relative"},ot={class:"flex items-center space-x-4"},at={class:"text-lg"},nt={class:"absolute top-1/2 -translate-y-1/2 right-2 flex items-center justify-center rounded-full min-w-6 h-6 bg-red-500 text-white text-xs font-bold"},it={class:"p-2"},ct={class:"p-4"},dt={class:"border-t border-gray-100 pt-4 mt-4 space-y-8"},lt={class:"flex items-center space-x-4"},ut={class:"text-lg"};function ht(i,e,n,C,v,r){const l=a("ShoppingCart"),u=a("Button"),m=a("CartProducts"),c=a("Drawer");return s(),_(c,{position:"right",ref:"myCartDrawer",maxWidth:"max-w-lg",showFooter:!1,scrollOnContent:!1},{trigger:g(p=>[t("div",rt,[t("div",st,[d(u,{size:"lg",type:"primary",buttonClass:"w-full",class:"max-w-96 mx-auto",action:p.showDrawer},{default:g(()=>[t("div",ot,[e[0]||(e[0]=t("span",{class:"text-lg"},"My Cart",-1)),d(l,{size:"24"}),t("span",at,h(r.grandTotal),1)])]),_:1},8,["action"]),t("div",nt,[t("span",it,h(r.totalUncancelledProductQuantities)+" "+h(r.totalUncancelledProductQuantities==1?"item":"items"),1)])])])]),content:g(p=>[t("div",ct,[e[3]||(e[3]=t("h3",{class:"font-semibold text-gray-900 border-b border-gray-200 pb-2 mb-4"},"My Cart",-1)),d(m),t("div",dt,[r.orderForm.cart_products.length?(s(),_(u,{key:0,size:"xs",type:"light",buttonClass:"w-full",class:"max-w-96 mx-auto",action:()=>r.emptyCart(p.hideDrawer)},{default:g(()=>[...e[1]||(e[1]=[t("span",null,"Empty cart",-1)])]),_:1},8,["action"])):y("",!0),d(u,{size:"lg",type:"primary",rightIconSize:"20",action:()=>r.checkout(p.hideDrawer),buttonClass:"w-full",class:"max-w-96 mx-auto"},{default:g(()=>[t("div",lt,[e[2]||(e[2]=t("span",{class:"text-lg"},"Checkout",-1)),d(l,{size:"24"}),t("span",ut,h(r.grandTotal),1)])]),_:1},8,["action"])])])]),_:1},512)}const vt=P(et,[["render",ht]]);export{vt as M};
