var _r=Object.defineProperty;var fr=(r,t,e)=>t in r?_r(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var O=(r,t,e)=>fr(r,typeof t!="symbol"?t+"":t,e);import{B as xe}from"./Button-CMAESCwz.js";import{c as l,a as R,b as u,r as f,o as s,n as N,d as y,e as _,t as p,F as L,g as V,w as j,k as dt,x as Ba,i as de,f as I,j as w,v as pr,y as yr,h as Na,z as br,T as xr}from"./app-CaCDZNvD.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as Cr}from"./store-BVLyUPyA.js";import{D as kr}from"./Drawer-BPOs_ACI.js";import{S as ne}from"./Skeleton-KK-V-B9B.js";import{P as Pe}from"./Pill-CfzFjwDX.js";import{I as oe,c as wr}from"./Input-CI0gKfpk.js";import{I as Ut}from"./image-H3n7SVyV.js";import{X as za}from"./x-Do1GLDRA.js";import{S as ja,D as Sr}from"./shopping-cart-DG0ivDWg.js";import{i as vr,a as Ze}from"./stringUtils-Bvzw0-oW.js";import{A as qt}from"./AddressInput-CvfV-1R0.js";import{S as Tr}from"./StoreLogo-TTC2UFqy.js";import{L as Rr}from"./link-DUxRCfe5.js";import{V as Lr}from"./video-mLcs622E.js";import{c as Ar}from"./createLucideIcon-hJfW1V63.js";import{A as Er}from"./at-sign-DoJcCiOb.js";import{L as gt}from"./Loader-C6t2-ZQM.js";import{C as Dr}from"./Countdown-BP221ikd.js";import{C as Pr,a as Mr}from"./chevron-up-CHJq7Wo_.js";import{D as Or}from"./Datepicker-CQnjtjto.js";import{A as Ir}from"./arrow-right-B041MCs7.js";import{M as Fr}from"./Modal-B0SwX18I.js";import{A as Br}from"./arrow-left-CgKkGxGf.js";import{P as Nr}from"./plus-BsLTh-Ke.js";import{A as zr}from"./Alert-DgNvZObK.js";import{S as jr}from"./Switch-Z6sczeAN.js";import{D as Ur,a as qr}from"./DeliveryTimePicker-Cngkv4C6.js";import{C as Vr}from"./circle-alert-ChEGa5ss.js";import{I as Hr}from"./info-BAalSlfL.js";import{C as Wr}from"./circle-check-big-DSATvsqI.js";import{M as Gr}from"./move-left-BVngGtw_.js";/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=Ar("phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Xr={inject:["designState"],components:{Store:Cr}},Yr={class:"flex flex-col items-center justify-center p-8 bg-gray-50 rounded-lg space-y-4 my-4"};function Qr(r,t,e,i,n,a){const d=f("Store");return s(),l("div",Yr,[R(d,{size:"32",class:"text-gray-500"}),t[0]||(t[0]=u("p",{class:"text-sm text-gray-500"},"Nothing to show",-1))])}const Kr=A(Xr,[["render",Qr]]),Jr={inject:["storeState","orderState"],components:{X:za,Image:Ut,Pill:Pe,Input:oe,Button:xe,Skeleton:ne},props:{index:{type:Number},cartProduct:{type:Object}},data(){return{}},computed:{store(){return this.storeState.store},hasPhotoPath(){return this.photoPath!=null},photoPath(){return this.cartProduct.photo_path},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart},orderProduct(){return this.orderState.shoppingCart?this.orderState.shoppingCart.order_products.find(r=>r.product_id===this.cartProduct.id):null}}},$r={class:"w-full flex items-center space-x-4"},en=["src"],tn={class:"w-full flex items-start"},an={class:"w-full"},rn={class:"text-sm"},nn={key:1,class:"text-xs space-x-2"},sn={key:0},dn={class:"flex justify-end"},on={class:"w-fit text-sm flex items-center border border-gray-300 rounded-full overflow-hidden"};function ln(r,t,e,i,n,a){const d=f("Image"),o=f("Skeleton"),h=f("Pill"),c=f("X");return s(),l("div",{class:N({"border-t border-gray-100 pt-4 mt-4":e.index>0})},[u("div",$r,[u("div",{class:N(["flex items-center justify-center w-10 h-10 rounded-lg",{"border border-dashed border-gray-200":!a.hasPhotoPath}])},[a.hasPhotoPath?(s(),l("img",{key:0,class:"w-10 object-contain rounded-lg flex-shrink-0",src:a.photoPath},null,8,en)):(s(),y(d,{key:1,size:"16",class:"text-gray-300"}))],2),u("div",tn,[u("div",an,[u("p",rn,p(e.cartProduct.name),1),a.isInspectingShoppingCart?(s(),y(o,{key:0,width:"w-24",height:"h-4",shine:!0,class:"mt-2"})):a.orderProduct?(s(),l(L,{key:1},[a.orderProduct.is_free?(s(),y(h,{key:0,type:"success",size:"xs",showDot:!1},{default:V(()=>t[4]||(t[4]=[de("free")])),_:1,__:[4]})):(s(),l("p",nn,[u("span",{class:N({"line-through text-gray-500":a.orderProduct.on_sale})},p(a.orderProduct.subtotal.amount_with_currency),3),a.orderProduct.on_sale?(s(),l("span",sn,p(a.orderProduct.grand_total.amount_with_currency),1)):_("",!0)]))],64)):_("",!0)]),R(c,{onClick:t[0]||(t[0]=j(()=>a.orderState.removeCartProduct(e.index,!1),["stop"])),class:"w-4 h-4 flex-shrink-0 text-gray-400 cursor-pointer hover:opacity-90 active:opacity-80 active:scale-90 transition-all"})])]),u("div",dn,[u("div",on,[u("button",{onClick:t[1]||(t[1]=j(()=>a.orderState.decreaseCartProductQuantity(e.index,!1),["stop"])),class:"px-3 py-1 bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer"}," - "),dt(u("input",{min:"0",value:"2","onUpdate:modelValue":t[2]||(t[2]=m=>e.cartProduct.quantity=m),class:"w-12 text-center border-0 focus:outline-none"},null,512),[[Ba,e.cartProduct.quantity]]),u("button",{onClick:t[3]||(t[3]=j(()=>a.orderState.increaseCartProductQuantity(e.index,!1),["stop"])),class:"px-3 py-1 bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer"}," + ")])])],2)}const cn=A(Jr,[["render",ln]]),gn={inject:["storeState","orderState"],components:{Skeleton:ne,CartProduct:cn},computed:{isLoadingStore(){return this.storeState.isLoadingStore},cartProducts(){return this.orderState.orderForm.cart_products},hasCartProducts(){return this.cartProducts.length>0}}},un={key:0,class:"space-y-2"},mn={class:"w-full space-y-4"},hn={key:1,class:"space-y-4"},_n={key:0};function fn(r,t,e,i,n,a){const d=f("Skeleton"),o=f("CartProduct");return a.isLoadingStore?(s(),l("div",un,[(s(),l(L,null,I([1,2,3],(h,c)=>u("div",{key:c,class:"flex items-center space-x-4 border-b border-gray-300 shadow-sm rounded-lg py-6 px-4 bg-gray-50"},[t[0]||(t[0]=u("div",{class:"flex items-center justify-center w-16 h-16 border border-dashed border-gray-200 rounded-lg flex-shrink-0"},[u("svg",{class:"w-6 h-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])],-1)),u("div",mn,[R(d,{width:"w-full",shine:!0}),R(d,{width:"w-1/3",shine:!0})])])),64))])):(s(),l("div",hn,[a.hasCartProducts?(s(),l("div",_n,[(s(!0),l(L,null,I(a.cartProducts,(h,c)=>(s(),y(o,{key:c,index:c,cartProduct:h},null,8,["index","cartProduct"]))),128))])):_("",!0),u("div",{class:N(["relative",{"flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg space-y-4 my-4":!a.hasCartProducts}])},[a.hasCartProducts?_("",!0):(s(),l(L,{key:0},[t[1]||(t[1]=u("svg",{class:"w-10 h-10 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})],-1)),t[2]||(t[2]=u("span",{class:"text-sm text-gray-500"},"No products added",-1))],64))],2)]))}const pn=A(gn,[["render",fn]]),yn={inject:["orderState","storeState"],components:{ShoppingCart:ja,Button:xe,Drawer:kr,CartProducts:pn},computed:{store(){return this.storeState.store},orderForm(){return this.orderState.orderForm},shoppingCart(){return this.orderState.shoppingCart},grandTotal(){return this.shoppingCart?this.shoppingCart.totals.grand_total.amount_with_currency:null},totalUncancelledProductQuantities(){return this.shoppingCart?this.shoppingCart.totals_summary.order_products.total_uncancelled_product_quantities:null}},methods:{async checkout(r){r(),await new Promise(t=>setTimeout(t,500)),await this.$router.push({name:"show-checkout",params:{alias:this.store.alias}})},async emptyCart(r){r(),await new Promise(t=>setTimeout(t,500)),this.orderState.resetOrderForm()}}},bn={class:"z-20 fixed left-0 right-0 bottom-0 p-4"},xn={class:"relative"},Cn={class:"flex items-center space-x-4"},kn={class:"text-lg"},wn={class:"absolute top-1/2 -translate-y-1/2 right-2 flex items-center justify-center rounded-full min-w-6 h-6 bg-red-500 text-white text-xs font-bold"},Sn={class:"p-2"},vn={class:"p-4"},Tn={class:"border-t border-gray-100 pt-4 mt-4 space-y-8"},Rn={class:"flex items-center space-x-4"},Ln={class:"text-lg"};function An(r,t,e,i,n,a){const d=f("ShoppingCart"),o=f("Button"),h=f("CartProducts"),c=f("Drawer");return s(),y(c,{position:"right",ref:"myCartDrawer",maxWidth:"max-w-lg",showFooter:!1,scrollOnContent:!1},{trigger:V(m=>[u("div",bn,[u("div",xn,[R(o,{size:"lg",type:"primary",buttonClass:"w-full",class:"max-w-96 mx-auto",action:m.showDrawer},{default:V(()=>[u("div",Cn,[t[0]||(t[0]=u("span",{class:"text-lg"},"My Cart",-1)),R(d,{size:"24"}),u("span",kn,p(a.grandTotal),1)])]),_:2},1032,["action"]),u("div",wn,[u("span",Sn,p(a.totalUncancelledProductQuantities)+" "+p(a.totalUncancelledProductQuantities==1?"item":"items"),1)])])])]),content:V(m=>[u("div",vn,[t[3]||(t[3]=u("h3",{class:"font-semibold text-gray-900 border-b border-gray-200 pb-2 mb-4"},"My Cart",-1)),R(h),u("div",Tn,[a.orderForm.cart_products.length?(s(),y(o,{key:0,size:"xs",type:"light",buttonClass:"w-full",class:"max-w-96 mx-auto",action:()=>a.emptyCart(m.hideDrawer)},{default:V(()=>t[1]||(t[1]=[u("span",null,"Empty cart",-1)])),_:2,__:[1]},1032,["action"])):_("",!0),R(o,{size:"lg",type:"primary",rightIconSize:"20",action:()=>a.checkout(m.hideDrawer),buttonClass:"w-full",class:"max-w-96 mx-auto"},{default:V(()=>[u("div",Rn,[t[2]||(t[2]=u("span",{class:"text-lg"},"Checkout",-1)),R(d,{size:"24"}),u("span",Ln,p(a.grandTotal),1)])]),_:2},1032,["action"])])])]),_:1},512)}const En=A(yn,[["render",An]]),Dn={inject:["formState","designState","orderState","storeState","notificationState"],components:{Button:xe},props:{placement:{type:String},designCards:{type:Array}},data(){return{creatingOrder:!1}},computed:{store(){return this.storeState.store},orderForm(){return this.orderState.orderForm},shoppingCart(){return this.orderState.shoppingCart},designForm(){return this.designState.designForm},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)},deliveryMethods(){return this.orderState.deliveryMethods},hasDeliveryMethods(){return this.orderState.hasDeliveryMethods},selectedDeliveryMethod(){return this.orderState.selectedDeliveryMethod},customerDesignCard(){return this.designCards.find(r=>r.type=="customer")}},methods:{isEmpty:vr,async createOrder(){var r,t;try{this.formState.hideFormErrors();const e=this.customerDesignCard.metadata;e.show_first_name&&e.first_name_required&&this.isEmpty(this.orderForm.customer_first_name)&&this.formState.setFormError("customer_first_name","Enter your first name"),e.show_last_name&&e.last_name_required&&this.isEmpty(this.orderForm.customer_last_name)&&this.formState.setFormError("customer_last_name","Enter your last name"),e.show_mobile_number&&e.mobile_number_required&&this.isEmpty(this.orderForm.customer_mobile_number)&&this.formState.setFormError("customer_mobile_number","Enter your mobile number"),e.show_email&&e.email_required&&this.isEmpty(this.orderForm.customer_email)&&this.formState.setFormError("customer_email","Enter your email");for(let d=0;d<this.orderForm.cart_products.length;d++){const o=this.orderForm.cart_products[d];(typeof o.quantity>"u"||o.quantity===null||isNaN(parseInt(o.quantity))||parseInt(o.quantity)<1)&&this.formState.setFormError(`cart_products.${d}`,"The quantity must be a number greater than or equal to 1")}if(this.hasDeliveryMethods&&!this.selectedDeliveryMethod)this.formState.setFormError("delivery_methods","Select a delivery method");else if(this.selectedDeliveryMethod){const d=this.shoppingCart.delivery_method_options.find(h=>h.is_selected),o=this.deliveryMethods.findIndex(h=>h.id==d.id);d.is_available?d.delivery_address_is_required&&!this.orderForm.delivery_address?this.formState.setFormError(`delivery_methods.${o}.address`,"Add your address"):d.pin_location_on_map&&(!this.orderForm.delivery_address.latitude||!this.orderForm.delivery_address.longitude)?this.formState.setFormError(`delivery_methods.${o}.address`,"Edit your address to pin your location on the map"):d.schedule_is_required&&!d.schedule_date_complete?this.formState.setFormError(`delivery_methods.${o}.schedule`,`${d.name} date is required`):d.schedule_is_required&&!d.schedule_time_complete&&this.formState.setFormError(`delivery_methods.${o}.schedule`,`${d.name} time is required`):this.formState.setFormError(`delivery_methods.${o}`,`${d.name} is not available`)}if(this.formState.hasErrors)return;this.orderState.creatingOrder=!0;const i={...this.orderForm,association:"shopper",store_id:this.store.id},n=await axios.post("/api/orders",i);this.notificationState.showSuccessNotification("Order created");const a=n.data.order;await this.navigateToOrder(a)}catch(e){const i=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while creating order";this.notificationState.showWarningNotification(i),this.formState.setServerFormErrors(e),console.error("Failed to create order:",e)}finally{this.orderState.creatingOrder=!1}},async navigateToOrder(r){await this.$router.push({name:"show-shop-payment-methods",params:{order_id:r.id,alias:this.store.alias}})}}};function Pn(r,t,e,i,n,a){const d=f("Button");return s(),y(d,{size:"lg",class:"mb-20",type:"primary",buttonClass:"w-full",action:a.createOrder},{default:V(()=>t[0]||(t[0]=[u("span",null,"Place order",-1)])),_:1,__:[0]},8,["action"])}const Mn=A(Dn,[["render",Pn]]);function Vt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var we=Vt();function Ua(r){we=r}var Ge={exec:()=>null};function M(r,t=""){let e=typeof r=="string"?r:r.source,i={replace:(n,a)=>{let d=typeof a=="string"?a:a.source;return d=d.replace(J.caret,"$1"),e=e.replace(n,d),i},getRegex:()=>new RegExp(e,t)};return i}var J={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},On=/^(?:[ \t]*(?:\n|$))+/,In=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Fn=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Xe=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Bn=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ht=/(?:[*+-]|\d{1,9}[.)])/,qa=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Va=M(qa).replace(/bull/g,Ht).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Nn=M(qa).replace(/bull/g,Ht).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Wt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,zn=/^[^\n]+/,Gt=/(?!\s*\])(?:\\.|[^\[\]\\])+/,jn=M(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Gt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Un=M(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ht).getRegex(),ut="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Zt=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,qn=M("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Zt).replace("tag",ut).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ha=M(Wt).replace("hr",Xe).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ut).getRegex(),Vn=M(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ha).getRegex(),Xt={blockquote:Vn,code:In,def:jn,fences:Fn,heading:Bn,hr:Xe,html:qn,lheading:Va,list:Un,newline:On,paragraph:Ha,table:Ge,text:zn},wa=M("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Xe).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ut).getRegex(),Hn={...Xt,lheading:Nn,table:wa,paragraph:M(Wt).replace("hr",Xe).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",wa).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ut).getRegex()},Wn={...Xt,html:M(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Zt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ge,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:M(Wt).replace("hr",Xe).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Va).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Gn=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Zn=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Wa=/^( {2,}|\\)\n(?!\s*$)/,Xn=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,mt=/[\p{P}\p{S}]/u,Yt=/[\s\p{P}\p{S}]/u,Ga=/[^\s\p{P}\p{S}]/u,Yn=M(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Yt).getRegex(),Za=/(?!~)[\p{P}\p{S}]/u,Qn=/(?!~)[\s\p{P}\p{S}]/u,Kn=/(?:[^\s\p{P}\p{S}]|~)/u,Jn=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,Xa=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,$n=M(Xa,"u").replace(/punct/g,mt).getRegex(),ei=M(Xa,"u").replace(/punct/g,Za).getRegex(),Ya="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",ti=M(Ya,"gu").replace(/notPunctSpace/g,Ga).replace(/punctSpace/g,Yt).replace(/punct/g,mt).getRegex(),ai=M(Ya,"gu").replace(/notPunctSpace/g,Kn).replace(/punctSpace/g,Qn).replace(/punct/g,Za).getRegex(),ri=M("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Ga).replace(/punctSpace/g,Yt).replace(/punct/g,mt).getRegex(),ni=M(/\\(punct)/,"gu").replace(/punct/g,mt).getRegex(),ii=M(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),si=M(Zt).replace("(?:-->|$)","-->").getRegex(),di=M("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",si).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ot=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,oi=M(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ot).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Qa=M(/^!?\[(label)\]\[(ref)\]/).replace("label",ot).replace("ref",Gt).getRegex(),Ka=M(/^!?\[(ref)\](?:\[\])?/).replace("ref",Gt).getRegex(),li=M("reflink|nolink(?!\\()","g").replace("reflink",Qa).replace("nolink",Ka).getRegex(),Qt={_backpedal:Ge,anyPunctuation:ni,autolink:ii,blockSkip:Jn,br:Wa,code:Zn,del:Ge,emStrongLDelim:$n,emStrongRDelimAst:ti,emStrongRDelimUnd:ri,escape:Gn,link:oi,nolink:Ka,punctuation:Yn,reflink:Qa,reflinkSearch:li,tag:di,text:Xn,url:Ge},ci={...Qt,link:M(/^!?\[(label)\]\((.*?)\)/).replace("label",ot).getRegex(),reflink:M(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ot).getRegex()},Ft={...Qt,emStrongRDelimAst:ai,emStrongLDelim:ei,url:M(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},gi={...Ft,br:M(Wa).replace("{2,}","*").getRegex(),text:M(Ft.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},at={normal:Xt,gfm:Hn,pedantic:Wn},ze={normal:Qt,gfm:Ft,breaks:gi,pedantic:ci},ui={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Sa=r=>ui[r];function se(r,t){if(t){if(J.escapeTest.test(r))return r.replace(J.escapeReplace,Sa)}else if(J.escapeTestNoEncode.test(r))return r.replace(J.escapeReplaceNoEncode,Sa);return r}function va(r){try{r=encodeURI(r).replace(J.percentDecode,"%")}catch{return null}return r}function Ta(r,t){var a;let e=r.replace(J.findPipe,(d,o,h)=>{let c=!1,m=o;for(;--m>=0&&h[m]==="\\";)c=!c;return c?"|":" |"}),i=e.split(J.splitPipe),n=0;if(i[0].trim()||i.shift(),i.length>0&&!((a=i.at(-1))!=null&&a.trim())&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(J.slashPipe,"|");return i}function je(r,t,e){let i=r.length;if(i===0)return"";let n=0;for(;n<i&&r.charAt(i-n-1)===t;)n++;return r.slice(0,i-n)}function mi(r,t){if(r.indexOf(t[1])===-1)return-1;let e=0;for(let i=0;i<r.length;i++)if(r[i]==="\\")i++;else if(r[i]===t[0])e++;else if(r[i]===t[1]&&(e--,e<0))return i;return e>0?-2:-1}function Ra(r,t,e,i,n){let a=t.href,d=t.title||null,o=r[1].replace(n.other.outputLinkReplace,"$1");i.state.inLink=!0;let h={type:r[0].charAt(0)==="!"?"image":"link",raw:e,href:a,title:d,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,h}function hi(r,t,e){let i=r.match(e.other.indentCodeCompensation);if(i===null)return t;let n=i[1];return t.split(`
`).map(a=>{let d=a.match(e.other.beginningSpace);if(d===null)return a;let[o]=d;return o.length>=n.length?a.slice(n.length):a}).join(`
`)}var lt=class{constructor(r){O(this,"options");O(this,"rules");O(this,"lexer");this.options=r||we}space(r){let t=this.rules.block.newline.exec(r);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(r){let t=this.rules.block.code.exec(r);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:je(e,`
`)}}}fences(r){let t=this.rules.block.fences.exec(r);if(t){let e=t[0],i=hi(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(r){let t=this.rules.block.heading.exec(r);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let i=je(e,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(e=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(r){let t=this.rules.block.hr.exec(r);if(t)return{type:"hr",raw:je(t[0],`
`)}}blockquote(r){let t=this.rules.block.blockquote.exec(r);if(t){let e=je(t[0],`
`).split(`
`),i="",n="",a=[];for(;e.length>0;){let d=!1,o=[],h;for(h=0;h<e.length;h++)if(this.rules.other.blockquoteStart.test(e[h]))o.push(e[h]),d=!0;else if(!d)o.push(e[h]);else break;e=e.slice(h);let c=o.join(`
`),m=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,n=n?`${n}
${m}`:m;let x=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(m,a,!0),this.lexer.state.top=x,e.length===0)break;let C=a.at(-1);if((C==null?void 0:C.type)==="code")break;if((C==null?void 0:C.type)==="blockquote"){let D=C,v=D.raw+`
`+e.join(`
`),F=this.blockquote(v);a[a.length-1]=F,i=i.substring(0,i.length-D.raw.length)+F.raw,n=n.substring(0,n.length-D.text.length)+F.text;break}else if((C==null?void 0:C.type)==="list"){let D=C,v=D.raw+`
`+e.join(`
`),F=this.list(v);a[a.length-1]=F,i=i.substring(0,i.length-C.raw.length)+F.raw,n=n.substring(0,n.length-D.raw.length)+F.raw,e=v.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:a,text:n}}}list(r){let t=this.rules.block.list.exec(r);if(t){let e=t[1].trim(),i=e.length>1,n={type:"list",raw:"",ordered:i,start:i?+e.slice(0,-1):"",loose:!1,items:[]};e=i?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=i?e:"[*+-]");let a=this.rules.other.listItemRegex(e),d=!1;for(;r;){let h=!1,c="",m="";if(!(t=a.exec(r))||this.rules.block.hr.test(r))break;c=t[0],r=r.substring(c.length);let x=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,be=>" ".repeat(3*be.length)),C=r.split(`
`,1)[0],D=!x.trim(),v=0;if(this.options.pedantic?(v=2,m=x.trimStart()):D?v=t[1].length+1:(v=t[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,m=x.slice(v),v+=t[1].length),D&&this.rules.other.blankLine.test(C)&&(c+=C+`
`,r=r.substring(C.length+1),h=!0),!h){let be=this.rules.other.nextBulletRegex(v),Se=this.rules.other.hrRegex(v),le=this.rules.other.fencesBeginRegex(v),U=this.rules.other.headingBeginRegex(v),ce=this.rules.other.htmlBeginRegex(v);for(;r;){let ge=r.split(`
`,1)[0],ue;if(C=ge,this.options.pedantic?(C=C.replace(this.rules.other.listReplaceNesting,"  "),ue=C):ue=C.replace(this.rules.other.tabCharGlobal,"    "),le.test(C)||U.test(C)||ce.test(C)||be.test(C)||Se.test(C))break;if(ue.search(this.rules.other.nonSpaceChar)>=v||!C.trim())m+=`
`+ue.slice(v);else{if(D||x.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||le.test(x)||U.test(x)||Se.test(x))break;m+=`
`+C}!D&&!C.trim()&&(D=!0),c+=ge+`
`,r=r.substring(ge.length+1),x=ue.slice(v)}}n.loose||(d?n.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(d=!0));let F=null,X;this.options.gfm&&(F=this.rules.other.listIsTask.exec(m),F&&(X=F[0]!=="[ ] ",m=m.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:c,task:!!F,checked:X,loose:!1,text:m,tokens:[]}),n.raw+=c}let o=n.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let h=0;h<n.items.length;h++)if(this.lexer.state.top=!1,n.items[h].tokens=this.lexer.blockTokens(n.items[h].text,[]),!n.loose){let c=n.items[h].tokens.filter(x=>x.type==="space"),m=c.length>0&&c.some(x=>this.rules.other.anyLine.test(x.raw));n.loose=m}if(n.loose)for(let h=0;h<n.items.length;h++)n.items[h].loose=!0;return n}}html(r){let t=this.rules.block.html.exec(r);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(r){let t=this.rules.block.def.exec(r);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:n}}}table(r){var d;let t=this.rules.block.table.exec(r);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=Ta(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=(d=t[3])!=null&&d.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===i.length){for(let o of i)this.rules.other.tableAlignRight.test(o)?a.align.push("right"):this.rules.other.tableAlignCenter.test(o)?a.align.push("center"):this.rules.other.tableAlignLeft.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<e.length;o++)a.header.push({text:e[o],tokens:this.lexer.inline(e[o]),header:!0,align:a.align[o]});for(let o of n)a.rows.push(Ta(o,a.header.length).map((h,c)=>({text:h,tokens:this.lexer.inline(h),header:!1,align:a.align[c]})));return a}}lheading(r){let t=this.rules.block.lheading.exec(r);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(r){let t=this.rules.block.paragraph.exec(r);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(r){let t=this.rules.block.text.exec(r);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(r){let t=this.rules.inline.escape.exec(r);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(r){let t=this.rules.inline.tag.exec(r);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(r){let t=this.rules.inline.link.exec(r);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let a=je(e.slice(0,-1),"\\");if((e.length-a.length)%2===0)return}else{let a=mi(t[2],"()");if(a===-2)return;if(a>-1){let d=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,d).trim(),t[3]=""}}let i=t[2],n="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(i);a&&(i=a[1],n=a[3])}else n=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?i=i.slice(1):i=i.slice(1,-1)),Ra(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(r,t){let e;if((e=this.rules.inline.reflink.exec(r))||(e=this.rules.inline.nolink.exec(r))){let i=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=t[i.toLowerCase()];if(!n){let a=e[0].charAt(0);return{type:"text",raw:a,text:a}}return Ra(e,n,e[0],this.lexer,this.rules)}}emStrong(r,t,e=""){let i=this.rules.inline.emStrongLDelim.exec(r);if(!(!i||i[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!e||this.rules.inline.punctuation.exec(e))){let n=[...i[0]].length-1,a,d,o=n,h=0,c=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*r.length+n);(i=c.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(d=[...a].length,i[3]||i[4]){o+=d;continue}else if((i[5]||i[6])&&n%3&&!((n+d)%3)){h+=d;continue}if(o-=d,o>0)continue;d=Math.min(d,d+o+h);let m=[...i[0]][0].length,x=r.slice(0,n+i.index+m+d);if(Math.min(n,d)%2){let D=x.slice(1,-1);return{type:"em",raw:x,text:D,tokens:this.lexer.inlineTokens(D)}}let C=x.slice(2,-2);return{type:"strong",raw:x,text:C,tokens:this.lexer.inlineTokens(C)}}}}codespan(r){let t=this.rules.inline.code.exec(r);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(e),n=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return i&&n&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(r){let t=this.rules.inline.br.exec(r);if(t)return{type:"br",raw:t[0]}}del(r){let t=this.rules.inline.del.exec(r);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(r){let t=this.rules.inline.autolink.exec(r);if(t){let e,i;return t[2]==="@"?(e=t[1],i="mailto:"+e):(e=t[1],i=e),{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(r){var e;let t;if(t=this.rules.inline.url.exec(r)){let i,n;if(t[2]==="@")i=t[0],n="mailto:"+i;else{let a;do a=t[0],t[0]=((e=this.rules.inline._backpedal.exec(t[0]))==null?void 0:e[0])??"";while(a!==t[0]);i=t[0],t[1]==="www."?n="http://"+t[0]:n=t[0]}return{type:"link",raw:t[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(r){let t=this.rules.inline.text.exec(r);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},pe=class Bt{constructor(t){O(this,"tokens");O(this,"options");O(this,"state");O(this,"tokenizer");O(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||we,this.options.tokenizer=this.options.tokenizer||new lt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:J,block:at.normal,inline:ze.normal};this.options.pedantic?(e.block=at.pedantic,e.inline=ze.pedantic):this.options.gfm&&(e.block=at.gfm,this.options.breaks?e.inline=ze.breaks:e.inline=ze.gfm),this.tokenizer.rules=e}static get rules(){return{block:at,inline:ze}}static lex(t,e){return new Bt(e).lex(t)}static lexInline(t,e){return new Bt(e).inlineTokens(t)}lex(t){t=t.replace(J.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],i=!1){var n,a,d;for(this.options.pedantic&&(t=t.replace(J.tabCharGlobal,"    ").replace(J.spaceLine,""));t;){let o;if((a=(n=this.options.extensions)==null?void 0:n.block)!=null&&a.some(c=>(o=c.call({lexer:this},t,e))?(t=t.substring(o.raw.length),e.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let c=e.at(-1);o.raw.length===1&&c!==void 0?c.raw+=`
`:e.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let c=e.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+o.raw,c.text+=`
`+o.text,this.inlineQueue.at(-1).src=c.text):e.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let c=e.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+o.raw,c.text+=`
`+o.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},e.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),e.push(o);continue}let h=t;if((d=this.options.extensions)!=null&&d.startBlock){let c=1/0,m=t.slice(1),x;this.options.extensions.startBlock.forEach(C=>{x=C.call({lexer:this},m),typeof x=="number"&&x>=0&&(c=Math.min(c,x))}),c<1/0&&c>=0&&(h=t.substring(0,c+1))}if(this.state.top&&(o=this.tokenizer.paragraph(h))){let c=e.at(-1);i&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):e.push(o),i=h.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let c=e.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):e.push(o);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){var o,h,c;let i=t,n=null;if(this.tokens.links){let m=Object.keys(this.tokens.links);if(m.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)m.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,n.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,d="";for(;t;){a||(d=""),a=!1;let m;if((h=(o=this.options.extensions)==null?void 0:o.inline)!=null&&h.some(C=>(m=C.call({lexer:this},t,e))?(t=t.substring(m.raw.length),e.push(m),!0):!1))continue;if(m=this.tokenizer.escape(t)){t=t.substring(m.raw.length),e.push(m);continue}if(m=this.tokenizer.tag(t)){t=t.substring(m.raw.length),e.push(m);continue}if(m=this.tokenizer.link(t)){t=t.substring(m.raw.length),e.push(m);continue}if(m=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(m.raw.length);let C=e.at(-1);m.type==="text"&&(C==null?void 0:C.type)==="text"?(C.raw+=m.raw,C.text+=m.text):e.push(m);continue}if(m=this.tokenizer.emStrong(t,i,d)){t=t.substring(m.raw.length),e.push(m);continue}if(m=this.tokenizer.codespan(t)){t=t.substring(m.raw.length),e.push(m);continue}if(m=this.tokenizer.br(t)){t=t.substring(m.raw.length),e.push(m);continue}if(m=this.tokenizer.del(t)){t=t.substring(m.raw.length),e.push(m);continue}if(m=this.tokenizer.autolink(t)){t=t.substring(m.raw.length),e.push(m);continue}if(!this.state.inLink&&(m=this.tokenizer.url(t))){t=t.substring(m.raw.length),e.push(m);continue}let x=t;if((c=this.options.extensions)!=null&&c.startInline){let C=1/0,D=t.slice(1),v;this.options.extensions.startInline.forEach(F=>{v=F.call({lexer:this},D),typeof v=="number"&&v>=0&&(C=Math.min(C,v))}),C<1/0&&C>=0&&(x=t.substring(0,C+1))}if(m=this.tokenizer.inlineText(x)){t=t.substring(m.raw.length),m.raw.slice(-1)!=="_"&&(d=m.raw.slice(-1)),a=!0;let C=e.at(-1);(C==null?void 0:C.type)==="text"?(C.raw+=m.raw,C.text+=m.text):e.push(m);continue}if(t){let C="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(C);break}else throw new Error(C)}}return e}},ct=class{constructor(r){O(this,"options");O(this,"parser");this.options=r||we}space(r){return""}code({text:r,lang:t,escaped:e}){var a;let i=(a=(t||"").match(J.notSpaceStart))==null?void 0:a[0],n=r.replace(J.endingNewline,"")+`
`;return i?'<pre><code class="language-'+se(i)+'">'+(e?n:se(n,!0))+`</code></pre>
`:"<pre><code>"+(e?n:se(n,!0))+`</code></pre>
`}blockquote({tokens:r}){return`<blockquote>
${this.parser.parse(r)}</blockquote>
`}html({text:r}){return r}def(r){return""}heading({tokens:r,depth:t}){return`<h${t}>${this.parser.parseInline(r)}</h${t}>
`}hr(r){return`<hr>
`}list(r){let t=r.ordered,e=r.start,i="";for(let d=0;d<r.items.length;d++){let o=r.items[d];i+=this.listitem(o)}let n=t?"ol":"ul",a=t&&e!==1?' start="'+e+'"':"";return"<"+n+a+`>
`+i+"</"+n+`>
`}listitem(r){var e;let t="";if(r.task){let i=this.checkbox({checked:!!r.checked});r.loose?((e=r.tokens[0])==null?void 0:e.type)==="paragraph"?(r.tokens[0].text=i+" "+r.tokens[0].text,r.tokens[0].tokens&&r.tokens[0].tokens.length>0&&r.tokens[0].tokens[0].type==="text"&&(r.tokens[0].tokens[0].text=i+" "+se(r.tokens[0].tokens[0].text),r.tokens[0].tokens[0].escaped=!0)):r.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(r.tokens,!!r.loose),`<li>${t}</li>
`}checkbox({checked:r}){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>
`}table(r){let t="",e="";for(let n=0;n<r.header.length;n++)e+=this.tablecell(r.header[n]);t+=this.tablerow({text:e});let i="";for(let n=0;n<r.rows.length;n++){let a=r.rows[n];e="";for(let d=0;d<a.length;d++)e+=this.tablecell(a[d]);i+=this.tablerow({text:e})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:r}){return`<tr>
${r}</tr>
`}tablecell(r){let t=this.parser.parseInline(r.tokens),e=r.header?"th":"td";return(r.align?`<${e} align="${r.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:r}){return`<strong>${this.parser.parseInline(r)}</strong>`}em({tokens:r}){return`<em>${this.parser.parseInline(r)}</em>`}codespan({text:r}){return`<code>${se(r,!0)}</code>`}br(r){return"<br>"}del({tokens:r}){return`<del>${this.parser.parseInline(r)}</del>`}link({href:r,title:t,tokens:e}){let i=this.parser.parseInline(e),n=va(r);if(n===null)return i;r=n;let a='<a href="'+r+'"';return t&&(a+=' title="'+se(t)+'"'),a+=">"+i+"</a>",a}image({href:r,title:t,text:e,tokens:i}){i&&(e=this.parser.parseInline(i,this.parser.textRenderer));let n=va(r);if(n===null)return se(e);r=n;let a=`<img src="${r}" alt="${e}"`;return t&&(a+=` title="${se(t)}"`),a+=">",a}text(r){return"tokens"in r&&r.tokens?this.parser.parseInline(r.tokens):"escaped"in r&&r.escaped?r.text:se(r.text)}},Kt=class{strong({text:r}){return r}em({text:r}){return r}codespan({text:r}){return r}del({text:r}){return r}html({text:r}){return r}text({text:r}){return r}link({text:r}){return""+r}image({text:r}){return""+r}br(){return""}},ye=class Nt{constructor(t){O(this,"options");O(this,"renderer");O(this,"textRenderer");this.options=t||we,this.options.renderer=this.options.renderer||new ct,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Kt}static parse(t,e){return new Nt(e).parse(t)}static parseInline(t,e){return new Nt(e).parseInline(t)}parse(t,e=!0){var n,a;let i="";for(let d=0;d<t.length;d++){let o=t[d];if((a=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&a[o.type]){let c=o,m=this.options.extensions.renderers[c.type].call({parser:this},c);if(m!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){i+=m||"";continue}}let h=o;switch(h.type){case"space":{i+=this.renderer.space(h);continue}case"hr":{i+=this.renderer.hr(h);continue}case"heading":{i+=this.renderer.heading(h);continue}case"code":{i+=this.renderer.code(h);continue}case"table":{i+=this.renderer.table(h);continue}case"blockquote":{i+=this.renderer.blockquote(h);continue}case"list":{i+=this.renderer.list(h);continue}case"html":{i+=this.renderer.html(h);continue}case"def":{i+=this.renderer.def(h);continue}case"paragraph":{i+=this.renderer.paragraph(h);continue}case"text":{let c=h,m=this.renderer.text(c);for(;d+1<t.length&&t[d+1].type==="text";)c=t[++d],m+=`
`+this.renderer.text(c);e?i+=this.renderer.paragraph({type:"paragraph",raw:m,text:m,tokens:[{type:"text",raw:m,text:m,escaped:!0}]}):i+=m;continue}default:{let c='Token with "'+h.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return i}parseInline(t,e=this.renderer){var n,a;let i="";for(let d=0;d<t.length;d++){let o=t[d];if((a=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&a[o.type]){let c=this.options.extensions.renderers[o.type].call({parser:this},o);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){i+=c||"";continue}}let h=o;switch(h.type){case"escape":{i+=e.text(h);break}case"html":{i+=e.html(h);break}case"link":{i+=e.link(h);break}case"image":{i+=e.image(h);break}case"strong":{i+=e.strong(h);break}case"em":{i+=e.em(h);break}case"codespan":{i+=e.codespan(h);break}case"br":{i+=e.br(h);break}case"del":{i+=e.del(h);break}case"text":{i+=e.text(h);break}default:{let c='Token with "'+h.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return i}},It,it=(It=class{constructor(r){O(this,"options");O(this,"block");this.options=r||we}preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}provideLexer(){return this.block?pe.lex:pe.lexInline}provideParser(){return this.block?ye.parse:ye.parseInline}},O(It,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),It),_i=class{constructor(...r){O(this,"defaults",Vt());O(this,"options",this.setOptions);O(this,"parse",this.parseMarkdown(!0));O(this,"parseInline",this.parseMarkdown(!1));O(this,"Parser",ye);O(this,"Renderer",ct);O(this,"TextRenderer",Kt);O(this,"Lexer",pe);O(this,"Tokenizer",lt);O(this,"Hooks",it);this.use(...r)}walkTokens(r,t){var i,n;let e=[];for(let a of r)switch(e=e.concat(t.call(this,a)),a.type){case"table":{let d=a;for(let o of d.header)e=e.concat(this.walkTokens(o.tokens,t));for(let o of d.rows)for(let h of o)e=e.concat(this.walkTokens(h.tokens,t));break}case"list":{let d=a;e=e.concat(this.walkTokens(d.items,t));break}default:{let d=a;(n=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&n[d.type]?this.defaults.extensions.childTokens[d.type].forEach(o=>{let h=d[o].flat(1/0);e=e.concat(this.walkTokens(h,t))}):d.tokens&&(e=e.concat(this.walkTokens(d.tokens,t)))}}return e}use(...r){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(e=>{let i={...e};if(i.async=this.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let a=t.renderers[n.name];a?t.renderers[n.name]=function(...d){let o=n.renderer.apply(this,d);return o===!1&&(o=a.apply(this,d)),o}:t.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=t[n.level];a?a.unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),i.extensions=t),e.renderer){let n=this.defaults.renderer||new ct(this.defaults);for(let a in e.renderer){if(!(a in n))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let d=a,o=e.renderer[d],h=n[d];n[d]=(...c)=>{let m=o.apply(n,c);return m===!1&&(m=h.apply(n,c)),m||""}}i.renderer=n}if(e.tokenizer){let n=this.defaults.tokenizer||new lt(this.defaults);for(let a in e.tokenizer){if(!(a in n))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let d=a,o=e.tokenizer[d],h=n[d];n[d]=(...c)=>{let m=o.apply(n,c);return m===!1&&(m=h.apply(n,c)),m}}i.tokenizer=n}if(e.hooks){let n=this.defaults.hooks||new it;for(let a in e.hooks){if(!(a in n))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let d=a,o=e.hooks[d],h=n[d];it.passThroughHooks.has(a)?n[d]=c=>{if(this.defaults.async)return Promise.resolve(o.call(n,c)).then(x=>h.call(n,x));let m=o.call(n,c);return h.call(n,m)}:n[d]=(...c)=>{let m=o.apply(n,c);return m===!1&&(m=h.apply(n,c)),m}}i.hooks=n}if(e.walkTokens){let n=this.defaults.walkTokens,a=e.walkTokens;i.walkTokens=function(d){let o=[];return o.push(a.call(this,d)),n&&(o=o.concat(n.call(this,d))),o}}this.defaults={...this.defaults,...i}}),this}setOptions(r){return this.defaults={...this.defaults,...r},this}lexer(r,t){return pe.lex(r,t??this.defaults)}parser(r,t){return ye.parse(r,t??this.defaults)}parseMarkdown(r){return(t,e)=>{let i={...e},n={...this.defaults,...i},a=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=r);let d=n.hooks?n.hooks.provideLexer():r?pe.lex:pe.lexInline,o=n.hooks?n.hooks.provideParser():r?ye.parse:ye.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(t):t).then(h=>d(h,n)).then(h=>n.hooks?n.hooks.processAllTokens(h):h).then(h=>n.walkTokens?Promise.all(this.walkTokens(h,n.walkTokens)).then(()=>h):h).then(h=>o(h,n)).then(h=>n.hooks?n.hooks.postprocess(h):h).catch(a);try{n.hooks&&(t=n.hooks.preprocess(t));let h=d(t,n);n.hooks&&(h=n.hooks.processAllTokens(h)),n.walkTokens&&this.walkTokens(h,n.walkTokens);let c=o(h,n);return n.hooks&&(c=n.hooks.postprocess(c)),c}catch(h){return a(h)}}}onError(r,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,r){let i="<p>An error occurred:</p><pre>"+se(e.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(e);throw e}}},ke=new _i;function P(r,t){return ke.parse(r,t)}P.options=P.setOptions=function(r){return ke.setOptions(r),P.defaults=ke.defaults,Ua(P.defaults),P};P.getDefaults=Vt;P.defaults=we;P.use=function(...r){return ke.use(...r),P.defaults=ke.defaults,Ua(P.defaults),P};P.walkTokens=function(r,t){return ke.walkTokens(r,t)};P.parseInline=ke.parseInline;P.Parser=ye;P.parser=ye.parse;P.Renderer=ct;P.TextRenderer=Kt;P.Lexer=pe;P.lexer=pe.lex;P.Tokenizer=lt;P.Hooks=it;P.parse=P;P.options;P.setOptions;P.use;P.walkTokens;P.parseInline;ye.parse;pe.lex;/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Ja,setPrototypeOf:La,isFrozen:fi,getPrototypeOf:pi,getOwnPropertyDescriptor:yi}=Object;let{freeze:$,seal:ae,create:$a}=Object,{apply:zt,construct:jt}=typeof Reflect<"u"&&Reflect;$||($=function(t){return t});ae||(ae=function(t){return t});zt||(zt=function(t,e,i){return t.apply(e,i)});jt||(jt=function(t,e){return new t(...e)});const rt=ee(Array.prototype.forEach),bi=ee(Array.prototype.lastIndexOf),Aa=ee(Array.prototype.pop),Ue=ee(Array.prototype.push),xi=ee(Array.prototype.splice),st=ee(String.prototype.toLowerCase),Et=ee(String.prototype.toString),Ea=ee(String.prototype.match),qe=ee(String.prototype.replace),Ci=ee(String.prototype.indexOf),ki=ee(String.prototype.trim),re=ee(Object.prototype.hasOwnProperty),K=ee(RegExp.prototype.test),Ve=wi(TypeError);function ee(r){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return zt(r,t,i)}}function wi(r){return function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return jt(r,e)}}function E(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:st;La&&La(r,null);let i=t.length;for(;i--;){let n=t[i];if(typeof n=="string"){const a=e(n);a!==n&&(fi(t)||(t[i]=a),n=a)}r[n]=!0}return r}function Si(r){for(let t=0;t<r.length;t++)re(r,t)||(r[t]=null);return r}function fe(r){const t=$a(null);for(const[e,i]of Ja(r))re(r,e)&&(Array.isArray(i)?t[e]=Si(i):i&&typeof i=="object"&&i.constructor===Object?t[e]=fe(i):t[e]=i);return t}function He(r,t){for(;r!==null;){const i=yi(r,t);if(i){if(i.get)return ee(i.get);if(typeof i.value=="function")return ee(i.value)}r=pi(r)}function e(){return null}return e}const Da=$(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Dt=$(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Pt=$(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),vi=$(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Mt=$(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ti=$(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Pa=$(["#text"]),Ma=$(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ot=$(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Oa=$(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),nt=$(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ri=ae(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Li=ae(/<%[\w\W]*|[\w\W]*%>/gm),Ai=ae(/\$\{[\w\W]*/gm),Ei=ae(/^data-[\-\w.\u00B7-\uFFFF]+$/),Di=ae(/^aria-[\-\w]+$/),er=ae(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Pi=ae(/^(?:\w+script|data):/i),Mi=ae(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tr=ae(/^html$/i),Oi=ae(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ia=Object.freeze({__proto__:null,ARIA_ATTR:Di,ATTR_WHITESPACE:Mi,CUSTOM_ELEMENT:Oi,DATA_ATTR:Ei,DOCTYPE_NAME:tr,ERB_EXPR:Li,IS_ALLOWED_URI:er,IS_SCRIPT_OR_DATA:Pi,MUSTACHE_EXPR:Ri,TMPLIT_EXPR:Ai});const We={element:1,text:3,progressingInstruction:7,comment:8,document:9},Ii=function(){return typeof window>"u"?null:window},Fi=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";e&&e.hasAttribute(n)&&(i=e.getAttribute(n));const a="dompurify"+(i?"#"+i:"");try{return t.createPolicy(a,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Fa=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ar(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ii();const t=S=>ar(S);if(t.version="3.2.6",t.removed=[],!r||!r.document||r.document.nodeType!==We.document||!r.Element)return t.isSupported=!1,t;let{document:e}=r;const i=e,n=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:d,Node:o,Element:h,NodeFilter:c,NamedNodeMap:m=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:x,DOMParser:C,trustedTypes:D}=r,v=h.prototype,F=He(v,"cloneNode"),X=He(v,"remove"),be=He(v,"nextSibling"),Se=He(v,"childNodes"),le=He(v,"parentNode");if(typeof d=="function"){const S=e.createElement("template");S.content&&S.content.ownerDocument&&(e=S.content.ownerDocument)}let U,ce="";const{implementation:ge,createNodeIterator:ue,createDocumentFragment:_t,getElementsByTagName:ft}=e,{importNode:pt}=i;let G=Fa();t.isSupported=typeof Ja=="function"&&typeof le=="function"&&ge&&ge.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Me,ERB_EXPR:Oe,TMPLIT_EXPR:T,DATA_ATTR:yt,ARIA_ATTR:nr,IS_SCRIPT_OR_DATA:ir,ATTR_WHITESPACE:Jt,CUSTOM_ELEMENT:sr}=Ia;let{IS_ALLOWED_URI:$t}=Ia,H=null;const ea=E({},[...Da,...Dt,...Pt,...Mt,...Pa]);let Z=null;const ta=E({},[...Ma,...Ot,...Oa,...nt]);let z=Object.seal($a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ie=null,bt=null,aa=!0,xt=!0,ra=!1,na=!0,ve=!1,Ye=!0,Ce=!1,Ct=!1,kt=!1,Te=!1,Qe=!1,Ke=!1,ia=!0,sa=!1;const dr="user-content-";let wt=!0,Fe=!1,Re={},Le=null;const da=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let oa=null;const la=E({},["audio","video","img","source","image","track"]);let St=null;const ca=E({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",$e="http://www.w3.org/2000/svg",me="http://www.w3.org/1999/xhtml";let Ae=me,vt=!1,Tt=null;const or=E({},[Je,$e,me],Et);let et=E({},["mi","mo","mn","ms","mtext"]),tt=E({},["annotation-xml"]);const lr=E({},["title","style","font","a","script"]);let Be=null;const cr=["application/xhtml+xml","text/html"],gr="text/html";let W=null,Ee=null;const ur=e.createElement("form"),ga=function(g){return g instanceof RegExp||g instanceof Function},Rt=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ee&&Ee===g)){if((!g||typeof g!="object")&&(g={}),g=fe(g),Be=cr.indexOf(g.PARSER_MEDIA_TYPE)===-1?gr:g.PARSER_MEDIA_TYPE,W=Be==="application/xhtml+xml"?Et:st,H=re(g,"ALLOWED_TAGS")?E({},g.ALLOWED_TAGS,W):ea,Z=re(g,"ALLOWED_ATTR")?E({},g.ALLOWED_ATTR,W):ta,Tt=re(g,"ALLOWED_NAMESPACES")?E({},g.ALLOWED_NAMESPACES,Et):or,St=re(g,"ADD_URI_SAFE_ATTR")?E(fe(ca),g.ADD_URI_SAFE_ATTR,W):ca,oa=re(g,"ADD_DATA_URI_TAGS")?E(fe(la),g.ADD_DATA_URI_TAGS,W):la,Le=re(g,"FORBID_CONTENTS")?E({},g.FORBID_CONTENTS,W):da,Ie=re(g,"FORBID_TAGS")?E({},g.FORBID_TAGS,W):fe({}),bt=re(g,"FORBID_ATTR")?E({},g.FORBID_ATTR,W):fe({}),Re=re(g,"USE_PROFILES")?g.USE_PROFILES:!1,aa=g.ALLOW_ARIA_ATTR!==!1,xt=g.ALLOW_DATA_ATTR!==!1,ra=g.ALLOW_UNKNOWN_PROTOCOLS||!1,na=g.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ve=g.SAFE_FOR_TEMPLATES||!1,Ye=g.SAFE_FOR_XML!==!1,Ce=g.WHOLE_DOCUMENT||!1,Te=g.RETURN_DOM||!1,Qe=g.RETURN_DOM_FRAGMENT||!1,Ke=g.RETURN_TRUSTED_TYPE||!1,kt=g.FORCE_BODY||!1,ia=g.SANITIZE_DOM!==!1,sa=g.SANITIZE_NAMED_PROPS||!1,wt=g.KEEP_CONTENT!==!1,Fe=g.IN_PLACE||!1,$t=g.ALLOWED_URI_REGEXP||er,Ae=g.NAMESPACE||me,et=g.MATHML_TEXT_INTEGRATION_POINTS||et,tt=g.HTML_INTEGRATION_POINTS||tt,z=g.CUSTOM_ELEMENT_HANDLING||{},g.CUSTOM_ELEMENT_HANDLING&&ga(g.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=g.CUSTOM_ELEMENT_HANDLING.tagNameCheck),g.CUSTOM_ELEMENT_HANDLING&&ga(g.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=g.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),g.CUSTOM_ELEMENT_HANDLING&&typeof g.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(z.allowCustomizedBuiltInElements=g.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ve&&(xt=!1),Qe&&(Te=!0),Re&&(H=E({},Pa),Z=[],Re.html===!0&&(E(H,Da),E(Z,Ma)),Re.svg===!0&&(E(H,Dt),E(Z,Ot),E(Z,nt)),Re.svgFilters===!0&&(E(H,Pt),E(Z,Ot),E(Z,nt)),Re.mathMl===!0&&(E(H,Mt),E(Z,Oa),E(Z,nt))),g.ADD_TAGS&&(H===ea&&(H=fe(H)),E(H,g.ADD_TAGS,W)),g.ADD_ATTR&&(Z===ta&&(Z=fe(Z)),E(Z,g.ADD_ATTR,W)),g.ADD_URI_SAFE_ATTR&&E(St,g.ADD_URI_SAFE_ATTR,W),g.FORBID_CONTENTS&&(Le===da&&(Le=fe(Le)),E(Le,g.FORBID_CONTENTS,W)),wt&&(H["#text"]=!0),Ce&&E(H,["html","head","body"]),H.table&&(E(H,["tbody"]),delete Ie.tbody),g.TRUSTED_TYPES_POLICY){if(typeof g.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ve('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof g.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ve('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');U=g.TRUSTED_TYPES_POLICY,ce=U.createHTML("")}else U===void 0&&(U=Fi(D,n)),U!==null&&typeof ce=="string"&&(ce=U.createHTML(""));$&&$(g),Ee=g}},ua=E({},[...Dt,...Pt,...vi]),ma=E({},[...Mt,...Ti]),mr=function(g){let b=le(g);(!b||!b.tagName)&&(b={namespaceURI:Ae,tagName:"template"});const k=st(g.tagName),B=st(b.tagName);return Tt[g.namespaceURI]?g.namespaceURI===$e?b.namespaceURI===me?k==="svg":b.namespaceURI===Je?k==="svg"&&(B==="annotation-xml"||et[B]):!!ua[k]:g.namespaceURI===Je?b.namespaceURI===me?k==="math":b.namespaceURI===$e?k==="math"&&tt[B]:!!ma[k]:g.namespaceURI===me?b.namespaceURI===$e&&!tt[B]||b.namespaceURI===Je&&!et[B]?!1:!ma[k]&&(lr[k]||!ua[k]):!!(Be==="application/xhtml+xml"&&Tt[g.namespaceURI]):!1},ie=function(g){Ue(t.removed,{element:g});try{le(g).removeChild(g)}catch{X(g)}},De=function(g,b){try{Ue(t.removed,{attribute:b.getAttributeNode(g),from:b})}catch{Ue(t.removed,{attribute:null,from:b})}if(b.removeAttribute(g),g==="is")if(Te||Qe)try{ie(b)}catch{}else try{b.setAttribute(g,"")}catch{}},ha=function(g){let b=null,k=null;if(kt)g="<remove></remove>"+g;else{const q=Ea(g,/^[\r\n\t ]+/);k=q&&q[0]}Be==="application/xhtml+xml"&&Ae===me&&(g='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+g+"</body></html>");const B=U?U.createHTML(g):g;if(Ae===me)try{b=new C().parseFromString(B,Be)}catch{}if(!b||!b.documentElement){b=ge.createDocument(Ae,"template",null);try{b.documentElement.innerHTML=vt?ce:B}catch{}}const Y=b.body||b.documentElement;return g&&k&&Y.insertBefore(e.createTextNode(k),Y.childNodes[0]||null),Ae===me?ft.call(b,Ce?"html":"body")[0]:Ce?b.documentElement:Y},_a=function(g){return ue.call(g.ownerDocument||g,g,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Lt=function(g){return g instanceof x&&(typeof g.nodeName!="string"||typeof g.textContent!="string"||typeof g.removeChild!="function"||!(g.attributes instanceof m)||typeof g.removeAttribute!="function"||typeof g.setAttribute!="function"||typeof g.namespaceURI!="string"||typeof g.insertBefore!="function"||typeof g.hasChildNodes!="function")},fa=function(g){return typeof o=="function"&&g instanceof o};function he(S,g,b){rt(S,k=>{k.call(t,g,b,Ee)})}const pa=function(g){let b=null;if(he(G.beforeSanitizeElements,g,null),Lt(g))return ie(g),!0;const k=W(g.nodeName);if(he(G.uponSanitizeElement,g,{tagName:k,allowedTags:H}),Ye&&g.hasChildNodes()&&!fa(g.firstElementChild)&&K(/<[/\w!]/g,g.innerHTML)&&K(/<[/\w!]/g,g.textContent)||g.nodeType===We.progressingInstruction||Ye&&g.nodeType===We.comment&&K(/<[/\w]/g,g.data))return ie(g),!0;if(!H[k]||Ie[k]){if(!Ie[k]&&ba(k)&&(z.tagNameCheck instanceof RegExp&&K(z.tagNameCheck,k)||z.tagNameCheck instanceof Function&&z.tagNameCheck(k)))return!1;if(wt&&!Le[k]){const B=le(g)||g.parentNode,Y=Se(g)||g.childNodes;if(Y&&B){const q=Y.length;for(let te=q-1;te>=0;--te){const _e=F(Y[te],!0);_e.__removalCount=(g.__removalCount||0)+1,B.insertBefore(_e,be(g))}}}return ie(g),!0}return g instanceof h&&!mr(g)||(k==="noscript"||k==="noembed"||k==="noframes")&&K(/<\/no(script|embed|frames)/i,g.innerHTML)?(ie(g),!0):(ve&&g.nodeType===We.text&&(b=g.textContent,rt([Me,Oe,T],B=>{b=qe(b,B," ")}),g.textContent!==b&&(Ue(t.removed,{element:g.cloneNode()}),g.textContent=b)),he(G.afterSanitizeElements,g,null),!1)},ya=function(g,b,k){if(ia&&(b==="id"||b==="name")&&(k in e||k in ur))return!1;if(!(xt&&!bt[b]&&K(yt,b))){if(!(aa&&K(nr,b))){if(!Z[b]||bt[b]){if(!(ba(g)&&(z.tagNameCheck instanceof RegExp&&K(z.tagNameCheck,g)||z.tagNameCheck instanceof Function&&z.tagNameCheck(g))&&(z.attributeNameCheck instanceof RegExp&&K(z.attributeNameCheck,b)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(b))||b==="is"&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&K(z.tagNameCheck,k)||z.tagNameCheck instanceof Function&&z.tagNameCheck(k))))return!1}else if(!St[b]){if(!K($t,qe(k,Jt,""))){if(!((b==="src"||b==="xlink:href"||b==="href")&&g!=="script"&&Ci(k,"data:")===0&&oa[g])){if(!(ra&&!K(ir,qe(k,Jt,"")))){if(k)return!1}}}}}}return!0},ba=function(g){return g!=="annotation-xml"&&Ea(g,sr)},xa=function(g){he(G.beforeSanitizeAttributes,g,null);const{attributes:b}=g;if(!b||Lt(g))return;const k={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Z,forceKeepAttr:void 0};let B=b.length;for(;B--;){const Y=b[B],{name:q,namespaceURI:te,value:_e}=Y,Ne=W(q),At=_e;let Q=q==="value"?At:ki(At);if(k.attrName=Ne,k.attrValue=Q,k.keepAttr=!0,k.forceKeepAttr=void 0,he(G.uponSanitizeAttribute,g,k),Q=k.attrValue,sa&&(Ne==="id"||Ne==="name")&&(De(q,g),Q=dr+Q),Ye&&K(/((--!?|])>)|<\/(style|title)/i,Q)){De(q,g);continue}if(k.forceKeepAttr)continue;if(!k.keepAttr){De(q,g);continue}if(!na&&K(/\/>/i,Q)){De(q,g);continue}ve&&rt([Me,Oe,T],ka=>{Q=qe(Q,ka," ")});const Ca=W(g.nodeName);if(!ya(Ca,Ne,Q)){De(q,g);continue}if(U&&typeof D=="object"&&typeof D.getAttributeType=="function"&&!te)switch(D.getAttributeType(Ca,Ne)){case"TrustedHTML":{Q=U.createHTML(Q);break}case"TrustedScriptURL":{Q=U.createScriptURL(Q);break}}if(Q!==At)try{te?g.setAttributeNS(te,q,Q):g.setAttribute(q,Q),Lt(g)?ie(g):Aa(t.removed)}catch{De(q,g)}}he(G.afterSanitizeAttributes,g,null)},hr=function S(g){let b=null;const k=_a(g);for(he(G.beforeSanitizeShadowDOM,g,null);b=k.nextNode();)he(G.uponSanitizeShadowNode,b,null),pa(b),xa(b),b.content instanceof a&&S(b.content);he(G.afterSanitizeShadowDOM,g,null)};return t.sanitize=function(S){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=null,k=null,B=null,Y=null;if(vt=!S,vt&&(S="<!-->"),typeof S!="string"&&!fa(S))if(typeof S.toString=="function"){if(S=S.toString(),typeof S!="string")throw Ve("dirty is not a string, aborting")}else throw Ve("toString is not a function");if(!t.isSupported)return S;if(Ct||Rt(g),t.removed=[],typeof S=="string"&&(Fe=!1),Fe){if(S.nodeName){const _e=W(S.nodeName);if(!H[_e]||Ie[_e])throw Ve("root node is forbidden and cannot be sanitized in-place")}}else if(S instanceof o)b=ha("<!---->"),k=b.ownerDocument.importNode(S,!0),k.nodeType===We.element&&k.nodeName==="BODY"||k.nodeName==="HTML"?b=k:b.appendChild(k);else{if(!Te&&!ve&&!Ce&&S.indexOf("<")===-1)return U&&Ke?U.createHTML(S):S;if(b=ha(S),!b)return Te?null:Ke?ce:""}b&&kt&&ie(b.firstChild);const q=_a(Fe?S:b);for(;B=q.nextNode();)pa(B),xa(B),B.content instanceof a&&hr(B.content);if(Fe)return S;if(Te){if(Qe)for(Y=_t.call(b.ownerDocument);b.firstChild;)Y.appendChild(b.firstChild);else Y=b;return(Z.shadowroot||Z.shadowrootmode)&&(Y=pt.call(i,Y,!0)),Y}let te=Ce?b.outerHTML:b.innerHTML;return Ce&&H["!doctype"]&&b.ownerDocument&&b.ownerDocument.doctype&&b.ownerDocument.doctype.name&&K(tr,b.ownerDocument.doctype.name)&&(te="<!DOCTYPE "+b.ownerDocument.doctype.name+`>
`+te),ve&&rt([Me,Oe,T],_e=>{te=qe(te,_e," ")}),U&&Ke?U.createHTML(te):te},t.setConfig=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Rt(S),Ct=!0},t.clearConfig=function(){Ee=null,Ct=!1},t.isValidAttribute=function(S,g,b){Ee||Rt({});const k=W(S),B=W(g);return ya(k,B,b)},t.addHook=function(S,g){typeof g=="function"&&Ue(G[S],g)},t.removeHook=function(S,g){if(g!==void 0){const b=bi(G[S],g);return b===-1?void 0:xi(G[S],b,1)[0]}return Aa(G[S])},t.removeHooks=function(S){G[S]=[]},t.removeAllHooks=function(){G=Fa()},t}var Bi=ar();const Ni={props:{text:{type:String,default:""}},methods:{renderMarkdown(r){const t=r.trim(),e=new P.Renderer;e.link=function(a){const d=a.title?` title="${a.title}"`:"";return`<a href="${a.href}"${d} target="_blank" rel="noopener noreferrer">${a.text}</a>`};let i=P(t,{breaks:!0,renderer:e});return i=i.replace(/<p>\s*<\/p>$/,"").replace(/<br\s*\/?>$/,"").replace(/\s+$/,""),Bi.sanitize(i,{ADD_ATTR:["title","target"]})}}},zi=["innerHTML"];function ji(r,t,e,i,n,a){return s(),l("div",{class:"whitespace-pre-line",innerHTML:a.renderMarkdown(e.text)},null,8,zi)}const ht=A(Ni,[["render",ji]]),Ui={components:{Markdown:ht,AddressInput:qt},props:{designCard:{type:Object}},methods:{isNotEmpty:Ze}},qi={class:"space-y-2"};function Vi(r,t,e,i,n,a){var h,c,m;const d=f("Markdown"),o=f("AddressInput");return e.designCard.metadata.upper_text||e.designCard.metadata.lower_text||e.designCard.address?(s(),l("div",{key:0,style:w({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[u("div",qi,[a.isNotEmpty(e.designCard.metadata.upper_text)?(s(),y(d,{key:0,text:e.designCard.metadata.upper_text},null,8,["text"])):_("",!0),(h=e.designCard.address)!=null&&h.latitude&&((c=e.designCard.address)!=null&&c.longitude)?(s(),y(o,{key:1,height:"250px",triggerClass:"",editable:!1,address:e.designCard.address},null,8,["address"])):_("",!0),e.designCard.metadata.show_address&&((m=e.designCard.address)!=null&&m.complete_address)?(s(),l("p",{key:2,style:w({color:e.designCard.metadata.design.address_color})},p(e.designCard.address.complete_address),5)):_("",!0),a.isNotEmpty(e.designCard.metadata.lower_text)?(s(),y(d,{key:3,text:e.designCard.metadata.lower_text},null,8,["text"])):_("",!0)])],4)):_("",!0)}const Hi=A(Ui,[["render",Vi]]),Wi={inject:["storeState"],components:{StoreLogo:Tr},props:{designCard:{type:Object}},computed:{store(){return this.storeState.store},alignment(){return this.designCard.metadata.alignment=="left"?"justify-start":this.designCard.metadata.alignment=="right"?"justify-end":"justify-center"}}};function Gi(r,t,e,i,n,a){const d=f("StoreLogo");return a.store.logo?(s(),l("div",{key:0,class:N(["flex",a.alignment]),style:w({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[R(d,{size:"w-20 h-20",showButton:!1})],6)):_("",!0)}const Zi=A(Wi,[["render",Gi]]),Xi={components:{Link:Rr},props:{designCard:{type:Object}}},Yi=["href","aria-label"],Qi={key:0,class:"flex items-center justify-center space-x-4"},Ki={class:"text-lg font-semibold"};function Ji(r,t,e,i,n,a){const d=f("Link");return s(),l("a",{class:"block",target:"_blank",rel:"noopener noreferrer",href:e.designCard.metadata.link,"aria-label":e.designCard.metadata.title},[e.designCard.metadata.title&&e.designCard.metadata.link?(s(),l("div",{key:0,style:w({color:e.designCard.metadata.design.title_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`}),class:"hover:scale-105 transition-all duration-300 cursor-pointer"},[e.designCard.metadata.title?(s(),l("div",Qi,[R(d,{size:"20",style:w({color:e.designCard.metadata.design.icon_color})},null,8,["style"]),u("h3",Ki,p(e.designCard.metadata.title),1)])):_("",!0)],4)):_("",!0)],8,Yi)}const $i=A(Xi,[["render",Ji]]),es={components:{Markdown:ht},props:{designCard:{type:Object}}};function ts(r,t,e,i,n,a){const d=f("Markdown");return s(),l("div",{style:w({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[R(d,{text:e.designCard.metadata.body},null,8,["text"])],4)}const as=A(es,[["render",ts]]),rs={components:{Markdown:ht},props:{designCard:{type:Object}},computed:{hasLink(){return this.isNotEmpty(this.designCard.metadata.link)}},methods:{isNotEmpty:Ze,handleLink(r){this.hasLink||r.preventDefault()}}},ns=["href","aria-label"],is={class:"space-y-4"},ss={key:1,class:"w-full aspect-square relative flex items-center justify-center rounded-lg overflow-hidden"},ds=["src","alt"];function os(r,t,e,i,n,a){var o,h,c,m;const d=f("Markdown");return s(),l("a",{class:N(["block",[a.hasLink?"cursor-pointer hover:scale-105 transition-all duration-300":"cursor-default"]]),target:"_blank",onClick:t[0]||(t[0]=j((...x)=>a.handleLink&&a.handleLink(...x),["stop"])),rel:"noopener noreferrer",href:e.designCard.metadata.link,"aria-label":e.designCard.metadata.title||"Link to content"},[(h=(o=e.designCard.photos)==null?void 0:o[0])!=null&&h.path||e.designCard.metadata.upper_text||e.designCard.metadata.lower_text?(s(),l("div",{key:0,style:w({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[u("div",is,[a.isNotEmpty(e.designCard.metadata.upper_text)?(s(),y(d,{key:0,text:e.designCard.metadata.upper_text},null,8,["text"])):_("",!0),(m=(c=e.designCard.photos)==null?void 0:c[0])!=null&&m.path?(s(),l("div",ss,[u("img",{src:e.designCard.photos[0].path,class:"w-full h-full object-cover",alt:e.designCard.metadata.title||"Image"},null,8,ds)])):_("",!0),a.isNotEmpty(e.designCard.metadata.lower_text)?(s(),y(d,{key:2,text:e.designCard.metadata.lower_text},null,8,["text"])):_("",!0)])],4)):_("",!0)],10,ns)}const ls=A(rs,[["render",os]]),cs={components:{Video:Lr},props:{designCard:{type:Object}},methods:{getYouTubeEmbedUrl(r){const t=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,e=r.match(t),i=e?e[1]:"";return i?`https://www.youtube.com/embed/${i}`:""}}},gs={class:"space-y-2"},us={key:0,class:"flex items-center space-x-4"},ms={class:"text-lg font-semibold"},hs={key:1,class:"relative w-full",style:{"padding-bottom":"56.25%"}},_s=["src"];function fs(r,t,e,i,n,a){const d=f("Video");return e.designCard.metadata.title||e.designCard.metadata.link?(s(),l("div",{key:0,style:w({color:e.designCard.metadata.design.title_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[u("div",gs,[e.designCard.metadata.title?(s(),l("div",us,[R(d,{size:"20",style:w({color:e.designCard.metadata.design.icon_color})},null,8,["style"]),u("h3",ms,p(e.designCard.metadata.title),1)])):_("",!0),e.designCard.metadata.link?(s(),l("div",hs,[u("iframe",{frameborder:"0",allowfullscreen:"",src:a.getYouTubeEmbedUrl(e.designCard.metadata.link),class:"absolute top-0 left-0 w-full h-full rounded-sm",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"},null,8,_s)])):_("",!0)])],4)):_("",!0)}const ps=A(cs,[["render",fs]]),ys={props:{designCard:{type:Object}}},bs=["href"],xs={class:"text-center"};function Cs(r,t,e,i,n,a){return s(),l("a",{class:"block",target:"_blank",href:e.designCard.metadata.link},[e.designCard.metadata.title?(s(),l("div",{key:0,style:w({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`}),class:N(["select-none flex justify-center",{"hover:py-6 hover:scale-105 transition-all duration-300 cursor-pointer":e.designCard.metadata.link}])},[u("span",xs,p(e.designCard.metadata.title),1)],6)):_("",!0)],8,bs)}const ks=A(ys,[["render",Cs]]),ws={inject:["storeState"],components:{Phone:Zr},props:{designCard:{type:Object}},computed:{store(){return this.storeState.store}},methods:{downloadVCard(r,t){const e=["BEGIN:VCARD","VERSION:3.0",`FN;CHARSET=UTF-8:${this.store.name}`,`N;CHARSET=UTF-8:;${this.store.name};;;`,`TEL;TYPE=WORK,VOICE:${t||""}`,"ORG;CHARSET=UTF-8:Perfect Order",`REV:${new Date().toISOString()}`,"END:VCARD"].join(`
`),i=new Blob([e],{type:"text/vcard"}),n=URL.createObjectURL(i),a=document.createElement("a");a.href=n,a.download=`${r||"contact"}.vcf`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}}},Ss={class:"flex items-center justify-center space-x-4"},vs={class:"text-lg font-semibold"};function Ts(r,t,e,i,n,a){const d=f("Phone");return e.designCard.metadata.title||e.designCard.metadata.mobile_number?(s(),l("div",{key:0,style:w({color:e.designCard.metadata.design.title_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`}),class:"hover:scale-105 transition-all duration-300 cursor-pointer",onClick:t[0]||(t[0]=o=>a.downloadVCard(e.designCard.metadata.title,e.designCard.metadata.mobile_number))},[u("div",Ss,[R(d,{size:"20",style:w({color:e.designCard.metadata.design.icon_color})},null,8,["style"]),u("h3",vs,p(e.designCard.metadata.title),1)])],4)):_("",!0)}const Rs=A(ws,[["render",Ts]]),Ls={props:{designCard:{type:Object}}};function As(r,t,e,i,n,a){return s(),l("div",{style:w({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[u("div",{style:w({border:`${e.designCard.metadata.thickness??1}px ${e.designCard.metadata.divider??"solid"} ${e.designCard.metadata.design.divider_color}`})},null,4)],4)}const Es=A(Ls,[["render",As]]),Ds={components:{AtSign:Er},props:{designCard:{type:Object}}},Ps={class:"space-y-2"},Ms={key:0,class:"flex items-center space-x-4"},Os={class:"text-lg font-semibold"},Is={class:"flex flex-wrap justify-center gap-4"},Fs=["href","aria-label"],Bs=["alt","src"];function Ns(r,t,e,i,n,a){var o;const d=f("AtSign");return(o=e.designCard.metadata.platforms)!=null&&o.some(h=>h.link)?(s(),l("div",{key:0,style:w({color:e.designCard.metadata.design.title_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[u("div",Ps,[e.designCard.metadata.title?(s(),l("div",Ms,[R(d,{size:"20",style:w({color:e.designCard.metadata.design.icon_color})},null,8,["style"]),u("h3",Os,p(e.designCard.metadata.title),1)])):_("",!0),u("div",Is,[(s(!0),l(L,null,I(e.designCard.metadata.platforms,(h,c)=>(s(),l(L,{key:c},[h.link?(s(),l("a",{key:0,target:"_blank",href:h.link,"aria-label":`Visit ${h.name}`,class:"w-12 h-12 flex items-center justify-center hover:scale-90 active:scale-80 transition-all duration-300 cursor-pointer"},[u("img",{alt:h.name,class:"w-8 h-8 object-contain",src:`/images/social-media-icons/${h.name.toLowerCase()}.png`},null,8,Bs)],8,Fs)):_("",!0)],64))),128))])])],4)):_("",!0)}const zs=A(Ds,[["render",Ns]]),js={inject:["formState","orderState"],components:{Input:oe},props:{designCard:{type:Object}},computed:{orderForm(){return this.orderState.orderForm}}},Us={class:"space-y-2 mt-4"};function qs(r,t,e,i,n,a){const d=f("Input");return e.designCard.metadata.title||e.designCard.metadata.show_first_name||e.designCard.metadata.show_last_name||e.designCard.metadata.show_email?(s(),l("div",{key:0,style:w({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(s(),l("h1",{key:0,class:"text-base font-semibold",style:w({color:e.designCard.metadata.design.title_color})},p(e.designCard.metadata.title),5)):_("",!0),e.designCard.metadata.description?(s(),l("p",{key:1,class:"text-sm text-gray-700 mt-2",style:w({color:e.designCard.metadata.design.description_color})},p(e.designCard.metadata.description),5)):_("",!0),u("div",Us,[e.designCard.metadata.show_first_name?(s(),y(d,{key:0,type:"text",class:"w-full",label:"First name",modelValue:a.orderForm.customer_first_name,"onUpdate:modelValue":t[0]||(t[0]=o=>a.orderForm.customer_first_name=o),showAsterisk:e.designCard.metadata.first_name_required,errorText:a.formState.getFormError("customer_first_name"),labelStyle:{color:e.designCard.metadata.design.title_color},secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},secondaryLabel:e.designCard.metadata.first_name_required?null:"(optional)"},null,8,["modelValue","showAsterisk","errorText","labelStyle","secondaryLabelStyle","secondaryLabel"])):_("",!0),e.designCard.metadata.show_last_name?(s(),y(d,{key:1,type:"text",class:"w-full",label:"Last name",modelValue:a.orderForm.customer_last_name,"onUpdate:modelValue":t[1]||(t[1]=o=>a.orderForm.customer_last_name=o),showAsterisk:e.designCard.metadata.last_name_required,errorText:a.formState.getFormError("customer_last_name"),labelStyle:{color:e.designCard.metadata.design.title_color},secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},secondaryLabel:e.designCard.metadata.last_name_required?null:"(optional)"},null,8,["modelValue","showAsterisk","errorText","labelStyle","secondaryLabelStyle","secondaryLabel"])):_("",!0),e.designCard.metadata.show_mobile_number?(s(),y(d,{key:2,type:"text",class:"w-full",label:"Mobile",placeholder:"+26772000001",modelValue:a.orderForm.customer_mobile_number,"onUpdate:modelValue":t[2]||(t[2]=o=>a.orderForm.customer_mobile_number=o),showAsterisk:e.designCard.metadata.mobile_number_required,errorText:a.formState.getFormError("customer_mobile_number"),labelStyle:{color:e.designCard.metadata.design.title_color},secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},secondaryLabel:e.designCard.metadata.mobile_number_required?null:"(optional)"},null,8,["modelValue","showAsterisk","errorText","labelStyle","secondaryLabelStyle","secondaryLabel"])):_("",!0),e.designCard.metadata.show_email?(s(),y(d,{key:3,type:"email",label:"Email",class:"w-full",placeholder:"johndoe@example.com",modelValue:a.orderForm.customer_email,"onUpdate:modelValue":t[3]||(t[3]=o=>a.orderForm.customer_email=o),showAsterisk:e.designCard.metadata.email_required,errorText:a.formState.getFormError("customer_email"),labelStyle:{color:e.designCard.metadata.design.title_color},secondaryLabel:e.designCard.metadata.email_required?null:"(optional)",secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color}},null,8,["modelValue","showAsterisk","errorText","labelStyle","secondaryLabel","secondaryLabelStyle"])):_("",!0)])],4)):_("",!0)}const Vs=A(js,[["render",qs]]),Hs={inject:["formState","designState","orderState","storeState","notificationState"],components:{Image:Ut,Pill:Pe,Loader:gt},props:{designCard:{type:Object}},data(){return{category:null,lastCategoryId:null,isLoadingCategory:!1}},watch:{categoryId(r,t){this.showCategory()}},computed:{store(){return this.storeState.store},shoppingCart(){return this.orderState.shoppingCart},categoryId(){return this.designCard.metadata.category_id},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)}},methods:{async onView(r){if(this.isDesigning){this.notificationState.showSuccessNotification("Only opens on the actual store");return}await this.$router.push({name:"show-shop-product",params:{alias:this.store.alias,product_id:r.id}})},getSelectedQuantity(r){if(this.shoppingCart&&r){const t=this.shoppingCart.order_products.find(e=>e.product_id==r.id);if(t)return t.quantity}return null},async showCategory(){var r,t;try{if(!this.categoryId)return;this.isLoadingCategory=!0;let e={params:{store_id:this.store.id,_relationships:["photo","products.photo"].join(",")}};this.lastCategoryId=this.categoryId;const i=await axios.get(`/api/categories/${this.categoryId}`,e);this.categoryId==this.lastCategoryId&&(this.category=i.data)}catch(e){const i=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching category";this.notificationState.showWarningNotification(i),this.formState.setServerFormErrors(e)}finally{this.categoryId==this.lastCategoryId&&(this.isLoadingCategory=!1)}}},created(){this.showCategory()}},Ws={class:"space-y-4"},Gs={key:0,class:"flex justify-center items-center"},Zs=["onClick"],Xs={key:0,class:"absolute top-1 right-1 z-10 flex items-center justify-center min-w-6 w-fit h-6 p-1 bg-red-500 text-xs font-bold text-white rounded-full"},Ys=["alt","src"],Qs={class:"flex items-center space-x-2 flex-wrap gap-2"},Ks={key:1,class:"text-gray-500 text-sm"};function Js(r,t,e,i,n,a){const d=f("Loader"),o=f("Image"),h=f("Pill");return e.designCard.metadata.category_id&&(n.category||n.isLoadingCategory)?(s(),l("div",{key:0,style:w({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[u("div",Ws,[n.isLoadingCategory?(s(),l("div",Gs,[R(d)])):(s(),l(L,{key:1},[u("div",null,[u("h3",{class:"text-lg font-semibold mb-0",style:w({color:e.designCard.metadata.design.title_color})},p(n.category.name),5),n.category.description?(s(),l("p",{key:0,style:w({color:e.designCard.metadata.design.description_color})},p(n.category.description),5)):_("",!0)]),n.category.products.length?(s(),l("div",{key:0,class:N([{"flex flex-col space-y-4":e.designCard.metadata.layout==="list"},{"grid grid-cols-2 gap-4":e.designCard.metadata.layout==="grid"&&a.isDesigning},{"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4":e.designCard.metadata.layout==="grid"&&!a.isDesigning}])},[(s(!0),l(L,null,I(n.category.products.slice(0,parseInt(e.designCard.metadata.feature)),c=>{var m,x;return s(),l("div",{key:c.id,onClick:j(()=>a.onView(c),["stop"]),style:w({color:e.designCard.metadata.design.title_color}),class:"relative flex flex-col space-y-2 p-2 cursor-pointer rounded-lg hover:scale-105 transition-all duration-300"},[a.getSelectedQuantity(c)?(s(),l("div",Xs,[u("span",null,p(a.getSelectedQuantity(c)),1)])):_("",!0),u("div",{class:N(["w-full aspect-square relative flex items-center justify-center bg-gray-100 rounded-lg overflow-hidden",(e.designCard.metadata.layout==="list","max-h-60")])},[(m=(c??c.variant).photo)!=null&&m.path?(s(),l("img",{key:0,alt:(c??c.variant).name,class:"absolute w-full h-full object-cover",src:(x=(c??c.variant).photo)==null?void 0:x.path},null,8,Ys)):(s(),y(o,{key:1,size:"40",class:"text-gray-300"}))],2),u("h4",{class:"text-sm font-medium truncate",style:w({color:e.designCard.metadata.design.product_name_color})},p(c.name),5),u("div",Qs,[(c.variant??c).is_free?(s(),y(h,{key:0,type:"success",size:"xs"},{default:V(()=>t[0]||(t[0]=[de("free")])),_:1,__:[0]})):(s(),l(L,{key:1},[(c.variant??c).on_sale?(s(),l("span",{key:0,class:"text-sm font-semibold",style:w({color:e.designCard.metadata.design.product_price_color})},p((c.variant??c).unit_sale_price.amount_with_currency),5)):_("",!0),u("span",{style:w({color:(c.variant??c).on_sale?e.designCard.metadata.design.product_cancelled_price_color:e.designCard.metadata.design.product_price_color}),class:N(["text-sm",{"line-through":(c.variant??c).on_sale,"font-semibold":!(c.variant??c).on_sale}])},p((c.variant??c).unit_regular_price.amount_with_currency),7)],64)),(c.variant??c).stock_quantity_type=="limited"&&((c.variant??c).has_stock&&(c.variant??c).stock_quantity<=5||!(c.variant??c).has_stock)?(s(),y(h,{key:2,type:(c.variant??c).has_stock?"success":"warning",size:"xs"},{default:V(()=>[de(p((c.variant??c).has_stock?`${(c.variant??c).stock_quantity} left`:"no stock"),1)]),_:2},1032,["type"])):_("",!0)])],12,Zs)}),128))],2)):(s(),l("p",Ks,"No products available in this category."))],64))])],4)):_("",!0)}const $s=A(Hs,[["render",Js]]),ed={components:{Markdown:ht,Countdown:Dr},props:{designCard:{type:Object}},methods:{isNotEmpty:Ze}},td={key:1,class:"w-full aspect-square relative flex items-center justify-center rounded-lg overflow-hidden"},ad=["src"],rd={key:0,class:"text-lg font-semibold text-red-600"};function nd(r,t,e,i,n,a){var h,c,m,x;const d=f("Markdown"),o=f("Countdown");return e.designCard.metadata.body||e.designCard.metadata.date||(c=(h=e.designCard.photos)==null?void 0:h[0])!=null&&c.path?(s(),l("div",{key:0,style:w({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[a.isNotEmpty(e.designCard.metadata.upper_text)?(s(),y(d,{key:0,text:e.designCard.metadata.upper_text},null,8,["text"])):_("",!0),(x=(m=e.designCard.photos)==null?void 0:m[0])!=null&&x.path?(s(),l("div",td,[u("img",{alt:"Countdown Image",src:e.designCard.photos[0].path,class:"w-full h-full object-cover"},null,8,ad)])):_("",!0),R(o,{type:"design2",class:"w-full",style:w({color:e.designCard.metadata.design.countdown_text_color}),time:e.designCard.metadata.date},{prefix:V(({hasExpired:C})=>[C?(s(),l("span",rd,"Countdown Ended")):_("",!0)]),_:1},8,["style","time"]),a.isNotEmpty(e.designCard.metadata.lower_text)?(s(),y(d,{key:2,text:e.designCard.metadata.lower_text},null,8,["text"])):_("",!0)],4)):_("",!0)}const id=A(ed,[["render",nd]]),sd={inject:["formState","storeState","notificationState"],components:{ChevronUp:Mr,ChevronDown:Pr},props:{designCard:{type:Object}},data(){return{expanded:{},categories:[],isLoadingCategories:!1}},watch:{store(){this.setup()}},computed:{store(){return this.storeState.store},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)}},methods:{async setup(){this.store&&this.showCategories()},toggleExpanded(r){this.expanded={...this.expanded,[r]:!this.expanded[r]}},async navigateToShowShopCategory(r){if(this.isDesigning){this.notificationState.showSuccessNotification("Only opens on the actual store");return}await this.$router.push({name:"show-shop-category",params:{alias:this.store.alias,category_id:r.id}})},async showCategories(){var r,t;try{this.isLoadingCategories=!0;let e={params:{per_page:100,type:"parent",store_id:this.store.id,_relationships:["subCategories.subCategories.subCategories"].join(",")}};const n=(await axios.get("/api/categories",e)).data;this.categories=n.data}catch(e){const i=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching categories";this.notificationState.showWarningNotification(i),this.formState.setServerFormErrors(e),console.error("Failed to fetch categories:",e)}finally{this.isLoadingCategories=!1}}},created(){this.setup()}},dd={key:0},od={class:"flex items-center text-gray-700 hover:bg-gray-100 pr-4"},ld={class:"w-full text-lg font-semibold py-2 pl-4 ms-3 group-hover:text-gray-900"},cd={class:"p-2"},gd={key:0},ud=["onClick"],md={class:"flex items-center text-gray-700 hover:bg-gray-100 pr-4"},hd={class:"w-full text-lg font-semibold py-2 pl-8 ms-3 group-hover:text-gray-900"},_d=["onClick"],fd={key:0},pd=["onClick"],yd={class:"flex items-center text-gray-700 hover:bg-gray-100 pr-4"},bd={class:"w-full text-lg font-semibold py-2 pl-12 ms-3 group-hover:text-gray-900"},xd=["onClick"],Cd={key:0},kd=["onClick"],wd={class:"flex items-center text-gray-700"},Sd={class:"w-full text-lg font-semibold py-2 pl-16 ms-3 group-hover:text-gray-900"},vd={key:1},Td=["onClick"],Rd={class:"flex items-center text-gray-700 hover:bg-gray-100 pr-4"},Ld={class:"w-full text-lg font-semibold py-2 pl-4 ms-3 group-hover:text-gray-900"},Ad=["onClick"],Ed={key:0},Dd=["onClick"],Pd={class:"flex items-center text-gray-700 hover:bg-gray-100 pr-4"},Md={class:"w-full text-lg font-semibold py-2 pl-8 ms-3 group-hover:text-gray-900"},Od=["onClick"],Id={key:0},Fd=["onClick"],Bd={class:"flex items-center text-gray-700"},Nd={class:"w-full text-lg font-semibold py-2 pl-16 ms-3 group-hover:text-gray-900"};function zd(r,t,e,i,n,a){var h,c,m;const d=f("ChevronUp"),o=f("ChevronDown");return s(),l("div",{style:w({color:e.designCard.metadata.design.title_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(s(),l("div",dd,[u("div",{onClick:t[0]||(t[0]=j(x=>a.toggleExpanded("root"),["stop"])),class:N(["cursor-pointer text-gray-900 group",{"hover:bg-gray-100":!n.expanded.root}])},[u("div",od,[u("span",ld,p(e.designCard.metadata.title),1),u("div",cd,[n.expanded.root&&((h=n.categories)!=null&&h.length)?(s(),y(d,{key:0,size:"20"})):(c=n.categories)!=null&&c.length?(s(),y(o,{key:1,size:"20"})):_("",!0)])])],2),n.expanded.root&&((m=n.categories)!=null&&m.length)?(s(),l("div",gd,[(s(!0),l(L,null,I(n.categories,x=>{var C,D;return s(),l("div",{key:x.id,class:"cursor-pointer text-gray-900 group",onClick:j(()=>a.navigateToShowShopCategory(x),["stop"])},[u("div",md,[u("span",hd,p(x.name),1),(C=x.sub_categories)!=null&&C.length?(s(),l("div",{key:0,class:"p-2",onClick:j(v=>a.toggleExpanded(x.id),["stop"])},[n.expanded[x.id]?(s(),y(d,{key:0,size:"20"})):(s(),y(o,{key:1,size:"20"}))],8,_d)):_("",!0)]),n.expanded[x.id]&&((D=x.sub_categories)!=null&&D.length)?(s(),l("div",fd,[(s(!0),l(L,null,I(x.sub_categories,v=>{var F;return s(),l("div",{key:v.id,onClick:j(()=>a.navigateToShowShopCategory(v),["stop"]),class:"cursor-pointer text-gray-900 group"},[u("div",yd,[u("span",bd,p(v.name),1),(F=v.sub_categories)!=null&&F.length?(s(),l("div",{key:0,class:"p-2",onClick:j(X=>a.toggleExpanded(v.id),["stop"])},[n.expanded[v.id]?(s(),y(d,{key:0,size:"20"})):(s(),y(o,{key:1,size:"20"}))],8,xd)):_("",!0)]),n.expanded[v.id]?(s(),l("div",Cd,[(s(!0),l(L,null,I(v.sub_categories,X=>(s(),l("div",{key:X.id,onClick:j(be=>a.toggleExpanded(X.id),["stop"]),class:"cursor-pointer text-gray-900 group hover:bg-gray-100"},[u("div",wd,[u("span",Sd,p(X.name),1)])],8,kd))),128))])):_("",!0)],8,pd)}),128))])):_("",!0)],8,ud)}),128))])):_("",!0)])):(s(),l("div",vd,[(s(!0),l(L,null,I(n.categories,x=>{var C,D;return s(),l("div",{key:x.id,class:"cursor-pointer text-gray-900 group",onClick:j(()=>a.navigateToShowShopCategory(x),["stop"])},[u("div",Rd,[u("span",Ld,p(x.name),1),(C=x.sub_categories)!=null&&C.length?(s(),l("div",{key:0,class:"p-2",onClick:j(v=>a.toggleExpanded(x.id),["stop"])},[n.expanded[x.id]?(s(),y(d,{key:0,size:"20"})):(s(),y(o,{key:1,size:"20"}))],8,Ad)):_("",!0)]),n.expanded[x.id]&&((D=x.sub_categories)!=null&&D.length)?(s(),l("div",Ed,[(s(!0),l(L,null,I(x.sub_categories,v=>{var F;return s(),l("div",{key:v.id,onClick:j(()=>a.navigateToShowShopCategory(v),["stop"]),class:"cursor-pointer text-gray-900 group"},[u("div",Pd,[u("span",Md,p(v.name),1),(F=v.sub_categories)!=null&&F.length?(s(),l("div",{key:0,class:"p-2",onClick:j(X=>a.toggleExpanded(v.id),["stop"])},[n.expanded[v.id]?(s(),y(d,{key:0,size:"20"})):(s(),y(o,{key:1,size:"20"}))],8,Od)):_("",!0)]),n.expanded[v.id]?(s(),l("div",Id,[(s(!0),l(L,null,I(v.sub_categories,X=>(s(),l("div",{key:X.id,onClick:j(()=>a.navigateToShowShopCategory(X),["stop"]),class:"cursor-pointer text-gray-900 group hover:bg-gray-100"},[u("div",Bd,[u("span",Nd,p(X.name),1)])],8,Fd))),128))])):_("",!0)],8,Dd)}),128))])):_("",!0)],8,Td)}),128))]))],4)}const jd=A(sd,[["render",zd]]),Ud={inject:["storeState","pwaStore"],components:{Download:Sr},props:{designCard:{type:Object}},data(){return{promptShown:!1}},computed:{store(){return this.storeState.store},deferredPrompt(){return this.pwaStore.deferredPrompt}},methods:{async triggerPWAInstall(){if(this.deferredPrompt){this.promptShown=!0,this.deferredPrompt.prompt();const{outcome:r}=await this.deferredPrompt.userChoice;console.log(r==="accepted"?"User accepted the PWA install prompt":"User dismissed the PWA install prompt")}else console.warn("No deferredPrompt available for PWA installation"),alert("PWA install not available. Please refresh the page and try again.")}}},qd={class:"flex items-center justify-center space-x-4"},Vd=["title"],Hd={class:"flex items-center justify-center space-x-2"},Wd={key:0,class:"text-sm"};function Gd(r,t,e,i,n,a){const d=f("Download");return s(),l("div",{style:w({color:e.designCard.metadata.design.text_color,backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[u("div",qd,[u("button",{onClick:t[0]||(t[0]=(...o)=>a.triggerPWAInstall&&a.triggerPWAInstall(...o)),style:w({backgroundColor:e.designCard.metadata.design.button_color,color:e.designCard.metadata.design.button_text_color,borderRadius:"8px",padding:"8px 16px"}),class:N(["font-semibold",{"opacity-25 cursor-not-allowed":n.promptShown},{"cursor-pointer transition-all duration-300 hover:scale-105 active:scale-100":!n.promptShown}]),title:n.promptShown?"Please refresh the page or interact with the page to try again":"Install the app"},[u("div",Hd,[R(d,{size:"16",style:w({color:e.designCard.metadata.design.button_text_color})},null,8,["style"]),e.designCard.metadata.button_text?(s(),l("span",Wd,p(e.designCard.metadata.button_text),1)):_("",!0)])],14,Vd)])],4)}const Zd=A(Ud,[["render",Gd]]),Xd={inject:["formState","orderState","storeState"],components:{Input:oe},props:{designCard:{type:Object}},watch:{tips(r){!r.includes("specify")&&this.orderForm.tip_flat_rate!=null&&(this.orderForm.tip_flat_rate=null)}},computed:{tips(){let r=["none",...this.designCard.metadata.tips];return this.designCard.metadata.show_specify_tip&&r.push("specify"),r},store(){return this.storeState.store},hasTips(){return this.tips.length>0},orderForm(){return this.orderState.orderForm}},methods:{setTip(r){r=="none"?(this.orderForm.tip_flat_rate=null,this.orderForm.tip_percentage_rate=null):r=="specify"?(this.orderForm.tip_percentage_rate=null,this.designCard.metadata.tips.length?this.orderForm.tip_flat_rate=this.designCard.metadata.tips[0]:this.orderForm.tip_flat_rate="0.00"):this.designCard.metadata.tips.includes(r)&&(this.orderForm.tip_percentage_rate=r)},isSelectedTip(r){return r=="specify"&&this.orderForm.tip_percentage_rate==null&&this.orderForm.tip_flat_rate!=null||r=="none"&&this.orderForm.tip_percentage_rate==null&&this.orderForm.tip_flat_rate==null||this.orderForm.tip_percentage_rate==r}}},Yd={key:0,class:"text-base text-gray-700 font-semibold"},Qd={key:1,class:"text-sm text-gray-700 mt-2"},Kd={key:2,class:"space-y-4 mt-4"},Jd={class:"flex flex-wrap gap-2"},$d=["onClick"],eo={key:0,class:"mt-4"};function to(r,t,e,i,n,a){const d=f("Input");return e.designCard.metadata.show_tips?(s(),l("div",{key:0,style:w({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(s(),l("h1",Yd,p(e.designCard.metadata.title),1)):_("",!0),e.designCard.metadata.description?(s(),l("p",Qd,p(e.designCard.metadata.description),1)):_("",!0),a.hasTips?(s(),l("div",Kd,[u("div",Jd,[(s(!0),l(L,null,I(a.tips,(o,h)=>(s(),l("div",{key:h,onClick:j(()=>a.setTip(o),["stop"]),style:w([a.isSelectedTip(o)?{border:"1px solid transparent",color:e.designCard.metadata.design.pill_text_color,backgroundColor:e.designCard.metadata.design.pill_bg_color}:{color:"#111827",backgroundColor:"#ffffff",border:"1px solid #d2d2d2"}]),class:"select-none whitespace-nowrap inline-flex items-center rounded-full px-3 py-1.5 text-xs font-semibold transition-all cursor-pointer hover:scale-95 hover:opacity-80 active:scale-90"},[o=="none"?(s(),l(L,{key:0},[de("None")],64)):o=="specify"?(s(),l(L,{key:1},[de("Specify")],64)):(s(),l(L,{key:2},[de(p(o)+"%",1)],64))],12,$d))),128))]),a.isSelectedTip("specify")?(s(),l("div",eo,[R(d,{type:"money",currency:a.store.currency,modelValue:a.orderForm.tip_flat_rate,"onUpdate:modelValue":t[0]||(t[0]=o=>a.orderForm.tip_flat_rate=o),errorText:a.formState.getFormError("discount_flat_rate")},null,8,["currency","modelValue","errorText"])])):_("",!0)])):_("",!0)],4)):_("",!0)}const ao=A(Xd,[["render",to]]),ro={inject:["formState","storeState"],components:{Pill:Pe,Input:oe,Button:xe,Datepicker:Or,AddressInput:qt},props:{index:{type:Number},designCard:{type:Object}},data(){return{response:null}},watch:{"designCard.type"(){this.initializeResponse()}},computed:{store(){return this.storeState.store},inputKey(){var r,t,e;return`${((r=this.designCard)==null?void 0:r.id)??this.designCard.temporary_id}-${this.designCard.metadata.title.length}-${this.designCard.metadata.required}-${((e=(t=this.designCard.metadata)==null?void 0:t.options)==null?void 0:e.length)??0}}`}},methods:{isNotEmpty:Ze,setAddress(r){},unsetAddress(){},initializeResponse(){this.designCard.type=="checkbox"?this.response=new Array(this.designCard.metadata.options.length).fill(!1):this.designCard.type=="location"?this.response=null:this.designCard.type=="media"?this.response=[]:this.response=""}},created(){this.initializeResponse()}},no={key:0,class:"mb-2"},io={class:"flex items-center text-sm leading-6 font-medium space-x-1"},so={key:0,class:"text-red-500"},oo={key:1,class:"space-y-2"},lo=["onUpdate:modelValue","id","onChange"],co=["for"],go={class:"space-y-2"},uo=["name","value","id","onChange"],mo=["for"];function ho(r,t,e,i,n,a){const d=f("Input"),o=f("Datepicker"),h=f("Button"),c=f("AddressInput");return s(),l("div",{key:a.inputKey,style:w({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.type=="short answer"?(s(),y(d,{key:0,type:"text",modelValue:n.response,"onUpdate:modelValue":t[0]||(t[0]=m=>n.response=m),label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.title"),secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","errorText","secondaryLabelStyle","showAsterisk","secondaryLabel"])):_("",!0),e.designCard.type=="long answer"?(s(),y(d,{key:1,rows:"2",type:"textarea",modelValue:n.response,"onUpdate:modelValue":t[1]||(t[1]=m=>n.response=m),label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.title"),secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","errorText","secondaryLabelStyle","showAsterisk","secondaryLabel"])):_("",!0),e.designCard.type=="number"?(s(),y(d,{key:2,type:"number",modelValue:n.response,"onUpdate:modelValue":t[2]||(t[2]=m=>n.response=m),label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.title"),secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","errorText","secondaryLabelStyle","showAsterisk","secondaryLabel"])):_("",!0),e.designCard.type=="date"?(s(),y(o,{key:3,modelValue:n.response,"onUpdate:modelValue":t[3]||(t[3]=m=>n.response=m),enableTimePicker:!0,format:"dd MMM yyyy HH:mm",placeholder:"Select a date",modelType:"yyyy-MM-dd HH:mm",label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.title"),secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","errorText","secondaryLabelStyle","showAsterisk","secondaryLabel"])):_("",!0),e.designCard.type=="time"?(s(),y(d,{key:4,type:"time",modelValue:n.response,"onUpdate:modelValue":t[4]||(t[4]=m=>n.response=m),label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.title"),secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","errorText","secondaryLabelStyle","showAsterisk","secondaryLabel"])):_("",!0),["checkbox","selection","location"].includes(e.designCard.type)?(s(),l(L,{key:5},[a.isNotEmpty(e.designCard.metadata.title)||a.isNotEmpty(e.designCard.metadata.description)?(s(),l("div",no,[u("div",io,[u("span",{style:w({color:e.designCard.metadata.design.title_color})},p(e.designCard.metadata.title),5),a.isNotEmpty(e.designCard.metadata.title)?(s(),l(L,{key:0},[e.designCard.metadata.required?(s(),l("span",so," * ")):(s(),l("span",{key:1,class:"font-normal text-gray-400 ml-1",style:w({color:e.designCard.metadata.design.optional_text_color})}," (optional) ",4))],64)):_("",!0)]),a.isNotEmpty(e.designCard.metadata.description)?(s(),l("span",{key:0,style:w({color:e.designCard.metadata.design.description_color}),class:"leading-4 text-xs text-gray-400"},p(e.designCard.metadata.description),5)):_("",!0)])):_("",!0),e.designCard.type=="checkbox"?(s(),l("div",oo,[(s(!0),l(L,null,I(e.designCard.metadata.options,(m,x)=>(s(),l("div",{key:x,class:"flex items-center space-x-2"},[dt(u("input",{type:"checkbox","onUpdate:modelValue":C=>n.response[x]=C,id:`${a.inputKey}-${x}`,onChange:C=>n.response[x]=C.target.checked,style:w(`accent-color:${e.designCard.metadata.design.checkbox_color};`)},null,44,lo),[[pr,n.response[x]]]),u("label",{for:`${a.inputKey}-${x}`},[u("span",{style:w({color:e.designCard.metadata.design.title_color})},p(m.name),5)],8,co)]))),128))])):_("",!0),e.designCard.type=="selection"?(s(),l(L,{key:2},[u("div",go,[(s(!0),l(L,null,I(e.designCard.metadata.options,(m,x)=>(s(),l("div",{key:x,class:"flex items-center space-x-2"},[dt(u("input",{type:"radio",name:a.inputKey,"onUpdate:modelValue":t[5]||(t[5]=C=>n.response=C),value:m.name,id:`${a.inputKey}-${x}`,onChange:C=>n.response=m.name,style:w(`accent-color:${e.designCard.metadata.design.radio_color};`)},null,44,uo),[[yr,n.response]]),u("label",{for:`${a.inputKey}-${x}`},[u("span",{style:w({color:e.designCard.metadata.design.title_color})},p(m.name),5)],8,mo)]))),128))]),!e.designCard.metadata.required&&e.designCard.metadata.options>=1?(s(),y(h,{key:0,size:"xs",type:"light",class:"mt-4",action:()=>n.response=null},{default:V(()=>t[8]||(t[8]=[u("span",null,"Clear selection",-1)])),_:1,__:[8]},8,["action"])):_("",!0)],64)):_("",!0),e.designCard.type=="location"?(s(),y(c,{key:3,height:"250px",onlyValidate:!0,pinLocationOnMap:!0,triggerClass:"space-y-4",onOnDeleted:a.unsetAddress,address:e.designCard.address,onOnValidated:t[6]||(t[6]=m=>a.setAddress(m)),triggerText:e.designCard.metadata.trigger_text??"Add Address"},null,8,["onOnDeleted","address","triggerText"])):_("",!0)],64)):_("",!0),e.designCard.type=="media"?(s(),y(d,{key:6,type:"file",maxFiles:3,modelValue:n.response,"onUpdate:modelValue":t[7]||(t[7]=m=>n.response=m),mimeTypes:["image/*"],imagePreviewGridCols:3,label:e.designCard.metadata.title,description:e.designCard.metadata.description,labelStyle:{color:e.designCard.metadata.design.title_color},fileTextStyle:{color:e.designCard.metadata.design.media_text_color},errorText:a.formState.getFormError("design_cards"+e.index+"metadata.photos"),wrapperStyle:{backgroundColor:e.designCard.metadata.design.media_bg_color},secondaryLabelStyle:{color:e.designCard.metadata.design.optional_text_color},showAsterisk:a.isNotEmpty(e.designCard.metadata.title)&&e.designCard.metadata.required,secondaryLabel:a.isNotEmpty(e.designCard.metadata.title)&&!e.designCard.metadata.required?"(optional)":null},null,8,["modelValue","label","description","labelStyle","fileTextStyle","errorText","wrapperStyle","secondaryLabelStyle","showAsterisk","secondaryLabel"])):_("",!0)],4)}const _o=A(ro,[["render",ho]]),fo={inject:["formState","orderState","storeState","notificationState"],components:{ArrowRight:Ir,Pill:Pe,Loader:gt,Skeleton:ne},props:{designCard:{type:Object}},data(){return{pagination:null,storePaymentMethods:[],isLoadingStorePaymentMethods:!1}},watch:{store(r,t){!t&&r&&this.showStorePaymentMethods()}},computed:{store(){return this.storeState.store},order(){return this.orderState.order},isLoadingStore(){return this.storeState.isLoadingStore},isLoadingOrder(){return this.orderState.isLoadingOrder},fakeOutstandingTotal(){return wr("100.00",this.store.currency)},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)}},methods:{navigateToStorePaymentMethod(r){if(this.isDesigning){this.notificationState.showSuccessNotification("Only opens on the actual store");return}this.$router.push({name:"show-shop-payment-method",params:{alias:this.store.alias,order_id:this.order.id,store_payment_method_id:r.id}})},async showStorePaymentMethods(){var r,t;try{this.isLoadingStorePaymentMethods=!0;let e={params:{association:"shopper",store_id:this.store.id,_relationships:["logo","paymentMethod"].join(",")}};const i=await axios.get("/api/store-payment-methods",e);this.pagination=i.data,this.storePaymentMethods=this.pagination.data}catch(e){const i=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching payment methods";this.notificationState.showWarningNotification(i),this.formState.setServerFormErrors(e),console.error("Failed to fetch payment methods:",e)}finally{this.isLoadingStorePaymentMethods=!1}}},created(){this.store&&this.showStorePaymentMethods()}},po={class:"flex flex-col items-center"},yo={class:"space-y-3 mb-4"},bo={key:0,class:"space-y-2"},xo={class:"w-full flex justify-between items-center"},Co=["onClick"],ko={class:"flex justify-between items-center"},wo={class:"flex items-center space-x-2 font-bold"},So={class:"w-8 h-8 rounded-full overflow-hidden flex items-center justify-center"},vo=["src"],To={class:"text-sm"};function Ro(r,t,e,i,n,a){var h,c;const d=f("Skeleton"),o=f("ArrowRight");return s(),l("div",{style:w({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[u("div",po,[e.designCard.metadata.title?(s(),l("h2",{key:0,class:"text-xl font-semibold text-center mb-4",style:w({color:e.designCard.metadata.design.title_color})},p(e.designCard.metadata.title),5)):_("",!0),e.designCard.metadata.subtitle?(s(),l("h2",{key:1,class:"text-center",style:w({color:e.designCard.metadata.design.subtitle_color})},p(e.designCard.metadata.subtitle),5)):_("",!0),a.isLoadingOrder?(s(),y(d,{key:2,width:"w-40",height:"h-8",shine:!0,class:"my-4"})):(s(),l("h2",{key:3,style:w({color:e.designCard.metadata.design.amount_color}),class:"text-4xl font-semibold text-center mb-8"},p(((c=(h=a.order)==null?void 0:h.outstanding_total)==null?void 0:c.amount_with_currency)??a.fakeOutstandingTotal),5))]),u("div",yo,[a.isLoadingOrder?(s(),l("div",bo,[(s(),l(L,null,I([1,2,3],(m,x)=>u("div",{key:x,class:"flex items-center space-x-4 border-b shadow-sm rounded-lg py-6 px-4 bg-gray-50"},[R(d,{width:"w-8",height:"h-8",shine:!0,class:"flex-shrink-0"}),u("div",xo,[R(d,{width:"w-40",shine:!0}),R(d,{width:"w-8",shine:!0})])])),64))])):(s(!0),l(L,{key:1},I(n.storePaymentMethods,(m,x)=>(s(),l("div",{key:x,onClick:()=>a.navigateToStorePaymentMethod(m),class:"bg-white p-4 shadow-sm rounded-xl transition-all duration-300 border border-gray-100 hover:border-gray-300 hover:shadow-lg cursor-pointer",s:""},[u("div",ko,[u("div",wo,[u("div",So,[u("img",{alt:"Payment Method Logo",class:"h-full object-contain",src:m.logo?m.logo.path:m.payment_method.image_url},null,8,vo)]),u("span",To,p(m.payment_method.type=="other"&&m.custom_name?m.custom_name:m.payment_method.name),1)]),R(o,{size:"20"})])],8,Co))),128))])],4)}const Lo=A(fo,[["render",Ro]]),Ao={inject:["formState","storeState","orderState"],components:{X:za,Image:Ut,Pill:Pe,Input:oe,Button:xe,Skeleton:ne},props:{index:{type:Number},cartProduct:{type:Object}},data(){return{}},computed:{store(){return this.storeState.store},hasPhotoPath(){return this.photoPath!=null},photoPath(){return this.cartProduct.photo_path},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart},orderProduct(){return this.orderState.shoppingCart?this.orderState.shoppingCart.order_products.find(r=>r.product_id===this.cartProduct.id):null},errorText(){return this.formState.getFormError(`cart_products.${this.index}`)}},methods:{checkQuantity(){(typeof this.cartProduct.quantity>"u"||this.cartProduct.quantity===null||isNaN(parseInt(this.cartProduct.quantity))||parseInt(this.cartProduct.quantity)<1)&&(this.cartProduct.quantity="1")}}},Eo={class:"w-full flex items-center space-x-4"},Do=["src"],Po={class:"w-full flex items-start"},Mo={class:"w-full"},Oo={class:"text-sm"},Io={key:1,class:"text-xs space-x-2"},Fo={key:0},Bo={class:"flex justify-end"},No={class:"w-fit text-sm flex items-center border border-gray-300 rounded-full overflow-hidden"},zo={key:0,class:"scroll-to-error font-medium text-red-500 text-xs mt-1 ml-1"};function jo(r,t,e,i,n,a){const d=f("Image"),o=f("Skeleton"),h=f("Pill"),c=f("X");return s(),l("div",{class:N({"border-t border-gray-100 pt-4 mt-4":e.index>0})},[u("div",Eo,[u("div",{class:N(["flex items-center justify-center w-10 h-10 rounded-lg",{"border border-dashed border-gray-200":!a.hasPhotoPath}])},[a.hasPhotoPath?(s(),l("img",{key:0,class:"w-10 object-contain rounded-lg flex-shrink-0",src:a.photoPath},null,8,Do)):(s(),y(d,{key:1,size:"16",class:"text-gray-300"}))],2),u("div",Po,[u("div",Mo,[u("p",Oo,p(e.cartProduct.name),1),a.isInspectingShoppingCart?(s(),y(o,{key:0,width:"w-24",height:"h-4",shine:!0,class:"mt-2"})):a.orderProduct?(s(),l(L,{key:1},[a.orderProduct.is_free?(s(),y(h,{key:0,type:"success",size:"xs",showDot:!1},{default:V(()=>t[5]||(t[5]=[de("free")])),_:1,__:[5]})):(s(),l("p",Io,[u("span",{class:N({"line-through text-gray-500":a.orderProduct.on_sale})},p(a.orderProduct.subtotal.amount_with_currency),3),a.orderProduct.on_sale?(s(),l("span",Fo,p(a.orderProduct.grand_total.amount_with_currency),1)):_("",!0)]))],64)):_("",!0)]),R(c,{onClick:t[0]||(t[0]=j(()=>a.orderState.removeCartProduct(e.index,!1),["stop"])),class:"w-4 h-4 flex-shrink-0 text-gray-400 cursor-pointer hover:opacity-90 active:opacity-80 active:scale-90 transition-all"})])]),u("div",Bo,[u("div",No,[u("button",{onClick:t[1]||(t[1]=j(()=>a.orderState.decreaseCartProductQuantity(e.index,!1),["stop"])),class:"px-3 py-1 bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer"}," - "),dt(u("input",{min:"0",value:"2",type:"number",onBlur:t[2]||(t[2]=(...m)=>a.checkQuantity&&a.checkQuantity(...m)),"onUpdate:modelValue":t[3]||(t[3]=m=>e.cartProduct.quantity=m),class:"w-12 text-center border-0 focus:outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"},null,544),[[Ba,e.cartProduct.quantity]]),u("button",{onClick:t[4]||(t[4]=j(()=>a.orderState.increaseCartProductQuantity(e.index,!1),["stop"])),class:"px-3 py-1 bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer"}," + ")])]),a.errorText?(s(),l("span",zo,p(a.errorText),1)):_("",!0)],2)}const Uo=A(Ao,[["render",jo]]),qo={components:{Pill:Pe},props:{parentProduct:{type:Object,default:null},product:{type:Object},onSelectProduct:{type:Function}},computed:{photo(){return this.product.photo},hasPhoto(){return this.photo!=null}}},Vo=["src"],Ho={key:1,class:"w-6 h-6 text-gray-400 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Wo={class:"w-full flex items-center justify-between"},Go={class:"text-sm font-semibold"},Zo={class:"text-xs space-x-2"},Xo={key:0};function Yo(r,t,e,i,n,a){const d=f("Pill");return s(),l("div",{onClick:t[0]||(t[0]=()=>e.onSelectProduct(e.product,e.parentProduct)),class:"flex justify-between items-center cursor-pointer p-2 space-x-4 rounded-lg bg-gray-50 hover:bg-gray-100"},[u("div",{class:N(["flex items-center justify-center w-10 h-10 rounded-lg",{"border border-dashed border-gray-200":!a.hasPhoto}])},[a.hasPhoto?(s(),l("img",{key:0,class:"w-full max-h-10 object-contain rounded-lg flex-shrink-0",src:a.photo.path},null,8,Vo)):(s(),l("svg",Ho,t[1]||(t[1]=[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"},null,-1)])))],2),u("div",Wo,[u("div",null,[u("p",Go,p(e.product.name),1),u("p",Zo,[u("span",{class:N({"line-through text-gray-500":e.product.on_sale})},p(e.product.unit_regular_price.amount_with_currency),3),e.product.on_sale?(s(),l("span",Xo,p(e.product.unit_sale_price.amount_with_currency),1)):_("",!0)])]),e.product.variants&&e.product.variants.length?(s(),y(d,{key:0,type:"light",size:"xs"},{default:V(()=>[de(p(e.product.variants.length)+" "+p(e.product.variants.length==1?"option":"options"),1)]),_:1})):_("",!0)])])}const Qo=A(qo,[["render",Yo]]),Ko={components:{CartProductOption:Qo},props:{parentProduct:{type:Object,default:null},products:{type:Array},onSelectProduct:{type:Function}}},Jo={class:"max-h-80 overflow-y-auto space-y-2 mb-4"};function $o(r,t,e,i,n,a){const d=f("CartProductOption");return s(),l("div",Jo,[(s(!0),l(L,null,I(e.products,(o,h)=>(s(),y(d,{key:h,product:o,parentProduct:e.parentProduct,onSelectProduct:e.onSelectProduct},null,8,["product","parentProduct","onSelectProduct"]))),128))])}const rr=A(Ko,[["render",$o]]),el={components:{CartProductOptions:rr},props:{selectedProduct:{type:Object},onSelectProduct:{type:Function}}},tl={class:"space-y-2 mb-4"};function al(r,t,e,i,n,a){const d=f("CartProductOptions");return s(),l("div",tl,[R(d,{parentProduct:e.selectedProduct,onSelectProduct:e.onSelectProduct,products:e.selectedProduct.variants},null,8,["parentProduct","onSelectProduct","products"])])}const rl=A(el,[["render",al]]),nl={inject:["formState","orderState","storeState","notificationState"],components:{Input:oe,Modal:Fr,Button:xe,Skeleton:ne,CartProductOptions:rr,CartProductVariationOptions:rl},data(){return{Plus:Nr,ArrowLeft:Br,products:[],searchTerm:null,lastSearchTerm:null,selectedProduct:null,isLoadingProducts:!1,hasLoadedInitialProducts:!1}},watch:{searchTerm(){this.showProducts()}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},hasSearchTerm(){return this.isNotEmpty(this.searchTerm)},hasProducts(){return this.products.length>0}},methods:{isNotEmpty:Ze,onShow(){this.hasLoadedInitialProducts=!1,this.selectedProduct=null,this.lastSearchTerm=null,this.searchTerm=null,this.products=[],this.showProducts()},async showProducts(){var r,t;try{this.isLoadingProducts=!0;let e={params:{store_id:this.store.id,association:"team member",_relationships:"photo,variants"}};this.hasSearchTerm&&(e.params.search=this.searchTerm),this.lastSearchTerm=this.searchTerm;const i=await Na.get("/api/products",e);if(this.searchTerm===this.lastSearchTerm){const n=i.data;this.products=n.data,this.isLoadingProducts=!1,this.hasLoadedInitialProducts=!0}}catch(e){const i=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching products";this.notificationState.showWarningNotification(i),this.formState.setServerFormErrors(e),console.error("Failed to fetch products:",e)}finally{this.isLoadingProducts=!1}},onSelectProduct(r,t){r.variants&&r.variants.length>0?this.selectedProduct=r:(this.$refs.modal.hideModal(),this.orderState.addCartProductUsingProduct(r,t,null,!1))},removeSelectedProduct(){this.selectedProduct=null}}},il={class:"flex justify-center"},sl={key:0,class:"space-y-2 mb-4"},dl={class:"w-full space-y-2"},ol={class:"flex items-center space-x-4 border-b border-dashed border-gray-300 my-4 pb-4"},ll={class:"flex items-center space-x-2"},cl={key:0,class:"flex items-center justify-center w-10 h-10 rounded-lg"},gl=["src"],ul={class:"text-lg font-bold"},ml={key:3,class:"text-sm text-center p-4 rounded-lg bg-gray-50 mb-4"};function hl(r,t,e,i,n,a){const d=f("Input"),o=f("Skeleton"),h=f("Button"),c=f("CartProductVariationOptions"),m=f("CartProductOptions"),x=f("Modal");return s(),l("div",il,[R(x,{ref:"modal",onShow:a.onShow,triggerSize:"sm",contentClass:"px-4",triggerType:"light",header:"Add Product",leftTriggerIcon:n.Plus,scrollOnContent:!1,triggerText:"Add Product",showApproveButton:!1,targetClass:"mockup-phone",triggerLoading:a.isLoadingStore},{content:V(()=>[R(d,{type:"search",debounced:!0,class:"w-full my-2",modelValue:n.searchTerm,"onUpdate:modelValue":t[0]||(t[0]=C=>n.searchTerm=C),skeleton:a.isLoadingStore,placeholder:"Search products",onInput:t[1]||(t[1]=C=>n.isLoadingProducts=!0)},null,8,["modelValue","skeleton"]),n.isLoadingProducts?(s(),l("div",sl,[(s(),l(L,null,I([1,2,3],(C,D)=>u("div",{key:D,class:"flex items-center space-x-2 border-b border-gray-300 shadow-sm rounded-lg p-2 bg-gray-50 w-full"},[R(o,{width:"w-10",height:"h-10",rounded:"rounded-lg",shine:!0,class:"flex-shrink-0"}),u("div",dl,[R(o,{width:"w-2/3",shine:!0}),R(o,{width:"w-1/3",shine:!0})])])),64))])):n.selectedProduct?(s(),l(L,{key:1},[u("div",ol,[R(h,{size:"xs",type:"light",leftIcon:n.ArrowLeft,action:a.removeSelectedProduct},{default:V(()=>t[2]||(t[2]=[u("span",null,"Back",-1)])),_:1,__:[2]},8,["leftIcon","action"]),u("div",ll,[n.selectedProduct.photo.path?(s(),l("div",cl,[u("img",{class:"w-full max-h-10 object-contain rounded-lg flex-shrink-0",src:n.selectedProduct.photo.path},null,8,gl)])):_("",!0),u("p",ul,p(n.selectedProduct.name),1)])]),R(c,{onSelectProduct:a.onSelectProduct,selectedProduct:n.selectedProduct},null,8,["onSelectProduct","selectedProduct"])],64)):a.hasProducts?(s(),y(m,{key:2,products:n.products,onSelectProduct:a.onSelectProduct},null,8,["products","onSelectProduct"])):(s(),l("p",ml," No products found "))]),_:1},8,["onShow","leftTriggerIcon","triggerLoading"])])}const _l=A(nl,[["render",hl]]),fl={inject:["storeState","orderState"],components:{Skeleton:ne,CartProduct:Uo,AddCartProduct:_l},computed:{isLoadingStore(){return this.storeState.isLoadingStore},cartProducts(){return this.orderState.orderForm.cart_products},hasCartProducts(){return this.cartProducts.length>0}}},pl={key:0,class:"space-y-2"},yl={class:"w-full space-y-4"},bl={key:1,class:"space-y-4"},xl={key:0};function Cl(r,t,e,i,n,a){const d=f("Skeleton"),o=f("CartProduct"),h=f("AddCartProduct");return a.isLoadingStore?(s(),l("div",pl,[(s(),l(L,null,I([1,2,3],(c,m)=>u("div",{key:m,class:"flex items-center space-x-4 border-b border-gray-300 shadow-sm rounded-lg py-6 px-4 bg-gray-50"},[t[0]||(t[0]=u("div",{class:"flex items-center justify-center w-16 h-16 border border-dashed border-gray-200 rounded-lg flex-shrink-0"},[u("svg",{class:"w-6 h-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])],-1)),u("div",yl,[R(d,{width:"w-full",shine:!0}),R(d,{width:"w-1/3",shine:!0})])])),64))])):(s(),l("div",bl,[a.hasCartProducts?(s(),l("div",xl,[(s(!0),l(L,null,I(a.cartProducts,(c,m)=>(s(),y(o,{key:m,index:m,cartProduct:c},null,8,["index","cartProduct"]))),128))])):_("",!0),u("div",{class:N(["relative",{"flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg space-y-4 my-4":!a.hasCartProducts}])},[a.hasCartProducts?_("",!0):(s(),l(L,{key:0},[t[1]||(t[1]=u("svg",{class:"w-10 h-10 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})],-1)),t[2]||(t[2]=u("span",{class:"text-sm text-gray-500"},"No products added",-1))],64)),R(h)],2)]))}const kl=A(fl,[["render",Cl]]),wl={components:{Input:oe,CartProducts:kl},props:{designCard:{type:Object}}},Sl={class:"space-y-2 mt-4"};function vl(r,t,e,i,n,a){const d=f("CartProducts");return e.designCard.metadata.show_items?(s(),l("div",{key:0,style:w({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(s(),l("h1",{key:0,class:"text-base font-semibold",style:w({color:e.designCard.metadata.design.title_color})},p(e.designCard.metadata.title),5)):_("",!0),e.designCard.metadata.description?(s(),l("p",{key:1,class:"text-sm text-gray-700 mt-2",style:w({color:e.designCard.metadata.design.description_color})},p(e.designCard.metadata.description),5)):_("",!0),u("div",Sl,[R(d)])],4)):_("",!0)}const Tl=A(wl,[["render",vl]]),Rl={inject:["formState","orderState"],components:{Loader:gt,AddressInput:qt},props:{index:{type:Number},deliveryMethod:{type:Object}},data(){return{loadingMap:!1}},computed:{orderForm(){return this.orderState.orderForm},selectedDeliveryMethod(){return this.orderState.selectedDeliveryMethod},pinLocationOnMap(){return(this.shoppingCartDeliveryMethodOption||{}).pin_location_on_map||!1},deliveryAddressIsRequired(){return(this.shoppingCartDeliveryMethodOption||{}).delivery_address_is_required||!1},shoppingCartDeliveryMethodOption(){return this.orderState.getShoppingCartDeliveryMethodOption(this.deliveryMethod)},errorText(){return this.formState.getFormError(`delivery_methods.${this.index}.address`)}},methods:{setAddress(r){this.orderState.orderForm.delivery_address=r},unsetAddress(){this.orderState.orderForm.delivery_address=null}},created(){this.orderState.orderForm.delivery_address&&(this.loadingMap=!0,setTimeout(()=>{this.loadingMap=!1},1500))}},Ll={key:0,class:"mt-2 pt-2 border-t border-dashed border-gray-200"},Al={key:0,class:"scroll-to-error font-medium text-red-500 text-xs mt-1 ml-1"},El={key:1,class:"flex items-center justify-center py-2"};function Dl(r,t,e,i,n,a){const d=f("Loader"),o=f("AddressInput");return a.deliveryAddressIsRequired?(s(),l("div",Ll,[a.errorText?(s(),l("span",Al,p(a.errorText),1)):_("",!0),n.loadingMap?(s(),l("div",El,[R(d,null,{default:V(()=>t[0]||(t[0]=[u("span",{class:"text-sm ml-2"},"Preparing address",-1)])),_:1,__:[0]})])):(s(),y(o,{key:2,height:"200px",triggerClass:"",onlyValidate:!0,onOnDeleted:a.unsetAddress,onOnValidated:a.setAddress,targetClass:"mockup-phone",pinLocationOnMap:a.pinLocationOnMap,address:a.orderForm.delivery_address},null,8,["onOnDeleted","onOnValidated","pinLocationOnMap","address"]))])):_("",!0)}const Pl=A(Rl,[["render",Dl]]),Ml={inject:["formState","orderState"],components:{Alert:zr,Input:oe,Switch:jr,Skeleton:ne,DeliveryDatePicker:qr,DeliveryTimePicker:Ur},props:{index:{type:Number},deliveryMethod:{type:Object}},data(){return{isLoadingDateOptions:!1}},computed:{orderForm(){return this.orderState.orderForm},shoppingCart(){return this.orderState.shoppingCart},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart},scheduleIsRequired(){return(this.shoppingCartDeliveryMethodOption||{}).schedule_is_required||!1},scheduleIncompleteReasons(){return(this.shoppingCartDeliveryMethodOption||{}).schedule_incomplete_reasons||[]},shoppingCartDeliveryMethodOption(){return this.orderState.getShoppingCartDeliveryMethodOption(this.deliveryMethod)},errorText(){return this.formState.getFormError(`delivery_methods.${this.index}.schedule`)}},methods:{formattedShortWeekday:br,onIsLoadingDateOptions(r){this.isLoadingDateOptions=r}}},Ol={key:0,class:"space-y-4 pt-4 px-4"},Il={class:"space-y-2"},Fl={class:"text-sm text-gray-500"},Bl={key:0,class:"scroll-to-error font-medium text-red-500 text-xs mt-1 ml-1"},Nl={key:1,class:"flex items-center space-x-1 md:space-x-2"},zl={class:"font-medium text-red-500 text-xs md:text-sm"},jl={key:2,class:"space-y-2 border-t border-b border-dashed border-gray-300 py-4"},Ul={class:"text-sm"},ql={class:"font-bold"},Vl={key:0,class:"text-sm"},Hl={class:"font-bold"};function Wl(r,t,e,i,n,a){const d=f("DeliveryDatePicker"),o=f("DeliveryTimePicker"),h=f("Skeleton");return a.scheduleIsRequired?(s(),l("div",Ol,[u("div",Il,[t[2]||(t[2]=u("p",{class:"font-bold text-md"},"Schedule",-1)),u("div",null,[u("p",Fl,[e.deliveryMethod.schedule_type=="date"?(s(),l(L,{key:0},[de("The delivery date for this order")],64)):e.deliveryMethod.schedule_type=="date and time"?(s(),l(L,{key:1},[de("Specify the delivery date and time for this order")],64)):_("",!0)])])]),a.errorText?(s(),l("span",Bl,p(a.errorText),1)):_("",!0),R(d,{deliveryMethod:e.deliveryMethod,modelValue:a.orderForm.delivery_date,"onUpdate:modelValue":t[0]||(t[0]=c=>a.orderForm.delivery_date=c),onIsLoading:a.onIsLoadingDateOptions},null,8,["deliveryMethod","modelValue","onIsLoading"]),a.orderForm.delivery_date&&!n.isLoadingDateOptions&&e.deliveryMethod.schedule_type=="date and time"?(s(),y(o,{key:1,class:"w-full",autoSelectFirstTimeslot:!0,deliveryMethod:e.deliveryMethod,modelValue:a.orderForm.delivery_timeslot,"onUpdate:modelValue":t[1]||(t[1]=c=>a.orderForm.delivery_timeslot=c),deliveryDate:a.orderForm.delivery_date},null,8,["deliveryMethod","modelValue","deliveryDate"])):_("",!0),(s(!0),l(L,null,I(a.scheduleIncompleteReasons,(c,m)=>(s(),l("div",{key:m},[a.isInspectingShoppingCart?(s(),y(h,{key:0,width:"w-1/3",shine:!0})):(s(),l("div",Nl,[t[3]||(t[3]=u("svg",{class:"w-4 h-4 md:w-6 md:h-6 flex-shrink-0 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1)),u("span",zl,p(c),1)]))]))),128)),a.orderForm.delivery_date?(s(),l("div",jl,[u("div",Ul,[t[4]||(t[4]=u("span",null,"Delivery date: ",-1)),u("span",ql,p(a.orderForm.delivery_date)+" ("+p(a.formattedShortWeekday(a.orderForm.delivery_date))+") ",1)]),a.orderForm.delivery_timeslot?(s(),l("div",Vl,[t[5]||(t[5]=u("span",null,"Delivery time: ",-1)),u("span",Hl,p(a.orderForm.delivery_timeslot),1)])):_("",!0)])):_("",!0)])):_("",!0)}const Gl=A(Ml,[["render",Wl]]),Zl={inject:["formState","orderState"],components:{Info:Hr,CircleAlert:Vr,Skeleton:ne,OrderDeliveryMethodMap:Pl,OrderDeliveryMethodSchedule:Gl},props:{index:{type:Number},deliveryMethod:{type:Object}},computed:{shoppingCart(){return this.orderState.shoppingCart},orderForm(){return this.orderState.orderForm},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart},usesFlatFee(){return this.deliveryMethod.fee_type=="flat fee"},usesPercentageFee(){return this.deliveryMethod.fee_type=="percentage fee"},usesFeeByWeight(){return this.deliveryMethod.fee_type=="fee by weight"},usesFeeByDistance(){return this.deliveryMethod.fee_type=="fee by distance"},usesFeeByPostalCode(){return this.deliveryMethod.fee_type=="fee by postal code"},isSelectedDeliveryMethod(){return this.orderForm.delivery_method_id===this.deliveryMethod.id},shoppingCartDeliveryMethodOption(){return((this.shoppingCart||{}).delivery_method_options||[]).find(r=>r.id==this.deliveryMethod.id)},amount(){return(this.shoppingCartDeliveryMethodOption||{}).amount},tips(){return(this.shoppingCartDeliveryMethodOption||{}).tips||[]},unavailabilityReasons(){return(this.shoppingCartDeliveryMethodOption||{}).unavailability_reasons||[]},offersFreeDelivery(){return(this.shoppingCartDeliveryMethodOption||{}).free_delivery},hasTips(){return this.tips.length>0},hasUnavailabilityReasons(){return this.unavailabilityReasons.length>0},errorText(){return this.formState.getFormError(`delivery_methods.${this.index}`)}},methods:{selectDeliveryMethod(){this.orderForm.delivery_method_id=this.deliveryMethod.id}}},Xl={class:"flex items-center space-x-2"},Yl={key:0,class:"w-6 h-6 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Ql={key:1,class:"w-6 h-6 flex justify-center items-center"},Kl={class:"w-full"},Jl={class:"font-bold text-sm transition-colors"},$l={class:"text-sm transition-colors"},ec={key:0,class:"text-sm transition-colors text-green-500 font-bold"},tc={key:1,class:"text-sm transition-colors"},ac={key:2,class:"text-sm transition-colors"},rc={key:3,class:"text-sm transition-colors"},nc={key:4,class:"text-sm transition-colors"},ic={key:5,class:"text-sm transition-colors"},sc={key:1,class:"bg-red-50 mt-2 p-4"},dc={key:1,class:"flex items-center space-x-1 md:space-x-2"},oc={key:2,class:"bg-blue-50 mt-2 p-4"},lc={key:1,class:"flex items-center space-x-1 md:space-x-2"},cc={class:"font-medium italic text-xs md:text-sm text-blue-500"},gc={key:0,class:"scroll-to-error font-medium text-red-500 text-xs mt-1 ml-1"};function uc(r,t,e,i,n,a){const d=f("Skeleton"),o=f("Info"),h=f("OrderDeliveryMethodSchedule"),c=f("OrderDeliveryMethodMap");return s(),l("div",{onClick:t[0]||(t[0]=j((...m)=>a.selectDeliveryMethod&&a.selectDeliveryMethod(...m),["stop"])),class:"cursor-pointer p-2 bg-gray-50 border border-gray-300 rounded-lg transition-colors group"},[u("div",Xl,[R(xr,{name:"fade-1",mode:"out-in"},{default:V(()=>[a.isSelectedDeliveryMethod?(s(),l("svg",Yl,t[1]||(t[1]=[u("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"},null,-1)]))):(s(),l("div",Ql,t[2]||(t[2]=[u("div",{class:"w-4 h-4 bg-gray-100 border border-gray-300 rounded-full"},null,-1)])))]),_:1}),u("div",Kl,[u("p",Jl,p(e.deliveryMethod.name),1),u("p",$l,p(e.deliveryMethod.description),1),e.deliveryMethod.charge_fee&&(a.offersFreeDelivery||a.amount)?(s(),l(L,{key:0},[a.offersFreeDelivery?(s(),l("p",ec," Free delivery ")):a.usesFlatFee?(s(),l("p",tc," Flat fee of "+p(a.amount.amount_with_currency),1)):a.usesPercentageFee?(s(),l("p",ac," Percentage fee of "+p(a.amount.amount_with_currency)+" ("+p(e.deliveryMethod.percentage_fee_rate)+"%) ",1)):a.usesFeeByWeight?(s(),l("p",rc," Weight fee of "+p(a.amount.amount_with_currency)+" ("+p(a.shoppingCartDeliveryMethodOption.weight.text)+") ",1)):a.usesFeeByDistance?(s(),l("p",nc," Distance fee of "+p(a.amount.amount_with_currency)+" ("+p(a.shoppingCartDeliveryMethodOption.distance.text)+") ",1)):a.usesFeeByPostalCode?(s(),l("p",ic," Distance fee of "+p(a.amount.amount_with_currency)+" ("+p(a.shoppingCartDeliveryMethodOption.distance.text)+") ",1)):_("",!0)],64)):_("",!0),a.hasUnavailabilityReasons?(s(),l("div",sc,[(s(!0),l(L,null,I(a.unavailabilityReasons,(m,x)=>(s(),l("div",{key:x},[a.isInspectingShoppingCart?(s(),y(d,{key:0,width:"w-1/3",shine:!0})):(s(),l("div",dc,[R(o,{size:"16",class:N(["flex-shrink-0",a.isSelectedDeliveryMethod?"text-red-500":"text-blue-500"])},null,8,["class"]),u("span",{class:N(["font-medium italic text-xs md:text-sm",a.isSelectedDeliveryMethod?"text-red-500":"text-blue-500"])},p(m),3)]))]))),128))])):_("",!0),a.hasTips&&!a.hasUnavailabilityReasons?(s(),l("div",oc,[(s(!0),l(L,null,I(a.tips,(m,x)=>(s(),l("div",{key:x},[a.isInspectingShoppingCart?(s(),y(d,{key:0,width:"w-1/3",shine:!0})):(s(),l("div",lc,[R(o,{size:"16",class:"flex-shrink-0 text-blue-500"}),u("span",cc,p(m),1)]))]))),128))])):_("",!0)])]),a.isSelectedDeliveryMethod?(s(),l(L,{key:0},[a.errorText?(s(),l("span",gc,p(a.errorText),1)):_("",!0),R(h,{index:e.index,deliveryMethod:e.deliveryMethod},null,8,["index","deliveryMethod"]),R(c,{index:e.index,deliveryMethod:e.deliveryMethod},null,8,["index","deliveryMethod"])],64)):_("",!0)])}const mc=A(Zl,[["render",uc]]),hc={inject:["formState","storeState","orderState","notificationState"],components:{Skeleton:ne,OrderDeliveryMethod:mc},watch:{store(r,t){!t&&r&&this.showDeliveryMethods()}},computed:{store(){return this.storeState.store},orderForm(){return this.orderState.orderForm},isLoadingStore(){return this.storeState.isLoadingStore},deliveryMethod(){return this.orderState.deliveryMethod},deliveryMethods(){return this.orderState.deliveryMethods},hasDeliveryMethods(){return this.orderState.hasDeliveryMethods},errorText(){return this.formState.getFormError("delivery_methods")}},methods:{async showDeliveryMethods(){var r,t;try{this.orderState.isLoadingDeliveryMethods=!0;let e={params:{per_page:100,store_id:this.store.id}};const n=(await Na.get("/api/delivery-methods",e)).data;this.orderState.deliveryMethods=n.data}catch(e){const i=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching delivery methods";this.notificationState.showWarningNotification(i),this.formState.setServerFormErrors(e),console.error("Failed to fetch delivery methods:",e)}finally{this.orderState.isLoadingDeliveryMethods=!1}}},created(){this.store&&this.showDeliveryMethods()}},_c={key:0,class:"flex items-center space-x-4 rounded-lg"},fc={class:"w-full space-y-4"},pc={key:1,class:"space-y-2"},yc={key:0,class:"scroll-to-error font-medium text-red-500 text-xs mt-1 ml-1"},bc={key:1,class:"flex flex-col items-center justify-center p-4 bg-gray-50 rounded-lg space-y-4 my-4"};function xc(r,t,e,i,n,a){const d=f("Skeleton"),o=f("OrderDeliveryMethod");return a.isLoadingStore?(s(),l("div",_c,[t[0]||(t[0]=u("div",{class:"flex items-center justify-center w-16 h-16 border border-dashed border-gray-200 rounded-lg flex-shrink-0"},[u("svg",{class:"w-6 h-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})])],-1)),u("div",fc,[R(d,{width:"w-full",shine:!0}),R(d,{width:"w-1/3",shine:!0})])])):(s(),l("div",pc,[a.hasDeliveryMethods?(s(),l(L,{key:0},[(s(!0),l(L,null,I(a.deliveryMethods,(h,c)=>(s(),y(o,{key:c,index:c,deliveryMethod:h},null,8,["index","deliveryMethod"]))),128)),a.errorText?(s(),l("span",yc,p(a.errorText),1)):_("",!0)],64)):(s(),l("div",bc,[a.hasDeliveryMethods?_("",!0):(s(),l(L,{key:0},[t[1]||(t[1]=u("svg",{class:"w-10 h-10 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})],-1)),t[2]||(t[2]=u("span",{class:"text-sm text-gray-500"},"No delivery methods",-1))],64))]))]))}const Cc=A(hc,[["render",xc]]),kc={components:{Input:oe,OrderDeliveryMethods:Cc},props:{designCard:{type:Object}}},wc={class:"space-y-2 mt-4"};function Sc(r,t,e,i,n,a){const d=f("OrderDeliveryMethods");return e.designCard.metadata.show_delivery_methods?(s(),l("div",{key:0,style:w({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(s(),l("h1",{key:0,class:"text-base font-semibold",style:w({color:e.designCard.metadata.design.title_color})},p(e.designCard.metadata.title),5)):_("",!0),e.designCard.metadata.description?(s(),l("p",{key:1,class:"text-sm text-gray-700 mt-2",style:w({color:e.designCard.metadata.design.description_color})},p(e.designCard.metadata.description),5)):_("",!0),u("div",wc,[R(d)])],4)):_("",!0)}const vc=A(kc,[["render",Sc]]),Tc={inject:["orderState","storeState"],components:{Skeleton:ne},computed:{isLoadingStore(){return this.storeState.isLoadingStore},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart},isReady(){return!this.isLoadingStore&&!this.isInspectingShoppingCart},shoppingCart(){return this.orderState.shoppingCart},hasFees(){return Object.keys(this.shoppingCart.totals.fees).length>0},hasDiscounts(){return Object.keys(this.shoppingCart.totals.discounts).length>0},hasTaxAmount(){return this.shoppingCart.totals.vat.amount.amount>0},hasAdjustmentTotal(){return this.shoppingCart.totals.adjustment_total.amount!=0},adjustmentTotalPositive(){return this.shoppingCart.totals.adjustment_total.amount>0}}},Rc={key:0,class:"flex items-center space-x-4"},Lc={class:"w-full space-y-4"},Ac={key:1,class:"bg-blue-50 border border-blue-400 rounded-lg p-4"},Ec={key:0,class:"flex items-center justify-between text-sm border-b border-gray-300 border-dashed pb-2 mb-2"},Dc={key:1},Pc={key:1,class:"border-b border-gray-300 border-dashed pb-2 mb-2"},Mc={key:1},Oc={key:3,class:"text-red-500"},Ic={key:2,class:"border-b border-gray-300 border-dashed pb-2 mb-2"},Fc={class:"flex items-center justify-between text-sm mb-1"},Bc={key:1,class:"w-full"},Nc={key:3},zc={key:1,class:"text-xs text-gray-400"},jc={key:3,class:"border-b border-gray-300 border-dashed pb-2 mb-2"},Uc={key:1},qc={key:3,class:"text-green-500"},Vc={key:4,class:"border-b border-gray-300 border-dashed pb-2 mb-2"},Hc={class:"flex items-center justify-between text-sm text-gray-500"},Wc={key:1},Gc={class:"flex items-center justify-between text-lg"},Zc={key:1,class:"font-bold"},Xc={key:1,class:"text-sm"};function Yc(r,t,e,i,n,a){const d=f("Skeleton");return s(),l("div",null,[a.isLoadingStore?(s(),l("div",Rc,[t[0]||(t[0]=u("div",{class:"flex items-center justify-center w-16 h-16 border border-dashed border-gray-200 rounded-lg flex-shrink-0"},[u("svg",{class:"w-6 h-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])],-1)),u("div",Lc,[R(d,{width:"w-full",shine:!0}),R(d,{width:"w-1/3",shine:!0})])])):(s(),l("div",Ac,[a.shoppingCart?(s(),l(L,{key:0},[!a.isReady||a.hasDiscounts||a.hasFees?(s(),l("div",Ec,[t[1]||(t[1]=u("span",null,"Subtotal",-1)),a.isReady?(s(),l("span",Dc,p(a.shoppingCart.totals.subtotal.amount_with_currency),1)):(s(),y(d,{key:0,width:"w-24",color:"bg-blue-200",shine:!0}))])):_("",!0),!a.isReady||a.hasDiscounts?(s(),l("div",Pc,[(s(!0),l(L,null,I(a.isReady?a.shoppingCart.totals.discounts:[1],(o,h)=>(s(),l("div",{key:h,class:"flex items-center justify-between text-sm text-gray-500"},[a.isReady?(s(),l("span",Mc,p(o.name),1)):(s(),y(d,{key:0,width:"w-24",color:"bg-blue-200",shine:!0})),a.isReady?(s(),l("span",Oc,"- "+p(o.amount.amount_with_currency),1)):(s(),y(d,{key:2,width:"w-20",color:"bg-blue-200",shine:!0}))]))),128))])):_("",!0),!a.isReady||a.hasTaxAmount?(s(),l("div",Ic,[u("div",Fc,[a.isReady?(s(),l("div",Bc,"Tax ("+p(a.shoppingCart.totals.vat.rate.value_symbol)+" "+p(a.shoppingCart.totals.vat.method)+")",1)):(s(),y(d,{key:0,width:"w-16",color:"bg-blue-200",shine:!0})),a.isReady?(s(),l("span",Nc,p(a.shoppingCart.totals.vat.amount.amount_with_currency),1)):(s(),y(d,{key:2,width:"w-16",color:"bg-blue-200",shine:!0}))]),a.isReady?(s(),l("p",zc,"Tax calculated on the discounted subtotal of "+p(a.shoppingCart.totals.subtotal_after_discount.amount_with_currency),1)):(s(),y(d,{key:0,width:"w-1/3",color:"bg-blue-200",shine:!0}))])):_("",!0),!a.isReady||a.hasFees?(s(),l("div",jc,[(s(!0),l(L,null,I(a.isReady?a.shoppingCart.totals.fees:[1],(o,h)=>(s(),l("div",{key:h,class:"flex items-center justify-between text-sm text-gray-500"},[a.isReady?(s(),l("span",Uc,p(o.name),1)):(s(),y(d,{key:0,width:"w-20",color:"bg-blue-200",shine:!0})),a.isReady?(s(),l("span",qc,"+ "+p(o.amount.amount_with_currency),1)):(s(),y(d,{key:2,width:"w-16",color:"bg-blue-200",shine:!0}))]))),128))])):_("",!0),!a.isReady||a.hasAdjustmentTotal?(s(),l("div",Vc,[u("div",Hc,[a.isReady?(s(),l("span",Wc,"Adjustment")):(s(),y(d,{key:0,width:"w-20",color:"bg-blue-200",shine:!0})),a.isReady?(s(),l("span",{key:3,class:N([a.adjustmentTotalPositive?"text-green-500":"text-red-500"])},p(a.adjustmentTotalPositive?"+":"-")+" "+p(`${a.shoppingCart.totals.adjustment_total.amount_with_currency}`.replace("-","")),3)):(s(),y(d,{key:2,width:"w-16",color:"bg-blue-200",shine:!0}))])])):_("",!0),u("div",Gc,[t[2]||(t[2]=u("div",{class:"w-full font-bold"},"Grand Total",-1)),a.isReady?(s(),l("span",Zc,p(a.shoppingCart.totals.grand_total.amount_with_currency),1)):(s(),y(d,{key:0,width:"w-24",color:"bg-blue-200",shine:!0}))])],64)):(s(),l("span",Xc,"Add products to show total"))]))])}const Qc=A(Tc,[["render",Yc]]),Kc={inject:["formState","orderState"],components:{OrderTotals:Qc},props:{designCard:{type:Object}}};function Jc(r,t,e,i,n,a){const d=f("OrderTotals");return s(),l("div",{style:w({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(s(),l("h1",{key:0,class:"text-base font-semibold",style:w({color:e.designCard.metadata.design.title_color})},p(e.designCard.metadata.title),5)):_("",!0),e.designCard.metadata.description?(s(),l("p",{key:1,class:"text-sm text-gray-700 mt-2",style:w({color:e.designCard.metadata.design.description_color})},p(e.designCard.metadata.description),5)):_("",!0),R(d,{class:"mt-4"})],4)}const $c=A(Kc,[["render",Jc]]),eg={inject:["formState","orderState"],components:{Input:oe,Skeleton:ne,CircleCheckBig:Wr},props:{designCard:{type:Object}},computed:{orderForm(){return this.orderState.orderForm},shoppingCart(){return this.orderState.shoppingCart},promotionCode(){return this.shoppingCart.promotion_code},isInspectingShoppingCart(){return this.orderState.isInspectingShoppingCart}}},tg={class:"space-y-4 mt-4"},ag={class:"flex items-center space-x-4"},rg={key:1,class:"py-2 px-4 border-l-4 border-green-500 bg-green-50 rounded-sm"},ng={class:"text-sm font-bold mb-1"},ig={class:"text-sm italic"};function sg(r,t,e,i,n,a){const d=f("Input"),o=f("CircleCheckBig"),h=f("Skeleton");return e.designCard.metadata.show_promo_code?(s(),l("div",{key:0,style:w({backgroundColor:e.designCard.metadata.design.bg_color,marginTop:`${e.designCard.metadata.design.t_margin??0}px`,marginLeft:`${e.designCard.metadata.design.l_margin??0}px`,marginRight:`${e.designCard.metadata.design.r_margin??0}px`,marginBottom:`${e.designCard.metadata.design.b_margin??0}px`,paddingTop:`${e.designCard.metadata.design.t_padding??0}px`,paddingLeft:`${e.designCard.metadata.design.l_padding??0}px`,paddingRight:`${e.designCard.metadata.design.r_padding??0}px`,paddingBottom:`${e.designCard.metadata.design.b_padding??0}px`,borderTopLeftRadius:`${e.designCard.metadata.design.tl_border_radius??0}px`,borderTopRightRadius:`${e.designCard.metadata.design.tr_border_radius??0}px`,borderBottomLeftRadius:`${e.designCard.metadata.design.bl_border_radius??0}px`,borderBottomRightRadius:`${e.designCard.metadata.design.br_border_radius??0}px`,borderTop:`${e.designCard.metadata.design.t_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderLeft:`${e.designCard.metadata.design.l_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderRight:`${e.designCard.metadata.design.r_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`,borderBottom:`${e.designCard.metadata.design.b_border??0}px solid ${e.designCard.metadata.design.border_color??"#000000"}`})},[e.designCard.metadata.title?(s(),l("h1",{key:0,class:"text-base font-semibold",style:w({color:e.designCard.metadata.design.title_color})},p(e.designCard.metadata.title),5)):_("",!0),e.designCard.metadata.description?(s(),l("p",{key:1,class:"text-sm text-gray-700 mt-2",style:w({color:e.designCard.metadata.design.description_color})},p(e.designCard.metadata.description),5)):_("",!0),u("div",tg,[u("div",ag,[R(d,{type:"text",class:"w-full",modelValue:a.orderForm.promotion_code,"onUpdate:modelValue":t[0]||(t[0]=c=>a.orderForm.promotion_code=c),placeholder:"Enter discount or referral code",errorText:a.formState.getFormError("promotion_code")},null,8,["modelValue","errorText"]),a.shoppingCart&&a.promotionCode.applied?(s(),y(o,{key:0,size:"24",class:"text-green-500"})):_("",!0)]),a.isInspectingShoppingCart&&a.orderForm.promotion_code?(s(),y(h,{key:0,width:"w-1/3",shine:!0})):a.shoppingCart&&a.promotionCode.applied?(s(),l("div",rg,[u("p",ng,p(a.promotionCode.name),1),u("p",ig,p(a.promotionCode.message),1)])):_("",!0)])],4)):_("",!0)}const dg=A(eg,[["render",sg]]),og={inject:["designState","orderState","storeState"],components:{ShoppingCart:ja,Button:xe,MyCartButton:En,PlaceOrderButton:Mn,MapDesignCard:Hi,LogoDesignCard:Zi,LinkDesignCard:$i,TextDesignCard:as,ImageDesignCard:ls,VideoDesignCard:ps,ContactDesignCard:Rs,BannerDesignCard:ks,DividerDesignCard:Es,SocialsDesignCard:zs,CustomerDesignCard:Vs,ProductsDesignCard:$s,CountdownDesignCard:id,CategoriesDesignCard:jd,InstallAppDesignCard:Zd,TipsDesignCard:ao,DataCollectionDesignCard:_o,PaymentMethodsDesignCard:Lo,ItemsDesignCard:Tl,DeliveryDesignCard:vc,OrderSummaryCard:$c,PromoCodeDesignCard:dg},props:{placement:{type:String},designCards:{type:Array}},data(){return{localDesignCards:[]}},computed:{designForm(){return this.designState.designForm},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)},shoppingCart(){return this.orderState.shoppingCart},showingCheckout(){return this.$route.name=="show-checkout"},showingStorefront(){return this.$route.name=="show-storefront"},grandTotal(){return this.shoppingCart?this.shoppingCart.totals.grand_total.amount_with_currency:null},totalUncancelledProductQuantities(){return this.shoppingCart?this.shoppingCart.totals_summary.order_products.total_uncancelled_product_quantities:null}},methods:{isDataCollectionField(r){return["short answer","long answer","number","date","time","checkbox","selection","location","media"].includes(r.type)}}},lg={class:"space-y-2"};function cg(r,t,e,i,n,a){const d=f("LogoDesignCard"),o=f("LinkDesignCard"),h=f("MapDesignCard"),c=f("TextDesignCard"),m=f("ImageDesignCard"),x=f("VideoDesignCard"),C=f("DividerDesignCard"),D=f("BannerDesignCard"),v=f("ContactDesignCard"),F=f("SocialsDesignCard"),X=f("CategoriesDesignCard"),be=f("InstallAppDesignCard"),Se=f("CountdownDesignCard"),le=f("TipsDesignCard"),U=f("ItemsDesignCard"),ce=f("ProductsDesignCard"),ge=f("CustomerDesignCard"),ue=f("DeliveryDesignCard"),_t=f("OrderSummaryCard"),ft=f("PromoCodeDesignCard"),pt=f("DataCollectionDesignCard"),G=f("PaymentMethodsDesignCard"),Me=f("MyCartButton"),Oe=f("PlaceOrderButton");return s(),l("div",lg,[u("div",{class:N([{"mb-20":a.showingStorefront}])},[(s(!0),l(L,null,I(e.designCards,(T,yt)=>(s(),l(L,{key:(T==null?void 0:T.id)??T.temporary_id},[!T.hasOwnProperty("delete")&&T.visible?(s(),l(L,{key:0},[T.type=="logo"?(s(),y(d,{key:0,designCard:T},null,8,["designCard"])):_("",!0),T.type=="link"?(s(),y(o,{key:1,designCard:T},null,8,["designCard"])):T.type=="map"?(s(),y(h,{key:2,designCard:T},null,8,["designCard"])):T.type=="text"?(s(),y(c,{key:3,designCard:T},null,8,["designCard"])):T.type=="image"?(s(),y(m,{key:4,designCard:T},null,8,["designCard"])):T.type=="video"?(s(),y(x,{key:5,designCard:T},null,8,["designCard"])):_("",!0),T.type=="divider"?(s(),y(C,{key:6,designCard:T},null,8,["designCard"])):T.type=="banner"?(s(),y(D,{key:7,designCard:T},null,8,["designCard"])):T.type=="contact"?(s(),y(v,{key:8,designCard:T},null,8,["designCard"])):T.type=="socials"?(s(),y(F,{key:9,designCard:T},null,8,["designCard"])):_("",!0),T.type=="categories"?(s(),y(X,{key:10,designCard:T},null,8,["designCard"])):_("",!0),T.type=="install_app"?(s(),y(be,{key:11,designCard:T},null,8,["designCard"])):T.type=="countdown"?(s(),y(Se,{key:12,designCard:T},null,8,["designCard"])):T.type=="tips"?(s(),y(le,{key:13,designCard:T},null,8,["designCard"])):T.type=="items"?(s(),y(U,{key:14,designCard:T},null,8,["designCard"])):T.type=="products"?(s(),y(ce,{key:15,designCard:T},null,8,["designCard"])):T.type=="customer"?(s(),y(ge,{key:16,designCard:T},null,8,["designCard"])):T.type=="delivery"?(s(),y(ue,{key:17,designCard:T},null,8,["designCard"])):T.type=="order summary"?(s(),y(_t,{key:18,designCard:T},null,8,["designCard"])):T.type=="promo code"?(s(),y(ft,{key:19,designCard:T},null,8,["designCard"])):a.isDataCollectionField(T)?(s(),y(pt,{key:20,index:yt,designCard:T},null,8,["index","designCard"])):T.type=="payment methods"?(s(),y(G,{key:21,designCard:T},null,8,["designCard"])):_("",!0)],64)):_("",!0)],64))),128))],2),a.showingStorefront&&a.shoppingCart?(s(),y(Me,{key:0})):a.showingCheckout&&a.shoppingCart?(s(),y(Oe,{key:1,placement:e.placement,designCards:e.designCards},null,8,["placement","designCards"])):_("",!0)])}const gg=A(og,[["render",cg]]),ug={components:{Loader:gt},props:{placement:{type:String}}},mg={class:"pt-8 flex items-center justify-center"},hg={class:"text-sm ml-2"};function _g(r,t,e,i,n,a){const d=f("Loader");return s(),l("div",mg,[R(d,null,{default:V(()=>[u("span",hg,"Loading "+p(e.placement=="storefront"?"store":e.placement),1)]),_:1})])}const fg=A(ug,[["render",_g]]),pg={inject:["formState","designState","storeState","notificationState"],components:{Button:xe,NoDesignCards:Kr,DesignCards:gg,LoadingDesignCards:fg},props:{placement:{type:String}},data(){return{MoveLeft:Gr,apiDesignCards:[],isLoadingDesignCards:!1}},watch:{store(){this.setup()},loadFromApi(){this.setup()}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},designForm(){return this.designState.designForm},isDesigning(){return["edit-storefront","edit-checkout","edit-payment","edit-menu"].includes(this.$route.name)},loadFromApi(){return this.$route.name=="edit-storefront"&&this.placement=="menu"||this.$route.name=="edit-menu"&&this.placement=="storefront"||!this.isDesigning},designCards(){var r;return this.loadFromApi?this.apiDesignCards:((r=this.designForm)==null?void 0:r.design_cards)??[]},hasApiDesignCards(){return this.apiDesignCards.length>0},hasDesignCards(){return this.designCards.filter(r=>!r.hasOwnProperty("delete")).length>0}},methods:{async setup(){this.store&&this.loadFromApi&&!this.hasApiDesignCards&&this.showDesignCards()},async navigateToStorefront(){await this.$router.push({name:"show-storefront",params:{alias:this.store.alias}})},async showDesignCards(){var r,t;try{this.isLoadingDesignCards=!0;let e={params:{per_page:100,store_id:this.store.id,placement:this.placement,_relationships:["address","photos"].join(",")}};const i=await axios.get("/api/design-cards",e);this.apiDesignCards=i.data.data}catch(e){const i=((t=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong while fetching design cards";this.notificationState.showWarningNotification(i),this.formState.setServerFormErrors(e),console.error("Failed to fetch design cards:",e)}finally{this.isLoadingDesignCards=!1}}},beforeUnmount(){!this.isDesigning&&this.placement!="menu"&&(console.log("this.designState.reset() 1"),this.designState.reset())},created(){this.setup()}};function yg(r,t,e,i,n,a){const d=f("LoadingDesignCards"),o=f("Button"),h=f("DesignCards"),c=f("NoDesignCards");return s(),l("div",null,[a.isLoadingStore||n.isLoadingDesignCards||a.designState.isLoadingDesignCards?(s(),y(d,{key:0,placement:e.placement},null,8,["placement"])):(s(),l(L,{key:1},[e.placement=="checkout"?(s(),y(o,{key:0,size:"xs",type:"light",class:"mt-8 m-4",leftIcon:n.MoveLeft,action:a.navigateToStorefront},{default:V(()=>t[0]||(t[0]=[u("span",null,"Shop",-1)])),_:1,__:[0]},8,["leftIcon","action"])):_("",!0),a.hasDesignCards?(s(),y(h,{key:1,placement:e.placement,designCards:a.designCards},null,8,["placement","designCards"])):(s(),y(c,{key:2}))],64))])}const $g=A(pg,[["render",yg]]);export{$g as D,En as M};
