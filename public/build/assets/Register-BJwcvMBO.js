import{j as y,c as u,b as i,a as n,r as l,w as S,e as b,g as h,t as f,h as v,o as p,i as E}from"./app-C9fKn4Wu.js";import{L as V}from"./Logo-Jvt7Q30m.js";import{I as T}from"./Input-BpvCbPzt.js";import{B as F}from"./Button-B6uWpkNJ.js";import{S as k}from"./SocialLinks-D4M07wvU.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Copy-MnYDw6Fb.js";import"./ShineEffect-CamUJCMA.js";import"./createLucideIcon-aSWH95Ml.js";import"./Popover-DkgXtOm4.js";import"./Skeleton-D3J4oatQ.js";import"./Loader-7AMjb3nm.js";const B={name:"SlideUpDown",props:{active:Boolean,duration:{type:Number,default:500},tag:{type:String,default:"div"},useHidden:{type:Boolean,default:!0}},data:()=>({style:{},initial:!1,hidden:!1}),watch:{active(){this.layout()}},render(){return y(this.tag,{...this.attrs,style:this.style,ref:"container",onTransitionend:this.onTransitionEnd},this.$slots.default())},mounted(){this.layout(),this.initial=!0},created(){this.hidden=!this.active},computed:{el(){return this.$refs.container},attrs(){const e={"aria-hidden":!this.active,"aria-expanded":this.active};return this.useHidden&&(e.hidden=this.hidden),e}},methods:{layout(){this.active?(this.hidden=!1,this.$emit("open-start"),this.initial&&this.setHeight("0px",()=>this.el.scrollHeight+"px")):(this.$emit("close-start"),this.setHeight(this.el.scrollHeight+"px",()=>"0px"))},asap(e){this.initial?this.$nextTick(e):e()},setHeight(e,t){this.style={height:e},this.asap(()=>{this.__=this.el.scrollHeight,this.style={height:t(),overflow:"hidden","transition-property":"height","transition-duration":this.duration+"ms"}})},onTransitionEnd(e){e.target===this.el&&(this.active?(this.style={},this.$emit("open-end")):(this.style={height:"0",overflow:"hidden"},this.hidden=!0,this.$emit("close-end")))}}},N={name:"Register",components:{Logo:V,Input:T,Button:F,SocialLinks:k,VueSlideUpDown:B},inject:["authState","formState","notificationState"],data(){return{form:{email:"",password:"",last_name:"",first_name:"",confirm_password:""},loading:!1,currentYear:new Date().getFullYear()}},computed:{expand(){return this.form.first_name.trim().length>0&&this.form.last_name.trim().length>0}},methods:{async submit(){var e,t;if(!this.loading&&(this.formState.hideFormErrors(),this.form.first_name.trim()===""?this.formState.setFormError("first_name","Enter your first name"):this.form.last_name.trim()===""?this.formState.setFormError("last_name","Enter your last name"):this.form.email.trim()===""?this.formState.setFormError("email","Enter your email"):this.form.password.trim()===""?this.formState.setFormError("password","Enter your password"):this.form.confirm_password.trim()===""?this.formState.setFormError("confirm_password","Confirm your password"):this.form.password!=this.form.confirm_password&&this.formState.setFormError("password","Passwords do not match"),!this.formState.hasErrors)){this.loading=!0;try{const m=(await v.post("/api/auth/register",this.form)).data.token;this.authState.setTokenOnRequest(m),this.authState.setTokenOnLocalStorage(m),this.$router.push({name:"show-stores"}),this.notificationState.showSuccessNotification("Account created!")}catch(a){const m=((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||(a==null?void 0:a.message)||"Something went wrong while signing up";this.notificationState.showWarningNotification(m),this.formState.setServerFormErrors(a),console.error("Failed to sign up:",a)}finally{this.loading=!1}}}}},C={class:"min-h-screen grid grid-cols-1 lg:grid-cols-2 transition-opacity opacity-100 duration-750 lg:grow starting:opacity-0"},H={class:"flex items-center justify-center p-6 bg-gradient-to-b from-blue-100 to-white-100"},j={class:"w-full max-w-md"},U={class:"bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6"},D={key:0,class:"text-red-500 text-sm mb-3"},A={class:"flex justify-end mb-6"},I={class:"ml-1"},P={class:"text-sm text-center text-gray-500"};function O(e,t,a,m,r,s){const c=l("Logo"),d=l("Input"),g=l("vue-slide-up-down"),w=l("router-link"),_=l("Button"),x=l("SocialLinks");return p(),u("div",C,[i("div",H,[i("div",j,[n(c,{height:"h-20 mx-auto mb-4"}),i("div",U,[t[7]||(t[7]=i("h1",{class:"text-2xl font-semibold leading-none tracking-tight mb-4"},"Sign up",-1)),t[8]||(t[8]=i("h1",{class:"text-sm text-gray-500 mb-4"},"Lets create your account",-1)),i("form",{onSubmit:t[5]||(t[5]=S((...o)=>s.submit&&s.submit(...o),["prevent"])),class:"space-y-4"},[n(d,{type:"text",label:"First Name",placeholder:"John",modelValue:r.form.first_name,"onUpdate:modelValue":t[0]||(t[0]=o=>r.form.first_name=o),errorText:s.formState.getFormError("first_name")},null,8,["modelValue","errorText"]),n(d,{type:"text",label:"Last Name",placeholder:"Doe",modelValue:r.form.last_name,"onUpdate:modelValue":t[1]||(t[1]=o=>r.form.last_name=o),errorText:s.formState.getFormError("last_name")},null,8,["modelValue","errorText"]),n(g,{active:s.expand,class:"space-y-4"},{default:h(()=>[n(d,{type:"email",label:"Email",modelValue:r.form.email,"onUpdate:modelValue":t[2]||(t[2]=o=>r.form.email=o),placeholder:"john@gmail.com",errorText:s.formState.getFormError("email")},null,8,["modelValue","errorText"]),n(d,{type:"password",label:"Password",placeholder:"******",modelValue:r.form.password,"onUpdate:modelValue":t[3]||(t[3]=o=>r.form.password=o),errorText:s.formState.getFormError("password")},null,8,["modelValue","errorText"]),n(d,{type:"password",placeholder:"******",label:"Confirm Password",modelValue:r.form.confirm_password,"onUpdate:modelValue":t[4]||(t[4]=o=>r.form.confirm_password=o),errorText:s.formState.getFormError("confirm_password")},null,8,["modelValue","errorText"])]),_:1},8,["active"]),s.formState.generalErrorText?(p(),u("div",D,f(s.formState.generalErrorText),1)):b("",!0),i("div",A,[n(w,{to:{name:"login"},class:"text-sm text-blue-600 hover:underline"},{default:h(()=>t[6]||(t[6]=[E("Already have an account?")])),_:1,__:[6]})]),n(_,{size:"md",type:"primary",action:s.submit,buttonClass:"w-full"},{default:h(()=>[i("span",I,f(r.loading?"Creating account...":"Create Account"),1)]),_:1},8,["action"])],32)]),n(x,{class:"mb-6"}),i("p",P,"Â© "+f(r.currentYear)+" Perfect Order. All rights reserved.",1)])]),t[9]||(t[9]=i("div",{class:"hidden lg:block"},[i("img",{src:"/images/lady-with-laptop.jpg",class:"w-full h-full object-cover",alt:"Lady holding boxes"})],-1))])}const $=L(N,[["render",O]]);export{$ as default};
