import{c as u,b as s,a as i,r as m,w as x,e as S,g as f,t as p,h as E,o as c,i as b}from"./app-DF0QnPU4.js";import{L as V}from"./Logo-D52w7pw0.js";import{I as v}from"./Input-l_fu_pN6.js";import{B as F}from"./Button-D7saANb7.js";import{i as T}from"./stringUtils-Bvzw0-oW.js";import{V as k}from"./vue-slide-up-down-MDMNdm5M.js";import{S as L}from"./SocialLinks-B_hCZ3Rb.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Copy-DudZ5Uvs.js";import"./ShineEffect-BVNWGq73.js";import"./createLucideIcon-eN94IJz_.js";import"./Popover-DmuV9HMk.js";import"./x-DdzUJel4.js";import"./Skeleton-DAfv9Rr0.js";import"./refresh-ccw-BWvWNHcU.js";import"./circle-check-B1WpMwJ7.js";import"./circle-alert-ByShgotJ.js";import"./parsePhoneNumber-DR0S47Bc.js";import"./Loader-CNeQD6e9.js";const N={name:"Register",components:{Logo:V,Input:v,Button:F,SocialLinks:L,VueSlideUpDown:k},inject:["authState","formState","notificationState"],data(){return{form:{email:"",password:"",last_name:"",first_name:"",confirm_password:""},loading:!1,currentYear:new Date().getFullYear()}},computed:{expand(){return this.isEmpty(this.form.first_name)&&this.isEmpty(this.form.last_name)}},methods:{isEmpty:T,async submit(){var d,t;if(!this.loading&&(this.formState.hideFormErrors(),this.isEmpty(this.form.first_name)?this.formState.setFormError("first_name","Enter your first name"):this.isEmpty(this.form.last_name)?this.formState.setFormError("last_name","Enter your last name"):this.isEmpty(this.form.email)?this.formState.setFormError("email","Enter your email"):this.isEmpty(this.form.password)?this.formState.setFormError("password","Enter your password"):this.isEmpty(this.form.confirm_password)?this.formState.setFormError("confirm_password","Confirm your password"):this.form.password!=this.form.confirm_password&&this.formState.setFormError("password","Passwords do not match"),!this.formState.hasErrors)){this.loading=!0;try{const n=(await E.post("/api/auth/register",this.form)).data.token;this.authState.setTokenOnRequest(n),this.authState.setTokenOnLocalStorage(n),this.$router.push({name:"show-stores"}),this.notificationState.showSuccessNotification("Account created!")}catch(a){const n=((t=(d=a==null?void 0:a.response)==null?void 0:d.data)==null?void 0:t.message)||(a==null?void 0:a.message)||"Something went wrong while signing up";this.notificationState.showWarningNotification(n),this.formState.setServerFormErrors(a),console.error("Failed to sign up:",a)}finally{this.loading=!1}}}}},B={class:"min-h-screen grid grid-cols-1 lg:grid-cols-2 transition-opacity opacity-100 duration-750 lg:grow starting:opacity-0"},j={class:"flex items-center justify-center p-6 bg-gradient-to-b from-blue-100 to-white-100"},U={class:"w-full max-w-md"},A={class:"bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6"},D={key:0,class:"text-red-500 text-sm mb-3"},I={class:"flex justify-end mb-6"},P={class:"ml-1"},O={class:"text-sm text-center text-gray-500"};function R(d,t,a,n,e,r){const h=m("Logo"),l=m("Input"),g=m("vue-slide-up-down"),_=m("router-link"),w=m("Button"),y=m("SocialLinks");return c(),u("div",B,[s("div",j,[s("div",U,[i(h,{height:"h-20 mx-auto mb-4"}),s("div",A,[t[7]||(t[7]=s("h1",{class:"text-2xl font-semibold leading-none tracking-tight mb-4"},"Sign up",-1)),t[8]||(t[8]=s("h1",{class:"text-sm text-gray-500 mb-4"},"Lets create your account",-1)),s("form",{onSubmit:t[5]||(t[5]=x((...o)=>r.submit&&r.submit(...o),["prevent"])),class:"space-y-4"},[i(l,{type:"text",label:"First Name",placeholder:"John",modelValue:e.form.first_name,"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.first_name=o),errorText:r.formState.getFormError("first_name")},null,8,["modelValue","errorText"]),i(l,{type:"text",label:"Last Name",placeholder:"Doe",modelValue:e.form.last_name,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.last_name=o),errorText:r.formState.getFormError("last_name")},null,8,["modelValue","errorText"]),i(g,{active:r.expand,class:"space-y-4"},{default:f(()=>[i(l,{type:"email",label:"Email",modelValue:e.form.email,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.email=o),placeholder:"john@gmail.com",errorText:r.formState.getFormError("email")},null,8,["modelValue","errorText"]),i(l,{type:"password",label:"Password",placeholder:"******",modelValue:e.form.password,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.password=o),errorText:r.formState.getFormError("password")},null,8,["modelValue","errorText"]),i(l,{type:"password",placeholder:"******",label:"Confirm Password",modelValue:e.form.confirm_password,"onUpdate:modelValue":t[4]||(t[4]=o=>e.form.confirm_password=o),errorText:r.formState.getFormError("confirm_password")},null,8,["modelValue","errorText"])]),_:1},8,["active"]),r.formState.generalErrorText?(c(),u("div",D,p(r.formState.generalErrorText),1)):S("",!0),s("div",I,[i(_,{to:{name:"login"},class:"text-sm text-blue-600 hover:underline"},{default:f(()=>t[6]||(t[6]=[b("Already have an account?")])),_:1,__:[6]})]),i(w,{size:"md",type:"primary",action:r.submit,buttonClass:"w-full"},{default:f(()=>[s("span",P,p(e.loading?"Creating account...":"Create Account"),1)]),_:1},8,["action"])],32)]),i(y,{class:"mb-6"}),s("p",O,"Â© "+p(e.currentYear)+" Perfect Order. All rights reserved.",1)])]),t[9]||(t[9]=s("div",{class:"hidden lg:block"},[s("img",{src:"/images/lady-with-laptop.jpg",class:"w-full h-full object-cover",alt:"Lady holding boxes"})],-1))])}const it=C(N,[["render",R]]);export{it as default};
