import{A as z}from"./Alert-CWN-E56U.js";import{M as O}from"./Modal-CfgL8dzx.js";import{I as q,M as P}from"./Input-pc2fltgk.js";import{S as Z}from"./Switch-D-e7yyGa.js";import{S as R}from"./Select-Ch-z4Ru6.js";import{B as G}from"./Button-pzNXv-1Y.js";import{c as b,i as Y}from"./stringUtils-Bvzw0-oW.js";import{S as J}from"./Skeleton-CB7Ij9bY.js";import{W as K}from"./WhatsappIcon-D6Fz8wBL.js";import{V as Q}from"./vue-draggable-next.esm-bundler-BCnuVTyW.js";import{I as X}from"./InputMobileNumbers-By9kg6QJ.js";import{c as f,a as m,b as l,e as g,g as x,d as W,t as F,k as V,i as v,r as p,o as w,F as T,f as C,w as N}from"./app-BdtY1GmG.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as ee}from"./star-DafUWtUq.js";import{M as te}from"./move-BPwc_n-l.js";import{P as E}from"./plus-CFRUzLa5.js";import{M as oe}from"./move-left-66Hdw6-7.js";import{T as re}from"./trash-2-Cel2fQdQ.js";import"./createLucideIcon-0MdAfLNi.js";import"./circle-check-BBZmw5-4.js";import"./info-BjBAeI31.js";import"./x-C6hQ11hV.js";import"./Copy-Bf47GF8y.js";import"./ShineEffect-3X5J5V6N.js";import"./Popover-bKPSdKQk.js";import"./Tooltip-Hig8fsp-.js";import"./capitalize-ChUSrr1V.js";import"./refresh-ccw-D9yatk9r.js";import"./circle-alert-BJ7_6iqo.js";import"./parsePhoneNumber-xMTQFMCS.js";import"./Loader-C1t9Dbrf.js";import"./index-Cjqr5fW9.js";import"./Pill-DcPvSABs.js";const se={inject:["formState","storeState","workflowState","changeHistoryState","notificationState"],components:{Move:te,Mail:P,Star:ee,Alert:z,Modal:O,Input:q,Switch:Z,Select:R,Button:G,Skeleton:J,WhatsappIcon:K,InputMobileNumbers:X,draggable:Q},data(){return{Plus:E,Trash2:re,MoveLeft:oe,maxWorkflowActions:3,workflowConfigurations:[],appName:"Perfect Order",isLoadingWorkflowConfigurations:!1}},watch:{store(s,e){!e&&s&&this.setup()},"workflowForm.target":{handler(){var o;const s=this.workflowForm.trigger,e=this.triggerTypes.map(a=>a.value);this.workflowForm.trigger=e.includes(s)?s:((o=this.triggerTypes[0])==null?void 0:o.value)||null}},"workflowForm.trigger":{handler(){const s=this.actionTypes.map(e=>e.value);this.workflowForm.actions=this.workflowForm.actions.map(e=>{var o,a;if(!s.includes(e.action)){const n=(o=this.actionTypes[0])==null?void 0:o.value,t=((a=this.templateTypes(n)[0])==null?void 0:a.value)||null,c=this.getActionFields(n,t,0);return{action:n,template:t,...c}}return e})}}},computed:{store(){return this.storeState.store},isEditing(){return this.workflowId!=null},isLoadingStore(){return this.storeState.isLoadingStore},workflowId(){return this.$route.params.workflow_id},workflow(){return this.workflowState.workflow},workflowForm(){return this.workflowState.workflowForm},isLoadingWorkflow(){return this.workflowState.isLoadingWorkflow},isDeletingWorkflow(){return this.workflowState.isDeletingWorkflow},hasWorkflowActions(){return this.totalWorkflowActions>0},totalWorkflowActions(){var s;return((s=this.workflowForm.actions)==null?void 0:s.length)??0},targetTypes(){return[...new Set(this.workflowConfigurations.map(e=>e.target))].map(e=>({label:b(e),value:e}))},triggerTypes(){if(!this.workflowForm.target)return[];const s=this.workflowConfigurations.filter(e=>e.target===this.workflowForm.target).map(e=>e.trigger);return[...new Set(s)].map(e=>({label:b(e),value:e}))},actionTypes(){if(!this.workflowForm.target||!this.workflowForm.trigger)return[];const s=this.workflowConfigurations.find(e=>e.target===this.workflowForm.target&&e.trigger===this.workflowForm.trigger);return s?s.actions.map(e=>({label:b(e.name.replace(/([A-Z])/g," $1").trim()),value:e.name})):[]}},methods:{isEmpty:Y,capitalize:b,async setup(){this.workflowState.setWorkflowForm(null,!1),this.store&&await this.showWorkflowConfigurations(),this.store&&this.workflowId&&await this.showWorkflow(),this.changeHistoryState.showActionButtons=!0},setActionButtons(){this.changeHistoryState.removeButtons(),this.changeHistoryState.addDiscardButton(),this.changeHistoryState.addActionButton(this.isEditing?"Save Changes":"Add Workflow",this.isEditing?this.updateWorkflow:this.createWorkflow,"primary",this.isEditing?null:E)},delayTimeUnits(s){return[{label:s=="1"?"Minute":"Minutes",value:"minute"},{label:s=="1"?"Hour":"Hours",value:"hour"}]},templateTypes(s){if(!this.workflowForm.target||!this.workflowForm.trigger)return[];const e=this.workflowConfigurations.find(a=>a.target===this.workflowForm.target&&a.trigger===this.workflowForm.trigger);if(!e)return[];const o=e.actions.find(a=>a.name===s);return o?o.templates.map(a=>({label:b(a.name.replace(/([A-Z])/g," $1").trim()),value:a.name})):[]},updateTemplateFields(s){const e=this.workflowForm.actions[s],o=this.getActionFields(e.action,e.template,s);Object.keys(e).forEach(a=>{a!=="action"&&a!=="template"&&delete e[a]}),Object.assign(e,o),this.workflowState.saveStateDebounced("Template changed")},getActionFields(s,e,o){if(!this.workflowForm.target||!this.workflowForm.trigger)return{};const a=this.workflowConfigurations.find(c=>c.target===this.workflowForm.target&&c.trigger===this.workflowForm.trigger);if(!a)return{};const n=a.actions.find(c=>c.name===s);if(!n)return{};const t=n.templates.find(c=>c.name===e);return t?t.fields:{}},updateActionFields(s){var c;const e=this.workflowForm.actions[s],o=this.workflowConfigurations.find(h=>h.target===this.workflowForm.target&&h.trigger===this.workflowForm.trigger);if(!o)return;const a=o.actions.find(h=>h.name===e.action);if(!a)return;const n=((c=a.templates[0])==null?void 0:c.name)||"order details";e.template=n;const t=this.getActionFields(e.action,n,s);Object.keys(e).forEach(h=>{h!=="action"&&h!=="template"&&delete e[h]}),Object.assign(e,t),this.workflowState.saveStateDebounced("Action changed")},addWorkflowAction(){var a;if(!this.actionTypes.length)return;const s=this.actionTypes[0].value,e=((a=this.templateTypes(s)[0])==null?void 0:a.value)||"order details",o=this.getActionFields(s,e,0);this.workflowForm.actions.push({action:s,template:e,...o}),this.workflowState.saveStateDebounced("Action added")},removeWorkflowAction(s){this.workflowForm.actions.splice(s,1),this.workflowState.saveStateDebounced("Action removed")},async showWorkflowConfigurations(){var s,e;try{this.isLoadingWorkflowConfigurations=!0;const o={params:{store_id:this.store.id}},a=await axios.get("/api/workflows/configurations",o);this.workflowConfigurations=a.data}catch(o){const a=((e=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Failed to fetch workflow configurations";this.notificationState.showWarningNotification(a),console.error("Failed to fetch workflow configurations:",o)}finally{this.isLoadingWorkflowConfigurations=!1}},async showWorkflow(){var s,e;try{this.workflowState.isLoadingWorkflow=!0;const a=(await axios.get(`/api/workflows/${this.workflowId}`,{params:{store_id:this.store.id}})).data;this.workflowState.setWorkflow(a),this.workflowState.setWorkflowForm(a,!0)}catch(o){const a=((e=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Something went wrong while fetching workflow";this.notificationState.showWarningNotification(a),this.formState.setServerFormErrors(o),console.error("Failed to fetch workflow:",o)}finally{this.workflowState.isLoadingWorkflow=!1}},async createWorkflow(){var s,e;try{if(this.workflowState.isCreatingWorkflow||(this.formState.hideFormErrors(),this.isEmpty(this.workflowForm.name)&&this.formState.setFormError("name","The name is required"),this.formState.hasErrors))return;this.workflowState.isCreatingWorkflow=!0,this.changeHistoryState.actionButtons[1].loading=!0;const o={...this.workflowForm,store_id:this.store.id},n=(await axios.post("/api/workflows",o)).data;this.workflowState.setWorkflow(n),this.notificationState.showSuccessNotification("Workflow created"),this.workflowState.saveOriginalState("Original workflow"),await this.navigateToShowWorkflows()}catch(o){const a=((e=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Something went wrong while creating workflow";this.notificationState.showWarningNotification(a),this.formState.setServerFormErrors(o),console.error("Failed to create workflow:",o)}finally{this.workflowState.isCreatingWorkflow=!1,this.changeHistoryState.actionButtons[1].loading=!1}},async updateWorkflow(){var s,e;try{if(this.workflowState.isUpdatingWorkflow||(this.formState.hideFormErrors(),this.isEmpty(this.workflowForm.name)&&this.formState.setFormError("name","The name is required"),this.formState.hasErrors))return;this.workflowState.isUpdatingWorkflow=!0,this.changeHistoryState.actionButtons[1].loading=!0;const o={...this.workflowForm,store_id:this.store.id},n=(await axios.put(`/api/workflows/${this.workflowId}`,o)).data;this.workflowState.setWorkflow(n),this.notificationState.showSuccessNotification("Workflow updated"),this.workflowState.saveOriginalState("Original workflow")}catch(o){const a=((e=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Something went wrong while updating workflow";this.notificationState.showWarningNotification(a),this.formState.setServerFormErrors(o),console.error("Failed to update workflow:",o)}finally{this.workflowState.isUpdatingWorkflow=!1,this.changeHistoryState.actionButtons[1].loading=!1}},async deleteWorkflow(s){var e,o;try{if(this.workflowState.isDeletingWorkflow)return;this.workflowState.isDeletingWorkflow=!0,await axios.delete(`/api/workflows/${this.workflowId}`,{data:{store_id:this.store.id}}),s(),await new Promise(a=>setTimeout(a,500)),this.notificationState.showSuccessNotification("Workflow deleted"),await this.navigateToShowWorkflows()}catch(a){const n=((o=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:o.message)||(a==null?void 0:a.message)||"Something went wrong while deleting workflow";this.notificationState.showWarningNotification(n),this.formState.setServerFormErrors(a),console.error("Failed to delete workflow:",a),s()}finally{this.workflowState.isDeletingWorkflow=!1}},async navigateToShowWorkflows(){await this.$router.push({name:"show-workflows",query:{store_id:this.store.id}})},setWorkflowForm(s){this.workflowState.workflowForm=s}},beforeUnmount(){this.workflowState.reset(),this.changeHistoryState.showActionButtons=!1},created(){this.setup(),this.setActionButtons();const s=["undo","redo","jumpToHistory","resetHistoryToCurrent","resetHistoryToOriginal"];for(let e of s)this.changeHistoryState.listeners[e]=this.setWorkflowForm}},ae={class:"max-w-2xl mx-auto pt-24 pb-40"},le={class:"bg-gray-50 border border-gray-300 rounded-lg p-4 space-y-4 mb-4"},ie={class:"bg-gray-50 border border-gray-300 rounded-lg p-4 space-y-4 mb-4"},ne={class:"flex items-center space-x-2 mb-4"},de={class:"w-full flex items-center space-x-4"},we={key:0},me={class:"w-40 text-blue-500 border border-blue-500 mx-auto py-1 px-2 rounded-xl"},fe={class:"text-xs text-center"},ue={key:0,class:"w-0 h-4 mx-auto border-l border-r border-blue-200 border-dashed absolute -top-4 left-1/2 translate-x-1/2"},ge={class:"bg-gray-50 border border-gray-300 rounded-lg p-4 space-y-4"},ce={class:"flex items-center space-x-8"},pe={class:"w-full flex items-center space-x-4"},he={class:"flex items-center space-x-2"},ke={key:0,class:"space-y-1 mb-4"},ye={class:"flex justify-center"},Se={key:1},ve={key:2,class:"space-y-4"},be={class:"space-y-2"},xe={class:"flex items-center space-x-4"},Fe={class:"flex items-center space-x-4"},Te={key:4},We={key:5},Ve={key:1,class:"flex justify-center mb-16"},_e={class:"flex items-center space-x-2"},Ae={class:"font-bold"},Ce={class:"space-y-2"},Ee={class:"font-bold text-black"},De={class:"flex justify-end"},Ue={class:"mb-8"},Ie={class:"font-bold text-black"};function Le(s,e,o,a,n,t){const c=p("Button"),h=p("Switch"),k=p("Input"),D=p("Star"),y=p("Select"),U=p("WhatsappIcon"),I=p("Mail"),L=p("Move"),M=p("InputMobileNumbers"),B=p("draggable"),H=p("Alert"),j=p("Modal");return w(),f("div",ae,[m(c,{size:"xs",type:"light",class:"mb-4",leftIcon:n.MoveLeft,action:t.navigateToShowWorkflows},{default:x(()=>[...e[21]||(e[21]=[l("span",null,"Back",-1)])]),_:1},8,["leftIcon","action"]),l("div",le,[m(h,{size:"xs",suffixText:"Active",modelValue:t.workflowForm.active,"onUpdate:modelValue":e[0]||(e[0]=r=>t.workflowForm.active=r),errorText:t.formState.getFormError("active"),onChange:e[1]||(e[1]=r=>t.workflowState.saveStateDebounced("Active status changed"))},null,8,["modelValue","errorText"]),m(k,{max:"40",type:"text",label:"Name",modelValue:t.workflowForm.name,"onUpdate:modelValue":e[2]||(e[2]=r=>t.workflowForm.name=r),placeholder:"New order notification",errorText:t.formState.getFormError("name"),skeleton:t.isLoadingStore||t.isLoadingWorkflow,onInput:e[3]||(e[3]=r=>t.workflowState.saveStateDebounced("Name changed")),tooltipContent:"The workflow name to help you know what this workflow does e.g New order notification"},null,8,["modelValue","errorText","skeleton"])]),l("div",ie,[l("div",ne,[m(D,{size:"20",class:"shrink-0"}),e[22]||(e[22]=l("h1",{class:"font-bold text-lg"},"Trigger",-1))]),l("div",de,[e[23]||(e[23]=l("span",null,"when",-1)),m(y,{class:"w-full",search:!1,options:t.targetTypes,modelValue:t.workflowForm.target,"onUpdate:modelValue":e[4]||(e[4]=r=>t.workflowForm.target=r),errorText:t.formState.getFormError("target"),onChange:e[5]||(e[5]=r=>t.workflowState.saveStateDebounced("Target changed"))},null,8,["options","modelValue","errorText"]),e[24]||(e[24]=l("span",null,"is",-1)),m(y,{class:"w-full",search:!1,options:t.triggerTypes,modelValue:t.workflowForm.trigger,"onUpdate:modelValue":e[6]||(e[6]=r=>t.workflowForm.trigger=r),errorText:t.formState.getFormError("trigger"),onChange:e[7]||(e[7]=r=>t.workflowState.saveStateDebounced("Trigger changed"))},null,8,["options","modelValue","errorText"])])]),!t.isLoadingStore&&!t.isLoadingWorkflow&&!n.isLoadingWorkflowConfigurations?(w(),f("div",we,[l("div",me,[l("h1",fe,F(t.totalWorkflowActions)+" "+F(t.totalWorkflowActions==1?"Action":"Actions"),1)]),e[33]||(e[33]=l("div",{class:"flex justify-center"},[l("svg",{class:"w-6 h-6 text-blue-500 -mt-0.5 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25 12 21m0 0-3.75-3.75M12 21V3"})])],-1)),t.hasWorkflowActions?(w(),W(B,{key:0,class:"space-y-4 mb-8",handle:".draggable-handle","ghost-class":"bg-yellow-50",modelValue:t.workflowForm.actions,"onUpdate:modelValue":e[19]||(e[19]=r=>t.workflowForm.actions=r),onChange:e[20]||(e[20]=r=>t.workflowState.saveStateDebounced("Action arrangement changed"))},{default:x(()=>[(w(!0),f(T,null,C(t.workflowForm.actions,(r,u)=>(w(),f("div",{key:u,class:"relative"},[u!=0?(w(),f("div",ue)):g("",!0),l("div",ge,[l("div",ce,[l("div",pe,[["whatsapp customer","whatsapp team"].includes(r.action)?(w(),W(U,{key:0,class:"shrink-0 mr-2"})):["email customer","email team"].includes(r.action)?(w(),W(I,{key:1,size:"28",class:"shrink-0 text-indigo-500"})):g("",!0),m(y,{class:"w-full",search:!1,options:t.actionTypes,modelValue:r.action,"onUpdate:modelValue":S=>r.action=S,onChange:S=>t.updateActionFields(u),errorText:t.formState.getFormError(`actions.${u}.action`)},null,8,["options","modelValue","onUpdate:modelValue","onChange","errorText"]),t.templateTypes(r.action).length>=2?(w(),f(T,{key:2},[e[25]||(e[25]=l("span",null,"using",-1)),m(y,{class:"w-full",search:!1,modelValue:r.template,"onUpdate:modelValue":S=>r.template=S,options:t.templateTypes(r.action),onChange:S=>t.updateTemplateFields(u),errorText:t.formState.getFormError(`actions.${u}.template`)},null,8,["modelValue","onUpdate:modelValue","options","onChange","errorText"])],64)):g("",!0)]),l("div",he,[m(c,{size:"xs",type:"bareDanger",leftIcon:n.Trash2,action:()=>t.removeWorkflowAction(u)},null,8,["leftIcon","action"]),m(L,{onClick:e[8]||(e[8]=N(()=>{},["stop"])),size:"16",class:"draggable-handle cursor-grab active:cursor-grabbing text-gray-500 hover:text-yellow-500"})])]),(w(!0),f(T,null,C(t.getActionFields(r.action,r.template,u),(S,d)=>{var _,A;return w(),f("div",{key:d},[d==="mobile_numbers"&&r.action==="whatsapp team"?(w(),f("div",{key:0,class:V({"space-y-4 p-4 bg-slate-100 border border-gray-200 rounded-lg":!((_=r[d])!=null&&_.length)})},[(A=r[d])!=null&&A.length?g("",!0):(w(),f("div",ke,[...e[26]||(e[26]=[l("h1",{class:"flex items-center font-lg font-bold"},[l("span",null,"Send WhatsApp")],-1),l("p",{class:"text-sm text-gray-500"}," Add one or more mobile numbers to send the Whatsapp message ",-1)])])),l("div",ye,[m(M,{isSubmitting:!1,modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,onChange:e[9]||(e[9]=i=>t.workflowState.saveStateDebounced("Mobile numbers changed"))},null,8,["modelValue","onUpdate:modelValue"])])],2)):g("",!0),d==="email"&&r.action==="email team"?(w(),f("div",Se,[m(k,{type:"email",label:"Email",modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,placeholder:"company@example.com",onInput:e[10]||(e[10]=i=>t.workflowState.saveStateDebounced("Email changed")),errorText:t.formState.getFormError(`actions.${u}.email`)},null,8,["modelValue","onUpdate:modelValue","errorText"])])):g("",!0),r.template==="payment reminder"&&d==="add_delay"?(w(),f("div",ve,[l("div",be,[m(k,{type:"checkbox",inputLabel:"Add delay",modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,errorText:t.formState.getFormError(`actions.${u}.add_delay`),onChange:e[11]||(e[11]=i=>t.workflowState.saveStateDebounced("Add delay status changed"))},null,8,["modelValue","onUpdate:modelValue","errorText"]),r[d]?(w(),f(T,{key:0},[e[27]||(e[27]=l("p",{class:"text-xs text-gray-400 mb-2"},"Time to wait before sending payment reminder",-1)),l("div",xe,[m(k,{min:"1",type:"number",class:"w-40",modelValue:r.delay_time_value,"onUpdate:modelValue":i=>r.delay_time_value=i,onInput:e[12]||(e[12]=i=>t.workflowState.saveStateDebounced("Delay time changed")),errorText:t.formState.getFormError(`actions.${u}.delay_time_value`)},null,8,["modelValue","onUpdate:modelValue","errorText"]),m(y,{class:"w-40",search:!1,modelValue:r.delay_time_unit,"onUpdate:modelValue":i=>r.delay_time_unit=i,options:t.delayTimeUnits(r.delay_time_value),onChange:e[13]||(e[13]=i=>t.workflowState.saveStateDebounced("Delay time changed")),errorText:t.formState.getFormError(`actions.${u}.delay_time_unit`)},null,8,["modelValue","onUpdate:modelValue","options","errorText"])])],64)):g("",!0)])])):g("",!0),r.template==="payment reminder"&&d==="auto_cancel"?(w(),f("div",{key:3,class:V(["space-y-2",{"border-t border-b border-gray-300 border-dashed py-4":r.add_delay&&r[d]}])},[m(k,{type:"checkbox",modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,inputLabel:"Cancel order if payment is not received",errorText:t.formState.getFormError(`actions.${u}.auto_cancel`),onChange:e[14]||(e[14]=i=>t.workflowState.saveStateDebounced("Auto cancel status changed"))},null,8,["modelValue","onUpdate:modelValue","errorText"]),r[d]?(w(),f(T,{key:0},[e[28]||(e[28]=l("p",{class:"text-xs text-gray-400 mb-2"},"Time to wait before cancelling the order after sending payment reminder",-1)),l("div",Fe,[m(k,{min:"1",type:"number",class:"w-40",modelValue:r.cancel_time_value,"onUpdate:modelValue":i=>r.cancel_time_value=i,onInput:e[15]||(e[15]=i=>t.workflowState.saveStateDebounced("Cancel time changed")),errorText:t.formState.getFormError(`actions.${u}.cancel_time_value`)},null,8,["modelValue","onUpdate:modelValue","errorText"]),m(y,{class:"w-40",search:!1,modelValue:r.cancel_time_unit,"onUpdate:modelValue":i=>r.cancel_time_unit=i,options:t.delayTimeUnits(r.cancel_time_value),onChange:e[16]||(e[16]=i=>t.workflowState.saveStateDebounced("Cancel time changed")),errorText:t.formState.getFormError(`actions.${u}.cancel_time_unit`)},null,8,["modelValue","onUpdate:modelValue","options","errorText"])])],64)):g("",!0)],2)):g("",!0),d==="review_link"&&r.template==="request review"?(w(),f("div",Te,[m(k,{type:"text",label:"Review Link",placeholder:"https://",secondaryLabel:"(optional)",modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,onInput:e[17]||(e[17]=i=>t.workflowState.saveStateDebounced("Review link changed")),errorText:t.formState.getFormError(`actions.${u}.review_link`),description:"If empty a review link will be provided automatically",tooltipContent:"Link to the platform that allows customers to add a review e.g Google Reviews"},null,8,["modelValue","onUpdate:modelValue","errorText"])])):g("",!0),d==="notes"&&["payment reminder","request review"].includes(r.template)?(w(),f("div",We,[m(k,{rows:"1",max:"200",resize:!0,type:"textarea",label:"Additional Notes",secondaryLabel:"(optional)",description:"Less than 200 characters",modelValue:r[d],"onUpdate:modelValue":i=>r[d]=i,errorText:t.formState.getFormError(`actions.${u}.notes`),onInput:e[18]||(e[18]=i=>t.workflowState.saveStateDebounced("Additional notes changed"))},null,8,["modelValue","onUpdate:modelValue","errorText"])])):g("",!0)])}),128))])]))),128))]),_:1},8,["modelValue"])):g("",!0),t.totalWorkflowActions<n.maxWorkflowActions?(w(),f("div",Ve,[m(c,{size:"md",type:"primary",leftIcon:n.Plus,buttonClass:"w-60",action:t.addWorkflowAction},{default:x(()=>[...e[29]||(e[29]=[l("span",{class:"ml-1"},"Add Action",-1)])]),_:1},8,["leftIcon","action"])])):g("",!0),t.totalWorkflowActions==n.maxWorkflowActions?(w(),W(H,{key:2,type:"light",class:"flex justify-between items-center mb-4"},{content:x(()=>[l("div",_e,[e[32]||(e[32]=l("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})],-1)),l("span",null,[e[30]||(e[30]=v("You can only add up to ",-1)),l("span",Ae,F(n.maxWorkflowActions)+" actions",1),e[31]||(e[31]=v(" per workflow",-1))])])]),_:1})):g("",!0)])):g("",!0),t.workflow?(w(),f("div",{key:1,class:V(["flex items-center justify-between space-x-4 overflow-hidden rounded-lg p-4 border mt-4",t.isLoadingStore||t.isLoadingWorkflow?"border-gray-300 bg-gray-50":"border-red-300 bg-red-50"])},[l("div",Ce,[l("p",null,[e[34]||(e[34]=v("Delete ",-1)),l("span",Ee,F(t.workflow.name),1),e[35]||(e[35]=v("?",-1))])]),l("div",De,[m(j,{triggerType:"danger",approveType:"danger",approveLeftIcon:n.Trash2,triggerText:"Delete Workflow",approveText:"Delete Workflow",approveAction:t.deleteWorkflow,triggerLoading:t.isDeletingWorkflow,approveLoading:t.isDeletingWorkflow},{content:x(()=>[e[38]||(e[38]=l("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Confirm Delete",-1)),l("p",Ue,[e[36]||(e[36]=v("Are you sure you want to delete ",-1)),l("span",Ie,F(t.workflow.name),1),e[37]||(e[37]=v("?",-1))])]),_:1},8,["approveLeftIcon","approveAction","triggerLoading","approveLoading"])])],2)):g("",!0)])}const ct=$(se,[["render",Le]]);export{ct as default};
