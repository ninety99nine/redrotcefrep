import{I as y}from"./Input-D4bxWOlL.js";import{S as F}from"./Switch-aC95xi1h.js";import{B as _}from"./Button-BtGfnYDo.js";import{S as w}from"./Skeleton-BYb8KvFB.js";import{c as p,b as o,d as s,e as f,a as d,g,i as c,t as b,r as h,o as a}from"./app-Db6d8eSP.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as V}from"./refresh-ccw-CMycWXoI.js";import"./Copy-DPmUtyus.js";import"./ShineEffect-B9CikJiy.js";import"./createLucideIcon-gPidoUUU.js";import"./Popover-DtqKmQ9T.js";import"./Tooltip-Bf4GUCHE.js";import"./capitalize-ChUSrr1V.js";import"./circle-check-DKc1TKPe.js";import"./circle-alert-D1pEDTPn.js";import"./x-CdcN8VHc.js";import"./parsePhoneNumber-xMTQFMCS.js";import"./Loader-Dvrn4ogS.js";const T={inject:["formState","storeState","changeHistoryState","notificationState"],components:{Input:y,Switch:F,Button:_,Skeleton:w},data(){return{RefreshCcw:V,appName:"Perfect Order"}},watch:{store(l,r){!r&&l&&this.setup()}},computed:{store(){return this.storeState.store},storeForm(){return this.storeState.storeForm},isLoadingStore(){return this.storeState.isLoadingStore},exampleOrderNumber(){const l=this.storeForm.order_number_prefix||"",r=this.storeForm.order_number_suffix||"",n=parseInt(this.storeForm.order_number_padding,10)||0,S=(parseInt(this.storeForm.order_number_counter)+1).toString().padStart(n,"0");return`${l}${S}${r}`}},methods:{setup(){this.store?this.storeState.setStoreForm(this.store,!0):this.storeState.setStoreForm(null,!1)},setActionButtons(){this.changeHistoryState.removeButtons(),this.changeHistoryState.addDiscardButton(),this.changeHistoryState.addActionButton("Save Changes",this.updateStore,"primary",null)},resetOrderNumberCounter(){this.storeForm.order_number_counter=0,this.updateStore()},async updateStore(){var l,r;try{if(this.storeState.isUpdatingStore)return;this.storeState.isUpdatingStore=!0,this.changeHistoryState.actionButtons[1].loading=!0;const n={...this.storeForm,store_id:this.store.id};await axios.put(`/api/stores/${this.store.id}`,n),this.notificationState.showSuccessNotification("Store updated"),this.storeState.saveOriginalState("Original store")}catch(n){const S=((r=(l=n==null?void 0:n.response)==null?void 0:l.data)==null?void 0:r.message)||(n==null?void 0:n.message)||"Something went wrong while updating store";this.notificationState.showWarningNotification(S),this.formState.setServerFormErrors(n),console.error("Failed to update store:",n)}finally{this.storeState.isUpdatingStore=!1,this.changeHistoryState.actionButtons[1].loading=!1}},setStoreForm(l){this.storeState.storeForm=l}},created(){this.setup(),this.setActionButtons();const l=["undo","redo","jumpToHistory","resetHistoryToCurrent","resetHistoryToOriginal"];for(let r=0;r<l.length;r++){let n=l[r];this.changeHistoryState.listeners[n]=this.setStoreForm}}},C={class:"max-w-2xl mx-auto pt-24 pb-40"},L={class:"bg-white p-8 shadow-sm rounded-xl mb-2"},U={class:"space-y-4"},D={class:"bg-white p-8 shadow-sm rounded-xl mb-2"},E={class:"space-y-4"},I={class:"leading-4"},N={class:"text-xs text-gray-400"},B={class:"bg-white p-8 shadow-sm rounded-xl mb-2"},O={class:"space-y-4"},M={class:"grid grid-cols-2 gap-8"},H={class:"flex items-center justify-between border-t border-dashed border-gray-300 pt-4"},z={class:"text-sm"},q={class:"text-base font-bold"},P={class:"bg-white p-8 shadow-sm rounded-xl mb-2"},R={class:"space-y-4"};function A(l,r,n,S,x,e){const u=h("Skeleton"),i=h("Switch"),m=h("Input"),v=h("Button");return a(),p("div",C,[r[52]||(r[52]=o("h1",{class:"text-lg font-bold mb-4"},"Checkout",-1)),o("div",L,[r[40]||(r[40]=o("h1",{class:"text-lg font-bold mb-4"},"Payment",-1)),o("div",U,[e.isLoadingStore||!e.store?(a(),s(u,{key:0,width:"w-8",shine:!0})):(a(),s(i,{key:1,size:"xs",suffixText:"Skip payment page",modelValue:e.storeForm.skip_payment_page,"onUpdate:modelValue":r[0]||(r[0]=t=>e.storeForm.skip_payment_page=t),errorText:e.formState.getFormError("skip_payment_page"),onChange:r[1]||(r[1]=t=>e.storeState.saveStateDebounced("Skip payment page status changed"))},null,8,["modelValue","errorText"]))])]),o("div",D,[r[46]||(r[46]=o("h1",{class:"text-lg font-bold mb-1"},"Message channel",-1)),r[47]||(r[47]=o("p",{class:"text-xs text-gray-500 mb-4"},"Choose apps to show message button when checkout completed.",-1)),o("div",E,[e.isLoadingStore||!e.store?(a(),s(u,{key:0,width:"w-8",shine:!0})):(a(),s(i,{key:1,size:"xs",suffixText:"Whatsapp",modelValue:e.storeForm.show_whatsapp_channel,"onUpdate:modelValue":r[2]||(r[2]=t=>e.storeForm.show_whatsapp_channel=t),errorText:e.formState.getFormError("show_whatsapp_channel"),onChange:r[3]||(r[3]=t=>e.storeState.saveStateDebounced("Whatsapp channel status changed"))},null,8,["modelValue","errorText"])),e.isLoadingStore||!e.store?(a(),s(u,{key:2,width:"w-8",shine:!0})):(a(),s(i,{key:3,size:"xs",suffixText:"Messenger",modelValue:e.storeForm.show_messenger_channel,"onUpdate:modelValue":r[4]||(r[4]=t=>e.storeForm.show_messenger_channel=t),errorText:e.formState.getFormError("show_messenger_channel"),onChange:r[5]||(r[5]=t=>e.storeState.saveStateDebounced("Messenger channel status changed"))},null,8,["modelValue","errorText"])),e.storeForm.show_messenger_channel?(a(),s(m,{key:4,type:"text",label:"Facebook Page username",placeholder:x.appName.toLowerCase(),skeleton:e.isLoadingStore||!e.store,modelValue:e.storeForm.messenger_channel_username,"onUpdate:modelValue":r[6]||(r[6]=t=>e.storeForm.messenger_channel_username=t),errorText:e.formState.getFormError("messenger_channel_username"),onChange:r[7]||(r[7]=t=>e.storeState.saveStateDebounced("Messenger channel username changed")),description:"Username below your Facebook Page's name and in your Page's URL (e.g. facebook.com/abc)"},{prefix:g(()=>[...r[41]||(r[41]=[o("span",{class:"text-gray-500 mr-2"},"@",-1)])]),_:1},8,["placeholder","skeleton","modelValue","errorText"])):f("",!0),e.isLoadingStore||!e.store?(a(),s(u,{key:5,width:"w-8",shine:!0})):(a(),s(i,{key:6,size:"xs",suffixText:"Telegram",modelValue:e.storeForm.show_telegram_channel,"onUpdate:modelValue":r[8]||(r[8]=t=>e.storeForm.show_telegram_channel=t),errorText:e.formState.getFormError("show_telegram_channel"),onChange:r[9]||(r[9]=t=>e.storeState.saveStateDebounced("Telegram channel status changed"))},null,8,["modelValue","errorText"])),e.storeForm.show_telegram_channel?(a(),s(m,{key:7,type:"text",placeholder:"username",label:"Telegram username",externalLinkName:"Learn more",skeleton:e.isLoadingStore||!e.store,description:"Your public telegram username",modelValue:e.storeForm.telegram_channel_username,"onUpdate:modelValue":r[10]||(r[10]=t=>e.storeForm.telegram_channel_username=t),errorText:e.formState.getFormError("telegram_channel_username"),onChange:r[11]||(r[11]=t=>e.storeState.saveStateDebounced("Telegram channel username changed")),externalLinkUrl:"https://telegram.org/faq#q-what-are-usernames-how-do-i-get-one"},{prefix:g(()=>[...r[42]||(r[42]=[o("span",{class:"text-gray-500 mr-2"},"@",-1)])]),_:1},8,["skeleton","modelValue","errorText"])):f("",!0),e.isLoadingStore||!e.store?(a(),s(u,{key:8,width:"w-8",shine:!0})):(a(),s(i,{key:9,size:"xs",suffixText:"Line",modelValue:e.storeForm.show_line_channel,"onUpdate:modelValue":r[12]||(r[12]=t=>e.storeForm.show_line_channel=t),errorText:e.formState.getFormError("show_line_channel"),onChange:r[13]||(r[13]=t=>e.storeState.saveStateDebounced("Line channel status changed"))},null,8,["modelValue","errorText"])),e.storeForm.show_line_channel?(a(),s(m,{key:10,type:"text",placeholder:"437fdhmq",label:"LINE official account ID",skeleton:e.isLoadingStore||!e.store,modelValue:e.storeForm.line_channel_username,"onUpdate:modelValue":r[14]||(r[14]=t=>e.storeForm.line_channel_username=t),errorText:e.formState.getFormError("line_channel_username"),onChange:r[15]||(r[15]=t=>e.storeState.saveStateDebounced("Line channel username changed"))},{description:g(()=>[o("div",I,[o("span",N,[r[43]||(r[43]=o("span",null,"Find or create LINE official account ID from ",-1)),r[44]||(r[44]=o("a",{target:"_blank",href:"https://manager.line.biz",class:"inline-block text-xs text-blue-700 hover:underline hover:text-blue-90"}," LINE Official Account Manager ",-1)),o("span",null," e.g. @437fdhmq or @"+b(x.appName.toLowerCase().replace(" ",""))+" (Premium ID).",1)])])]),prefix:g(()=>[...r[45]||(r[45]=[o("span",{class:"text-gray-500 mr-2"},"@",-1)])]),_:1},8,["skeleton","modelValue","errorText"])):f("",!0),e.isLoadingStore||!e.store?(a(),s(u,{key:11,width:"w-8",shine:!0})):(a(),s(i,{key:12,size:"xs",suffixText:"Text (SMS/iMessage)",modelValue:e.storeForm.show_sms_channel,"onUpdate:modelValue":r[16]||(r[16]=t=>e.storeForm.show_sms_channel=t),errorText:e.formState.getFormError("show_sms_channel"),onChange:r[17]||(r[17]=t=>e.storeState.saveStateDebounced("SMS channel status changed"))},null,8,["modelValue","errorText"])),d(m,{rows:"2",type:"textarea",label:"Message footer",modelValue:e.storeForm.message_footer,"onUpdate:modelValue":r[18]||(r[18]=t=>e.storeForm.message_footer=t),skeleton:e.isLoadingStore||!e.store,description:"Appears at the end of every message",errorText:e.formState.getFormError("message_footer"),onChange:r[19]||(r[19]=t=>e.storeState.saveStateDebounced("Message footer changed"))},null,8,["modelValue","skeleton","errorText"])])]),o("div",B,[r[50]||(r[50]=o("h1",{class:"text-lg font-bold mb-4"},"Order number",-1)),o("div",O,[o("div",M,[d(m,{type:"text",label:"Order number prefix",skeleton:e.isLoadingStore||!e.store,modelValue:e.storeForm.order_number_prefix,"onUpdate:modelValue":r[20]||(r[20]=t=>e.storeForm.order_number_prefix=t),errorText:e.formState.getFormError("order_number_prefix"),onChange:r[21]||(r[21]=t=>e.storeState.saveStateDebounced("Order number prefix changed"))},null,8,["skeleton","modelValue","errorText"]),d(m,{type:"text",label:"Order number suffix",skeleton:e.isLoadingStore||!e.store,modelValue:e.storeForm.order_number_suffix,"onUpdate:modelValue":r[22]||(r[22]=t=>e.storeForm.order_number_suffix=t),errorText:e.formState.getFormError("order_number_suffix"),onChange:r[23]||(r[23]=t=>e.storeState.saveStateDebounced("Order number suffix changed"))},null,8,["skeleton","modelValue","errorText"])]),d(m,{type:"number",placeholder:"2",label:"Minimum numbers",skeleton:e.isLoadingStore||!e.store,modelValue:e.storeForm.order_number_padding,"onUpdate:modelValue":r[24]||(r[24]=t=>e.storeForm.order_number_padding=t),errorText:e.formState.getFormError("order_number_padding"),onChange:r[25]||(r[25]=t=>e.storeState.saveStateDebounced("Minimum numbers changed"))},null,8,["skeleton","modelValue","errorText"]),o("div",H,[o("span",z,[r[48]||(r[48]=c("Next order number: ",-1)),o("span",q,b(e.exampleOrderNumber),1)]),d(v,{size:"xs",type:"light",leftIcon:x.RefreshCcw,action:e.resetOrderNumberCounter},{default:g(()=>[...r[49]||(r[49]=[o("span",null,"Reset Order Number",-1)])]),_:1},8,["leftIcon","action"])])])]),o("div",P,[r[51]||(r[51]=o("h1",{class:"text-lg font-bold mb-4"},"Invoice",-1)),o("div",R,[e.isLoadingStore||!e.store?(a(),s(u,{key:0,width:"w-8",shine:!0})):(a(),s(i,{key:1,size:"xs",suffixText:"Show logo",modelValue:e.storeForm.invoice_show_logo,"onUpdate:modelValue":r[26]||(r[26]=t=>e.storeForm.invoice_show_logo=t),errorText:e.formState.getFormError("invoice_show_logo"),onChange:r[27]||(r[27]=t=>e.storeState.saveStateDebounced("Invoice logo status changed"))},null,8,["modelValue","errorText"])),e.isLoadingStore||!e.store?(a(),s(u,{key:2,width:"w-8",shine:!0})):(a(),s(i,{key:3,size:"xs",suffixText:"Show QR code",modelValue:e.storeForm.invoice_show_qr_code,"onUpdate:modelValue":r[28]||(r[28]=t=>e.storeForm.invoice_show_qr_code=t),errorText:e.formState.getFormError("invoice_show_qr_code"),onChange:r[29]||(r[29]=t=>e.storeState.saveStateDebounced("Invoice qr code status changed"))},null,8,["modelValue","errorText"])),d(m,{rows:"2",label:"Header",type:"textarea",modelValue:e.storeForm.invoice_header,"onUpdate:modelValue":r[30]||(r[30]=t=>e.storeForm.invoice_header=t),skeleton:e.isLoadingStore||!e.store,errorText:e.formState.getFormError("invoice_header"),onChange:r[31]||(r[31]=t=>e.storeState.saveStateDebounced("Invoice header changed"))},null,8,["modelValue","skeleton","errorText"]),d(m,{rows:"2",label:"Footer",type:"textarea",modelValue:e.storeForm.invoice_footer,"onUpdate:modelValue":r[32]||(r[32]=t=>e.storeForm.invoice_footer=t),skeleton:e.isLoadingStore||!e.store,errorText:e.formState.getFormError("invoice_footer"),onChange:r[33]||(r[33]=t=>e.storeState.saveStateDebounced("Invoice footer changed"))},null,8,["modelValue","skeleton","errorText"]),d(m,{type:"text",label:"Company name",skeleton:e.isLoadingStore||!e.store,modelValue:e.storeForm.invoice_company_name,"onUpdate:modelValue":r[34]||(r[34]=t=>e.storeForm.invoice_company_name=t),errorText:e.formState.getFormError("invoice_company_name"),onChange:r[35]||(r[35]=t=>e.storeState.saveStateDebounced("Invoice company name changed"))},null,8,["skeleton","modelValue","errorText"]),d(m,{type:"email",label:"Company email",skeleton:e.isLoadingStore||!e.store,modelValue:e.storeForm.invoice_company_email,"onUpdate:modelValue":r[36]||(r[36]=t=>e.storeForm.invoice_company_email=t),errorText:e.formState.getFormError("invoice_company_email"),onChange:r[37]||(r[37]=t=>e.storeState.saveStateDebounced("Invoice company email changed"))},null,8,["skeleton","modelValue","errorText"]),d(m,{type:"text",label:"Company phone",placeholder:"+26772000001",skeleton:e.isLoadingStore||!e.store,modelValue:e.storeForm.invoice_company_mobile_number,"onUpdate:modelValue":r[38]||(r[38]=t=>e.storeForm.invoice_company_mobile_number=t),errorText:e.formState.getFormError("invoice_company_mobile_number"),onChange:r[39]||(r[39]=t=>e.storeState.saveStateDebounced("Invoice company mobile number changed"))},null,8,["skeleton","modelValue","errorText"])])])])}const me=k(T,[["render",A]]);export{me as default};
