import{c as n,b as t,a as m,r as d,F as c,i as s,w as k,f as S,e as v,t as u,g as p,h as E,o as a,d as F}from"./app-C3gvvzwr.js";import{P as L}from"./Pill-CKWNekmo.js";import{L as P}from"./Logo-DehrYKCV.js";import{I as B}from"./Input-Ky0M0gBr.js";import{A as N}from"./Alert-BJqs5cD1.js";import{B as V}from"./Button-H5-4pReg.js";import{i as A}from"./stringUtils-Bvzw0-oW.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Popover-CueE8CKU.js";import"./x-DysaB_8N.js";import"./createLucideIcon-DcEzUACP.js";import"./Copy-2MtTss3I.js";import"./ShineEffect-Bjy7l8nq.js";import"./Skeleton-BmfWv9Ad.js";import"./refresh-ccw-CCOkutNK.js";import"./circle-check-Bpb6vmpJ.js";import"./circle-alert-jW_RoXi8.js";import"./parsePhoneNumber-DR0S47Bc.js";import"./info-DK7Y1TIA.js";import"./Loader-CenJqq8u.js";const j={name:"ForgotPassword",components:{Pill:L,Logo:P,Input:B,Alert:N,Button:V},inject:["formState","notificationState"],data(){return{form:{email:""},type:"email",loginTypes:[{label:"Email",value:"email"},{label:"Mobile Number",value:"mobile_number"}],loading:!1,currentYear:new Date().getFullYear()}},methods:{isEmpty:A,goToLogin(){this.$router.push({name:"login"})},async submit(){var f,e;if(!this.loading&&(this.formState.hideFormErrors(),this.isEmpty(this.form.email)&&this.formState.setFormError("email","Email is required"),!this.formState.hasErrors)){this.loading=!0;try{await E.post("/api/auth/forgot-password",this.form),this.notificationState.showSuccessNotification("A password reset link has been sent to your email."),this.$router.push({name:"login"})}catch(r){const g=((e=(f=r==null?void 0:r.response)==null?void 0:f.data)==null?void 0:e.message)||(r==null?void 0:r.message)||"Something went wrong while requesting a password reset link";this.notificationState.showWarningNotification(g),this.formState.setServerFormErrors(r),console.error("Failed to request password reset link:",r)}finally{this.loading=!1}}}},mounted(){this.form.email=this.$route.query.email||""}},C={class:"min-h-screen grid grid-cols-1 lg:grid-cols-2 transition-opacity opacity-100 duration-750 lg:grow starting:opacity-0"},q={class:"flex items-center justify-center p-6 bg-gradient-to-b from-blue-100 to-white-100"},I={class:"w-full max-w-md"},D={class:"bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6"},Y={class:"text-sm text-gray-500 mb-4"},z={class:"flex space-x-2"},M={key:0,class:"text-red-500 text-sm mb-3"},O={class:"ml-1"},R={class:"flex justify-center mt-4"},U={class:"text-sm text-center text-gray-500"};function W(f,e,r,g,o,l){const y=d("Logo"),w=d("Pill"),_=d("Input"),b=d("Button"),x=d("router-link"),h=d("Alert");return a(),n("div",C,[t("div",q,[t("div",I,[m(y,{height:"h-20 mx-auto mb-4"}),t("div",D,[e[6]||(e[6]=t("h1",{class:"text-2xl font-semibold leading-none tracking-tight mb-4"},"Forgot Password",-1)),t("h1",Y,[o.type=="email"?(a(),n(c,{key:0},[s("Enter your email address to receive a password reset link.")],64)):(a(),n(c,{key:1},[s("Follow instructions to reset your password")],64))]),t("form",{onSubmit:e[1]||(e[1]=k((...i)=>l.submit&&l.submit(...i),["prevent"])),class:"space-y-4"},[t("div",z,[(a(!0),n(c,null,S(o.loginTypes,i=>(a(),F(w,{type:o.type===i.value?"primary":"light",action:()=>o.type=i.value,key:i.value},{default:p(()=>[s(u(i.label),1)]),_:2},1032,["type","action"]))),128))]),o.type=="email"?(a(),n(c,{key:0},[m(_,{type:"email",label:"Email",modelValue:o.form.email,"onUpdate:modelValue":e[0]||(e[0]=i=>o.form.email=i),errorText:l.formState.getFormError("email")},null,8,["modelValue","errorText"]),l.formState.generalErrorText?(a(),n("div",M,u(l.formState.generalErrorText),1)):v("",!0),m(b,{size:"md",type:"primary",action:l.submit,disabled:o.loading,buttonClass:"w-full"},{default:p(()=>[t("span",O,u(o.loading?"Sending...":"Send Reset Link"),1)]),_:1},8,["action","disabled"]),t("div",R,[m(x,{to:{name:"login"},class:"text-sm text-blue-600 hover:underline"},{default:p(()=>e[2]||(e[2]=[s("Back to Login")])),_:1,__:[2]})])],64)):(a(),n(c,{key:1},[m(h,{dismissable:!1},{description:p(()=>e[3]||(e[3]=[t("p",{class:"font-semibold mb-4"},"Supported Networks",-1),t("img",{src:"/images/mobile-network-icons/orange.png",class:"w-10 rounded-sm"},null,-1)])),_:1}),m(h,{dismissable:!1},{description:p(()=>e[4]||(e[4]=[t("p",{class:"mb-4"},[s("Dial "),t("span",{class:"font-bold"},"*250#"),s(" on your mobile phone. Select "),t("span",{class:"font-bold"},"Profile"),s(", then select "),t("span",{class:"font-bold"},"Set Password"),s(" and enter your new password.")],-1),t("p",null,[s("Now click the login button below and login using your "),t("span",{class:"font-bold"},"mobile number"),s(" and "),t("span",{class:"font-bold"},"new password")],-1)])),_:1}),m(b,{size:"md",type:"primary",action:l.goToLogin,disabled:o.loading,buttonClass:"w-full"},{default:p(()=>e[5]||(e[5]=[t("span",{class:"ml-1"},"Login",-1)])),_:1,__:[5]},8,["action","disabled"])],64))],32)]),t("p",U,"Â© "+u(o.currentYear)+" Perfect Order. All rights reserved.",1)])]),e[7]||(e[7]=t("div",{class:"hidden lg:block"},[t("img",{src:"/images/lady-with-laptop.jpg",class:"w-full h-full object-cover",alt:"Lady holding boxes"})],-1))])}const ct=T(j,[["render",W]]);export{ct as default};
