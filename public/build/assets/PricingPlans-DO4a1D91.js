import{c as a,b as e,a as h,F as u,k as f,e as v,i as m,f as x,g as _,z as p,r as P,o as i,t as g}from"./app-BqBcK2Me.js";import{B as L}from"./Button-BNac3Uy4.js";import{L as B}from"./Loader-BgqDxGis.js";import{J as H}from"./JoinOurWhatsappGroup-DNON6A3J.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as k}from"./rocket-CxZvkutz.js";import"./ShineEffect-DJP6tw7V.js";import"./WhatsappIcon-BZspFXks.js";import"./WhatsappMessage-CfiLyi2E.js";import"./createLucideIcon-OabOCuoO.js";const F={inject:["formState","storeState","notificationState"],components:{Rocket:k,Button:L,Loader:B,JoinOurWhatsappGroup:H},data(){return{Rocket:k,pagination:null,pricingPlans:[],pricingPlanIndex:null,isLoadingPricingPlans:!1,isGeneratingPaymentLink:!1,activePricingPlan:"monthly",freePlanFeatures:["WhatsApp order form","Manual payment methods","Up to 20 images"],mockMessages:[{sender:"You",text:"What’s the difference between the Basic and Pro plan?",timestamp:p().subtract(5,"minute").format("HH:mm"),isOwnMessage:!0},{sender:"Support Team",text:"Great question! The *Basic Plan* gives you WhatsApp orders and manual payments. The *Premium Plan* adds priority support, unlimited images, and analytics. Check the features list for each plan for full details!",timestamp:p().subtract(4,"minute").format("HH:mm"),isOwnMessage:!1,nameColor:"#165dfc"},{sender:"Emma",text:"Can I switch from monthly to annual later?",timestamp:p().subtract(3,"minute").format("HH:mm"),isOwnMessage:!1,nameColor:"#dc16fc"},{sender:"Support Team",text:"Yes, Emma! You can upgrade or change your billing cycle anytime. Just click *Upgrade* or *Downgrade* on any plan. Annual plans save you up to 20%!",timestamp:p().subtract(2,"minute").format("HH:mm"),isOwnMessage:!1,nameColor:"#165dfc"},{sender:"You",text:"Perfect! I’m ready to upgrade to Pro.",timestamp:p().subtract(1,"minute").format("HH:mm"),isOwnMessage:!0},{sender:"Support Team",text:"Awesome! Click *Upgrade* on the Pro plan card. We’ll prepare your secure payment link in seconds. Let’s get your store growing!",timestamp:p().format("HH:mm"),isOwnMessage:!1,nameColor:"#165dfc"}]}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},activeSubscription(){var s;return(s=this.store)==null?void 0:s.active_subscription},currentPricingPlan(){var s;return(s=this.activeSubscription)==null?void 0:s.pricing_plan},hasActiveSubscription(){return!!this.activeSubscription},isShowingMonthlyPricingPlans(){return this.activePricingPlan==="monthly"},isShowingAnnualPricingPlans(){return this.activePricingPlan==="annually"},filteredPricingPlans(){const s=this.isShowingMonthlyPricingPlans?"month":"year";return this.pricingPlans.filter(t=>{var n,c;return((c=(n=t.metadata)==null?void 0:n.store_subscription)==null?void 0:c.frequency)===s})}},methods:{changePricingPlan(s){this.activePricingPlan=s},isCurrentPlan(s){return this.currentPricingPlan?s.id===this.currentPricingPlan.id:!1},buttonText(s){if(this.isCurrentPlan(s))return"Current Plan";if(!this.hasActiveSubscription)return"Subscribe Now";const t=parseFloat(this.currentPricingPlan.price.amount);return parseFloat(s.price.amount)>t?"Upgrade":"Downgrade"},buttonType(s){return this.isCurrentPlan(s)?"outline":"primary"},buttonDisabled(s,t){return this.isCurrentPlan(s)?!0:this.isGeneratingPaymentLink&&this.pricingPlanIndex!==t},async showPricingPlans(){var s,t;try{this.isLoadingPricingPlans=!0;const n={params:{platform:"web",billing_type:"one time",type:"store subscription"}},c=await axios.get("/api/pricing-plans",n);this.pagination=c.data,this.pricingPlans=this.pagination.data}catch(n){const c=((t=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:t.message)||(n==null?void 0:n.message)||"Something went wrong while fetching pricing plans";this.notificationState.showWarningNotification(c),this.formState.setServerFormErrors(n),console.error("Failed to fetch pricing plans:",n)}finally{this.isLoadingPricingPlans=!1}},async payPricingPlan(s,t){var n,c;if(!this.isGeneratingPaymentLink)try{this.pricingPlanIndex=t,this.isGeneratingPaymentLink=!0;const r={store_id:this.store.id,payment_method_type:"dpo"},y=(await axios.post(`/api/pricing-plans/${s.id}/pay`,r)).data.metadata.dpo_payment_url;window.location.href=y}catch(r){const o=((c=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:c.message)||(r==null?void 0:r.message)||"Something went wrong while subscribing";this.notificationState.showWarningNotification(o),this.formState.setServerFormErrors(r),console.error("Failed to subscribe:",r)}finally{this.isGeneratingPaymentLink=!1,this.pricingPlanIndex=null}}},created(){this.showPricingPlans()}},T={class:"min-h-screen bg-linear-to-br from-blue-50 via-white to-indigo-50 py-24 px-6"},j={class:"max-w-7xl mx-auto"},G={key:0,class:"flex justify-center py-20"},O={class:"flex justify-center mb-4"},W={class:"inline-flex bg-gray-100 p-1 rounded-full shadow-inner"},I={class:"flex justify-center gap-6 max-w-6xl mx-auto mb-8"},N={key:0,class:"group relative bg-white border border-gray-200 rounded-2xl p-8 shadow-sm hover:shadow-xl hover:border-gray-300 transition-all duration-300"},D={class:"mb-8"},E={class:"text-gray-500 text-sm"},J={class:"space-y-3 mb-8"},U={key:0,class:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white text-xs font-semibold px-3 py-1 rounded-full"},z={class:"mb-6"},V={class:"text-xl font-bold text-gray-900"},Y={class:"text-sm text-gray-500 mt-1 max-w-xs"},q={class:"mb-8"},R={class:"text-4xl font-bold text-gray-900"},K={class:"text-gray-500 text-sm"},Q={key:0,class:"flex items-center justify-center space-x-2"},X={class:"space-y-3"};function Z(s,t,n,c,r,o){const y=P("Loader"),b=P("Button"),S=P("JoinOurWhatsappGroup");return i(),a("div",T,[e("div",j,[t[10]||(t[10]=e("div",{class:"text-center mb-8"},[e("h1",{class:"flex items-center justify-center gap-2 text-3xl font-bold text-gray-900 mb-3"}," Pricing Plans "),e("p",{class:"text-gray-600 max-w-2xl mx-auto text-base"}," Choose the perfect plan for your store and start selling instantly! ")],-1)),r.isLoadingPricingPlans?(i(),a("div",G,[h(y)])):(i(),a(u,{key:1},[e("div",O,[e("div",W,[e("button",{onClick:t[0]||(t[0]=()=>o.changePricingPlan("monthly")),class:f(["px-6 py-2.5 rounded-full text-sm font-medium transition-all duration-300 flex items-center gap-2",o.isShowingMonthlyPricingPlans?"bg-white text-blue-700 shadow-sm":"text-gray-600 hover:text-gray-800"])}," Monthly ",2),e("button",{onClick:t[1]||(t[1]=()=>o.changePricingPlan("annually")),class:f(["px-6 py-2.5 rounded-full text-sm font-medium transition-all duration-300 flex items-center gap-2",o.isShowingAnnualPricingPlans?"bg-white text-blue-700 shadow-sm":"text-gray-600 hover:text-gray-800"])}," Annually ",2)])]),e("div",I,[o.hasActiveSubscription?v("",!0):(i(),a("div",N,[t[6]||(t[6]=e("div",{class:"mb-6"},[e("h3",{class:"text-xl font-bold text-gray-900"},"Basic Plan"),e("p",{class:"text-sm text-gray-500 mt-1"},"Basic store access with limited features")],-1)),e("div",D,[t[3]||(t[3]=e("span",{class:"text-4xl font-bold text-gray-900"},"$0.00",-1)),e("span",E,[t[2]||(t[2]=m(" / ",-1)),o.isShowingMonthlyPricingPlans?(i(),a(u,{key:0},[m("month")],64)):(i(),a(u,{key:1},[m("year")],64))])]),e("div",J,[(i(!0),a(u,null,x(r.freePlanFeatures,(l,d)=>(i(),a("div",{key:d,class:"flex items-center text-sm text-gray-600"},[t[4]||(t[4]=e("svg",{class:"w-5 h-5 text-green-500 mr-2 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),m(" "+g(l),1)]))),128))]),h(b,{size:"md",type:"outline",disabled:!0,buttonClass:"w-full"},{default:_(()=>[...t[5]||(t[5]=[m(" Current Plan ",-1)])]),_:1})])),(i(!0),a(u,null,x(o.filteredPricingPlans,(l,d)=>{var w;return i(),a("div",{key:d,class:f(["group relative bg-white rounded-2xl p-8 shadow-sm hover:shadow-xl transition-all duration-300 border",o.isCurrentPlan(l)?"border-blue-500":"border-gray-200"])},[(w=l.metadata)!=null&&w.recommended?(i(),a("div",U," Most Popular ")):v("",!0),e("div",z,[e("h3",V,g(l.name),1),e("p",Y,g(l.description),1)]),e("div",q,[e("span",R,g(l.price.amount_with_currency),1),e("span",K,[t[7]||(t[7]=m(" / ",-1)),o.isShowingMonthlyPricingPlans?(i(),a(u,{key:0},[m("month")],64)):(i(),a(u,{key:1},[m("year")],64))])]),h(b,{size:"lg",buttonClass:"w-full mb-6",type:o.buttonType(l),loading:r.pricingPlanIndex===d,disabled:o.buttonDisabled(l,d),action:()=>o.payPricingPlan(l,d)},{default:_(()=>[r.pricingPlanIndex===d?(i(),a("div",Q,[h(y,{color:"border-gray-300"}),t[8]||(t[8]=e("span",{class:"animate-pulse"},"Preparing payment...",-1))])):(i(),a(u,{key:1},[m(g(o.buttonText(l)),1)],64))]),_:2},1032,["type","loading","disabled","action"]),e("div",X,[(i(!0),a(u,null,x(l.features,(C,M)=>(i(),a("div",{key:M,class:"flex items-center text-sm text-gray-600"},[t[9]||(t[9]=e("svg",{class:"w-5 h-5 text-green-500 mr-2 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),m(" "+g(C),1)]))),128))])],2)}),128))]),h(S,{mockMessages:r.mockMessages},null,8,["mockMessages"])],64))])])}const ct=A(F,[["render",Z]]);export{ct as default};
