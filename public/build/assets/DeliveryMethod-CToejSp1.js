import{M as J}from"./Modal-OgCr3eB2.js";import{c as K,I as W}from"./Input-DBnU4wzW.js";import{S as de}from"./Switch-Ce3EJdoe.js";import{S as te}from"./Select-BriLwhlS.js";import{B as q}from"./Button-B134edVj.js";import{i as ie}from"./stringUtils-Bvzw0-oW.js";import{S as N}from"./Skeleton-Dmr_VmHU.js";import{i as Q}from"./index-ZeDnS8SV.js";import{P as R}from"./Pill-CuSw6nga.js";import{c as s,e as n,t as f,o as r,H as A,b as o,a,F as V,f as I,i as F,g as x,d as h,r as y,w as U,D as ne,p as me,k as E,s as ue,u as re}from"./app-CGNgl8eN.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as oe}from"./SelectTags-BpCz9LPe.js";import{S as Y}from"./square-pen-BFXcjPDA.js";import{c as X}from"./createLucideIcon-BakIve7O.js";import{T as G}from"./trash-2-Bff_GbSw.js";import{P as j}from"./plus-B1hMjDDg.js";import{A as he}from"./AddressInput-fkYgF1JF.js";import{D as ye,a as ce}from"./DeliveryTimePicker-D0wS3gqh.js";import{T as ve}from"./Tooltip-BCHxPPLL.js";import{C as le}from"./clock-Dhh7_EQj.js";import{V as ge}from"./vue-draggable-next.esm-bundler-BhuNrD5X.js";import{S as pe,H as _e,T as fe,a as Me,L as be}from"./tally-2-D-NiptkV.js";import{C as Se}from"./cloud-upload-CLet0zlb.js";import{C as xe}from"./calendar-NpN6Drv3.js";import{M as ke}from"./map-pin-C0sGBiuG.js";import{M as Fe}from"./move-DR2tcvbS.js";import{I as we}from"./info-hHKMi5RL.js";import{M as De}from"./move-left-CQva05e2.js";import"./x-DHw5U7EU.js";import"./Copy-Bp4ENaQe.js";import"./ShineEffect-D1V-RWKB.js";import"./Popover-BZ2E_DR-.js";import"./capitalize-ChUSrr1V.js";import"./refresh-ccw-DblrTBks.js";import"./circle-check-Bkm_qb2i.js";import"./circle-alert-uARVagVJ.js";import"./parsePhoneNumber-xMTQFMCS.js";import"./Loader-DZWJgCmt.js";import"./GoogleMaps-C3evqznM.js";import"./SelectCountry-CXCLL9t7.js";import"./Datepicker-_--OBDZR.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=X("locate-fixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=X("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=X("scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),Ve={props:{errorText:{type:[String,null],default:null}}},Ce={key:0,class:"scroll-to-error font-medium text-red-500 text-xs"};function Le(l,t,u,g,i,e){return u.errorText?(r(),s("span",Ce,f(u.errorText),1)):n("",!0)}const ee=B(Ve,[["render",Le]]),ze={inject:["formState","storeState","deliveryMethodState"],components:{Scale:Te,Minimize:$,SquarePen:Y,Pill:R,Input:W,Button:q,Skeleton:N,ErrorText:ee,SelectTags:oe},data(){return{Plus:j,Trash2:G,expandedStates:[],originalWeightCategories:[]}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},isLoadingDeliveryMethod(){return this.deliveryMethodState.isLoadingDeliveryMethod},deliveryMethodForm(){return this.deliveryMethodState.deliveryMethodForm},hasWeightCategories(){return this.deliveryMethodForm.weight_categories.length>0},hasOriginalWeightCategories(){return this.originalWeightCategories.length>0},weightCategoriesHaveChanged(){const l=A(this.deliveryMethodForm.weight_categories),t=A(this.originalWeightCategories);return!Q(l,t)}},methods:{convertToMoneyWithSymbol:K,onAddWeightCategory(){this.deliveryMethodForm.weight_categories.push({fee:"",name:"",weights:[]}),this.expandedStates.push(!0)},onRemoveWeightCategory(l){this.deliveryMethodForm.weight_categories.splice(l,1),this.expandedStates.splice(l,1)},onResetWeightCategories(){this.deliveryMethodForm.weight_categories=A(this.originalWeightCategories),this.expandedStates=new Array(this.deliveryMethodForm.weight_categories.length).fill(!0)},toggleExpanded(l){this.expandedStates[l]=!this.expandedStates[l]}}},Ee={class:"w-full space-y-4"},Ae={key:0,class:"bg-gray-50 p-4 border border-gray-300 rounded-lg"},Ue={class:"flex justify-between items-center"},Ie={class:"flex items-center space-x-4"},Oe={class:"flex items-center space-x-2"},Pe={class:"absolute top-2 right-2 flex items-center space-x-2"},Ze={key:0,class:"space-y-4"},Be={class:"flex items-center space-x-2 text-sm text-gray-500"},He={class:"space-y-4"},je={class:"flex space-x-4"},We=["onClick"],qe={class:"flex items-center space-x-4 text-sm text-gray-500 mb-4"},Ne={class:"flex items-center space-x-2"},Re={key:0,class:"flex space-x-2"},Qe={key:0},Ge={class:"flex items-center space-x-4 px-4 py-4 border border-gray-300 rounded-lg bg-gray-50"},Je={class:"text-sm space-y-2"},Ke={class:"w-full flex justify-end space-x-2"};function Ye(l,t,u,g,i,e){const L=y("Skeleton"),C=y("Minimize"),p=y("SquarePen"),_=y("Button"),v=y("Scale"),M=y("Input"),k=y("SelectTags"),w=y("Pill"),D=y("ErrorText");return r(),s("div",Ee,[t[4]||(t[4]=o("h1",{class:"text-md font-bold m-2"},"Weights",-1)),e.isLoadingStore||e.isLoadingDeliveryMethod?(r(),s("div",Ae,[o("div",Ue,[o("div",Ie,[a(L,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0}),a(L,{width:"w-32",shine:!0})]),o("div",Oe,[a(L,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0}),a(L,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0})])])])):(r(),s(V,{key:1},[(r(!0),s(V,null,I(e.deliveryMethodForm.weight_categories,(O,d)=>{var z;return r(),s("div",{key:d,class:"relative bg-gray-50 p-4 border border-gray-300 rounded-lg"},[o("div",Pe,[i.expandedStates[d]?(r(),h(C,{key:0,size:"16",class:"text-gray-500 cursor-pointer hover:opacity-50",onClick:U(b=>e.toggleExpanded(d),["stop"])},null,8,["onClick"])):(r(),h(p,{key:1,size:"16",class:"text-gray-500 cursor-pointer hover:opacity-50",onClick:U(b=>e.toggleExpanded(d),["stop"])},null,8,["onClick"])),a(_,{size:"xs",type:"bareDanger",leftIcon:i.Trash2,action:()=>e.onRemoveWeightCategory(d)},null,8,["leftIcon","action"])]),i.expandedStates[d]?(r(),s("div",Ze,[o("div",Be,[a(v,{size:"16",class:"text-gray-500"}),o("span",null,"Category "+f(d+1),1)]),o("div",He,[o("div",je,[a(M,{type:"text",label:"Category Name",placeholder:"Light weight",tooltipContent:"Set the name for this weight category",modelValue:e.deliveryMethodForm.weight_categories[d].name,"onUpdate:modelValue":b=>e.deliveryMethodForm.weight_categories[d].name=b,errorText:e.formState.getFormError("weight_categories"+d+"name")},null,8,["modelValue","onUpdate:modelValue","errorText"]),a(M,{type:"money",label:"Category fee",currency:(z=e.store)==null?void 0:z.currency,modelValue:e.deliveryMethodForm.weight_categories[d].fee,"onUpdate:modelValue":b=>e.deliveryMethodForm.weight_categories[d].fee=b,errorText:e.formState.getFormError("weight_categories"+d+"fee"),tooltipContent:"Specify the fee charged for deliveries within this weight category"},null,8,["currency","modelValue","onUpdate:modelValue","errorText"])]),a(k,{showOptions:!1,placeholder:"Add weight range",label:"Weight Range ("+e.store.weight_unit+")",modelValue:e.deliveryMethodForm.weight_categories[d].weights,"onUpdate:modelValue":b=>e.deliveryMethodForm.weight_categories[d].weights=b,onChange:t[0]||(t[0]=b=>e.deliveryMethodState.saveStateDebounced("Weights changed")),errorText:e.formState.getFormError("weight_categories"+d+"weights"),tooltipContent:"Specify the weight range for this category, e.g 2.5 or 5-10"},null,8,["label","modelValue","onUpdate:modelValue","errorText"])])])):(r(),s("div",{key:1,onClick:b=>e.toggleExpanded(d),class:"space-y-2 cursor-pointer"},[o("div",qe,[o("div",Ne,[a(v,{size:"16",class:"text-gray-500"}),o("span",null,"Category "+f(d+1),1)]),e.deliveryMethodForm.weight_categories[d].name?(r(),h(w,{key:0,size:"xs",type:"primary",showDot:!1},{default:x(()=>[F(f(e.deliveryMethodForm.weight_categories[d].name)+" â†’ "+f(e.convertToMoneyWithSymbol(e.deliveryMethodForm.weight_categories[d].fee,this.store.currency)),1)]),_:2},1024)):(r(),h(D,{key:1,errorText:"No name",margin:"mt-0"}))]),e.deliveryMethodForm.weight_categories[d].weights.length?(r(),s("div",Re,[(r(!0),s(V,null,I(e.deliveryMethodForm.weight_categories[d].weights,(b,P)=>(r(),s("span",{key:P,class:"py-0.5 px-2 bg-gray-100 border border-gray-300 text-gray-500 text-xs rounded-lg"},f(b)+" "+f(e.store.weight_unit),1))),128))])):(r(),h(D,{key:1,errorText:"No weight range",margin:"mt-0"})),e.formState.getFormError("weight_categories"+d+"name")?(r(),h(D,{key:2,errorText:e.formState.getFormError("weight_categories"+d+"name")},null,8,["errorText"])):n("",!0),e.formState.getFormError("weight_categories"+d+"fee")?(r(),h(D,{key:3,errorText:e.formState.getFormError("weight_categories"+d+"fee")},null,8,["errorText"])):n("",!0)],8,We))])}),128)),e.hasWeightCategories?n("",!0):(r(),s("div",Qe,[o("div",Ge,[a(v,{size:"20",class:"text-gray-500"}),o("div",Je,[o("p",null,[a(w,{type:"primary",size:"xs",showDot:!1,action:e.onAddWeightCategory},{default:x(()=>[...t[1]||(t[1]=[F("+ Add Category",-1)])]),_:1},8,["action"]),t[2]||(t[2]=F(" to define your weight",-1))])])])])),o("div",Ke,[e.weightCategoriesHaveChanged&&e.hasOriginalWeightCategories?(r(),h(_,{key:0,size:"xs",type:"light",action:e.onResetWeightCategories},{default:x(()=>[...t[3]||(t[3]=[o("span",null,"Undo",-1)])]),_:1},8,["action"])):n("",!0),a(_,{size:"xs",type:"primary",leftIcon:i.Plus,action:e.onAddWeightCategory},{default:x(()=>[o("span",null,f(e.hasWeightCategories?"Add Another Category":"Add Category"),1)]),_:1},8,["leftIcon","action"])])],64))])}const Xe=B(ze,[["render",Ye]]),$e={inject:["formState","storeState","deliveryMethodState"],components:{LocateFixed:se,Minimize:$,SquarePen:Y,Pill:R,Input:W,Button:q,Skeleton:N,ErrorText:ee,AddressInput:he},data(){return{Plus:j,Trash2:G,expandedStates:[],originalDistanceZones:[]}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},isLoadingDeliveryMethod(){return this.deliveryMethodState.isLoadingDeliveryMethod},deliveryMethodForm(){return this.deliveryMethodState.deliveryMethodForm},hasDistanceZones(){return this.deliveryMethodForm.distance_zones.length>0},hasOriginalDistanceZones(){return this.originalDistanceZones.length>0},distanceZonesHaveChanged(){const l=A(this.deliveryMethodForm.distance_zones),t=A(this.originalDistanceZones);return!Q(l,t)}},methods:{convertToMoneyWithSymbol:K,onAddDistanceZone(){var l=this.deliveryMethodForm.distance_zones.length,t=l>0?(this.deliveryMethodForm.distance_zones[l-1].fee*2).toString():"50.00",u=l>0?(this.deliveryMethodForm.distance_zones[l-1].distance*2).toString():"10";this.deliveryMethodForm.distance_zones.push({fee:t,distance:u}),this.expandedStates.push(!0)},onRemoveDistanceZone(l){this.deliveryMethodForm.distance_zones.splice(l,1),this.expandedStates.splice(l,1)},onResetDistanceZones(){this.deliveryMethodForm.distance_zones=A(this.originalDistanceZones),this.expandedStates=new Array(this.deliveryMethodForm.distance_zones.length).fill(!0)},toggleExpanded(l){this.expandedStates[l]=!this.expandedStates[l]},setAddress(l){this.deliveryMethodForm.address=l,this.deliveryMethodState.saveStateDebounced("Address changed")},unsetAddress(){this.deliveryMethodForm.address=null,this.deliveryMethodState.saveStateDebounced("Address removed")}}},et={class:"w-full space-y-4 select-none"},tt={key:1,class:"bg-gray-50 p-4 border border-gray-300 rounded-lg"},rt={class:"flex justify-between items-center"},ot={class:"flex items-center space-x-4"},lt={class:"flex items-center space-x-2"},st={class:"absolute top-2 right-2 flex items-center space-x-2"},at={key:0,class:"p-4 space-y-4"},dt={class:"flex items-center space-x-2 text-sm text-gray-500"},it={class:"flex space-x-4"},nt={class:"text-xs ml-2"},mt=["onClick"],ut={class:"flex items-center space-x-4 text-sm text-gray-500"},ht={class:"flex items-center space-x-2"},yt={class:"text-sm"},ct={key:0},vt={class:"flex items-center space-x-4 px-4 py-4 border border-gray-300 rounded-lg bg-gray-50"},gt={class:"text-sm space-y-2"},pt={class:"w-full flex justify-end space-x-2"};function _t(l,t,u,g,i,e){const L=y("Input"),C=y("AddressInput"),p=y("Skeleton"),_=y("Minimize"),v=y("SquarePen"),M=y("Button"),k=y("LocateFixed"),w=y("Pill"),D=y("ErrorText");return r(),s("div",et,[a(L,{type:"checkbox",inputLabel:"Show distance on invoice",skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,modelValue:e.deliveryMethodForm.show_distance_on_invoice,"onUpdate:modelValue":t[0]||(t[0]=O=>e.deliveryMethodForm.show_distance_on_invoice=O),errorText:e.formState.getFormError("show_distance_on_invoice"),inputDescription:"The calculated delivery distance will appear on the invoice",onChange:t[1]||(t[1]=O=>e.deliveryMethodState.saveStateDebounced("Show distance on invoice changed"))},null,8,["skeleton","modelValue","errorText"]),!e.isLoadingStore&&!e.isLoadingDeliveryMethod?(r(),h(C,{key:0,onlyValidate:!0,title:"Base location",pinLocationOnMap:!0,onOnDeleted:e.unsetAddress,onOnValidated:e.setAddress,address:e.deliveryMethodForm.address,triggerClass:"space-y-4 p-4 rounded-lg shadow-lg bg-white",subtitle:"Starting point for calculating delivery distances"},null,8,["onOnDeleted","onOnValidated","address"])):n("",!0),t[5]||(t[5]=o("h1",{class:"text-md font-bold m-2"},"Zones",-1)),e.isLoadingStore||e.isLoadingDeliveryMethod?(r(),s("div",tt,[o("div",rt,[o("div",ot,[a(p,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0}),a(p,{width:"w-32",shine:!0})]),o("div",lt,[a(p,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0}),a(p,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0})])])])):(r(),s(V,{key:2},[(r(!0),s(V,null,I(e.deliveryMethodForm.distance_zones,(O,d)=>{var z;return r(),s("div",{key:d,class:"relative bg-gray-50 border border-gray-300 rounded-lg"},[o("div",st,[i.expandedStates[d]?(r(),h(_,{key:0,size:"16",class:"text-gray-500 cursor-pointer hover:opacity-50",onClick:U(b=>e.toggleExpanded(d),["stop"])},null,8,["onClick"])):(r(),h(v,{key:1,size:"16",class:"text-gray-500 cursor-pointer hover:opacity-50",onClick:U(b=>e.toggleExpanded(d),["stop"])},null,8,["onClick"])),a(M,{size:"xs",type:"bareDanger",leftIcon:i.Trash2,action:()=>e.onRemoveDistanceZone(d)},null,8,["leftIcon","action"])]),i.expandedStates[d]?(r(),s("div",at,[o("div",dt,[a(k,{size:"16",class:"text-gray-500"}),o("span",null,"Zone "+f(d+1),1)]),o("div",it,[a(L,{min:"0",type:"number",placeholder:"10",label:"Delivery distance up to",modelValue:e.deliveryMethodForm.distance_zones[d].distance,"onUpdate:modelValue":b=>e.deliveryMethodForm.distance_zones[d].distance=b,errorText:e.formState.getFormError("distance_zones"+d+"distance"),tooltipContent:"Set the maximum distance eligible for this delivery zone"},{suffix:x(()=>[o("span",nt,f(e.store.distance_unit),1)]),_:1},8,["modelValue","onUpdate:modelValue","errorText"]),a(L,{type:"money",label:"Delivery fee",currency:(z=e.store)==null?void 0:z.currency,modelValue:e.deliveryMethodForm.distance_zones[d].fee,"onUpdate:modelValue":b=>e.deliveryMethodForm.distance_zones[d].fee=b,errorText:e.formState.getFormError("distance_zones"+d+"fee"),tooltipContent:"Specify the fee charged for deliveries within the set distance range"},null,8,["currency","modelValue","onUpdate:modelValue","errorText"])])])):(r(),s("div",{key:1,onClick:b=>e.toggleExpanded(d),class:"rounded-lg p-4 space-y-2 cursor-pointer hover:bg-gray-100"},[o("div",ut,[o("div",ht,[a(k,{size:"16",class:"text-gray-500"}),o("span",yt,"Zone "+f(d+1),1)]),e.deliveryMethodForm.distance_zones[d].distance?(r(),h(w,{key:0,size:"xs",type:"primary",showDot:!1},{default:x(()=>[F(f(e.deliveryMethodForm.distance_zones[d].distance)+" "+f(e.store.distance_unit)+" â†’ "+f(e.convertToMoneyWithSymbol(e.deliveryMethodForm.distance_zones[d].fee,this.store.currency)),1)]),_:2},1024)):(r(),h(D,{key:1,errorText:"No distance",margin:"mt-0"}))]),e.formState.getFormError("distance_zones"+d+"distance")?(r(),h(D,{key:0,errorText:e.formState.getFormError("distance_zones"+d+"distance")},null,8,["errorText"])):n("",!0),e.formState.getFormError("distance_zones"+d+"fee")?(r(),h(D,{key:1,errorText:e.formState.getFormError("distance_zones"+d+"fee")},null,8,["errorText"])):n("",!0)],8,mt))])}),128)),e.hasDistanceZones?n("",!0):(r(),s("div",ct,[o("div",vt,[a(k,{size:"20",class:"text-gray-500"}),o("div",gt,[o("p",null,[a(w,{type:"primary",size:"xs",showDot:!1,action:e.onAddDistanceZone},{default:x(()=>[...t[2]||(t[2]=[F("+ Add Zone",-1)])]),_:1},8,["action"]),t[3]||(t[3]=F(" to offer delivery within specific distances for a fee",-1))])])])])),o("div",pt,[e.distanceZonesHaveChanged&&e.hasOriginalDistanceZones?(r(),h(M,{key:0,size:"xs",type:"light",action:e.onResetDistanceZones},{default:x(()=>[...t[4]||(t[4]=[o("span",null,"Undo",-1)])]),_:1},8,["action"])):n("",!0),a(M,{size:"xs",type:"primary",leftIcon:i.Plus,action:e.onAddDistanceZone},{default:x(()=>[o("span",null,f(e.hasDistanceZones?"Add Another Zone":"Add Zone"),1)]),_:1},8,["leftIcon","action"])])],64))])}const ft=B($e,[["render",_t]]),Mt={inject:["deliveryMethodState"],components:{Skeleton:N,DeliveryDatePicker:ce,DeliveryTimePicker:ye},props:{form:{type:Object}},data(){return{testDeliveryDate:null,testDeliveryTimeslot:null,scheduleOptions:{},showScheduleSummary:!0,isLoadingDateOptions:!1,isLoadingTimeOptions:!1}},computed:{deliveryMethodForm(){return this.deliveryMethodState.deliveryMethodForm},scheduleKeyPoints(){return this.scheduleOptions.schedule_key_points||[]}},methods:{formattedRelativeDate:me,formattedShortWeekday:ne,onIsLoadingDateOptions(l){this.testDeliveryDate=null,this.testDeliveryTimeslot=null,this.isLoadingDateOptions=l},onIsLoadingTimeOptions(l){this.testDeliveryTimeslot=null,this.isLoadingTimeOptions=l},toggleScheduleSummary(){this.showScheduleSummary=!this.showScheduleSummary,this.testDeliveryDate=null,this.testDeliveryTimeslot=null}}},bt={class:"bg-white border border-gray-300 rounded-lg space-y-4"},St={class:"hover:text-gray-500 active:text-gray-400"},xt={class:"text-xs"},kt={key:0,class:"space-y-4 px-4 pb-4"},Ft={class:"text-sm text-gray-500"},wt={class:"grid grid-cols-2 gap-4 space-x-2"},Dt={class:"col-span-2 lg:col-span-1 space-y-2"},Tt={key:0,class:"col-span-2 lg:col-span-1 space-y-2"},Vt={key:0,class:"text-sm text-green-500"},Ct={class:"font-bold"};function Lt(l,t,u,g,i,e){const L=y("Skeleton"),C=y("DeliveryDatePicker"),p=y("DeliveryTimePicker");return r(),s("div",bt,[o("div",{onClick:t[2]||(t[2]=(..._)=>e.toggleScheduleSummary&&e.toggleScheduleSummary(..._)),class:E(["space-y-2 p-4 cursor-pointer rounded-t-lg rounded-x-lg hover:bg-gray-50",i.showScheduleSummary?"border-b border-gray-300 border-dashed pb-4":"rounded-b-lg"])},[o("div",{class:E(["flex justify-between",{"mb-4":i.showScheduleSummary}])},[t[9]||(t[9]=o("p",{class:"font-bold text-md"},"Schedule Summary",-1)),o("div",St,[i.showScheduleSummary?(r(),s("svg",{key:0,class:"w-6 h-6 cursor-pointer",onClick:t[0]||(t[0]=_=>i.showScheduleSummary=!1),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...t[7]||(t[7]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"},null,-1)])])):(r(),s("svg",{key:1,onClick:t[1]||(t[1]=_=>i.showScheduleSummary=!0),class:"w-6 h-6 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...t[8]||(t[8]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1)])]))])],2),i.showScheduleSummary?(r(),s(V,{key:0},[i.isLoadingDateOptions||i.isLoadingTimeOptions?(r(),s(V,{key:0},I([1,2,3],(_,v)=>o("div",{key:v,class:"flex space-x-2"},[a(L,{width:"w-2"}),a(L,{width:"w-1/2"})])),64)):(r(!0),s(V,{key:1},I(e.scheduleKeyPoints,(_,v)=>(r(),s("div",{key:v,class:"px-2 border-l-4 border-green-300"},[o("p",xt,f(_),1)]))),128))],64)):n("",!0)],2),i.showScheduleSummary?(r(),s("div",kt,[t[16]||(t[16]=o("p",{class:"font-bold text-md mb-2"},"Test Schedule",-1)),o("div",null,[o("p",Ft,[t[10]||(t[10]=F("This is how the delivery days",-1)),e.deliveryMethodForm.schedule_type=="date and time"?(r(),s(V,{key:0},[F(" and times")],64)):n("",!0),t[11]||(t[11]=F(" will appear for customers shopping today.",-1))]),t[12]||(t[12]=o("p",{class:"text-sm text-gray-500"},"Go ahead and try it! ðŸ«£",-1))]),o("div",wt,[o("div",Dt,[t[13]||(t[13]=o("p",{class:"font-bold text-sm"},"Delivery date",-1)),a(C,{form:u.form,modelValue:i.testDeliveryDate,"onUpdate:modelValue":t[3]||(t[3]=_=>i.testDeliveryDate=_),onIsLoading:e.onIsLoadingDateOptions,onScheduleOptions:t[4]||(t[4]=_=>i.scheduleOptions=_)},null,8,["form","modelValue","onIsLoading"])]),i.testDeliveryDate&&!i.isLoadingDateOptions&&e.deliveryMethodForm.schedule_type=="date and time"?(r(),s("div",Tt,[t[14]||(t[14]=o("p",{class:"font-bold text-sm"},"Delivery time",-1)),a(p,{form:u.form,modelValue:i.testDeliveryTimeslot,"onUpdate:modelValue":t[5]||(t[5]=_=>i.testDeliveryTimeslot=_),deliveryDate:i.testDeliveryDate,onIsLoading:e.onIsLoadingTimeOptions,onScheduleOptions:t[6]||(t[6]=_=>i.scheduleOptions=_)},null,8,["form","modelValue","deliveryDate","onIsLoading"])])):n("",!0)]),i.testDeliveryDate?(r(),s("p",Vt,[t[15]||(t[15]=F("Your order will be delivered on ",-1)),o("span",Ct,f(i.testDeliveryDate)+" ("+f(e.formattedShortWeekday(i.testDeliveryDate))+")",1),F(", just "+f(e.formattedRelativeDate(i.testDeliveryDate,!0))+" from now.",1)])):n("",!0)])):n("",!0)])}const zt=B(Mt,[["render",Lt]]),Et={inject:["formState","storeState","deliveryMethodState"],components:{LocateFixed:se,Minimize:$,SquarePen:Y,Pill:R,Input:W,Button:q,Skeleton:N,ErrorText:ee,SelectTags:oe},data(){return{Plus:j,Trash2:G,expandedStates:[],originalPostalCodeZones:[]}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},isLoadingDeliveryMethod(){return this.deliveryMethodState.isLoadingDeliveryMethod},deliveryMethodForm(){return this.deliveryMethodState.deliveryMethodForm},hasPostalCodeZones(){return this.deliveryMethodForm.postal_code_zones.length>0},hasOriginalPostalCodeZones(){return this.originalPostalCodeZones.length>0},postalCodeZonesHaveChanged(){const l=A(this.deliveryMethodForm.postal_code_zones),t=A(this.originalPostalCodeZones);return!Q(l,t)}},methods:{convertToMoneyWithSymbol:K,onAddPostalCodeZone(){var l=this.deliveryMethodForm.postal_code_zones.length,t=l>0?(this.deliveryMethodForm.postal_code_zones[l-1].fee*2).toString():"50.00",u=l>0?(this.deliveryMethodForm.postal_code_zones[l-1].distance*2).toString():"10";this.deliveryMethodForm.postal_code_zones.push({fee:t,distance:u}),this.expandedStates.push(!0)},onRemovePostalCodeZone(l){this.deliveryMethodForm.postal_code_zones.splice(l,1),this.expandedStates.splice(l,1)},onResetPostalCodeZones(){this.deliveryMethodForm.postal_code_zones=A(this.originalPostalCodeZones),this.expandedStates=new Array(this.deliveryMethodForm.postal_code_zones.length).fill(!0)},toggleExpanded(l){this.expandedStates[l]=!this.expandedStates[l]}}},At={class:"w-full space-y-4 select-none"},Ut={key:0,class:"bg-gray-50 p-4 border border-gray-300 rounded-lg"},It={class:"flex justify-between items-center"},Ot={class:"flex items-center space-x-4"},Pt={class:"flex items-center space-x-2"},Zt={class:"absolute top-2 right-2 flex items-center space-x-2"},Bt={key:0,class:"p-4 space-y-4"},Ht={class:"flex items-center space-x-2 text-sm text-gray-500"},jt={class:"space-y-4"},Wt={class:"flex space-x-4"},qt=["onClick"],Nt={class:"flex items-center space-x-4 text-sm text-gray-500 mb-4"},Rt={class:"flex items-center space-x-2"},Qt={class:"text-sm"},Gt={key:0,class:"flex space-x-2"},Jt={key:0},Kt={class:"flex items-center space-x-4 px-4 py-4 border border-gray-300 rounded-lg bg-gray-50"},Yt={class:"text-sm space-y-2"},Xt={class:"w-full flex justify-end space-x-2"};function $t(l,t,u,g,i,e){const L=y("Skeleton"),C=y("Minimize"),p=y("SquarePen"),_=y("Button"),v=y("LocateFixed"),M=y("Input"),k=y("SelectTags"),w=y("Pill"),D=y("ErrorText");return r(),s("div",At,[t[4]||(t[4]=o("h1",{class:"text-md font-bold m-2"},"Zones",-1)),e.isLoadingStore||e.isLoadingDeliveryMethod?(r(),s("div",Ut,[o("div",It,[o("div",Ot,[a(L,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0}),a(L,{width:"w-32",shine:!0})]),o("div",Pt,[a(L,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0}),a(L,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0})])])])):(r(),s(V,{key:1},[(r(!0),s(V,null,I(e.deliveryMethodForm.postal_code_zones,(O,d)=>{var z;return r(),s("div",{key:d,class:"relative bg-gray-50 border border-gray-300 rounded-lg"},[o("div",Zt,[i.expandedStates[d]?(r(),h(C,{key:0,size:"16",class:"text-gray-500 cursor-pointer hover:opacity-50",onClick:U(b=>e.toggleExpanded(d),["stop"])},null,8,["onClick"])):(r(),h(p,{key:1,size:"16",class:"text-gray-500 cursor-pointer hover:opacity-50",onClick:U(b=>e.toggleExpanded(d),["stop"])},null,8,["onClick"])),a(_,{size:"xs",type:"bareDanger",leftIcon:i.Trash2,action:()=>e.onRemovePostalCodeZone(d)},null,8,["leftIcon","action"])]),i.expandedStates[d]?(r(),s("div",Bt,[o("div",Ht,[a(v,{size:"16",class:"text-gray-500"}),o("span",null,"Zone "+f(d+1),1)]),o("div",jt,[o("div",Wt,[a(M,{type:"text",label:"Area Name",placeholder:"Nairobi",tooltipContent:"Set the area name for this delivery zone",modelValue:e.deliveryMethodForm.postal_code_zones[d].name,"onUpdate:modelValue":b=>e.deliveryMethodForm.postal_code_zones[d].name=b,errorText:e.formState.getFormError("postal_code_zones"+d+"name")},null,8,["modelValue","onUpdate:modelValue","errorText"]),a(M,{type:"money",label:"Delivery fee",currency:(z=e.store)==null?void 0:z.currency,modelValue:e.deliveryMethodForm.postal_code_zones[d].fee,"onUpdate:modelValue":b=>e.deliveryMethodForm.postal_code_zones[d].fee=b,errorText:e.formState.getFormError("postal_code_zones"+d+"fee"),tooltipContent:"Specify the fee charged for deliveries within the area"},null,8,["currency","modelValue","onUpdate:modelValue","errorText"])]),a(k,{showOptions:!1,label:"Postal Codes",placeholder:"Add postal codes",modelValue:e.deliveryMethodForm.postal_code_zones[d].value,"onUpdate:modelValue":b=>e.deliveryMethodForm.postal_code_zones[d].value=b,errorText:e.formState.getFormError("postal_code_zones"+d+"value"),onChange:t[0]||(t[0]=b=>e.deliveryMethodState.saveStateDebounced("Postal codes changed")),tooltipContent:"The postal codes supported by this area e.g 10001, 00100 or SW1A 1AA",description:"We support prefix based zone. For example, if you want to create a zone starting with 10, simply add 10. All postal code starting with 10 will be included in the zone."},null,8,["modelValue","onUpdate:modelValue","errorText"])])])):(r(),s("div",{key:1,onClick:b=>e.toggleExpanded(d),class:"rounded-lg p-4 space-y-2 cursor-pointer hover:bg-gray-100"},[o("div",Nt,[o("div",Rt,[a(v,{size:"16",class:"text-gray-500"}),o("span",Qt,"Zone "+f(d+1),1)]),e.deliveryMethodForm.postal_code_zones[d].name?(r(),h(w,{key:0,size:"xs",type:"primary",showDot:!1},{default:x(()=>[F(f(e.deliveryMethodForm.postal_code_zones[d].name)+" â†’ "+f(e.convertToMoneyWithSymbol(e.deliveryMethodForm.postal_code_zones[d].fee,this.store.currency)),1)]),_:2},1024)):(r(),h(D,{key:1,errorText:"No name",margin:"mt-0"}))]),e.deliveryMethodForm.postal_code_zones[d].value.length?(r(),s("div",Gt,[(r(!0),s(V,null,I(e.deliveryMethodForm.postal_code_zones[d].value,(b,P)=>(r(),s("span",{key:P,class:"py-0.5 px-2 bg-gray-100 border border-gray-300 text-gray-500 text-xs rounded-lg"},f(b),1))),128))])):(r(),h(D,{key:1,errorText:"No weight range",margin:"mt-0"})),e.formState.getFormError("postal_code_zones"+d+"name")?(r(),h(D,{key:2,errorText:e.formState.getFormError("postal_code_zones"+d+"name")},null,8,["errorText"])):n("",!0),e.formState.getFormError("postal_code_zones"+d+"fee")?(r(),h(D,{key:3,errorText:e.formState.getFormError("postal_code_zones"+d+"fee")},null,8,["errorText"])):n("",!0)],8,qt))])}),128)),e.hasPostalCodeZones?n("",!0):(r(),s("div",Jt,[o("div",Kt,[a(v,{size:"20",class:"text-gray-500"}),o("div",Yt,[o("p",null,[a(w,{type:"primary",size:"xs",showDot:!1,action:e.onAddPostalCodeZone},{default:x(()=>[...t[1]||(t[1]=[F("+ Add Zone",-1)])]),_:1},8,["action"]),t[2]||(t[2]=F(" to offer delivery to specific postal codes for a fee",-1))])])])])),o("div",Xt,[e.postalCodeZonesHaveChanged&&e.hasOriginalPostalCodeZones?(r(),h(_,{key:0,size:"xs",type:"light",action:e.onResetPostalCodeZones},{default:x(()=>[...t[3]||(t[3]=[o("span",null,"Undo",-1)])]),_:1},8,["action"])):n("",!0),a(_,{size:"xs",type:"primary",leftIcon:i.Plus,action:e.onAddPostalCodeZone},{default:x(()=>[o("span",null,f(e.hasPostalCodeZones?"Add Another Zone":"Add Zone"),1)]),_:1},8,["leftIcon","action"])])],64))])}const er=B(Et,[["render",$t]]),tr={inject:["formState","storeState","deliveryMethodState","notificationState"],components:{Pill:R,Input:W,Modal:J,Tooltip:ve},data(){return{Clock:le,hours:[],availableDays:[],defaultTimeslot:["08:00","16:00"],days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]}},watch:{"deliveryMethodForm.auto_generate_time_slots"(l,t){if(l&&!t){const u=this.timeslots.map(g=>g.length).reduce((g,i)=>g+i,0);u>0&&this.notificationState.showSuccessNotification(`Added ${u} ${u===1?"timeslot":"timeslots"}`)}}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},isLoadingDeliveryMethod(){return this.deliveryMethodState.isLoadingDeliveryMethod},deliveryMethodForm(){return this.deliveryMethodState.deliveryMethodForm},totalSelectedDays(){return this.availableDays.filter(l=>l.selected).length},timeslots(){const l=[],t=g=>{const[i,e]=g.split(":").map(Number);return i*60+e},u=g=>{const i=Math.floor(g/60).toString().padStart(2,"0"),e=(g%60).toString().padStart(2,"0");return`${i}:${e}`};return this.deliveryMethodForm.operational_hours.forEach((g,i)=>{const e=new Set;g.available&&g.hours.forEach(C=>{const[p,_]=C,[v,M]=C.map(t);if(this.deliveryMethodForm.auto_generate_time_slots){const k=this.deliveryMethodForm.time_slot_interval_unit==="hour"?this.deliveryMethodForm.time_slot_interval_value*60:this.deliveryMethodForm.time_slot_interval_value;for(let w=v;w+k<=M;w+=k){const D=w+k,O=u(w);let d;w+k>=M?d=u(D):d=u(D-1),e.add(`${O} - ${d}`)}}else e.add(`${p} - ${_}`)});const L=[...e].sort((C,p)=>{const[_]=C.split(" - "),[v]=p.split(" - ");return t(_)-t(v)});l.push(L)}),l}},methods:{addHour(){this.hours.push(A(this.defaultTimeslot))},removeHour(l){this.hours.splice(l,1)},addOperationalHour(l){this.deliveryMethodForm.operational_hours[l].hours.push(A(this.defaultTimeslot)),this.deliveryMethodState.saveStateDebounced("Operational hour changed")},removeOperationalHour(l,t){this.deliveryMethodForm.operational_hours[l].hours.splice(t,1),this.deliveryMethodState.saveStateDebounced("Operational hour changed")},showBulkSetTimeslotsModal(){this.hours.length==0&&this.addHour(),this.$refs.bulkSetTimeslotsModal.showModal()},bulkSetTimeslots(l){const t=Array.from(new Set(this.hours.map(u=>JSON.stringify(u)))).map(u=>JSON.parse(u));this.deliveryMethodForm.operational_hours.forEach((u,g)=>{this.availableDays[g].selected&&(u.hours=A(t)),this.availableDays[g].selected&&!u.available&&(u.available=!0)}),this.hours=[],this.notificationState.showSuccessNotification("Timeslots added"),l()}},created(){this.availableDays=this.deliveryMethodForm.operational_hours.map((l,t)=>({name:this.days[t],selected:!0}))}},rr={class:"flex items-center justify-between space-x-8"},or={class:"mt-2"},lr={class:"col-span-1"},sr={class:"col-span-1 space-y-2"},ar={class:"flex items-center space-x-2"},dr=["onClick"],ir=["onClick"],nr={key:0,class:"flex space-x-1 items-center mt-2"},mr={class:"space-y-2"},ur={class:"space-y-4 mb-8"},hr={class:"flex items-center space-x-2 mb-4"},yr={class:"cursor-pointer"},cr=["onClick"],vr={class:"grid grid-cols-1 md:grid-cols-3 gap-2"};function gr(l,t,u,g,i,e){const L=y("Pill"),C=y("Input"),p=y("Tooltip"),_=y("Modal");return r(),s("div",null,[o("div",rr,[t[5]||(t[5]=o("p",{class:"text-sm text-gray-500"},"Set days and times customers can expect delivery or pickup",-1)),a(L,{type:"primary",size:"md",showDot:!1,leftIcon:i.Clock,action:e.showBulkSetTimeslotsModal},{default:x(()=>[...t[4]||(t[4]=[o("span",{class:"ml-1"},"Bulk Set Timeslots",-1)])]),_:1},8,["leftIcon","action"])]),o("div",or,[(r(!0),s(V,null,I(e.deliveryMethodForm.operational_hours,(v,M)=>(r(),s("div",{key:M,class:E([{"border-t":M!=0},M==e.deliveryMethodForm.operational_hours.length-1?"border-b pb-4":"pb-4","border-blue-200 border-dashed hover:bg-blue-50 pt-4 px-2 grid grid-cols-2 gap-4 items-start"])},[o("div",lr,[a(C,{type:"checkbox",inputLabel:i.days[M],modelValue:v.available,"onUpdate:modelValue":k=>v.available=k,onChange:t[0]||(t[0]=k=>e.deliveryMethodState.saveStateDebounced("Operational hour changed"))},null,8,["inputLabel","modelValue","onUpdate:modelValue"])]),o("div",sr,[(r(!0),s(V,null,I(v.hours,(k,w)=>(r(),s("div",{key:w},[o("div",ar,[a(C,{type:"time",modelValue:k[0],"onUpdate:modelValue":D=>k[0]=D,disabled:!v.available,onChange:t[1]||(t[1]=D=>e.deliveryMethodState.saveStateDebounced("Operational hour changed")),errorText:e.formState.getFormError(`opening_hours.${M}.hours.${w}.0`)},null,8,["modelValue","onUpdate:modelValue","disabled","errorText"]),t[8]||(t[8]=o("span",null,"-",-1)),a(C,{type:"time",modelValue:k[1],"onUpdate:modelValue":D=>k[1]=D,disabled:!v.available,onChange:t[2]||(t[2]=D=>e.deliveryMethodState.saveStateDebounced("Opening hour changed")),errorText:e.formState.getFormError(`opening_hours.${M}.hours.${w}.1`)},null,8,["modelValue","onUpdate:modelValue","disabled","errorText"]),o("div",{class:E([v.available?"cursor-pointer":"opacity-0"])},[w==0?(r(),s("div",{key:0,onClick:()=>e.addOperationalHour(M),class:"shrink-0 rounded-md border border-gray-300 p-1 hover:bg-blue-50 transition-all"},[...t[6]||(t[6]=[o("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1)])],8,dr)):(r(),s("div",{key:1,onClick:()=>e.removeOperationalHour(M,w),class:"shrink-0 rounded-md border border-gray-300 p-1 bg-red-50 hover:bg-red-100 transition-all"},[...t[7]||(t[7]=[o("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})],-1)])],8,ir))],2)])]))),128)),v.available?(r(),s("div",nr,[a(L,{size:"xs",type:"success",showDot:!1},{default:x(()=>[F(f(e.timeslots[M].length+" "+(e.timeslots[M].length==1?"timeslot":"timeslots")),1)]),_:2},1024),a(p,{position:"top"},{content:x(()=>[o("div",mr,[(r(!0),s(V,null,I(e.timeslots[M],(k,w)=>(r(),s("p",{key:w,class:"flex space-x-2 px-2 border-l-4 border-green-300"},f(k),1))),128))])]),_:2},1024)])):n("",!0)])],2))),128))]),a(_,{approveType:"primary",scrollOnContent:!1,ref:"bulkSetTimeslotsModal",approveText:"Add Timeslots",approveDisabled:i.hours.length==0,approveAction:v=>e.bulkSetTimeslots(v)},{content:x(()=>[t[12]||(t[12]=o("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Bulk Set Timeslots",-1)),t[13]||(t[13]=o("p",{class:"text-sm mb-4"},"Set the timeslots to be created",-1)),o("div",ur,[(r(!0),s(V,null,I(i.hours,(v,M)=>(r(),s("div",{key:M},[o("div",hr,[a(C,{type:"time",modelValue:v[0],"onUpdate:modelValue":k=>v[0]=k},null,8,["modelValue","onUpdate:modelValue"]),t[11]||(t[11]=o("span",null,"-",-1)),a(C,{type:"time",modelValue:v[1],"onUpdate:modelValue":k=>v[1]=k},null,8,["modelValue","onUpdate:modelValue"]),o("div",yr,[M==0?(r(),s("div",{key:0,onClick:t[3]||(t[3]=()=>e.addHour()),class:"shrink-0 rounded-md border border-gray-300 p-1 hover:bg-blue-50 transition-all"},[...t[9]||(t[9]=[o("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1)])])):(r(),s("div",{key:1,onClick:()=>e.removeHour(M),class:"shrink-0 rounded-md border border-gray-300 p-1 bg-red-50 hover:bg-red-100 transition-all"},[...t[10]||(t[10]=[o("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})],-1)])],8,cr))])])]))),128)),o("div",vr,[(r(!0),s(V,null,I(i.availableDays,(v,M)=>(r(),s("div",{key:M},[a(C,{type:"checkbox",inputLabel:v.name,modelValue:v.selected,"onUpdate:modelValue":k=>v.selected=k,disabled:v.selected&&e.totalSelectedDays===1},null,8,["inputLabel","modelValue","onUpdate:modelValue","disabled"])]))),128))])])]),_:1},8,["approveDisabled","approveAction"])])}const pr=B(tr,[["render",gr]]),_r={inject:["formState","storeState","deliveryMethodState"],components:{Move:Fe,List:be,Clock:le,Tally1:Me,Tally2:fe,MapPin:ke,Hash:_e,Calendar:xe,CloudUpload:Se,SquareCheck:pe,Pill:R,Input:W,Modal:J,Button:q,Select:te,draggable:ge},data(){return{Plus:j,originalFields:[],deletableDataCollectionField:null,typeOptions:[{label:"Short answer",value:"short answer"},{label:"Long answer",value:"long answer"},{label:"Number",value:"number"},{label:"Date",value:"date"},{label:"Time",value:"time"},{label:"Checkbox",value:"checkbox"},{label:"Selection",value:"selection"},{label:"Location",value:"location"},{label:"Media",value:"media"}],validationOptions:[{label:"Not applicable",value:"not applicable"},{label:"Select at least",value:"select at least"},{label:"Select at most",value:"select at most"},{label:"Select between",value:"select between"}]}},computed:{store(){return this.storeState.store},deliveryMethodForm(){return this.deliveryMethodState.deliveryMethodForm},hasFields(){return this.deliveryMethodForm.data_collection_fields.length>0},hasOriginalFields(){return this.originalFields.length>0},hasCollapsedAll(){return this.deliveryMethodForm.data_collection_fields.every(l=>l.is_editable===!1)},hasExpandedAll(){return this.deliveryMethodForm.data_collection_fields.every(l=>l.is_editable===!0)},fieldsHaveChanged(){var l=A(this.deliveryMethodForm.data_collection_fields),t=A(this.originalFields);return l.forEach(u=>delete u.is_editable),t.forEach(u=>delete u.is_editable),!Q(l,t)}},methods:{onAddField(){this.deliveryMethodForm.data_collection_fields.push({validation:"not applicable",temporary_id:ue(),type:"short answer",is_editable:!0,required:!1,description:"",options:[],title:"",min:"1",max:"2"}),this.deliveryMethodState.saveStateDebounced("Option added")},onRemoveField(l){const t=this.deliveryMethodForm.data_collection_fields.findIndex(u=>u.temporary_id==this.deletableDataCollectionField.temporary_id);this.deliveryMethodForm.data_collection_fields.splice(t,1),l(),this.deliveryMethodState.saveStateDebounced("Option removed")},onResetFields(){this.deliveryMethodForm.data_collection_fields=A(this.originalFields),this.deliveryMethodState.saveStateDebounced("Options restored")},onAddOption(l){this.deliveryMethodForm.data_collection_fields[l].options.push({title:`Option ${this.deliveryMethodForm.data_collection_fields[l].options.length+1}`,fee:"0.00"}),this.deliveryMethodState.saveStateDebounced("Sub option added")},onRemoveOption(l,t){this.deliveryMethodForm.data_collection_fields[l].options.splice(t,1),this.deliveryMethodState.saveStateDebounced("Sub option removed")},collapseAll(){this.deliveryMethodForm.data_collection_fields.forEach(l=>{l.is_editable=!1})},expandAll(){this.deliveryMethodForm.data_collection_fields.forEach(l=>{l.is_editable=!0})},showDeleteConfirmationModal(l){this.deletableDataCollectionField=l,this.$refs.confirmDeleteModal.showModal()},supportsOptions(l){return l.type=="checkbox"||l.type=="selection"},hasOptions(l){return this.deliveryMethodForm.data_collection_fields[l].options.length>0}}},fr={key:0,class:"flex justify-end items-center space-x-2 px-2"},Mr=["onClick"],br={class:"absolute top-2 right-2 flex items-center space-x-2 opacity-20 group-hover:opacity-100"},Sr=["onClick"],xr=["onClick"],kr={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},Fr={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},wr=["onClick"],Dr={key:0,class:"space-y-4"},Tr={class:"flex items-center space-x-2"},Vr={class:"flex items-start justify-between space-x-8"},Cr={class:"w-full space-y-4"},Lr={class:"w-full flex items-center space-x-4"},zr={class:"flex items-center space-x-4"},Er=["onClick"],Ar={key:0,class:"flex items-end space-x-2"},Ur={class:"relative"},Ir={class:"absolute -bottom-12 left-1/2 transform -translate-x-1/2"},Or={key:0,class:"animate-bounce text-4xl"},Pr=["onClick"],Zr={class:"flex items-center space-x-2 text-sm text-gray-500"},Br={key:9},Hr={key:10,class:"font-medium text-red-500 text-xs ml-1"},jr={key:0,class:"text-sm text-gray-700"},Wr={class:"flex justify-end space-x-2"},qr={key:0,class:"flex items-start space-x-2 border border-gray-300 rounded-lg p-2 mb-4"},Nr={class:"text-sm"},Rr={class:"mb-8"};function Qr(l,t,u,g,i,e){const L=y("Move"),C=y("Clock"),p=y("List"),_=y("Hash"),v=y("Calendar"),M=y("MapPin"),k=y("CloudUpload"),w=y("SquareCheck"),D=y("Tally2"),O=y("Tally1"),d=y("Select"),z=y("Input"),b=y("draggable"),P=y("Button"),m=y("Pill"),ae=y("Modal");return r(),s("div",null,[o("div",{class:E(["space-y-4",{"mt-4":e.deliveryMethodForm.data_collection_fields.length<2}])},[e.deliveryMethodForm.data_collection_fields.length>=2?(r(),s("div",fr,[e.hasCollapsedAll?n("",!0):(r(),s("span",{key:0,class:"text-sm text-gray-500 underline hover:text-black cursor-pointer",onClick:t[0]||(t[0]=(...S)=>e.collapseAll&&e.collapseAll(...S))}," collapse all ")),e.hasExpandedAll?n("",!0):(r(),s("span",{key:1,class:"text-sm text-gray-500 underline hover:text-black cursor-pointer",onClick:t[1]||(t[1]=U((...S)=>e.expandAll&&e.expandAll(...S),["stop"]))}," expand all "))])):n("",!0),a(b,{class:"space-y-2",handle:".draggable-handle","ghost-class":"bg-yellow-50",modelValue:e.deliveryMethodForm.data_collection_fields,"onUpdate:modelValue":t[13]||(t[13]=S=>e.deliveryMethodForm.data_collection_fields=S)},{default:x(()=>[(r(!0),s(V,null,I(e.deliveryMethodForm.data_collection_fields,(S,c)=>(r(),s("div",{key:S.temporary_id,onClick:T=>e.deliveryMethodForm.data_collection_fields[c].is_editable?null:e.deliveryMethodForm.data_collection_fields[c].is_editable=!0,class:E(["w-full relative bg-gray-50 p-4 border border-gray-300 rounded-lg hover:bg-gray-100 group",{"cursor-pointer":!e.deliveryMethodForm.data_collection_fields[c].is_editable}])},[o("div",br,[e.deliveryMethodForm.data_collection_fields[c].is_editable?(r(),s("span",{key:0,class:"text-sm text-gray-500 underline hover:text-black cursor-pointer",onClick:U(T=>e.deliveryMethodForm.data_collection_fields[c].is_editable=!1,["stop"])}," collapse ",8,Sr)):(r(),s("svg",{key:1,class:"w-4 h-4 cursor-pointer hover:opacity-50",onClick:U(T=>e.deliveryMethodForm.data_collection_fields[c].is_editable=!0,["stop"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e.deliveryMethodForm.data_collection_fields[c].is_editable?(r(),s("path",kr)):(r(),s("path",Fr))],8,xr)),(r(),s("svg",{onClick:U(T=>e.showDeleteConfirmationModal(S),["stop"]),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...t[14]||(t[14]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1)])],8,wr)),a(L,{onClick:t[2]||(t[2]=U(()=>{},["stop"])),size:"16",class:"draggable-handle cursor-grab active:cursor-grabbing text-gray-500 hover:text-yellow-500"})]),e.deliveryMethodForm.data_collection_fields[c].is_editable?(r(),s("div",Dr,[o("div",Tr,[S.type=="time"?(r(),h(C,{key:0,size:"20"})):n("",!0),S.type=="selection"?(r(),h(p,{key:1,size:"20"})):n("",!0),S.type=="number"?(r(),h(_,{key:2,size:"20"})):n("",!0),S.type=="date"?(r(),h(v,{key:3,size:"20"})):n("",!0),S.type=="location"?(r(),h(M,{key:4,size:"20"})):n("",!0),S.type=="media"?(r(),h(k,{key:5,size:"20"})):n("",!0),S.type=="checkbox"?(r(),h(w,{key:6,size:"20"})):n("",!0),S.type=="long answer"?(r(),h(D,{key:7,size:"20",class:"rotate-90"})):n("",!0),S.type=="short answer"?(r(),h(O,{key:8,size:"20",class:"rotate-90"})):n("",!0),a(d,{class:"w-60",search:!1,options:i.typeOptions,modelValue:e.deliveryMethodForm.data_collection_fields[c].type,"onUpdate:modelValue":T=>e.deliveryMethodForm.data_collection_fields[c].type=T,onChange:t[3]||(t[3]=T=>e.deliveryMethodState.saveStateDebounced("Option type changed")),errorText:e.formState.getFormError("data_collection_fields"+c+"type")},null,8,["options","modelValue","onUpdate:modelValue","errorText"])]),o("div",Vr,[o("div",Cr,[a(z,{class:"w-full",placeholder:"Title",modelValue:e.deliveryMethodForm.data_collection_fields[c].title,"onUpdate:modelValue":T=>e.deliveryMethodForm.data_collection_fields[c].title=T,onInput:t[4]||(t[4]=T=>e.deliveryMethodState.saveStateDebounced("Option title changed")),errorText:e.formState.getFormError("data_collection_fields"+c+"title")},null,8,["modelValue","onUpdate:modelValue","errorText"]),a(z,{rows:"2",class:"w-full",type:"textarea",placeholder:"Short description (optional)",modelValue:e.deliveryMethodForm.data_collection_fields[c].description,"onUpdate:modelValue":T=>e.deliveryMethodForm.data_collection_fields[c].description=T,onInput:t[5]||(t[5]=T=>e.deliveryMethodState.saveStateDebounced("Option description changed")),errorText:e.formState.getFormError("data_collection_fields"+c+"description")},null,8,["modelValue","onUpdate:modelValue","errorText"])]),a(z,{type:"checkbox",inputLabel:"Required",modelValue:e.deliveryMethodForm.data_collection_fields[c].required,"onUpdate:modelValue":T=>e.deliveryMethodForm.data_collection_fields[c].required=T,onChange:t[6]||(t[6]=T=>e.deliveryMethodState.saveStateDebounced("Required status changed")),errorText:e.formState.getFormError("data_collection_fields"+c+"required")},null,8,["modelValue","onUpdate:modelValue","errorText"])]),e.supportsOptions(S)?(r(),h(b,{key:0,class:"space-y-0",handle:".draggable-handle-2","ghost-class":"bg-yellow-50",modelValue:e.deliveryMethodForm.data_collection_fields[c].options,"onUpdate:modelValue":T=>e.deliveryMethodForm.data_collection_fields[c].options=T},{default:x(()=>[(r(!0),s(V,null,I(e.deliveryMethodForm.data_collection_fields[c].options,(T,Z)=>(r(),s("div",{key:Z,class:"flex items-center justify-between space-x-4 rounded-lg py-2 px-2 hover:border-blue-200 hover:bg-gray-50 group"},[o("div",Lr,[a(z,{class:"w-full",placeholder:`Option ${Z+1}`,onInput:t[7]||(t[7]=H=>e.deliveryMethodState.saveStateDebounced("Sub option name changed")),modelValue:e.deliveryMethodForm.data_collection_fields[c].options[Z].name,"onUpdate:modelValue":H=>e.deliveryMethodForm.data_collection_fields[c].options[Z].name=H,errorText:e.formState.getFormError("data_collection_fields"+c+"options"+Z+"name")},null,8,["placeholder","modelValue","onUpdate:modelValue","errorText"]),a(z,{type:"money",currency:e.store.currency,modelValue:e.deliveryMethodForm.data_collection_fields[c].options[Z].fee,"onUpdate:modelValue":H=>e.deliveryMethodForm.data_collection_fields[c].options[Z].fee=H,onInput:t[8]||(t[8]=H=>e.deliveryMethodState.saveStateDebounced("Sub option amount changed")),errorText:e.formState.getFormError("data_collection_fields"+c+"options"+Z+"fee")},null,8,["currency","modelValue","onUpdate:modelValue","errorText"])]),o("div",zr,[(r(),s("svg",{onClick:H=>e.onRemoveOption(c,Z),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...t[15]||(t[15]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1)])],8,Er)),a(L,{onClick:t[9]||(t[9]=U(()=>{},["stop"])),size:"16",class:"draggable-handle-2 cursor-grab active:cursor-grabbing text-gray-500 hover:text-yellow-500"})])]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):n("",!0),e.supportsOptions(S)?(r(),s("div",{key:1,class:E(["flex",S.type=="checkbox"?"justify-between items-start":"justify-end"])},[S.type=="checkbox"?(r(),s("div",Ar,[a(d,{class:"w-60",search:!1,label:"Validation",options:i.validationOptions,modelValue:e.deliveryMethodForm.data_collection_fields[c].validation,"onUpdate:modelValue":T=>e.deliveryMethodForm.data_collection_fields[c].validation=T,onChange:t[10]||(t[10]=T=>e.deliveryMethodState.saveStateDebounced("Validation changed")),errorText:e.formState.getFormError("data_collection_fields"+c+"validation")},null,8,["options","modelValue","onUpdate:modelValue","errorText"]),e.deliveryMethodForm.data_collection_fields[c].validation=="select at least"||e.deliveryMethodForm.data_collection_fields[c].validation=="select between"?(r(),h(z,{key:0,min:"0",class:"w-24",type:"number",modelValue:e.deliveryMethodForm.data_collection_fields[c].min,"onUpdate:modelValue":T=>e.deliveryMethodForm.data_collection_fields[c].min=T,onChange:t[11]||(t[11]=T=>e.deliveryMethodState.saveStateDebounced("Validation changed")),errorText:e.formState.getFormError("data_collection_fields"+c+"min"),label:e.deliveryMethodForm.data_collection_fields[c].validation=="select at least"?null:"Min"},null,8,["modelValue","onUpdate:modelValue","errorText","label"])):n("",!0),e.deliveryMethodForm.data_collection_fields[c].validation=="select at most"||e.deliveryMethodForm.data_collection_fields[c].validation=="select between"?(r(),h(z,{key:1,min:"0",class:"w-24",type:"number",modelValue:e.deliveryMethodForm.data_collection_fields[c].max,"onUpdate:modelValue":T=>e.deliveryMethodForm.data_collection_fields[c].max=T,onChange:t[12]||(t[12]=T=>e.deliveryMethodState.saveStateDebounced("Validation changed")),errorText:e.formState.getFormError("data_collection_fields"+c+"max"),label:e.deliveryMethodForm.data_collection_fields[c].validation=="select at most"?null:"Max"},null,8,["modelValue","onUpdate:modelValue","errorText","label"])):n("",!0)])):n("",!0),o("div",Ur,[o("div",Ir,[e.hasOptions(c)?n("",!0):(r(),s("div",Or,"ðŸ‘†"))]),a(P,{size:"xs",type:"primary",leftIcon:i.Plus,action:()=>e.onAddOption(c)},{default:x(()=>[...t[16]||(t[16]=[o("span",null,"Add Choice",-1)])]),_:1},8,["leftIcon","action"])])],2)):n("",!0)])):(r(),s("div",{key:1,class:"space-y-2",onClick:T=>e.deliveryMethodForm.data_collection_fields[c].is_editable=!0},[o("div",Zr,[S.type=="time"?(r(),h(C,{key:0,size:"20"})):n("",!0),S.type=="selection"?(r(),h(p,{key:1,size:"20"})):n("",!0),S.type=="number"?(r(),h(_,{key:2,size:"20"})):n("",!0),S.type=="date"?(r(),h(v,{key:3,size:"20"})):n("",!0),S.type=="location"?(r(),h(M,{key:4,size:"20"})):n("",!0),S.type=="media"?(r(),h(k,{key:5,size:"20"})):n("",!0),S.type=="checkbox"?(r(),h(w,{key:6,size:"20"})):n("",!0),S.type=="long answer"?(r(),h(D,{key:7,size:"20",class:"rotate-90"})):n("",!0),S.type=="short answer"?(r(),h(O,{key:8,size:"20",class:"rotate-90"})):n("",!0),S.title?(r(),s("span",Br,f(S.title),1)):(r(),s("span",Hr," No title ")),S.required?(r(),h(m,{key:11,type:"primary",size:"xs",showDot:!1},{default:x(()=>[...t[17]||(t[17]=[F("required",-1)])]),_:1})):n("",!0)])],8,Pr))],10,Mr))),128))]),_:1},8,["modelValue"]),o("div",{class:E([{"flex space-x-2 justify-between":!e.hasFields}])},[e.hasFields?n("",!0):(r(),s("p",jr,"Add questions if your delivery method must capture additional information from the customer")),o("div",Wr,[e.fieldsHaveChanged&&e.hasOriginalFields?(r(),h(P,{key:0,size:"xs",type:"primary",action:e.onResetFields},{default:x(()=>[...t[18]||(t[18]=[o("span",null,"Undo",-1)])]),_:1},8,["action"])):n("",!0),a(P,{size:"xs",type:"light",leftIcon:i.Plus,action:e.onAddField},{default:x(()=>[...t[19]||(t[19]=[o("span",null,"Add Question",-1)])]),_:1},8,["leftIcon","action"])])],2)],2),a(ae,{approveType:"danger",approveText:"Delete",ref:"confirmDeleteModal",approveAction:S=>e.onRemoveField(S)},re({_:2},[i.deletableDataCollectionField?{name:"content",fn:x(()=>[t[22]||(t[22]=o("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Confirm Delete",-1)),i.deletableDataCollectionField.title?(r(),s("div",qr,[i.deletableDataCollectionField.type=="time"?(r(),h(C,{key:0,size:"20"})):n("",!0),i.deletableDataCollectionField.type=="selection"?(r(),h(p,{key:1,size:"20"})):n("",!0),i.deletableDataCollectionField.type=="number"?(r(),h(_,{key:2,size:"20"})):n("",!0),i.deletableDataCollectionField.type=="date"?(r(),h(v,{key:3,size:"20"})):n("",!0),i.deletableDataCollectionField.type=="location"?(r(),h(M,{key:4,size:"20"})):n("",!0),i.deletableDataCollectionField.type=="media"?(r(),h(k,{key:5,size:"20"})):n("",!0),i.deletableDataCollectionField.type=="checkbox"?(r(),h(w,{key:6,size:"20"})):n("",!0),i.deletableDataCollectionField.type=="long answer"?(r(),h(D,{key:7,size:"20",class:"rotate-90"})):n("",!0),i.deletableDataCollectionField.type=="short answer"?(r(),h(O,{key:8,size:"20",class:"rotate-90"})):n("",!0),o("span",Nr,f(i.deletableDataCollectionField.title),1)])):n("",!0),o("p",Rr,[t[20]||(t[20]=F("Are you sure you want to delete this ",-1)),a(m,{type:"primary",size:"xs",showDot:!1},{default:x(()=>[F(f(i.deletableDataCollectionField.type),1)]),_:1}),t[21]||(t[21]=F(" field?",-1))])]),key:"0"}:void 0]),1032,["approveAction"])])}const Gr=B(_r,[["render",Qr]]),Jr={inject:["formState","storeState","deliveryMethodState","changeHistoryState","notificationState"],components:{Info:we,Modal:J,Input:W,Switch:de,Select:te,Button:q,Skeleton:N,FeeByWeight:Xe,FeeByDistance:ft,ScheduleSummary:zt,FeeByPostalCode:er,OperationalHours:pr,DataCollectionFields:Gr},data(){return{Plus:j,Trash2:G,MoveLeft:De,feeTypes:[{label:"Flat fee",value:"flat fee"},{label:"Percentage fee",value:"percentage fee"},{label:"Fee by weight",value:"fee by weight"},{label:"Fee by distance",value:"fee by distance"},{label:"Fee by postal code",value:"fee by postal code"}],scheduleTypes:[{label:"Date",value:"date"},{label:"Date And Time",value:"date and time"}],lastAskForAnAddressValue:null,lastPinLocationOnMapValue:null}},watch:{store(l,t){!t&&l&&this.setup()},"deliveryMethodForm.fee_type"(l,t){["fee by distance","fee by postal code"].includes(l)?(this.lastAskForAnAddressValue=this.deliveryMethodForm.ask_for_an_address,this.deliveryMethodForm.ask_for_an_address=!0,this.lastPinLocationOnMapValue=this.deliveryMethodForm.pin_location_on_map,this.deliveryMethodForm.pin_location_on_map=!0):(this.lastAskForAnAddressValue!=null&&(this.deliveryMethodForm.ask_for_an_address=this.lastAskForAnAddressValue),this.lastPinLocationOnMapValue!=null&&(this.deliveryMethodForm.pin_location_on_map=this.lastPinLocationOnMapValue))}},computed:{store(){return this.storeState.store},isEditing(){return this.deliveryMethodId!=null},isLoadingStore(){return this.storeState.isLoadingStore},deliveryMethodId(){return this.$route.params.delivery_method_id},deliveryMethod(){return this.deliveryMethodState.deliveryMethod},deliveryMethodForm(){return this.deliveryMethodState.deliveryMethodForm},isLoadingDeliveryMethod(){return this.deliveryMethodState.isLoadingDeliveryMethod},isDeletingDeliveryMethod(){return this.deliveryMethodState.isDeletingDeliveryMethod},timeSlotIntervalUnits(){return[{label:this.deliveryMethodForm.time_slot_interval_value=="1"?"Minute":"Minutes",value:"minute"},{label:this.deliveryMethodForm.time_slot_interval_value=="1"?"Hour":"Hours",value:"hour"}]},earliestDeliveryTimeUnits(){return[{label:this.deliveryMethodForm.earliest_delivery_time_unit=="1"?"Hour":"Hours",value:"hour"},{label:this.deliveryMethodForm.earliest_delivery_time_unit=="1"?"Day":"Days",value:"day"}]}},methods:{isEmpty:ie,async setup(){this.deliveryMethodState.setDeliveryMethodForm(null,!0),this.store&&this.deliveryMethodId&&await this.showDeliveryMethod(),this.changeHistoryState.showActionButtons=!0},setActionButtons(){this.changeHistoryState.removeButtons(),this.changeHistoryState.addDiscardButton(),this.changeHistoryState.addActionButton(this.isEditing?"Save Changes":"Add Delivery Method",this.isEditing?this.updateDeliveryMethod:this.createDeliveryMethod,"primary",this.isEditing?null:j)},async navigateToShowDeliveryMethods(){await this.$router.push({name:"show-delivery-methods",query:{store_id:this.store.id}})},async showDeliveryMethod(){var l,t;try{this.deliveryMethodState.isLoadingDeliveryMethod=!0;let u={params:{store_id:this.store.id}};const i=(await axios.get(`/api/delivery-methods/${this.deliveryMethodId}`,u)).data;this.deliveryMethodState.setDeliveryMethod(i),this.deliveryMethodState.setDeliveryMethodForm(i,!0)}catch(u){const g=((t=(l=u==null?void 0:u.response)==null?void 0:l.data)==null?void 0:t.message)||(u==null?void 0:u.message)||"Something went wrong while fetching delivery method";this.notificationState.showWarningNotification(g),this.formState.setServerFormErrors(u),console.error("Failed to fetch delivery method:",u)}finally{this.deliveryMethodState.isLoadingDeliveryMethod=!1}},async createDeliveryMethod(){var l,t;try{if(this.deliveryMethodState.isCreatingDeliveryMethod||(this.formState.hideFormErrors(),this.isEmpty(this.deliveryMethodForm.name)&&this.formState.setFormError("name","The name is required"),this.formState.hasErrors))return;this.deliveryMethodState.isCreatingDeliveryMethod=!0,this.changeHistoryState.actionButtons[1].loading=!0;const u={...this.deliveryMethodForm,store_id:this.store.id},i=(await axios.post("/api/delivery-methods",u)).data.delivery_method;this.deliveryMethodState.setDeliveryMethod(i),this.notificationState.showSuccessNotification("Delivery method created"),this.deliveryMethodState.saveOriginalState("Original delivery method"),this.navigateToShowDeliveryMethods()}catch(u){const g=((t=(l=u==null?void 0:u.response)==null?void 0:l.data)==null?void 0:t.message)||(u==null?void 0:u.message)||"Something went wrong while creating delivery method";this.notificationState.showWarningNotification(g),this.formState.setServerFormErrors(u),console.error("Failed to create delivery method:",u)}finally{this.deliveryMethodState.isCreatingDeliveryMethod=!1,this.changeHistoryState.actionButtons[1].loading=!1}},async updateDeliveryMethod(){var l,t;try{if(this.deliveryMethodState.isUpdatingDeliveryMethod||(this.formState.hideFormErrors(),this.isEmpty(this.deliveryMethodForm.name)&&this.formState.setFormError("name","The name is required"),this.formState.hasErrors))return;this.deliveryMethodState.isUpdatingDeliveryMethod=!0,this.changeHistoryState.actionButtons[1].loading=!0;const u={...this.deliveryMethodForm,store_id:this.store.id},i=(await axios.put(`/api/delivery-methods/${this.deliveryMethodId}`,u)).data.delivery_method;this.deliveryMethodState.setDeliveryMethod(i),this.notificationState.showSuccessNotification("Delivery method updated"),this.deliveryMethodState.saveOriginalState("Original delivery method")}catch(u){const g=((t=(l=u==null?void 0:u.response)==null?void 0:l.data)==null?void 0:t.message)||(u==null?void 0:u.message)||"Something went wrong while updating delivery method";this.notificationState.showWarningNotification(g),this.formState.setServerFormErrors(u),console.error("Failed to update delivery method:",u)}finally{this.deliveryMethodState.isUpdatingDeliveryMethod=!1,this.changeHistoryState.actionButtons[1].loading=!1}},async deleteDeliveryMethod(l){var t,u;try{if(this.deliveryMethodState.isDeletingDeliveryMethod)return;this.deliveryMethodState.isDeletingDeliveryMethod=!0;const g={data:{store_id:this.store.id}};await axios.delete(`/api/delivery-methods/${this.deliveryMethodId}`,g),l(),await new Promise(i=>setTimeout(i,500)),this.notificationState.showSuccessNotification("Delivery method deleted"),await this.navigateToShowDeliveryMethods()}catch(g){const i=((u=(t=g==null?void 0:g.response)==null?void 0:t.data)==null?void 0:u.message)||(g==null?void 0:g.message)||"Something went wrong while deleting delivery method";this.notificationState.showWarningNotification(i),this.formState.setServerFormErrors(g),console.error("Failed to delete delivery method:",g),l()}finally{this.deliveryMethodState.isDeletingDeliveryMethod=!1}},setDeliveryMethodForm(l){this.deliveryMethodState.deliveryMethodForm=l}},beforeUnmount(){this.deliveryMethodState.reset(),this.changeHistoryState.showActionButtons=!1},created(){this.setup(),this.setActionButtons();const l=["undo","redo","jumpToHistory","resetHistoryToCurrent","resetHistoryToOriginal"];for(let t=0;t<l.length;t++){let u=l[t];this.changeHistoryState.listeners[u]=this.setDeliveryMethodForm}}},Kr={class:"max-w-2xl mx-auto pt-24 pb-40"},Yr={class:"bg-gray-50 border border-gray-300 rounded-lg p-4 space-y-4 mb-4"},Xr={key:0,class:"flex items-center space-x-2"},$r={class:"bg-gray-50 border border-gray-300 rounded-lg p-4 space-y-4 mb-4"},eo={class:"border-b border-gray-300 border-dashed space-y-4 pb-4"},to={class:"grid grid-cols-2 gap-4"},ro={class:"bg-gray-50 border border-gray-300 rounded-lg p-4 space-y-4 mb-4"},oo={key:0,class:"text-xs text-green-600 mt-1"},lo={key:1,class:"text-xs text-gray-500 mt-1"},so={key:0,class:"text-xs text-green-600 mt-1"},ao={key:1,class:"text-xs text-gray-500 mt-1"},io={class:"bg-gray-50 border border-gray-300 rounded-lg p-4 space-y-4 mb-4"},no={key:0,class:"space-y-4"},mo={key:0,class:"grid grid-cols-2 gap-4"},uo={class:"space-y-4"},ho={class:"w-20 ml-2"},yo={class:"text-xs text-gray-500"},co={class:"w-20 ml-2"},vo={class:"bg-gray-50 border border-gray-300 rounded-lg p-4 space-y-4 mb-4"},go={class:"space-y-2"},po={class:"font-bold text-black"},_o={class:"flex justify-end"},fo={class:"mb-8"},Mo={class:"font-bold text-black"};function bo(l,t,u,g,i,e){var z,b,P;const L=y("Button"),C=y("Switch"),p=y("Input"),_=y("Select"),v=y("FeeByWeight"),M=y("FeeByDistance"),k=y("FeeByPostalCode"),w=y("OperationalHours"),D=y("ScheduleSummary"),O=y("DataCollectionFields"),d=y("Modal");return r(),s("div",Kr,[a(L,{size:"xs",type:"light",class:"mb-4",leftIcon:i.MoveLeft,action:e.navigateToShowDeliveryMethods},{default:x(()=>[...t[50]||(t[50]=[o("span",null,"Back",-1)])]),_:1},8,["leftIcon","action"]),o("div",Yr,[a(C,{size:"xs",suffixText:"Active",modelValue:e.deliveryMethodForm.active,"onUpdate:modelValue":t[0]||(t[0]=m=>e.deliveryMethodForm.active=m),errorText:e.formState.getFormError("active"),onChange:t[1]||(t[1]=m=>e.deliveryMethodState.saveStateDebounced("Active status changed"))},null,8,["modelValue","errorText"]),a(p,{max:"40",type:"text",label:"Name",placeholder:"In-house Delivery",modelValue:e.deliveryMethodForm.name,"onUpdate:modelValue":t[2]||(t[2]=m=>e.deliveryMethodForm.name=m),errorText:e.formState.getFormError("name"),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,onInput:t[3]||(t[3]=m=>e.deliveryMethodState.saveStateDebounced("Name changed")),tooltipContent:"The delivery method name e.g In-house delivery, Self pickup or Dine in"},null,8,["modelValue","errorText","skeleton"]),a(p,{rows:"2",type:"textarea",label:"Description",modelValue:e.deliveryMethodForm.description,"onUpdate:modelValue":t[4]||(t[4]=m=>e.deliveryMethodForm.description=m),errorText:e.formState.getFormError("description"),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,placeholder:"Delivery using our in-house logistics service",onInput:t[5]||(t[5]=m=>e.deliveryMethodState.saveStateDebounced("Instruction changed")),tooltipContent:"A short and sweet description of how delivery/pickup will be accomplished"},null,8,["modelValue","errorText","skeleton"]),o("div",{class:E([{"border border-gray-300 border-dashed rounded-lg":e.deliveryMethodForm.set_daily_order_limit}])},[o("div",{class:E(["space-y-4 transition-all duration-500",{"bg-blue-50 p-4 rounded-lg":e.deliveryMethodForm.set_daily_order_limit}])},[a(p,{type:"checkbox",inputLabel:"Set daily order limit",modelValue:e.deliveryMethodForm.set_daily_order_limit,"onUpdate:modelValue":t[6]||(t[6]=m=>e.deliveryMethodForm.set_daily_order_limit=m),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,errorText:e.formState.getFormError("set_daily_order_limit"),inputDescription:"Orders placed must not exceed the daily limit specified",onChange:t[7]||(t[7]=m=>e.deliveryMethodState.saveStateDebounced("Set daily order limit changed"))},null,8,["modelValue","skeleton","errorText"]),e.deliveryMethodForm.set_daily_order_limit?(r(),s("div",Xr,[t[51]||(t[51]=o("span",{class:"text-sm"},"Accept no more than",-1)),a(p,{min:"1",class:"w-24",type:"number",placeholder:"10",modelValue:e.deliveryMethodForm.daily_order_limit,"onUpdate:modelValue":t[8]||(t[8]=m=>e.deliveryMethodForm.daily_order_limit=m),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,errorText:e.formState.getFormError("daily_order_limit"),onInput:t[9]||(t[9]=m=>e.deliveryMethodState.saveStateDebounced("Daily order limit changed"))},null,8,["modelValue","skeleton","errorText"]),t[52]||(t[52]=o("span",{class:"text-sm"},"orders per day",-1))])):n("",!0)],2)],2),o("div",{class:E([{"border border-gray-300 border-dashed rounded-lg":e.deliveryMethodForm.qualify_on_minimum_grand_total}])},[o("div",{class:E(["space-y-4 transition-all duration-500",{"bg-blue-50 p-4 rounded-lg":e.deliveryMethodForm.qualify_on_minimum_grand_total}])},[a(p,{type:"checkbox",inputLabel:"Qualify on minimum grand total",skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,modelValue:e.deliveryMethodForm.qualify_on_minimum_grand_total,"onUpdate:modelValue":t[10]||(t[10]=m=>e.deliveryMethodForm.qualify_on_minimum_grand_total=m),errorText:e.formState.getFormError("qualify_on_minimum_grand_total"),onChange:t[11]||(t[11]=m=>e.deliveryMethodState.saveStateDebounced("Qualify on minimum grand total changed")),inputDescription:"Customer carts must qualify with a minimum grand total before placing an order"},null,8,["skeleton","modelValue","errorText"]),e.deliveryMethodForm.qualify_on_minimum_grand_total?(r(),h(p,{key:0,type:"money",placeholder:"100",label:"Minimum Grand Total",currency:(z=e.store)==null?void 0:z.currency,modelValue:e.deliveryMethodForm.minimum_grand_total,"onUpdate:modelValue":t[12]||(t[12]=m=>e.deliveryMethodForm.minimum_grand_total=m),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,errorText:e.formState.getFormError("minimum_grand_total"),onInput:t[13]||(t[13]=m=>e.deliveryMethodState.saveStateDebounced("Minimum grand total changed"))},null,8,["currency","modelValue","skeleton","errorText"])):n("",!0)],2)],2)]),o("div",$r,[t[53]||(t[53]=o("h1",{class:"text-md font-bold mb-4"},"Fee",-1)),a(C,{size:"xs",suffixText:"Charge fee",modelValue:e.deliveryMethodForm.charge_fee,"onUpdate:modelValue":t[14]||(t[14]=m=>e.deliveryMethodForm.charge_fee=m),errorText:e.formState.getFormError("charge_fee"),onChange:t[15]||(t[15]=m=>e.deliveryMethodState.saveStateDebounced("Charge fee status changed"))},null,8,["modelValue","errorText"]),e.deliveryMethodForm.charge_fee?(r(),s(V,{key:0},[o("div",eo,[o("div",to,[a(_,{class:"w-full",search:!1,label:"Fee type",options:i.feeTypes,modelValue:e.deliveryMethodForm.fee_type,"onUpdate:modelValue":t[16]||(t[16]=m=>e.deliveryMethodForm.fee_type=m),errorText:e.formState.getFormError("fee_type")},null,8,["options","modelValue","errorText"]),e.deliveryMethodForm.fee_type=="flat fee"?(r(),h(p,{key:0,type:"money",label:"Flat fee",placeholder:"100.00",currency:(b=e.store)==null?void 0:b.currency,modelValue:e.deliveryMethodForm.flat_fee_rate,"onUpdate:modelValue":t[17]||(t[17]=m=>e.deliveryMethodForm.flat_fee_rate=m),errorText:e.formState.getFormError("flat_fee_rate"),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,onInput:t[18]||(t[18]=m=>e.deliveryMethodState.saveStateDebounced("Flat fee rate changed")),tooltipContent:"Set the flat fee amount (This is the flat fee that will be applied as a charge)"},null,8,["currency","modelValue","errorText","skeleton"])):n("",!0),e.deliveryMethodForm.fee_type=="percentage fee"?(r(),h(p,{key:1,placeholder:"10",type:"percentage",label:"Percentage fee rate",modelValue:e.deliveryMethodForm.percentage_fee_rate,"onUpdate:modelValue":t[19]||(t[19]=m=>e.deliveryMethodForm.percentage_fee_rate=m),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,errorText:e.formState.getFormError("percentage_fee_rate"),onInput:t[20]||(t[20]=m=>e.deliveryMethodState.saveStateDebounced("Percentage fee rate changed")),tooltipContent:"Set the percentage fee amount (This is the percentage fee that will be applied as a charge)"},null,8,["modelValue","skeleton","errorText"])):n("",!0)]),e.deliveryMethodForm.fee_type=="fee by weight"?(r(),h(v,{key:0})):n("",!0),e.deliveryMethodForm.fee_type=="fee by distance"?(r(),h(M,{key:1})):n("",!0),e.deliveryMethodForm.fee_type=="fee by postal code"?(r(),h(k,{key:2})):n("",!0)]),o("div",{class:E([{"border border-gray-300 border-dashed rounded-lg":e.deliveryMethodForm.offer_free_delivery_on_minimum_grand_total}])},[o("div",{class:E(["space-y-4 transition-all duration-500",{"bg-blue-50 p-4 rounded-lg":e.deliveryMethodForm.offer_free_delivery_on_minimum_grand_total}])},[a(p,{type:"checkbox",skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,inputLabel:"Offer free delivery on minimum grand total",modelValue:e.deliveryMethodForm.offer_free_delivery_on_minimum_grand_total,"onUpdate:modelValue":t[21]||(t[21]=m=>e.deliveryMethodForm.offer_free_delivery_on_minimum_grand_total=m),errorText:e.formState.getFormError("offer_free_delivery_on_minimum_grand_total"),inputDescription:"Customer carts must qualify with a minimum grand total to claim free delivery",onChange:t[22]||(t[22]=m=>e.deliveryMethodState.saveStateDebounced("Offer free delivery on minimum grand total changed"))},null,8,["skeleton","modelValue","errorText"]),e.deliveryMethodForm.offer_free_delivery_on_minimum_grand_total?(r(),h(p,{key:0,type:"money",placeholder:"100",label:"Minimum Grand Total",currency:(P=e.store)==null?void 0:P.currency,skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,modelValue:e.deliveryMethodForm.free_delivery_minimum_grand_total,"onUpdate:modelValue":t[23]||(t[23]=m=>e.deliveryMethodForm.free_delivery_minimum_grand_total=m),errorText:e.formState.getFormError("free_delivery_minimum_grand_total"),onInput:t[24]||(t[24]=m=>e.deliveryMethodState.saveStateDebounced("Minimum grand total changed"))},null,8,["currency","skeleton","modelValue","errorText"])):n("",!0)],2)],2)],64)):n("",!0)]),o("div",ro,[t[56]||(t[56]=o("h1",{class:"text-md font-bold mb-4"},"Address",-1)),a(p,{type:"checkbox",inputLabel:"Capture address information",modelValue:e.deliveryMethodForm.ask_for_an_address,"onUpdate:modelValue":t[25]||(t[25]=m=>e.deliveryMethodForm.ask_for_an_address=m),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,errorText:e.formState.getFormError("ask_for_an_address"),onChange:t[26]||(t[26]=m=>e.deliveryMethodState.saveStateDebounced("Capture address information changed")),disabled:["fee by distance","fee by postal code"].includes(e.deliveryMethodForm.fee_type)},{inputDescription:x(()=>[["fee by distance","fee by postal code"].includes(e.deliveryMethodForm.fee_type)?(r(),s("p",oo,[t[54]||(t[54]=F(" The address information will be captured to support delivery fee by ",-1)),e.deliveryMethodForm.fee_type=="fee by distance"?(r(),s(V,{key:0},[F("distance")],64)):e.deliveryMethodForm.fee_type=="fee by postal code"?(r(),s(V,{key:1},[F("postal code")],64)):n("",!0)])):(r(),s("p",lo,"Ask customers to provide their address information for delivery"))]),_:1},8,["modelValue","skeleton","errorText","disabled"]),a(p,{type:"checkbox",inputLabel:"Capture address location on map",modelValue:e.deliveryMethodForm.pin_location_on_map,"onUpdate:modelValue":t[27]||(t[27]=m=>e.deliveryMethodForm.pin_location_on_map=m),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,errorText:e.formState.getFormError("pin_location_on_map"),onChange:t[28]||(t[28]=m=>e.deliveryMethodState.saveStateDebounced("Capture address location on map changed")),disabled:["fee by distance","fee by postal code"].includes(e.deliveryMethodForm.fee_type)},{inputDescription:x(()=>[["fee by distance","fee by postal code"].includes(e.deliveryMethodForm.fee_type)?(r(),s("p",so,[t[55]||(t[55]=F(" The address location will be captured to support delivery fee by ",-1)),e.deliveryMethodForm.fee_type=="fee by distance"?(r(),s(V,{key:0},[F("distance")],64)):e.deliveryMethodForm.fee_type=="fee by postal code"?(r(),s(V,{key:1},[F("postal code")],64)):n("",!0)])):(r(),s("p",ao,"Ask customers to show their address on the map for better accuracy"))]),_:1},8,["modelValue","skeleton","errorText","disabled"])]),o("div",io,[t[63]||(t[63]=o("h1",{class:"text-md font-bold mb-4"},"Schedule",-1)),a(C,{size:"xs",suffixText:"Set schedule",modelValue:e.deliveryMethodForm.set_schedule,"onUpdate:modelValue":t[29]||(t[29]=m=>e.deliveryMethodForm.set_schedule=m),errorText:e.formState.getFormError("set_schedule"),onChange:t[30]||(t[30]=m=>e.deliveryMethodState.saveStateDebounced("Set schedule fee status changed"))},null,8,["modelValue","errorText"]),e.deliveryMethodForm.set_schedule?(r(),s(V,{key:0},[a(_,{class:"w-full",search:!1,label:"Schedule type",options:i.scheduleTypes,modelValue:e.deliveryMethodForm.schedule_type,"onUpdate:modelValue":t[31]||(t[31]=m=>e.deliveryMethodForm.schedule_type=m),errorText:e.formState.getFormError("schedule_type"),tooltipContent:"Select the schedule type e.g Whether customers should specify a delivery date or both delivery date and time"},null,8,["options","modelValue","errorText"]),e.deliveryMethodForm.schedule_type=="date and time"?(r(),s("div",no,[a(p,{type:"checkbox",inputLabel:"Auto generate time slots",modelValue:e.deliveryMethodForm.auto_generate_time_slots,"onUpdate:modelValue":t[32]||(t[32]=m=>e.deliveryMethodForm.auto_generate_time_slots=m),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,errorText:e.formState.getFormError("auto_generate_time_slots"),inputDescription:"Automatically generates time options for customers to choose from",onChange:t[33]||(t[33]=m=>e.deliveryMethodState.saveStateDebounced("Auto generate time slots changed"))},null,8,["modelValue","skeleton","errorText"]),e.deliveryMethodForm.auto_generate_time_slots?(r(),s("div",mo,[a(p,{min:"1",type:"number",placeholder:"1",label:"Interval",modelValue:e.deliveryMethodForm.time_slot_interval_value,"onUpdate:modelValue":t[34]||(t[34]=m=>e.deliveryMethodForm.time_slot_interval_value=m),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,errorText:e.formState.getFormError("time_slot_interval_value"),onInput:t[35]||(t[35]=m=>e.deliveryMethodState.saveStateDebounced("Time slot interval value changed")),tooltipContent:"Set the interval that should be used to auto generate the time slots"},null,8,["modelValue","skeleton","errorText"]),a(_,{class:"w-full",search:!1,label:"Interval Unit",options:e.timeSlotIntervalUnits,modelValue:e.deliveryMethodForm.time_slot_interval_unit,"onUpdate:modelValue":t[36]||(t[36]=m=>e.deliveryMethodForm.time_slot_interval_unit=m),errorText:e.formState.getFormError("time_slot_interval_unit"),tooltipContent:"Set the interval unit that should be used to auto generate the time slots"},null,8,["options","modelValue","errorText"])])):n("",!0)])):n("",!0),a(w),o("div",uo,[a(p,{type:"checkbox",inputLabel:"Same day delivery",modelValue:e.deliveryMethodForm.same_day_delivery,"onUpdate:modelValue":t[37]||(t[37]=m=>e.deliveryMethodForm.same_day_delivery=m),skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,errorText:e.formState.getFormError("same_day_delivery"),inputDescription:"Customers must place orders for delivery on the same day",onChange:t[38]||(t[38]=m=>e.deliveryMethodState.saveStateDebounced("Same day delivery changed"))},null,8,["modelValue","skeleton","errorText"]),e.deliveryMethodForm.same_day_delivery?n("",!0):(r(),s(V,{key:0},[a(p,{type:"checkbox",inputLabel:"Require orders in advance",skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,modelValue:e.deliveryMethodForm.require_minimum_notice_for_orders,"onUpdate:modelValue":t[43]||(t[43]=m=>e.deliveryMethodForm.require_minimum_notice_for_orders=m),errorText:e.formState.getFormError("require_minimum_notice_for_orders"),onChange:t[44]||(t[44]=m=>e.deliveryMethodState.saveStateDebounced("Require minimum notice for orders changed"))},{inputDescription:x(()=>[...t[57]||(t[57]=[o("p",{class:"text-xs text-gray-500 mt-1"},"Customers can only place orders a few hours or days before the delivery date to allow time for processing",-1)])]),inputOuterDescription:x(()=>[o("div",{class:E([e.deliveryMethodForm.require_minimum_notice_for_orders?"h-12 mt-2":"h-0 mt-0 overflow-hidden","flex items-center text-gray-500 space-x-2 transition-all duration-500"])},[t[59]||(t[59]=o("span",{class:"text-xs text-gray-500"}," Allow delivery at least ",-1)),a(p,{min:"1",onClick:t[39]||(t[39]=U(()=>{},["stop"])),class:"w-28",type:"number",placeholder:"1",skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,modelValue:e.deliveryMethodForm.earliest_delivery_time_value,"onUpdate:modelValue":t[40]||(t[40]=m=>e.deliveryMethodForm.earliest_delivery_time_value=m),errorText:e.formState.getFormError("earliest_delivery_time_value"),onInput:t[41]||(t[41]=m=>e.deliveryMethodState.saveStateDebounced("Earliest delivery time value changed"))},re({_:2},[e.deliveryMethodForm.schedule_type=="date"?{name:"suffix",fn:x(()=>[o("span",ho,f(e.deliveryMethodForm.earliest_delivery_time_value==1?"Day":"Days"),1)]),key:"0"}:void 0]),1032,["skeleton","modelValue","errorText"]),e.deliveryMethodForm.schedule_type=="date and time"?(r(),h(_,{key:0,class:"w-28",search:!1,options:e.earliestDeliveryTimeUnits,modelValue:e.deliveryMethodForm.earliest_delivery_time_unit,"onUpdate:modelValue":t[42]||(t[42]=m=>e.deliveryMethodForm.earliest_delivery_time_unit=m),errorText:e.formState.getFormError("earliest_delivery_time_unit")},null,8,["options","modelValue","errorText"])):n("",!0),o("span",yo,[t[58]||(t[58]=F(" after order date ",-1)),e.deliveryMethodForm.schedule_type=="date and time"&&e.deliveryMethodForm.earliest_delivery_time_unit=="hour"?(r(),s(V,{key:0},[F("("+f(e.deliveryMethodForm.earliest_delivery_time_value)+" "+f(e.deliveryMethodForm.earliest_delivery_time_value=="1"?"hour":"hours")+" notice)",1)],64)):(r(),s(V,{key:1},[F("("+f(e.deliveryMethodForm.earliest_delivery_time_value)+" "+f(e.deliveryMethodForm.earliest_delivery_time_value=="1"?"day":"days")+" notice)",1)],64))])],2)]),_:1},8,["skeleton","modelValue","errorText"]),a(p,{type:"checkbox",skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,inputLabel:"Limit how far in advance orders can be placed",modelValue:e.deliveryMethodForm.restrict_maximum_notice_for_orders,"onUpdate:modelValue":t[48]||(t[48]=m=>e.deliveryMethodForm.restrict_maximum_notice_for_orders=m),errorText:e.formState.getFormError("restrict_maximum_notice_for_orders"),onChange:t[49]||(t[49]=m=>e.deliveryMethodState.saveStateDebounced("Restrict maximum notice for orders changed"))},{inputDescription:x(()=>[...t[60]||(t[60]=[o("p",{class:"text-xs text-gray-500 mt-1"},"Customers can only place orders if the delivery date is within a set number of days to avoid delivery days that are too far",-1)])]),inputOuterDescription:x(()=>[o("div",{class:E([e.deliveryMethodForm.restrict_maximum_notice_for_orders?"h-12 mt-2":"h-0 mt-0 overflow-hidden","flex items-center text-gray-500 space-x-2 transition-all duration-500"])},[t[61]||(t[61]=o("span",{class:"text-xs text-gray-500"}," Restrict orders more than ",-1)),a(p,{min:"1",onClick:t[45]||(t[45]=U(()=>{},["stop"])),class:"w-28",type:"number",placeholder:"1",skeleton:e.isLoadingStore||e.isLoadingDeliveryMethod,modelValue:e.deliveryMethodForm.latest_delivery_time_value,"onUpdate:modelValue":t[46]||(t[46]=m=>e.deliveryMethodForm.latest_delivery_time_value=m),errorText:e.formState.getFormError("latest_delivery_time_value"),onInput:t[47]||(t[47]=m=>e.deliveryMethodState.saveStateDebounced("Latest delivery time value changed"))},{suffix:x(()=>[o("span",co,f(e.deliveryMethodForm.latest_delivery_time_value==1?"Day":"Days"),1)]),_:1},8,["skeleton","modelValue","errorText"]),t[62]||(t[62]=o("span",{class:"text-xs text-gray-500"}," from the delivery date ",-1))],2)]),_:1},8,["skeleton","modelValue","errorText"])],64)),a(D)])],64)):n("",!0)]),o("div",vo,[t[64]||(t[64]=o("h1",{class:"text-md font-bold mb-4"},"Questions",-1)),a(O)]),e.deliveryMethod?(r(),s("div",{key:0,class:E(["flex items-center justify-between space-x-4 overflow-hidden rounded-lg p-4 border mt-4",e.isLoadingStore||e.isLoadingDeliveryMethod?"border-gray-300 bg-gray-50":"border-red-300 bg-red-50"])},[o("div",go,[o("p",null,[t[65]||(t[65]=F("Delete ",-1)),o("span",po,f(e.deliveryMethod.name),1),t[66]||(t[66]=F("?",-1))])]),o("div",_o,[a(d,{triggerType:"danger",approveType:"danger",approveLeftIcon:i.Trash2,triggerText:"Delete Delivery Method",approveText:"Delete Delivery Method",approveAction:e.deleteDeliveryMethod,triggerLoading:e.isDeletingDeliveryMethod,approveLoading:e.isDeletingDeliveryMethod},{content:x(()=>[t[69]||(t[69]=o("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Confirm Delete",-1)),o("p",fo,[t[67]||(t[67]=F("Are you sure you want to delete ",-1)),o("span",Mo,f(e.deliveryMethod.name),1),t[68]||(t[68]=F("?",-1))])]),_:1},8,["approveLeftIcon","approveAction","triggerLoading","approveLoading"])])],2)):n("",!0)])}const nl=B(Jr,[["render",bo]]);export{nl as default};
