import{S as c}from"./Skeleton-BfdDUyfM.js";import{c as s,b as t,a as d,n as u,g as h,T as g,t as i,r as m,o,d as p}from"./app-CAsQYp3T.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShineEffect-DjmscYxr.js";const f={inject:["authState"],components:{Skeleton:c},data(){return{countdown:5,errorMessage:null,isLoadingLogo:!0,countdownInterval:null,error:this.$route.query.error,token:this.$route.query.token,logoUrl:this.$route.query.logo_url,storeId:this.$route.query.store_id,provider:this.$route.query.provider,errorDescription:this.$route.query.error_description}},methods:{onLogoLoaded(){this.isLoadingLogo=!1},startRedirectCountdown(){this.countdownInterval=setInterval(()=>{this.countdown>0?this.countdown-=1:(clearInterval(this.countdownInterval),this.$router.replace({name:"login"}))},1e3)},completeSocialLogin(){this.authState.setTokenOnRequest(this.token),this.authState.setTokenOnLocalStorage(this.token),this.storeId?this.$router.push({name:"show-store-home",params:{store_id:this.storeId}}):this.$router.push({name:"show-stores"})}},created(){this.errorDescription||this.error?(this.errorMessage=this.errorDescription||this.error,this.startRedirectCountdown()):this.completeSocialLogin()}},w={class:"flex flex-col justify-center items-center w-full bg-linear-to-b from-blue-100 to-white-100 min-h-screen overflow-x-hidden"},y={class:"flex flex-col justify-center items-center"},L={class:"relative inline-flex items-center justify-center w-28 h-28"},x=["src"],k=["src"],v={key:0,class:"mt-8"},S={class:"font-medium text-red-500 text-sm mb-4"},b={class:"text-gray-400 text-sm text-center"},I={key:1,class:"text-gray-400 text-center mt-8"};function q(C,r,R,$,e,n){const l=m("Skeleton");return o(),s("div",w,[t("div",y,[t("div",L,[r[1]||(r[1]=t("div",{class:u(["absolute inset-0 animate-spin rounded-full border-4 border-gray-300"]),style:{"border-top-color":"#00a63d"}},null,-1)),d(g,{name:"fade-1",mode:"out-in"},{default:h(()=>[e.isLoadingLogo?(o(),p(l,{key:0,width:"w-20",height:"h-20",color:"bg-gray-200",class:"border border-gray-300"})):(o(),s("img",{key:1,src:e.logoUrl,alt:"Social Logo",class:"w-20 h-20 relative"},null,8,x))]),_:1})]),t("img",{src:e.logoUrl,onLoad:r[0]||(r[0]=(...a)=>n.onLogoLoaded&&n.onLogoLoaded(...a)),class:"hidden"},null,40,k),e.errorMessage?(o(),s("div",v,[t("p",S,i(e.errorMessage),1),t("p",b,i(e.countdown==0?"Redirecting...":`${"Redirecting in "+e.countdown}`),1)])):(o(),s("p",I,"Logging In"))])])}const T=_(f,[["render",q]]);export{T as default};
