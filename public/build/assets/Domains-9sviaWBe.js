import{P as B}from"./Pill-Tc8R0SoQ.js";import{M}from"./Modal-Cn5tyxTP.js";import{B as E}from"./Button-DCQzWhi0.js";import{T as j}from"./Tooltip-BCcWuuCA.js";import{S as z}from"./Skeleton-Cb_5uZP7.js";import{q as N,c as d,e as h,a,g as u,F as D,f as _,b as t,w as f,u as F,r as m,o as r,t as x,d as v,i as w}from"./app-BFRszLDY.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as q}from"./refresh-ccw-DHHZfB71.js";import{G as A}from"./globe-DskXdOnh.js";import{T as b}from"./trash-2-CG5LzenE.js";import"./Popover-7t3v7uU0.js";import"./x-t57Ey7ol.js";import"./createLucideIcon-CSc6mW6X.js";import"./Loader-CVwI2N_w.js";import"./ShineEffect-jVKnL5S-.js";const G={inject:["formState","storeState","notificationState"],components:{Pill:B,Modal:M,Button:E,Tooltip:j,Skeleton:z,Trash2:b,Globe:A,RefreshCcw:q},data(){return{Trash2:b,domains:[],pagination:null,deletableDomain:null,isDeletingDomain:!1,isLoadingDomains:!1}},watch:{store(s,e){!e&&s&&this.setup()}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},hasDomains(){return this.domains.length>0}},methods:{formattedDatetime:N,setup(){this.store&&this.showDomains()},getStatusPillType(s){switch(s){case"connected":return"success";case"processing":return"primary";case"pending":return"warning";default:return"light"}},showDeleteDomainModal(s){this.deletableDomain=s,this.$refs.deleteDomainModal.showModal()},async navigateToConnectExistingDomain(){await this.$router.push({name:"add-domain",query:{store_id:this.store.id}})},async navigateToBuyDomain(){await this.$router.push({name:"buy-domain",query:{store_id:this.store.id}})},async navigateToEditDomain(s){await this.$router.push({name:"edit-domain",query:{store_id:this.store.id},params:{domain_id:s.id}})},async showDomains(){var s,e;try{this.isLoadingDomains=!0;let o={params:{per_page:100,store_id:this.store.id}};const c=await axios.get("/api/domains",o);this.pagination=c.data,this.domains=this.pagination.data}catch(o){const c=((e=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Something went wrong while fetching domains";this.notificationState.showWarningNotification(c),this.formState.setServerFormErrors(o),console.error("Failed to fetch domains:",o)}finally{this.isLoadingDomains=!1}},async deleteDomain(){var s,e;try{if(this.isDeletingDomain)return;this.isDeletingDomain=!0;const o={data:{store_id:this.store.id}};await axios.delete(`/api/domains/${this.deletableDomain.id}`,o),this.showDomains(),this.$refs.deleteDomainModal.hideModal(),this.notificationState.showSuccessNotification("Domain deleted")}catch(o){const c=((e=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Something went wrong while deleting domain";this.notificationState.showWarningNotification(c),this.formState.setServerFormErrors(o),console.error("Failed to delete domain:",o),this.$refs.deleteDomainModal.hideModal()}finally{this.isDeletingDomain=!1}}},created(){this.setup()}},I={class:"max-w-2xl mx-auto pt-32 pb-40"},R={key:0,class:"flex justify-end space-x-4"},V={key:1,class:"space-y-3 mt-4"},W={class:"flex justify-between items-center"},Y={class:"flex items-center space-x-2 font-bold"},H={class:"flex items-center space-x-4"},J={key:2,class:"space-y-3 mt-4"},K=["onClick"],O={class:"flex justify-between items-center"},Q={class:"flex items-center space-x-2 font-bold"},U={class:"w-8 h-8 rounded-full overflow-hidden flex items-center justify-center"},X={class:"text-sm"},Z={class:"flex items-center space-x-4"},$={class:"flex items-center space-x-1"},ee={class:"flex items-center space-x-2 mr-1"},te={key:3,class:"flex flex-col items-center justify-center bg-linear-to-br from-indigo-50 to-purple-50 border border-gray-300 shadow-lg rounded-2xl py-16 px-8 space-y-6"},oe={class:"relative"},ie={class:"bg-linear-to-br from-white-50 to-indigo-50 text-indigo-500 rounded-full p-2"},se={class:"flex justify-end space-x-4"},ne={class:"mb-8"},ae={class:"font-bold text-black"};function re(s,e,o,c,l,i){const g=m("Button"),p=m("Skeleton"),y=m("Globe"),S=m("Tooltip"),T=m("RefreshCcw"),k=m("Pill"),C=m("Modal");return r(),d("div",I,[!i.isLoadingStore&&!l.isLoadingDomains&&i.hasDomains?(r(),d("div",R,[a(g,{size:"md",type:"primary",buttonClass:"px-4",loading:i.isLoadingStore,action:i.navigateToBuyDomain},{default:u(()=>[...e[2]||(e[2]=[t("span",null,"Buy Domain",-1)])]),_:1},8,["loading","action"]),a(g,{size:"md",type:"primary",buttonClass:"px-4",loading:i.isLoadingStore,action:i.navigateToConnectExistingDomain},{default:u(()=>[...e[3]||(e[3]=[t("span",null,"Connect Existing Domain",-1)])]),_:1},8,["loading","action"])])):h("",!0),i.isLoadingStore||l.isLoadingDomains?(r(),d("div",V,[(r(),d(D,null,_([1,2,3],(n,L)=>t("div",{key:L,class:"bg-white p-4 shadow-sm rounded-xl transition-all duration-300"},[t("div",W,[t("div",Y,[a(p,{width:"w-8",height:"h-8",rounded:"rounded-full",shine:!0}),a(p,{width:"w-40",shine:!0})]),t("div",H,[a(p,{width:"w-16",shine:!0}),a(p,{width:"w-4",height:"h-4",rounded:"rounded-md",shine:!0})])])])),64))])):i.hasDomains?(r(),d("div",J,[(r(!0),d(D,null,_(l.domains,n=>(r(),d("div",{key:n.id,onClick:f(()=>i.navigateToEditDomain(n),["stop"]),class:"bg-white p-4 shadow-sm rounded-xl transition-all duration-300 border border-transparent hover:border-gray-300 hover:shadow-lg cursor-pointer"},[t("div",O,[t("div",Q,[t("div",U,[a(y,{size:"20",class:"text-gray-500"})]),t("span",X,x(n.name),1)]),t("div",Z,[t("div",$,[n.last_verification_attempt_at?(r(),v(S,{key:0,trigger:"hover",content:`Status last updated: ${i.formattedDatetime(n.last_verification_attempt_at)}`},null,8,["content"])):h("",!0),a(k,{size:"xs",type:i.getStatusPillType(n.status)},{default:u(()=>[t("div",ee,[n.status=="processing"?(r(),v(T,{key:0,size:"12",class:"text-blue-800 animate-spin"})):h("",!0),t("span",null,x(n.status),1)])]),_:2},1032,["type"])]),a(g,{size:"xs",type:"bareDanger",leftIcon:l.Trash2,action:()=>i.showDeleteDomainModal(n)},null,8,["leftIcon","action"])])])],8,K))),128))])):(r(),d("div",te,[t("div",oe,[t("div",ie,[a(y,{size:"60"})]),e[4]||(e[4]=t("div",{class:"absolute inset-0 bg-indigo-300 opacity-20 rounded-full animate-ping"},null,-1))]),e[7]||(e[7]=t("div",{class:"text-center"},[t("h3",{class:"text-xl font-semibold text-gray-800"},"Connect Your Domains!"),t("span",{class:"text-sm text-gray-600 mt-2 block max-w-sm"}," Add a domain to enhance your store's branding and accessibility. ")],-1)),t("div",se,[t("button",{onClick:e[0]||(e[0]=f((...n)=>i.navigateToBuyDomain&&i.navigateToBuyDomain(...n),["stop"])),class:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-medium py-3 px-6 rounded-lg hover:from-indigo-600 hover:to-purple-700 transition-all duration-300 hover:scale-105 cursor-pointer"},[...e[5]||(e[5]=[t("span",null,"Buy Domain",-1)])]),t("button",{onClick:e[1]||(e[1]=f((...n)=>i.navigateToConnectExistingDomain&&i.navigateToConnectExistingDomain(...n),["stop"])),class:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-medium py-3 px-6 rounded-lg hover:from-indigo-600 hover:to-purple-700 transition-all duration-300 hover:scale-105 cursor-pointer"},[...e[6]||(e[6]=[t("span",null,"Connect Existing Domain",-1)])])])])),a(C,{approveType:"danger",approveLeftIcon:l.Trash2,ref:"deleteDomainModal",approveText:"Delete Domain",approveAction:i.deleteDomain,triggerLoading:l.isDeletingDomain,approveLoading:l.isDeletingDomain},F({_:2},[l.deletableDomain?{name:"content",fn:u(()=>[e[10]||(e[10]=t("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Confirm Delete",-1)),t("p",ne,[e[8]||(e[8]=w("Are you sure you want to delete ",-1)),t("span",ae,x(l.deletableDomain.name),1),e[9]||(e[9]=w("?",-1))])]),key:"0"}:void 0]),1032,["approveLeftIcon","approveAction","triggerLoading","approveLoading"])])}const be=P(G,[["render",re]]);export{be as default};
