import{i as W}from"./stringUtils-Bvzw0-oW.js";import{I as k}from"./Input-CaqG3UNa.js";import{S as D}from"./Select-DmaDYR2i.js";import{S as A}from"./SelectCountry-AcneJGDj.js";import{S as z}from"./SelectCurrency-Bk0rCtMf.js";import{d as S,P as H,r as l,o as d,c as p,b as a,a as n,e as _,F as C,k as V,g as w,t as L,w as O,i as v,f as P}from"./app-9D_Cw4s4.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as R}from"./circle-dollar-sign-Cjnnq55h.js";import{S as U}from"./Switch-B-8TeSQT.js";import{S as E}from"./Skeleton-ChnWfFmK.js";import{R as B,S as K}from"./StoreLogo-BlTZERCk.js";import{B as G}from"./Button-enl4NEGy.js";import{P as I}from"./plus-BPwoMIzT.js";import{T as j}from"./trash-2-BO5hz549.js";import{M as q}from"./Modal-BQzBOKi-.js";import{A as Y}from"./Alert-cipDnSO8.js";import{C as J}from"./clock-6NhQh7xa.js";import{E as M}from"./earth-DnFZT-ft.js";import{P as Q}from"./Pill-BFJX92pa.js";import{W as X}from"./WhatsappIcon-B5cD-hO7.js";import{c as Z}from"./createLucideIcon-BjPl0ua2.js";import"./Copy-TLmCwI7a.js";import"./ShineEffect-CCEGWZwA.js";import"./Popover-BYwxVx0y.js";import"./Tooltip-DBg9S1F5.js";import"./capitalize-ChUSrr1V.js";import"./refresh-ccw-sY-Ia2Cp.js";import"./circle-check-gsRbbAn8.js";import"./circle-alert-BncYZhnp.js";import"./x-ByYxaui0.js";import"./parsePhoneNumber-xMTQFMCS.js";import"./Loader-BJ_yFh5a.js";import"./info-B7NJElNr.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=Z("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),ee=[{name:"English",code:"en"}],te={components:{Select:D},props:{allowedLanguages:{type:[Array,null],default:null}},data(){return{languagesOptions:[]}},created(){const s=Object.values(ee).map(e=>({label:`${e.name}`,value:e.code}));this.allowedLanguages&&Array.isArray(this.allowedLanguages)&&this.allowedLanguages.length>0?this.languagesOptions=s.filter(e=>this.allowedLanguages.includes(e.value)):this.languagesOptions=s}};function oe(s,e,o,u,i,t){const h=l("Select");return d(),S(h,H(s.$props,{options:i.languagesOptions,placeholder:"Select a language",noResultsText:"No languages found",searchableFields:["label","value"]}),null,16,["options"])}const N=b(te,[["render",oe]]),re={inject:["formState","storeState"],components:{CircleDollarSign:R,Input:k,Select:D,SelectCountry:A,SelectCurrency:z,SelectLanguage:N},data(){return{taxOptions:[{label:"Inclusive (Prices include tax)",value:"inclusive"},{label:"Exclusive (Prices exclude tax)",value:"exclusive"}]}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},storeForm(){return this.storeState.storeForm}}},se={class:"bg-white p-8 shadow-sm rounded-xl mb-2"},ae={class:"flex items-center font-bold mb-4"},ne={class:"grid grid-cols-2 gap-4"},le={class:"col-span-1"},ie={class:"col-span-1"},de={class:"col-span-2"};function ue(s,e,o,u,i,t){const h=l("CircleDollarSign"),g=l("Select"),c=l("Input");return d(),p("div",se,[a("h1",ae,[n(h,{size:"20",class:"mr-2 shrink-0"}),e[6]||(e[6]=a("span",null,"Tax",-1))]),e[7]||(e[7]=a("p",{class:"text-sm text-gray-500 mb-4"},"Set your store's tax rate and method (Inclusive/Exclusive) to ensure accurate pricing and compliance with local tax regulations.",-1)),a("div",ne,[a("div",le,[n(g,{class:"w-full",search:!1,label:"Tax Method",options:i.taxOptions,modelValue:t.storeForm.tax_method,"onUpdate:modelValue":e[0]||(e[0]=m=>t.storeForm.tax_method=m),errorText:t.formState.getFormError("tax_method"),onChange:e[1]||(e[1]=m=>t.storeState.saveStateDebounced("Tax method changed")),tooltipContent:"Choose whether taxes are included in your prices (inclusive) or added on top of prices (exclusive)."},null,8,["options","modelValue","errorText"])]),a("div",ie,[n(c,{type:"text",label:"Tax ID",placeholder:"12-3456789",modelValue:t.storeForm.tax_id,"onUpdate:modelValue":e[2]||(e[2]=m=>t.storeForm.tax_id=m),skeleton:t.isLoadingStore||!t.store,errorText:t.formState.getFormError("tax_id"),onChange:e[3]||(e[3]=m=>t.storeState.saveStateDebounced("Tax ID changed")),tooltipContent:"Provide your tax identification number (e.g. EIN for US, VAT for UK)."},null,8,["modelValue","skeleton","errorText"])]),a("div",de,[n(c,{placeholder:"10",type:"percentage",label:"Tax Rate (%)",skeleton:t.isLoadingStore||!t.store,modelValue:t.storeForm.tax_percentage_rate,"onUpdate:modelValue":e[4]||(e[4]=m=>t.storeForm.tax_percentage_rate=m),errorText:t.formState.getFormError("tax_percentage_rate"),onChange:e[5]||(e[5]=m=>t.storeState.saveStateDebounced("Tax percentage rate changed")),tooltipContent:"Provide your tax identification number (e.g. EIN for US, VAT for UK)."},null,8,["skeleton","modelValue","errorText"])])])])}const me=b(re,[["render",ue]]),ce={inject:["formState","storeState","notificationState"],components:{Plus:I,RefreshCw:B,Button:G},props:{size:{type:String,default:"w-20 h-20"},store:{type:[Object,null],default:null},showButton:{type:Boolean,default:!0},uploading:{type:Boolean,default:!1},editable:{type:Boolean,default:!0}},emits:["selectedFile"],data(){return{Plus:I,Trash2:j,RefreshCw:B,filePath:null,localDeleting:!1,localUploading:!1}},watch:{localStore(){this.setPath()},"localStore.background_photo"(s){this.filePath=s==null?void 0:s.path}},computed:{stateStore(){return this.storeState.store},isUploadingAny(){return this.uploading||this.localUploading},localStore(){return this.store?this.store:this.stateStore}},methods:{setPath(){var s;(s=this.localStore)!=null&&s.background_photo&&(this.filePath=this.localStore.background_photo.path)},triggerFileUpload(){this.$refs.fileInput.click()},handleFileUpload(s){const e=s.target.files[0];e&&(this.filePath=URL.createObjectURL(e),this.$emit("selectedFile",this.$refs.fileInput.files[0]),this.localStore&&this.uploadStoreLogo())},async uploadStoreLogo(){var s,e;try{if(this.isUploadingAny||this.$refs.fileInput.files.length==0)return;let o=new FormData;o.append("return",1),o.append("mediable_type","store"),o.append("store_id",this.localStore.id),o.append("mediable_id",this.localStore.id),o.append("file",this.$refs.fileInput.files[0]),o.append("upload_folder_name","store_background_photo");const u={headers:{"Content-Type":"multipart/form-data"}};this.localUploading=!0;const i=await axios.post("/api/media-files",o,u);this.notificationState.showSuccessNotification("Store background photo updated!"),this.storeState.store&&this.localStore.id==this.storeState.store.id&&(this.storeState.store.background_photo=i.data.media_file,this.filePath=i.data.media_file.path)}catch(o){const u=((e=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Something went wrong while uploading store background photo";this.notificationState.showWarningNotification(u),this.formState.setServerFormErrors(o),console.error("Failed to upload store background photo:",o)}finally{this.localUploading=!1,this.$refs.fileInput.value=""}},async deleteStoreLogo(){var s,e;try{this.localDeleting=!0;const o={data:{store_id:this.localStore.id}};await axios.delete(`/api/media-files/${this.localStore.background_photo.id}`,o),this.storeState.store&&this.localStore.id==this.storeState.store.id&&(this.storeState.store.background_photo=null,this.filePath=null)}catch(o){const u=((e=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Something went wrong while deleting store background photo";this.notificationState.showWarningNotification(u),this.formState.setServerFormErrors(o),console.error("Failed to delete store background photo:",o)}finally{this.localDeleting=!1}}},created(){this.setPath()}},ge={key:0,class:"absolute inset-0 text-white bg-blue-500/80 bg-opacity-50 flex items-center justify-center rounded-full transition-opacity"},pe={key:1,class:"absolute inset-0 text-white bg-black/80 bg-opacity-50 flex items-center justify-center rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},he=["src"],fe={class:"flex items-center space-x-1"};function Se(s,e,o,u,i,t){const h=l("RefreshCw"),g=l("Plus"),c=l("Button");return d(),p("div",{class:V(["select-none",{"flex flex-col items-center space-y-2":o.showButton}])},[a("div",{onClick:e[0]||(e[0]=m=>o.editable&&!t.isUploadingAny?t.triggerFileUpload():null),class:V([o.size,{"cursor-pointer active:scale-95 transition-all relative group":o.editable},"bg-gray-200 rounded-full flex items-center justify-center"])},[o.editable?(d(),p(C,{key:0},[t.isUploadingAny?(d(),p("div",ge,[n(h,{size:"16",class:"animate-spin"})])):(d(),p("div",pe,[i.filePath?(d(),S(h,{key:0,size:"16"})):(d(),S(g,{key:1,size:"16"}))]))],64)):_("",!0),i.filePath?(d(),p("img",{key:1,src:i.filePath,alt:"Store Logo",class:"w-full h-full rounded-full"},null,8,he)):_("",!0)],2),a("input",{type:"file",class:"hidden",ref:"fileInput",onChange:e[1]||(e[1]=(...m)=>t.handleFileUpload&&t.handleFileUpload(...m)),accept:"image/jpeg, image/jpg, image/png, image/gif"},null,544),a("div",fe,[o.showButton?(d(),S(c,{key:0,size:"xs",type:"light",action:t.triggerFileUpload,leftIcon:i.filePath?i.RefreshCw:i.Plus,disabled:t.isUploadingAny||i.localDeleting},{default:w(()=>[a("span",null,L(i.filePath?"Change":"Add background photo"),1)]),_:1},8,["action","leftIcon","disabled"])):_("",!0),o.showButton&&i.filePath&&!t.isUploadingAny?(d(),S(c,{key:1,size:"xs",type:"danger",loading:i.localDeleting,action:t.deleteStoreLogo},{default:w(()=>[...e[2]||(e[2]=[a("span",null,"Remove",-1)])]),_:1},8,["loading","action"])):_("",!0)])],2)}const be=b(ce,[["render",Se]]),ye={inject:["formState","storeState"],components:{Input:k,Switch:U,Skeleton:E,StoreLogo:K,StoreBackgroundPhoto:be},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},storeForm(){return this.storeState.storeForm}}},xe={class:"bg-white p-8 shadow-sm rounded-xl mb-2"},_e={class:"space-y-4"},we={class:"grid grid-cols-2"};function ve(s,e,o,u,i,t){const h=l("Skeleton"),g=l("Switch"),c=l("Input"),m=l("StoreLogo"),f=l("StoreBackgroundPhoto");return d(),p("div",xe,[e[10]||(e[10]=a("h1",{class:"text-lg font-bold mb-8"},"General Settings",-1)),a("div",_e,[t.isLoadingStore||!t.store?(d(),S(h,{key:0,width:"w-8",shine:!0})):(d(),S(g,{key:1,size:"xs",suffixText:"Online",modelValue:t.storeForm.online,"onUpdate:modelValue":e[0]||(e[0]=r=>t.storeForm.online=r),errorText:t.formState.getFormError("online"),onChange:e[1]||(e[1]=r=>t.storeState.saveStateDebounced("Online status changed")),tooltipContent:"Turn on to set your store online (visible to customers). Turn off to set it offline (hidden from customers)."},null,8,["modelValue","errorText"])),t.storeForm.online?_("",!0):(d(),S(c,{key:2,rows:"2",type:"textarea",label:"Offline Message",modelValue:t.storeForm.offline_message,"onUpdate:modelValue":e[2]||(e[2]=r=>t.storeForm.offline_message=r),skeleton:t.isLoadingStore||!t.store,placeholder:"Closed for the holidays",errorText:t.formState.getFormError("offline_message"),onChange:e[3]||(e[3]=r=>t.storeState.saveStateDebounced("Offline message changed")),tooltipContent:"The message to show to customers who visit your store while its offline (hidden from customers)"},null,8,["modelValue","skeleton","errorText"])),n(c,{type:"text",label:"Store Name",modelValue:t.storeForm.name,"onUpdate:modelValue":e[4]||(e[4]=r=>t.storeForm.name=r),placeholder:"Baby Cakes ðŸ§",skeleton:t.isLoadingStore||!t.store,errorText:t.formState.getFormError("name"),onChange:e[5]||(e[5]=r=>t.storeState.saveStateDebounced("Store name changed"))},null,8,["modelValue","skeleton","errorText"]),n(c,{rows:"2",type:"textarea",label:"Store Description",modelValue:t.storeForm.description,"onUpdate:modelValue":e[6]||(e[6]=r=>t.storeForm.description=r),skeleton:t.isLoadingStore||!t.store,placeholder:"The sweetest cakes in the world ðŸ°",errorText:t.formState.getFormError("description"),onChange:e[7]||(e[7]=r=>t.storeState.saveStateDebounced("Store description changed")),tooltipContent:"A short and sweet description of your store e.g The sweetest cakes in the world ðŸ°"},null,8,["modelValue","skeleton","errorText"]),a("div",we,[n(m,{onClick:e[8]||(e[8]=O(()=>{},["stop"])),size:"w-24 h-24",showButton:!0}),n(f,{onClick:e[9]||(e[9]=O(()=>{},["stop"])),size:"w-24 h-24",showButton:!0})])])])}const ke=b(ye,[["render",ve]]),Fe={inject:["formState","storeState","notificationState"],components:{Input:k,Modal:q},data(){return{Trash2:j,confirmation:""}},computed:{store(){return this.storeState.store},storeForm(){return this.storeState.storeForm},isLoadingStore(){return this.storeState.isLoadingStore},isDeletingStore(){return this.storeState.isDeletingStore}},methods:{async navigateToShowStores(){await this.$router.replace({name:"show-stores"})},async deleteStore(s){var e,o;try{if(this.storeState.isDeletingStore)return;this.storeState.isDeletingStore=!0,await axios.delete(`/api/stores/${this.store.id}`),s(),await new Promise(u=>setTimeout(u,500)),this.notificationState.showSuccessNotification("Store deleted"),this.storeState.setStore(null),await this.navigateToShowStores()}catch(u){const i=((o=(e=u==null?void 0:u.response)==null?void 0:e.data)==null?void 0:o.message)||(u==null?void 0:u.message)||"Something went wrong while deleting store";this.notificationState.showWarningNotification(i),this.formState.setServerFormErrors(u),console.error("Failed to delete store:",u),s()}finally{this.storeState.isDeletingStore=!1}}}},Te={class:"space-y-2"},Ce={class:"font-bold text-black"},Ve={class:"flex justify-end"},Le={class:"mb-4"},De={class:"font-bold text-black"};function Ue(s,e,o,u,i,t){var c;const h=l("Input"),g=l("Modal");return d(),p("div",{class:V(["flex items-end justify-between space-x-4 overflow-hidden rounded-lg p-4 border mb-20",t.isLoadingStore?"border-gray-300 bg-gray-50":"border-red-300 bg-red-50"])},[a("div",Te,[a("p",null,[e[1]||(e[1]=v("Delete ",-1)),a("span",Ce,L((c=t.store)==null?void 0:c.name),1),e[2]||(e[2]=v("?",-1))]),e[3]||(e[3]=a("p",{class:"text-sm"},"Once this store is deleted you will not be able to recover it. Orders, products, customers, and all other store-related settings will be permanently deleted",-1))]),a("div",Ve,[n(g,{triggerType:"danger",approveType:"danger",approveLeftIcon:i.Trash2,triggerText:"Delete Store",approveText:"Delete Store",approveAction:t.deleteStore,triggerLoading:t.isDeletingStore,approveLoading:t.isDeletingStore},{content:w(()=>{var m,f;return[e[5]||(e[5]=a("p",{class:"text-lg font-bold border-b border-gray-300 border-dashed pb-4 mb-4"},"Confirm Delete",-1)),a("p",Le,[e[4]||(e[4]=v("Are you sure you want to permanently delete this store? Please confirm by typing ",-1)),a("span",De,L((m=t.store)==null?void 0:m.name),1)]),n(h,{type:"text",class:"mb-4",modelValue:i.confirmation,"onUpdate:modelValue":e[0]||(e[0]=r=>i.confirmation=r),placeholder:(f=t.store)==null?void 0:f.name},null,8,["modelValue","placeholder"])]}),_:1},8,["approveLeftIcon","approveAction","triggerLoading","approveLoading"])])],2)}const Ee=b(Fe,[["render",Ue]]),Oe={inject:["formState","storeState"],components:{Alert:Y,Clock:J,Input:k,Switch:U,Skeleton:E},data(){return{days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},storeForm(){return this.storeState.storeForm}},methods:{addOpeningHour(s){this.storeForm.opening_hours[s].available&&this.storeForm.opening_hours[s].hours.push(["08:00","16:00"])},removeOpeningHour(s,e){this.storeForm.opening_hours[s].available&&this.storeForm.opening_hours[s].hours.splice(e,1)}}},Pe={class:"bg-white p-8 shadow-sm rounded-xl mb-2"},Be={class:"flex items-center font-bold mb-4"},Ie={class:"space-y-4"},Ae={class:"col-span-1"},ze={class:"col-span-1 space-y-2"},je={class:"flex items-center space-x-2"},Me=["onClick"],Ne=["onClick"];function We(s,e,o,u,i,t){const h=l("Clock"),g=l("Skeleton"),c=l("Switch"),m=l("Alert"),f=l("Input");return d(),p("div",Pe,[a("h1",Be,[n(h,{size:"20",class:"mr-2 shrink-0"}),e[7]||(e[7]=a("span",null,"Opening Hours",-1))]),e[12]||(e[12]=a("p",{class:"text-sm text-gray-500 mb-4"},"Set your store's operating hours, including availability and time slots for each day. Indicate if the store is open or closed on any specific day.",-1)),a("div",Ie,[t.isLoadingStore||!t.store?(d(),S(g,{key:0,width:"w-8",shine:!0})):(d(),S(c,{key:1,size:"xs",suffixText:"Show opening hours",modelValue:t.storeForm.show_opening_hours,"onUpdate:modelValue":e[0]||(e[0]=r=>t.storeForm.show_opening_hours=r),errorText:t.formState.getFormError("show_opening_hours"),onChange:e[1]||(e[1]=r=>t.storeState.saveStateDebounced("Opening hours status changed")),tooltipContent:"Turn on if you would like your store to showcase its open or closed hours"},null,8,["modelValue","errorText"])),t.storeForm.show_opening_hours?(d(),p(C,{key:2},[n(c,{size:"xs",suffixText:"Allow checkout during closed hours",modelValue:t.storeForm.allow_checkout_on_closed_hours,"onUpdate:modelValue":e[2]||(e[2]=r=>t.storeForm.allow_checkout_on_closed_hours=r),errorText:t.formState.getFormError("allow_checkout_on_closed_hours"),onChange:e[3]||(e[3]=r=>t.storeState.saveStateDebounced("Opening hours status changed")),tooltipContent:"Turn on to allow customers to place orders during closed hours"},null,8,["modelValue","errorText"]),t.storeForm.allow_checkout_on_closed_hours?_("",!0):(d(),S(m,{key:0,type:"primary",dismissable:!1,title:"Customers will be restricted from placing orders during closed hours"})),(d(!0),p(C,null,P(t.storeForm.opening_hours,(r,y)=>(d(),p("div",{key:y,class:"border-t border-gray-300 border-dashed pt-4 grid grid-cols-2 gap-4 items-start"},[a("div",Ae,[n(f,{type:"checkbox",inputLabel:i.days[y],modelValue:t.storeForm.opening_hours[y].available,"onUpdate:modelValue":x=>t.storeForm.opening_hours[y].available=x,onChange:e[4]||(e[4]=x=>t.storeState.saveStateDebounced("Opening day changed"))},null,8,["inputLabel","modelValue","onUpdate:modelValue"])]),a("div",ze,[(d(!0),p(C,null,P(r.hours,(x,F)=>(d(),p("div",{key:F},[a("div",je,[n(f,{type:"time",modelValue:x[0],"onUpdate:modelValue":T=>x[0]=T,disabled:!r.available,onChange:e[5]||(e[5]=T=>t.storeState.saveStateDebounced("Opening hour changed")),errorText:t.formState.getFormError(`opening_hours.${y}.hours.${F}.0`)},null,8,["modelValue","onUpdate:modelValue","disabled","errorText"]),e[11]||(e[11]=a("span",null,"-",-1)),n(f,{type:"time",modelValue:x[1],"onUpdate:modelValue":T=>x[1]=T,disabled:!r.available,onChange:e[6]||(e[6]=T=>t.storeState.saveStateDebounced("Opening hour changed")),errorText:t.formState.getFormError(`opening_hours.${y}.hours.${F}.1`)},{default:w(()=>[...e[8]||(e[8]=[v("> ",-1)])]),_:1},8,["modelValue","onUpdate:modelValue","disabled","errorText"]),a("div",{class:V([r.available?"cursor-pointer":"opacity-0"])},[F==0?(d(),p("div",{key:0,onClick:()=>t.addOpeningHour(y),class:"shrink-0 rounded-md border border-gray-300 p-1 hover:bg-blue-50 transition-all"},[...e[9]||(e[9]=[a("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1)])],8,Me)):(d(),p("div",{key:1,onClick:()=>t.removeOpeningHour(y,F),class:"shrink-0 rounded-md border border-gray-300 p-1 bg-red-50 hover:bg-red-100 transition-all"},[...e[10]||(e[10]=[a("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})],-1)])],8,Ne))],2)])]))),128))])]))),128))],64)):_("",!0)])])}const He=b(Oe,[["render",We]]),Re={inject:["formState","storeState"],components:{Earth:M,Input:k,Select:D,SelectCountry:A,SelectCurrency:z,SelectLanguage:N},data(){return{distanceOptions:[{label:"Kilometer (km)",value:"km"},{label:"Mile",value:"mile"}],weightOptions:[{label:"Kilogram (kg)",value:"kg"},{label:"Gram",value:"g"},{label:"Pound (lb)",value:"lb"},{label:"Ounce (oz)",value:"oz"}]}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},storeForm(){return this.storeState.storeForm}}},Ke={class:"bg-white p-8 shadow-sm rounded-xl mb-2"},Ge={class:"flex items-center font-bold mb-4"},qe={class:"grid grid-cols-2 gap-4"};function Ye(s,e,o,u,i,t){const h=l("Earth"),g=l("SelectCountry"),c=l("SelectCurrency"),m=l("SelectLanguage"),f=l("Select");return d(),p("div",Ke,[a("h1",Ge,[n(h,{size:"20",class:"mr-2 shrink-0"}),e[10]||(e[10]=a("span",null,"Localization",-1))]),e[11]||(e[11]=a("p",{class:"text-sm text-gray-500 mb-4"},"Set your store's country, currency, language, and preferred distance unit (Km/Mile) to align with your local market and ensure a seamless shopping experience for your customers.",-1)),a("div",qe,[n(g,{class:"w-full",label:"Country",modelValue:t.storeForm.country,"onUpdate:modelValue":e[0]||(e[0]=r=>t.storeForm.country=r),skeleton:t.isLoadingStore||!t.store,errorText:t.formState.getFormError("country"),tooltipContent:"Your storeâ€™s country of operation",onChange:e[1]||(e[1]=r=>t.storeState.saveStateDebounced("Store country changed"))},null,8,["modelValue","skeleton","errorText"]),n(c,{class:"w-full",label:"Currency",modelValue:t.storeForm.currency,"onUpdate:modelValue":e[2]||(e[2]=r=>t.storeForm.currency=r),skeleton:t.isLoadingStore||!t.store,errorText:t.formState.getFormError("currency"),tooltipContent:"The currency accepted by your store",onChange:e[3]||(e[3]=r=>t.storeState.saveStateDebounced("Store currency changed"))},null,8,["modelValue","skeleton","errorText"]),n(m,{class:"w-full",label:"Language",modelValue:t.storeForm.language,"onUpdate:modelValue":e[4]||(e[4]=r=>t.storeForm.language=r),skeleton:t.isLoadingStore||!t.store,errorText:t.formState.getFormError("language"),tooltipContent:"The language accepted by your store",onChange:e[5]||(e[5]=r=>t.storeState.saveStateDebounced("Store language changed"))},null,8,["modelValue","skeleton","errorText"]),n(f,{class:"w-full",search:!1,label:"Distance Unit",options:i.distanceOptions,modelValue:t.storeForm.distance_unit,"onUpdate:modelValue":e[6]||(e[6]=r=>t.storeForm.distance_unit=r),errorText:t.formState.getFormError("distance_unit"),onChange:e[7]||(e[7]=r=>t.storeState.saveStateDebounced("Distance unit changed")),tooltipContent:"The unit of measurement for distances used in your store. For example, kilometers (km) for metric systems or miles for imperial systems. This setting affects shipping calculations and location-based features."},null,8,["options","modelValue","errorText"]),n(f,{class:"w-full",search:!1,label:"Weight Unit",options:i.weightOptions,modelValue:t.storeForm.weight_unit,"onUpdate:modelValue":e[8]||(e[8]=r=>t.storeForm.weight_unit=r),errorText:t.formState.getFormError("weight_unit"),onChange:e[9]||(e[9]=r=>t.storeState.saveStateDebounced("Weight unit changed")),tooltipContent:"The unit of measurement for weights used in your store. This setting is used for product weights and shipping calculations. Common units include kilograms (kg) for metric systems and pounds (lb) for imperial systems."},null,8,["options","modelValue","errorText"])])])}const Je=b(Re,[["render",Ye]]),Qe={inject:["formState","storeState"],components:{Pill:Q,Earth:M,Input:k,Switch:U,Skeleton:E,MessageCircle:$,WhatsappIcon:X},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},storeForm(){return this.storeState.storeForm}},methods:{async navigateToShowWorkflows(){await this.$router.push({name:"show-workflows",query:{store_id:this.store.id}})},setAddress(s){this.customerState.storeForm.address=s,this.customerState.saveStateDebounced("Address changed")},unsetAddress(){this.customerState.storeForm.address=null,this.customerState.saveStateDebounced("Address removed")}}},Xe={class:"bg-white p-8 shadow-sm rounded-xl mb-2"},Ze={class:"space-y-4"},$e={class:"flex items-center space-x-1 pl-2 rounded-l-md bg-gray-50 text-gray-500 whitespace-nowrap"},et={class:"space-y-4 p-4 border border-gray-200 rounded-lg"},tt={class:"flex items-center font-lg font-bold"},ot={class:"text-sm text-gray-500"};function rt(s,e,o,u,i,t){const h=l("Earth"),g=l("Input"),c=l("WhatsappIcon"),m=l("Pill"),f=l("MessageCircle");return d(),p("div",Xe,[a("div",Ze,[n(g,{type:"text",label:"Store Link",placeholder:"baby-cakes",modelValue:t.storeForm.alias,"onUpdate:modelValue":e[0]||(e[0]=r=>t.storeForm.alias=r),errorText:t.formState.getFormError("alias"),onChange:e[1]||(e[1]=r=>t.storeState.saveStateDebounced("Store link changed")),description:"Your storeâ€™s shopping link. Custom domains can be set later."},{prefix:w(()=>[a("div",$e,[n(h,{size:"18",class:"mt-0.5"}),e[10]||(e[10]=a("span",{class:"text-sm"},"perfectorder.shop",-1)),e[11]||(e[11]=a("span",{class:"text-gray-400 text-sm"},"/",-1))])]),_:1},8,["modelValue","errorText"]),a("div",et,[a("h1",tt,[n(c,{class:"shrink-0 mr-2"}),e[12]||(e[12]=a("span",null,"WhatsApp Notifications",-1))]),a("p",ot,[e[14]||(e[14]=v(" Set the primary WhatsApp number that your store will use to automatically send updates and notifications using ",-1)),n(m,{size:"xs",type:"primary",showDot:!1,action:t.navigateToShowWorkflows},{default:w(()=>[...e[13]||(e[13]=[v("workflows",-1)])]),_:1},8,["action"]),e[15]||(e[15]=v(", ensuring clear and timely communication ",-1))]),n(g,{type:"text",label:"WhatsApp Number",placeholder:"+26772000001",modelValue:t.storeForm.whatsapp_mobile_number,"onUpdate:modelValue":e[2]||(e[2]=r=>t.storeForm.whatsapp_mobile_number=r),errorText:t.formState.getFormError("whatsapp_mobile_number"),onChange:e[3]||(e[3]=r=>t.storeState.saveStateDebounced("Whatsapp mobile number changed")),tooltipContent:"The Whatsapp mobile number that will be used to send notifications via whatsapp to customers or team members"},null,8,["modelValue","errorText"])]),n(g,{type:"email",label:"Store Email",modelValue:t.storeForm.email,"onUpdate:modelValue":e[4]||(e[4]=r=>t.storeForm.email=r),errorText:t.formState.getFormError("email"),placeholder:`sales@${t.storeForm.alias||"example"}.com`,onChange:e[5]||(e[5]=r=>t.storeState.saveStateDebounced("Store email changed")),tooltipContent:"The store email address used to receive updates such as new orders"},null,8,["modelValue","errorText","placeholder"]),n(g,{type:"text",maxLength:"11",label:"SMS Sender Name",placeholder:"Baby Cakes",modelValue:t.storeForm.sms_sender_name,"onUpdate:modelValue":e[6]||(e[6]=r=>t.storeForm.sms_sender_name=r),description:"Must be 11 characters or shorter",errorText:t.formState.getFormError("sms_sender_name"),onChange:e[7]||(e[7]=r=>t.storeState.saveStateDebounced("SMS sender name changed")),tooltipContent:"The name that will appear as the sender when your store sends SMS messages to customers (e.g. order updates or notifications)."},{prefix:w(()=>[n(f,{size:"20",class:"text-slate-400 mr-2"})]),_:1},8,["modelValue","errorText"]),n(g,{type:"text",label:"USSD Number",placeholder:"+26772000001",modelValue:t.storeForm.ussd_mobile_number,"onUpdate:modelValue":e[8]||(e[8]=r=>t.storeForm.ussd_mobile_number=r),errorText:t.formState.getFormError("ussd_mobile_number"),onChange:e[9]||(e[9]=r=>t.storeState.saveStateDebounced("USSD mobile number changed")),tooltipContent:"The mobile number that will be used by customers to dial your store, shop and place orders"},null,8,["modelValue","errorText"])])])}const st=b(Qe,[["render",rt]]),at={inject:["formState","storeState","changeHistoryState","notificationState"],components:{Tax:me,Basics:ke,OpenHours:He,Danger:Ee,Communication:st,Localization:Je},watch:{store(s,e){!e&&s&&this.setup()}},computed:{store(){return this.storeState.store},storeForm(){return this.storeState.storeForm}},methods:{isEmpty:W,setup(){this.store?this.storeState.setStoreForm(this.store,!0):this.storeState.setStoreForm(null,!1)},setActionButtons(){this.changeHistoryState.removeButtons(),this.changeHistoryState.addDiscardButton(),this.changeHistoryState.addActionButton("Save Changes",this.updateStore,"primary",null)},async updateStore(){var s,e;try{if(this.storeState.isUpdatingStore||(this.formState.hideFormErrors(),this.isEmpty(this.storeForm.name)&&this.formState.setFormError("name","The name is required"),this.formState.hasErrors))return;this.storeState.isUpdatingStore=!0,this.changeHistoryState.actionButtons[1].loading=!0;const o={...this.storeForm,store_id:this.store.id};await axios.put(`/api/stores/${this.store.id}`,o),this.notificationState.showSuccessNotification("Store updated"),this.storeState.saveOriginalState("Original store")}catch(o){const u=((e=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:e.message)||(o==null?void 0:o.message)||"Something went wrong while updating store";this.notificationState.showWarningNotification(u),this.formState.setServerFormErrors(o),console.error("Failed to update store:",o)}finally{this.storeState.isUpdatingStore=!1,this.changeHistoryState.actionButtons[1].loading=!1}},setStoreForm(s){this.storeState.storeForm=s}},created(){this.setup(),this.setActionButtons();const s=["undo","redo","jumpToHistory","resetHistoryToCurrent","resetHistoryToOriginal"];for(let e=0;e<s.length;e++){let o=s[e];this.changeHistoryState.listeners[o]=this.setStoreForm}}},nt={class:"max-w-2xl mx-auto pt-24 pb-40"};function lt(s,e,o,u,i,t){const h=l("Basics"),g=l("Communication"),c=l("Localization"),m=l("Tax"),f=l("OpenHours"),r=l("Danger");return d(),p("div",nt,[n(h),n(g),n(c),n(m),n(f),n(r)])}const Nt=b(at,[["render",lt]]);export{Nt as default};
